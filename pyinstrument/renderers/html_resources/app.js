var pyinstrumentHTMLRenderer=function(){"use strict";var xn=Object.defineProperty;var Jn=(E,ve,Fe)=>ve in E?xn(E,ve,{enumerable:!0,configurable:!0,writable:!0,value:Fe}):E[ve]=Fe;var A=(E,ve,Fe)=>Jn(E,typeof ve!="symbol"?ve+"":ve,Fe);function E(){}function ve(i){return i()}function Fe(){return Object.create(null)}function re(i){i.forEach(ve)}function mt(i){return typeof i=="function"}function oe(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function yi(i){return Object.keys(i).length===0}function It(i,...e){if(i==null){for(const n of e)n(void 0);return E}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ge(i,e,t){i.$$.on_destroy.push(It(e,t))}function Ai(i,e,t){return i.set(t),e}function c(i,e){i.appendChild(e)}function H(i,e,t){i.insertBefore(e,t||null)}function R(i){i.parentNode&&i.parentNode.removeChild(i)}function h(i){return document.createElement(i)}function O(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function I(i){return document.createTextNode(i)}function w(){return I(" ")}function Ti(){return I("")}function N(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function pt(i){return function(e){return e.preventDefault(),i.call(this,e)}}function vt(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function a(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function gt(i){let e;return{p(...t){e=t,e.forEach(n=>i.push(n))},r(){e.forEach(t=>i.splice(i.indexOf(t),1))}}}function Ci(i){return Array.from(i.childNodes)}function ye(i,e){e=""+e,i.data!==e&&(i.data=e)}function ae(i,e){i.value=e??""}function j(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,"")}function Ce(i,e,t){i.classList.toggle(e,!!t)}function ki(i,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(i,{detail:e,bubbles:t,cancelable:n})}class Ei{constructor(e=!1){A(this,"is_svg",!1);A(this,"e");A(this,"n");A(this,"t");A(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=O(t.nodeName):this.e=h(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)H(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(R)}}let Ke;function Xe(i){Ke=i}function Rt(){if(!Ke)throw new Error("Function called outside component initialization");return Ke}function St(i){Rt().$$.on_mount.push(i)}function Mi(){const i=Rt();return(e,t,{cancelable:n=!1}={})=>{const s=i.$$.callbacks[e];if(s){const l=ki(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(i,l)}),!l.defaultPrevented}return!0}}const Re=[],Se=[];let He=[];const Ht=[],Fi=Promise.resolve();let _t=!1;function Pi(){_t||(_t=!0,Fi.then(Lt))}function bt(i){He.push(i)}const wt=new Set;let Le=0;function Lt(){if(Le!==0)return;const i=Ke;do{try{for(;Le<Re.length;){const e=Re[Le];Le++,Xe(e),Ii(e.$$)}}catch(e){throw Re.length=0,Le=0,e}for(Xe(null),Re.length=0,Le=0;Se.length;)Se.pop()();for(let e=0;e<He.length;e+=1){const t=He[e];wt.has(t)||(wt.add(t),t())}He.length=0}while(Re.length);for(;Ht.length;)Ht.pop()();_t=!1,wt.clear(),Xe(i)}function Ii(i){if(i.fragment!==null){i.update(),re(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(bt)}}function Ri(i){const e=[],t=[];He.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),He=e}const nt=new Set;let Pe;function $e(){Pe={r:0,c:[],p:Pe}}function Ve(){Pe.r||re(Pe.c),Pe=Pe.p}function L(i,e){i&&i.i&&(nt.delete(i),i.i(e))}function B(i,e,t,n){if(i&&i.o){if(nt.has(i))return;nt.add(i),Pe.c.push(()=>{nt.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function $t(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Si(i,e){B(i,1,1,()=>{e.delete(i.key)})}function Hi(i,e,t,n,s,l,o,r,u,f,d,m){let p=i.length,v=l.length,_=p;const b={};for(;_--;)b[i[_].key]=_;const y=[],k=new Map,P=new Map,F=[];for(_=v;_--;){const T=m(s,l,_),S=t(T);let g=o.get(S);g?F.push(()=>g.p(T,e)):(g=f(S,T),g.c()),k.set(S,y[_]=g),S in b&&P.set(S,Math.abs(_-b[S]))}const $=new Set,U=new Set;function M(T){L(T,1),T.m(r,d),o.set(T.key,T),d=T.first,v--}for(;p&&v;){const T=y[v-1],S=i[p-1],g=T.key,C=S.key;T===S?(d=T.first,p--,v--):k.has(C)?!o.has(g)||$.has(g)?M(T):U.has(C)?p--:P.get(g)>P.get(C)?(U.add(g),M(T)):($.add(C),p--):(u(S,o),p--)}for(;p--;){const T=i[p];k.has(T.key)||u(T,o)}for(;v;)M(y[v-1]);return re(F),y}function _e(i){i&&i.c()}function ce(i,e,t){const{fragment:n,after_update:s}=i.$$;n&&n.m(e,t),bt(()=>{const l=i.$$.on_mount.map(ve).filter(mt);i.$$.on_destroy?i.$$.on_destroy.push(...l):re(l),i.$$.on_mount=[]}),s.forEach(bt)}function ue(i,e){const t=i.$$;t.fragment!==null&&(Ri(t.after_update),re(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Li(i,e){i.$$.dirty[0]===-1&&(Re.push(i),Pi(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function fe(i,e,t,n,s,l,o=null,r=[-1]){const u=Ke;Xe(i);const f=i.$$={fragment:null,ctx:[],props:l,update:E,not_equal:s,bound:Fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Fe(),dirty:r,skip_bound:!1,root:e.target||u.$$.root};o&&o(f.root);let d=!1;if(f.ctx=t?t(i,e.props||{},(m,p,...v)=>{const _=v.length?v[0]:p;return f.ctx&&s(f.ctx[m],f.ctx[m]=_)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](_),d&&Li(i,m)),p}):[],f.update(),d=!0,re(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const m=Ci(e.target);f.fragment&&f.fragment.l(m),m.forEach(R)}else f.fragment&&f.fragment.c();e.intro&&L(i.$$.fragment),ce(i,e.target,e.anchor),Lt()}Xe(u)}class de{constructor(){A(this,"$$");A(this,"$$set")}$destroy(){ue(this,1),this.$destroy=E}$on(e,t){if(!mt(t))return E;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!yi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $i="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($i);function Vi(i){let e,t;return{c(){e=O("svg"),t=O("path"),a(t,"fill-rule","evenodd"),a(t,"clip-rule","evenodd"),a(t,"d","M5.11634 0.889422C4.86506 -0.296474 3.17237 -0.296474 2.92109 0.889422C2.78291 1.54158 2.10994 1.93011 1.47607 1.72371C0.323418 1.34837 -0.522932 2.81429 0.378448 3.62484C0.87414 4.07059 0.87414 4.84767 0.378448 5.29341C-0.522931 6.10397 0.323418 7.56989 1.47607 7.19455C2.10994 6.98814 2.78291 7.37668 2.92109 8.02883C3.17237 9.21473 4.86506 9.21473 5.11634 8.02883C5.25452 7.37668 5.92749 6.98814 6.56136 7.19455C7.71401 7.56989 8.56036 6.10397 7.65898 5.29341C7.16329 4.84767 7.16329 4.07059 7.65898 3.62484C8.56036 2.81429 7.71401 1.34837 6.56136 1.72371C5.92749 1.93011 5.25452 1.54158 5.11634 0.889422ZM4.01883 6.33408C5.05436 6.33408 5.89383 5.49462 5.89383 4.45908C5.89383 3.42355 5.05436 2.58408 4.01883 2.58408C2.98329 2.58408 2.14383 3.42355 2.14383 4.45908C2.14383 5.49462 2.98329 6.33408 4.01883 6.33408Z"),a(t,"fill","currentColor"),a(e,"width","9"),a(e,"height","9"),a(e,"viewBox","0 0 9 9"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(n,s){H(n,e,s),c(e,t)},p:E,i:E,o:E,d(n){n&&R(e)}}}class Di extends de{constructor(e){super(),fe(this,e,null,Vi,oe,{})}}function Oi(i){let e,t,n,s,l,o,r,u,f,d,m,p,v,_,b,y,k;return{c(){e=O("svg"),t=O("g"),n=O("path"),s=O("path"),l=O("defs"),o=O("filter"),r=O("feFlood"),u=O("feBlend"),f=O("feGaussianBlur"),d=O("linearGradient"),m=O("stop"),p=O("stop"),v=O("stop"),_=O("linearGradient"),b=O("stop"),y=O("stop"),k=O("stop"),a(n,"fill-rule","evenodd"),a(n,"clip-rule","evenodd"),a(n,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(n,"fill","url(#paint0_linear_67_262)"),a(t,"opacity","0.5"),a(t,"filter","url(#filter0_f_67_262)"),a(s,"fill-rule","evenodd"),a(s,"clip-rule","evenodd"),a(s,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(s,"fill","url(#paint1_linear_67_262)"),a(r,"flood-opacity","0"),a(r,"result","BackgroundImageFix"),a(u,"mode","normal"),a(u,"in","SourceGraphic"),a(u,"in2","BackgroundImageFix"),a(u,"result","shape"),a(f,"stdDeviation","3.39785"),a(f,"result","effect1_foregroundBlur_67_262"),a(o,"id","filter0_f_67_262"),a(o,"x","3.2043"),a(o,"y","2.2043"),a(o,"width","36.0914"),a(o,"height","41.0914"),a(o,"filterUnits","userSpaceOnUse"),a(o,"color-interpolation-filters","sRGB"),a(m,"stop-color","#FFAA00"),a(p,"offset","0.514478"),a(p,"stop-color","#FFEB00"),a(v,"offset","1"),a(v,"stop-color","#98FF05"),a(d,"id","paint0_linear_67_262"),a(d,"x1","7.3769"),a(d,"y1","18.4566"),a(d,"x2","20.6583"),a(d,"y2","33.1038"),a(d,"gradientUnits","userSpaceOnUse"),a(b,"stop-color","#FFC834"),a(y,"offset","0.514478"),a(y,"stop-color","#FAF534"),a(k,"offset","1"),a(k,"stop-color","#B8FF38"),a(_,"id","paint1_linear_67_262"),a(_,"x1","7.3769"),a(_,"y1","18.4566"),a(_,"x2","20.6583"),a(_,"y2","33.1038"),a(_,"gradientUnits","userSpaceOnUse"),a(e,"width","44"),a(e,"height","44"),a(e,"viewBox","0 0 44 44"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(P,F){H(P,e,F),c(e,t),c(t,n),c(e,s),c(e,l),c(l,o),c(o,r),c(o,u),c(o,f),c(l,d),c(d,m),c(d,p),c(d,v),c(l,_),c(_,b),c(_,y),c(_,k)},p:E,i:E,o:E,d(P){P&&R(e)}}}class Ni extends de{constructor(e){super(),fe(this,e,null,Oi,oe,{})}}const De=[];function Bi(i,e){return{subscribe:st(i,e).subscribe}}function st(i,e=E){let t;const n=new Set;function s(r){if(oe(i,r)&&(i=r,t)){const u=!De.length;for(const f of n)f[1](),De.push(f,i);if(u){for(let f=0;f<De.length;f+=2)De[f][0](De[f+1]);De.length=0}}}function l(r){s(r(i))}function o(r,u=E){const f=[r,u];return n.add(f),n.size===1&&(t=e(s,l)||E),r(i),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:s,update:l,subscribe:o}}function Vt(i,e,t){const n=!Array.isArray(i),s=n?[i]:i;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return Bi(t,(o,r)=>{let u=!1;const f=[];let d=0,m=E;const p=()=>{if(d)return;m();const _=e(n?f[0]:f,o,r);l?o(_):m=mt(_)?_:E},v=s.map((_,b)=>It(_,y=>{f[b]=y,d&=~(1<<b),u&&p()},()=>{d|=1<<b}));return u=!0,p(),function(){re(v),m(),u=!1}})}var yt={local:{},session:{}};function zi(i){return i==="local"?localStorage:sessionStorage}function At(i,e,t){var n,s,l,o,r,u,f,d;t!=null&&t.onError&&console.warn("onError has been deprecated. Please use onWriteError instead");const m=(n=t==null?void 0:t.serializer)!=null?n:JSON,p=(s=t==null?void 0:t.storage)!=null?s:"local",v=(l=t==null?void 0:t.syncTabs)!=null?l:!0,_=(r=(o=t==null?void 0:t.onWriteError)!=null?o:t==null?void 0:t.onError)!=null?r:M=>console.error(`Error when writing value from persisted store "${i}" to ${p}`,M),b=(u=t==null?void 0:t.onParseError)!=null?u:(M,T)=>console.error(`Error when parsing ${M?'"'+M+'"':"value"} from persisted store "${i}"`,T),y=(f=t==null?void 0:t.beforeRead)!=null?f:M=>M,k=(d=t==null?void 0:t.beforeWrite)!=null?d:M=>M,P=typeof window<"u"&&typeof document<"u",F=P?zi(p):null;function $(M,T){const S=k(T);try{F==null||F.setItem(M,m.stringify(S))}catch(g){_(g)}}function U(){function M(C){try{return m.parse(C)}catch(D){b(C,D)}}const T=F==null?void 0:F.getItem(i);if(T==null)return e;const S=M(T);return S==null?e:y(S)}if(!yt[p][i]){const M=U(),T=st(M,C=>{if(P&&p=="local"&&v){const D=X=>{if(X.key===i&&X.newValue){let z;try{z=m.parse(X.newValue)}catch(ee){b(X.newValue,ee);return}const Ie=y(z);C(Ie)}};return window.addEventListener("storage",D),()=>window.removeEventListener("storage",D)}}),{subscribe:S,set:g}=T;yt[p][i]={set(C){g(C),$(i,C)},update(C){return T.update(D=>{const X=C(D);return $(i,X),X})},reset(){this.set(e)},subscribe:S}}return yt[p][i]}function Dt(){return{collapseMode:"non-application",collapseCustomHide:"",collapseCustomShow:"",removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:.001,timeFormat:"absolute"}}const Y=At("pyinstrument:viewOptionsCallStack",Dt(),{syncTabs:!0,beforeRead(i){return{...Dt(),...i}}}),Qe=At("pyinstrument:viewOptions",{viewMode:"call-stack"},{syncTabs:!1}),Ze=At("pyinstrument:viewOptionsTimeline",{removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:1e-4},{syncTabs:!0});function Wi(i){let e,t,n,s,l,o,r,u,f,d,m,p,v,_,b,y,k,P,F,$,U,M,T,S,g,C,D,X,z,Ie,ee,J,Q,ke,G,xe,Je,le,K,et,te,he,me,be,pe,Ae,tt,Te,x,Be,Ee,it,W,V,Z,ai,lt,ci,ui,ze,Me,fi,We,at,di,hi,we,mi,pi,Ue,ct,vi,Ge,ut,ft,ie,gi,_i,dt,ht,ne,bi,Mt,Ft,Pt,wi;return Mt=gt(i[5][0]),Ft=gt(i[5][1]),{c(){e=h("div"),t=h("div"),n=h("div"),n.textContent="Collapse frames",s=w(),l=h("div"),o=h("div"),r=h("input"),u=w(),f=h("label"),d=I("Non-application code"),m=w(),p=h("div"),p.textContent=`Application code is anything run from outside the Python home
          directory.`,v=w(),_=h("div"),b=h("input"),y=w(),k=h("label"),P=I("Custom"),F=w(),$=h("div"),U=I(`Regex on the source file path.
          `),M=h("div"),T=h("label"),T.textContent="Show",S=w(),g=h("input"),C=w(),D=h("label"),D.textContent="Hide",X=w(),z=h("input"),Ie=I(`
          If neither match, non-application rule is used.`),ee=w(),J=h("div"),Q=h("input"),ke=w(),G=h("label"),xe=I("Disabled"),Je=w(),le=h("div"),K=h("div"),K.textContent="Remove frames",et=w(),te=h("div"),he=h("div"),me=h("input"),be=w(),pe=h("label"),Ae=I("importlib machinery"),tt=w(),Te=h("div"),x=h("input"),Be=w(),Ee=h("label"),it=I("Frames declaring __traceback_hide__"),W=w(),V=h("div"),Z=h("input"),ai=w(),lt=h("label"),ci=I("pyinstrument frames"),ui=w(),ze=h("div"),Me=h("input"),fi=w(),We=h("span"),at=h("label"),di=I("Frames with durations less than"),hi=w(),we=h("input"),mi=I(`
          % of the total time`),pi=w(),Ue=h("div"),ct=h("div"),ct.textContent="Time format",vi=w(),Ge=h("div"),ut=h("div"),ft=h("label"),ie=h("input"),gi=I(`
          Absolute time in seconds`),_i=w(),dt=h("div"),ht=h("label"),ne=h("input"),bi=I(`
          Percentage of the total run time`),a(n,"class","name svelte-1pecl4m"),a(r,"id",i[1]+"collapseModeAll"),a(r,"type","radio"),r.__value="non-application",ae(r,r.__value),a(r,"class","svelte-1pecl4m"),a(f,"for",i[1]+"collapseModeAll"),a(p,"class","description svelte-1pecl4m"),a(o,"class","option svelte-1pecl4m"),a(b,"id",i[1]+"collapseModeCustom"),a(b,"type","radio"),b.__value="custom",ae(b,b.__value),a(b,"class","svelte-1pecl4m"),a(k,"for",i[1]+"collapseModeCustom"),a(T,"for","collapseCustomShow"),a(T,"class","svelte-1pecl4m"),a(g,"id","collapseCustomShow"),a(g,"type","text"),a(g,"placeholder","myproject"),a(g,"spellcheck","false"),a(g,"autocapitalize","off"),a(g,"autocomplete","off"),a(g,"autocorrect","off"),a(g,"class","svelte-1pecl4m"),a(D,"for","collapseCustomHide"),a(D,"class","svelte-1pecl4m"),a(z,"id","collapseCustomHide"),a(z,"type","text"),a(z,"placeholder",".*/lib/.*"),a(z,"spellcheck","false"),a(z,"autocapitalize","off"),a(z,"autocomplete","off"),a(z,"autocorrect","off"),a(z,"class","svelte-1pecl4m"),a(M,"class","mini-input-grid svelte-1pecl4m"),a($,"class","description svelte-1pecl4m"),a(_,"class","option svelte-1pecl4m"),a(Q,"id",i[1]+"collapseModeDisabled"),a(Q,"type","radio"),Q.__value="disabled",ae(Q,Q.__value),a(Q,"class","svelte-1pecl4m"),a(G,"for",i[1]+"collapseModeDisabled"),a(J,"class","option svelte-1pecl4m"),a(l,"class","body"),a(t,"class","option-group svelte-1pecl4m"),a(K,"class","name svelte-1pecl4m"),a(me,"id",i[1]+"removeImportlib"),a(me,"type","checkbox"),a(me,"class","svelte-1pecl4m"),a(pe,"for",i[1]+"removeImportlib"),a(he,"class","option svelte-1pecl4m"),a(x,"id",i[1]+"removeTracebackHide"),a(x,"type","checkbox"),a(x,"class","svelte-1pecl4m"),a(Ee,"for",i[1]+"removeTracebackHide"),a(Te,"class","option svelte-1pecl4m"),a(Z,"id",i[1]+"removePyinstrument"),a(Z,"type","checkbox"),a(Z,"class","svelte-1pecl4m"),a(lt,"for",i[1]+"removePyinstrument"),a(V,"class","option svelte-1pecl4m"),a(Me,"id",i[1]+"removeIrrelevant"),a(Me,"type","checkbox"),a(Me,"class","svelte-1pecl4m"),a(at,"for",i[1]+"removeIrrelevant"),a(we,"type","number"),we.value=i[2](),a(we,"min","0"),a(we,"max","99"),a(we,"step","0.01"),j(we,"width","4em"),a(we,"class","svelte-1pecl4m"),a(ze,"class","option svelte-1pecl4m"),a(te,"class","body"),a(le,"class","option-group svelte-1pecl4m"),a(ct,"class","name svelte-1pecl4m"),a(ie,"type","radio"),ie.__value="absolute",ae(ie,ie.__value),a(ie,"class","svelte-1pecl4m"),a(ut,"class","option svelte-1pecl4m"),a(ne,"type","radio"),ne.__value="proportion",ae(ne,ne.__value),a(ne,"class","svelte-1pecl4m"),a(dt,"class","option svelte-1pecl4m"),a(Ge,"class","body"),a(Ue,"class","option-group svelte-1pecl4m"),a(e,"class","view-options-call-stack svelte-1pecl4m"),Mt.p(ie,ne),Ft.p(r,b,Q)},m(q,se){H(q,e,se),c(e,t),c(t,n),c(t,s),c(t,l),c(l,o),c(o,r),r.checked=r.__value===i[0].collapseMode,c(o,u),c(o,f),c(f,d),c(o,m),c(o,p),c(l,v),c(l,_),c(_,b),b.checked=b.__value===i[0].collapseMode,c(_,y),c(_,k),c(k,P),c(_,F),c(_,$),c($,U),c($,M),c(M,T),c(M,S),c(M,g),ae(g,i[0].collapseCustomShow),c(M,C),c(M,D),c(M,X),c(M,z),ae(z,i[0].collapseCustomHide),c($,Ie),c(l,ee),c(l,J),c(J,Q),Q.checked=Q.__value===i[0].collapseMode,c(J,ke),c(J,G),c(G,xe),c(e,Je),c(e,le),c(le,K),c(le,et),c(le,te),c(te,he),c(he,me),me.checked=i[0].removeImportlib,c(he,be),c(he,pe),c(pe,Ae),c(te,tt),c(te,Te),c(Te,x),x.checked=i[0].removeTracebackHide,c(Te,Be),c(Te,Ee),c(Ee,it),c(te,W),c(te,V),c(V,Z),Z.checked=i[0].removePyinstrument,c(V,ai),c(V,lt),c(lt,ci),c(te,ui),c(te,ze),c(ze,Me),Me.checked=i[0].removeIrrelevant,c(ze,fi),c(ze,We),c(We,at),c(at,di),c(We,hi),c(We,we),c(We,mi),c(e,pi),c(e,Ue),c(Ue,ct),c(Ue,vi),c(Ue,Ge),c(Ge,ut),c(ut,ft),c(ft,ie),ie.checked=ie.__value===i[0].timeFormat,c(ft,gi),c(Ge,_i),c(Ge,dt),c(dt,ht),c(ht,ne),ne.checked=ne.__value===i[0].timeFormat,c(ht,bi),Pt||(wi=[N(r,"change",i[4]),N(b,"change",i[6]),N(g,"input",i[7]),N(z,"input",i[8]),N(Q,"change",i[9]),N(me,"change",i[10]),N(x,"change",i[11]),N(Z,"change",i[12]),N(Me,"change",i[13]),N(we,"input",i[3]),N(ie,"change",i[14]),N(ne,"change",i[15])],Pt=!0)},p(q,[se]){se&1&&(r.checked=r.__value===q[0].collapseMode),se&1&&(b.checked=b.__value===q[0].collapseMode),se&1&&g.value!==q[0].collapseCustomShow&&ae(g,q[0].collapseCustomShow),se&1&&z.value!==q[0].collapseCustomHide&&ae(z,q[0].collapseCustomHide),se&1&&(Q.checked=Q.__value===q[0].collapseMode),se&1&&(me.checked=q[0].removeImportlib),se&1&&(x.checked=q[0].removeTracebackHide),se&1&&(Z.checked=q[0].removePyinstrument),se&1&&(Me.checked=q[0].removeIrrelevant),se&1&&(ie.checked=ie.__value===q[0].timeFormat),se&1&&(ne.checked=ne.__value===q[0].timeFormat)},i:E,o:E,d(q){q&&R(e),Mt.r(),Ft.r(),Pt=!1,re(wi)}}}function Ui(i,e,t){let n;ge(i,Y,F=>t(0,n=F));const s=Math.random().toString(36).substring(4);function l(){return(n.removeIrrelevantThreshold*100).toLocaleString(void 0,{maximumFractionDigits:4})}function o(F){Ai(Y,n.removeIrrelevantThreshold=F.currentTarget.valueAsNumber/100,n)}const r=[[],[]];function u(){n.collapseMode=this.__value,Y.set(n)}function f(){n.collapseMode=this.__value,Y.set(n)}function d(){n.collapseCustomShow=this.value,Y.set(n)}function m(){n.collapseCustomHide=this.value,Y.set(n)}function p(){n.collapseMode=this.__value,Y.set(n)}function v(){n.removeImportlib=this.checked,Y.set(n)}function _(){n.removeTracebackHide=this.checked,Y.set(n)}function b(){n.removePyinstrument=this.checked,Y.set(n)}function y(){n.removeIrrelevant=this.checked,Y.set(n)}function k(){n.timeFormat=this.__value,Y.set(n)}function P(){n.timeFormat=this.__value,Y.set(n)}return[n,s,l,o,u,r,f,d,m,p,v,_,b,y,k,P]}class Gi extends de{constructor(e){super(),fe(this,e,Ui,Wi,oe,{})}}function Ki(i){let e,t,n,s,l,o,r,u,f,d,m,p,v,_,b,y,k,P,F,$,U,M,T,S;return{c(){e=h("div"),t=h("div"),n=h("div"),n.textContent="Remove frames",s=w(),l=h("div"),o=h("div"),r=h("input"),u=w(),f=h("label"),d=I("importlib machinery"),m=w(),p=h("div"),v=h("input"),_=w(),b=h("label"),y=I("Frames declaring __traceback_hide__"),k=w(),P=h("div"),F=h("input"),$=w(),U=h("label"),M=I("pyinstrument frames"),a(n,"class","name"),a(r,"id",i[1]+"removeImportlib"),a(r,"type","checkbox"),a(f,"for",i[1]+"removeImportlib"),a(o,"class","option"),a(v,"id",i[1]+"removeTracebackHide"),a(v,"type","checkbox"),a(b,"for",i[1]+"removeTracebackHide"),a(p,"class","option"),a(F,"id",i[1]+"removePyinstrument"),a(F,"type","checkbox"),a(U,"for",i[1]+"removePyinstrument"),a(P,"class","option"),a(l,"class","body"),a(t,"class","option-group"),a(e,"class","view-options-timeline svelte-vsz8zm")},m(g,C){H(g,e,C),c(e,t),c(t,n),c(t,s),c(t,l),c(l,o),c(o,r),r.checked=i[0].removeImportlib,c(o,u),c(o,f),c(f,d),c(l,m),c(l,p),c(p,v),v.checked=i[0].removeTracebackHide,c(p,_),c(p,b),c(b,y),c(l,k),c(l,P),c(P,F),F.checked=i[0].removePyinstrument,c(P,$),c(P,U),c(U,M),T||(S=[N(r,"change",i[2]),N(v,"change",i[3]),N(F,"change",i[4])],T=!0)},p(g,[C]){C&1&&(r.checked=g[0].removeImportlib),C&1&&(v.checked=g[0].removeTracebackHide),C&1&&(F.checked=g[0].removePyinstrument)},i:E,o:E,d(g){g&&R(e),T=!1,re(S)}}}function Xi(i,e,t){let n;ge(i,Ze,u=>t(0,n=u));const s=Math.random().toString(36).substring(4);function l(){n.removeImportlib=this.checked,Ze.set(n)}function o(){n.removeTracebackHide=this.checked,Ze.set(n)}function r(){n.removePyinstrument=this.checked,Ze.set(n)}return[n,s,l,o,r]}class Qi extends de{constructor(e){super(),fe(this,e,Xi,Ki,oe,{})}}class Zi extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function qi(i,e){const t=e*(i.length-1),n=Math.floor(t),s=Math.ceil(t),l=i[n],o=i[s],r=t-n;return Yi(r,{to:[l,o]})}function ji(i,e,t){return i===1/0?(console.warn("clamp: value is Infinity, returning `max`",i),t):i===-1/0?(console.warn("clamp: value is -Infinity, returning `min`",i),e):Number.isFinite(i)?i<e?e:i>t?t:i:(console.warn("clamp: value isn't finite, returning `min`",i),e)}function Oe(i,e){const{from:t=[0,1],to:n=[0,1]}=e,s=e.clamp||!1;let l=(i-t[0])/(t[1]-t[0])*(n[1]-n[0])+n[0];return s&&(l=ji(l,Math.min(n[0],n[1]),Math.max(n[0],n[1]))),l}function Yi(i,e){return`rgb(
      ${Oe(i,{from:e.from,to:[e.to[0][0],e.to[1][0]],clamp:e.clamp})},
      ${Oe(i,{from:e.from,to:[e.to[0][1],e.to[1][1]],clamp:e.clamp})},
      ${Oe(i,{from:e.from,to:[e.to[0][2],e.to[1][2]],clamp:e.clamp})}
    )`}function xi(i){if(i.substr(0,1)=="#"){var e=(i.length-1)/3,t=[17,1,.062272][e-1];return[Math.round(parseInt(i.substr(1,e),16)*t),Math.round(parseInt(i.substr(1+e,e),16)*t),Math.round(parseInt(i.substr(1+2*e,e),16)*t)]}else return i.split("(")[1].split(")")[0].split(",").map(n=>+n)}function Ji(i,e,t={}){const{ignore:n=[],capture:s=!0}=t,l=window;if(!l)return()=>{};let o=!0,r=!1;const u=v=>n.some(_=>typeof _=="string"?Array.from(document.querySelectorAll(_)).some(b=>b===v.target||v.composedPath().includes(b)):_&&(v.target===_||v.composedPath().includes(_))),f=v=>{if(!(!i||i===v.target||v.composedPath().includes(i))){if(v.detail===0&&(o=!u(v)),!o){o=!0;return}e(v)}},d=v=>{r||(r=!0,setTimeout(()=>{r=!1},0),f(v))},m=v=>{o=!u(v)&&!!(i&&!v.composedPath().includes(i))};return l.addEventListener("click",d,{passive:!0,capture:s}),l.addEventListener("pointerdown",m,{passive:!0}),()=>{l.removeEventListener("click",d,{capture:s}),l.removeEventListener("pointerdown",m)}}function en(i){const e=document.createElement("div");return e.appendChild(document.createTextNode(i)),e.innerHTML}function Tt(i){return en(i).replace(/(\/|\\)/g,t=>`${t}<wbr>`)}function tn(i){let e,t;return e=new Qi({}),{c(){_e(e.$$.fragment)},m(n,s){ce(e,n,s),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function nn(i){let e,t;return e=new Gi({}),{c(){_e(e.$$.fragment)},m(n,s){ce(e,n,s),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function sn(i){let e,t,n,s,l,o,r,u;const f=[nn,tn],d=[];function m(p,v){return p[0].viewMode==="call-stack"?0:p[0].viewMode==="timeline"?1:-1}return~(o=m(i))&&(r=d[o]=f[o](i)),{c(){e=h("div"),t=h("div"),n=h("div"),s=I(i[2]),l=w(),r&&r.c(),a(n,"class","title svelte-f96okc"),a(t,"class","box svelte-f96okc"),a(e,"class","view-options svelte-f96okc")},m(p,v){H(p,e,v),c(e,t),c(t,n),c(n,s),c(t,l),~o&&d[o].m(t,null),i[3](t),u=!0},p(p,[v]){(!u||v&4)&&ye(s,p[2]);let _=o;o=m(p),o!==_&&(r&&($e(),B(d[_],1,1,()=>{d[_]=null}),Ve()),~o?(r=d[o],r||(r=d[o]=f[o](p),r.c()),L(r,1),r.m(t,null)):r=null)},i(p){u||(L(r),u=!0)},o(p){B(r),u=!1},d(p){p&&R(e),~o&&d[o].d(),i[3](null)}}}function rn(i,e,t){let n;ge(i,Qe,f=>t(0,n=f));const s=Mi();function l(){s("close")}let o;St(()=>{if(o)return Ji(o,l,{ignore:[".js-view-options-button"]})});let r="View options";function u(f){Se[f?"unshift":"push"](()=>{o=f,t(1,o)})}return i.$$.update=()=>{i.$$.dirty&1&&(n.viewMode==="call-stack"?t(2,r="Call stack view options"):n.viewMode==="timeline"&&t(2,r="Timeline view options"))},[n,o,r,u]}class on extends de{constructor(e){super(),fe(this,e,rn,sn,oe,{})}}function Ot(i){let e,t;return e=new on({}),e.$on("close",i[9]),{c(){_e(e.$$.fragment)},m(n,s){ce(e,n,s),t=!0},p:E,i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function ln(i){let e,t,n,s,l,o,r,u,f=Tt(i[0].target_description)+"",d,m,p,v,_,b,y,k,P,F,$,U,M,T=i[0].sampleCount+"",S,g,C,D,X,z,Ie,ee,J,Q,ke,G,xe,Je,le,K,et,te,he,me,be,pe,Ae,tt,Te,x,Be,Ee,it;l=new Ni({}),Ae=new Di({});let W=i[1]&&Ot(i);return Be=gt(i[7][0]),{c(){e=h("div"),t=h("div"),n=h("div"),s=h("div"),_e(l.$$.fragment),o=w(),r=h("div"),u=h("div"),d=w(),m=h("div"),p=h("div"),v=h("span"),v.textContent="Recorded:",_=w(),b=h("span"),b.textContent=`${i[3]}`,y=w(),k=h("br"),P=w(),F=h("div"),$=h("span"),$.textContent="Samples:",U=w(),M=h("span"),S=I(T),g=w(),C=h("div"),D=h("span"),D.textContent="CPU utilization:",X=w(),z=h("span"),z.textContent=`${(i[4]*100).toFixed(0)}%`,Ie=w(),ee=h("div"),J=h("div"),Q=I(`View:
            `),ke=h("label"),G=h("input"),xe=I(`
              Call stack`),Je=w(),le=h("label"),K=h("input"),et=I(`
              Timeline`),te=w(),he=h("div"),me=w(),be=h("div"),pe=h("button"),_e(Ae.$$.fragment),tt=I(`
              View options`),Te=w(),W&&W.c(),a(s,"class","logo svelte-1u5a81f"),a(u,"class","target-description svelte-1u5a81f"),a(v,"class","metric-label svelte-1u5a81f"),a(b,"class","metric-value svelte-1u5a81f"),a(p,"class","metric date svelte-1u5a81f"),a(k,"class","svelte-1u5a81f"),a($,"class","metric-label svelte-1u5a81f"),a(M,"class","metric-value svelte-1u5a81f"),a(F,"class","metric svelte-1u5a81f"),a(D,"class","metric-label svelte-1u5a81f"),a(z,"class","metric-value svelte-1u5a81f"),a(C,"class","metric svelte-1u5a81f"),a(m,"class","metrics svelte-1u5a81f"),a(G,"type","radio"),G.__value="call-stack",ae(G,G.__value),a(G,"class","svelte-1u5a81f"),a(ke,"class","svelte-1u5a81f"),a(K,"type","radio"),K.__value="timeline",ae(K,K.__value),a(K,"class","svelte-1u5a81f"),a(le,"class","svelte-1u5a81f"),a(J,"class","toggle"),a(he,"class","spacer"),j(he,"flex","1"),a(pe,"class","js-view-options-button svelte-1u5a81f"),a(be,"class","button-container svelte-1u5a81f"),a(ee,"class","view-options svelte-1u5a81f"),a(r,"class","layout svelte-1u5a81f"),a(n,"class","row svelte-1u5a81f"),a(t,"class","margins"),a(e,"class","header svelte-1u5a81f"),Be.p(G,K)},m(V,Z){H(V,e,Z),c(e,t),c(t,n),c(n,s),ce(l,s,null),c(n,o),c(n,r),c(r,u),u.innerHTML=f,c(r,d),c(r,m),c(m,p),c(p,v),c(p,_),c(p,b),c(m,y),c(m,k),c(m,P),c(m,F),c(F,$),c(F,U),c(F,M),c(M,S),c(m,g),c(m,C),c(C,D),c(C,X),c(C,z),c(r,Ie),c(r,ee),c(ee,J),c(J,Q),c(J,ke),c(ke,G),G.checked=G.__value===i[2].viewMode,c(ke,xe),c(J,Je),c(J,le),c(le,K),K.checked=K.__value===i[2].viewMode,c(le,et),c(ee,te),c(ee,he),c(ee,me),c(ee,be),c(be,pe),ce(Ae,pe,null),c(pe,tt),c(be,Te),W&&W.m(be,null),x=!0,Ee||(it=[N(G,"change",i[6]),N(K,"change",i[8]),N(pe,"click",vt(pt(i[5])))],Ee=!0)},p(V,[Z]){(!x||Z&1)&&f!==(f=Tt(V[0].target_description)+"")&&(u.innerHTML=f),(!x||Z&1)&&T!==(T=V[0].sampleCount+"")&&ye(S,T),Z&4&&(G.checked=G.__value===V[2].viewMode),Z&4&&(K.checked=K.__value===V[2].viewMode),V[1]?W?(W.p(V,Z),Z&2&&L(W,1)):(W=Ot(V),W.c(),L(W,1),W.m(be,null)):W&&($e(),B(W,1,1,()=>{W=null}),Ve())},i(V){x||(L(l.$$.fragment,V),L(Ae.$$.fragment,V),L(W),x=!0)},o(V){B(l.$$.fragment,V),B(Ae.$$.fragment,V),B(W),x=!1},d(V){V&&R(e),ue(l),ue(Ae),W&&W.d(),Be.r(),Ee=!1,re(it)}}}function an(i,e,t){let n;ge(i,Qe,v=>t(2,n=v));let{session:s}=e;const l=new Date(s.startTime*1e3).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"}),o=s.cpuTime/s.duration;let r=!1;function u(v){t(1,r=!r)}const f=[[]];function d(){n.viewMode=this.__value,Qe.set(n)}function m(){n.viewMode=this.__value,Qe.set(n)}const p=()=>t(1,r=!1);return i.$$set=v=>{"session"in v&&t(0,s=v.session)},[s,r,n,l,o,u,d,f,m,p]}class cn extends de{constructor(e){super(),fe(this,e,an,ln,oe,{session:0})}}const un="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWmSURBVHgBtVc7i11VFF5rn3PvPKoLFlqmDGPhaGVpJQoWAZEEGxERFBsDgnY6KFpaWWrQysRGf4BgmSKQFCKWKQMKTqNzz2svv/XY55ybeycTCw+z736cs/f61rdee5hmz/Hx85c66m4QyTEzrdAo4cd6EuuJ2P4wtbmUgfZkCyRoWVcwyMI29ybW47sfhRfXf793+z4X4ZchPEl3F2esElYrbRVaEjQGEKGE3jcUofGwlIEBygoACAa0fmDrdV4AOAg6FV4+W49nUPdlEW4AElGNtqjZ+hqIdI2NAC7KuvAZloyJCR+IukGmF5A6iH/IbEBWLN2NevbBFQ6tCoAF3u7VggYQtQJyFlygOAADI74Jf669QDiWWh6xFRMUgLF6PAGYkcgGgGkBE/x8AiSVaykG0AUxlgm7BY0BUMAQL8R77LM96F98A98kBeu+kAdlgA0MntUGACmOFDQl5sm+Rai6lwpMLtiEgSVGE8wVFBkAB7XcU+rdJOoLSU0x8Aii3ta/0AWqMHjlM6LDPaYDHLSsnRn9pjMny2jBCDSu9H3tDqpCmw4C6lgHqAQmWB05uwwF8RCAQpU7jIbQYCElBsjAlabfqJdnD7lKwzVcIVVOgmKpF2g921pS8/QRvuETmwDEKZdwFHMocYHffYSfBc0opojVIomjx/dY64CkxVktMsgar16/IhbKygANruwWA+YDkURUcNHQaK5ps1XhBwaAzf6M9YzWq3Ac1EKACm80cB8KV6IdPsCR0aQAMBAaUkxXPyU6WDqlypKaSEOtmCCpDyAKFgu1gSecrhdar4n++VsiGUVWDHUpdJkYEPEkEyDc7paHTShXbkuNhqQfaF5wMt16lff69JYFFYT3A8AYgFxku5xtBtw9R7YsEiH85hcYLIsfuO0lfCCHvTtMWxszNRhDebp+LRsTGobFr0zBiO5tBnhWaZgiDwD5gi3Wiw+YcDAwoDfB+MaFq83RsP8M5zSYdFjsBwfh9YAjErbyQLHNVNUsH2Dl2odCh4dE+0vQXjtI9YG2z05zOKvSbdR3eKdtLTbugVKzoOQxC+7KA5NtJPiXEZaH5xDglMrOBMHTWxdWhA/QVqtgEdx3EtVwSkDOxE4GHESpCZzcHLe+4gg3HA7P69jpfvutTA0GTQNNkXAs5UYJVjC593keik/JBohzALjQsXbrJtRksRgntzm7nVX4GnZumtC4D23N4aIAZWdv9LyZv+3IA87AlHY1HQu9+q7Qwb7nAQ01FbQ+g5NBaNOKA2jdD0bg4+UjzCrbqu6IgrLB6aLRF6KWB0ZNUj15QvLCRVa8PNanqiq7pM7kbVXDEvdaipMmHIRfBa2//aYC9WI5vjH6ydLsB1ezpePiK9PhYcoLnjSK5kljNUWqvXppKdVxo4XFhIsJ93gXy/8clxIvt0X7i4XrU8+1D+wGgKPGW/UCzHfew9VsXywVZxbz8GYdKqS4rCTfZ/NZvD8WA/Yxu/aW661F7q+cIbsXVO6EcVf3b0t9SIXFx9N+kwEO3w8QVmhggq+/9xSroVdiv5TZlr0SanL6/KXOK5SaL9b/G4DRdDzONZbPuAjXS4bnfPWBPrJkjhzpYbdR8OeXz62nvBt3HD3z3F/2f0Fyx9O7XL2HAoj7YG33AK8Bag4TrJlOa0DrrVtrj7DsPBtKlgstsZGIcOW+B0wvlMP1EOqcCh1rTldb+/Xcw2woqbaLeh/Vbl7vH/Vgx08TABrehO53ccJKK1ZWP+gjpRqAKdaN8jxLs5r7Bx5TMBm18kjxOOZ0ub/3flUW/nzw4PSJp568CT0vYXq5aGJgslc4o7doPI6dcis2eUq950Ug1DqF9NvQ/uVf79y5v+E1IptedEInNj+iT2L9Nfv9jf7gI/pFdP4D5rfoaYw/Lv+pReVRq/JOEEXOee/PAf7/PP8C3bt510T4rIwAAAAASUVORK5CYII=",Nt=st({}),Bt=st({});function zt(i){return i>.6?"#FF4159":i>.3?"#F5A623":i>.2?"#D8CB2A":"#7ED321"}function Wt(i,e,t){const n=i.slice();return n[21]=e[t],n}function Ut(i){let e,t,n,s,l,o,r,u,f,d,m,p,v,_;return{c(){e=h("div"),t=h("div"),n=O("svg"),s=O("path"),l=w(),o=h("div"),r=I(i[5]),u=w(),f=h("div"),d=I(i[4]),m=w(),p=h("div"),p.textContent=`${i[11]}`,a(s,"d","M.937-.016L5.793 4.84.937 9.696z"),a(s,"fill",i[7]),a(s,"fill-rule","evenodd"),a(s,"fill-opacity",".582"),a(n,"width","6"),a(n,"height","10"),a(t,"class","frame-triangle svelte-14yvyii"),Ce(t,"rotate",!i[8]),j(t,"visibility",i[0].children.length>0?"visible":"hidden"),a(o,"class","time svelte-14yvyii"),j(o,"color",i[7]),j(o,"font-weight",i[10]<.2?500:600),a(f,"class","name svelte-14yvyii"),a(p,"class","code-position svelte-14yvyii"),a(e,"class","frame-description svelte-14yvyii"),a(e,"role","button"),a(e,"tabindex","0"),Ce(e,"application-code",i[0].isApplicationCode),Ce(e,"children-visible",!i[8]),j(e,"padding-left",`${i[2]*35}px`)},m(b,y){H(b,e,y),c(e,t),c(t,n),c(n,s),c(e,l),c(e,o),c(o,r),c(e,u),c(e,f),c(f,d),c(e,m),c(e,p),v||(_=[N(e,"keydown",i[14]),N(e,"click",vt(pt(i[12])))],v=!0)},p(b,y){y&128&&a(s,"fill",b[7]),y&256&&Ce(t,"rotate",!b[8]),y&1&&j(t,"visibility",b[0].children.length>0?"visible":"hidden"),y&32&&ye(r,b[5]),y&128&&j(o,"color",b[7]),y&16&&ye(d,b[4]),y&1&&Ce(e,"application-code",b[0].isApplicationCode),y&256&&Ce(e,"children-visible",!b[8]),y&4&&j(e,"padding-left",`${b[2]*35}px`)},d(b){b&&R(e),v=!1,re(_)}}}function Gt(i){let e,t,n,s,l=i[0].group.frames.length+"",o,r,u,f,d,m;return{c(){e=h("div"),t=h("div"),n=h("div"),n.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',s=w(),o=I(l),r=I(" frames hidden ("),u=I(i[6]),f=I(")"),a(n,"class","group-triangle svelte-14yvyii"),Ce(n,"rotate",i[9]),a(t,"class","group-header-button svelte-14yvyii"),a(e,"class","group-header svelte-14yvyii"),a(e,"role","button"),a(e,"tabindex","0"),j(e,"padding-left",`${i[2]*35}px`)},m(p,v){H(p,e,v),c(e,t),c(t,n),c(t,s),c(t,o),c(t,r),c(t,u),c(t,f),d||(m=[N(e,"keydown",i[15]),N(e,"click",vt(pt(i[13])))],d=!0)},p(p,v){v&512&&Ce(n,"rotate",p[9]),v&1&&l!==(l=p[0].group.frames.length+"")&&ye(o,l),v&64&&ye(u,p[6]),v&4&&j(e,"padding-left",`${p[2]*35}px`)},d(p){p&&R(e),d=!1,re(m)}}}function Kt(i){let e,t=[],n=new Map,s,l=$t(i[0].children);const o=r=>r[21].uuid;for(let r=0;r<l.length;r+=1){let u=Wt(i,l,r),f=o(u);n.set(f,t[r]=Xt(f,u))}return{c(){e=h("div");for(let r=0;r<t.length;r+=1)t[r].c();a(e,"class","children svelte-14yvyii")},m(r,u){H(r,e,u);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(r,u){u&15&&(l=$t(r[0].children),$e(),t=Hi(t,u,o,1,r,l,n,e,Si,Xt,null,Wt),Ve())},i(r){if(!s){for(let u=0;u<l.length;u+=1)L(t[u]);s=!0}},o(r){for(let u=0;u<t.length;u+=1)B(t[u]);s=!1},d(r){r&&R(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function Xt(i,e){let t,n,s;return n=new jt({props:{frame:e[21],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:i,first:null,c(){t=Ti(),_e(n.$$.fragment),this.first=t},m(l,o){H(l,t,o),ce(n,l,o),s=!0},p(l,o){e=l;const r={};o&1&&(r.frame=e[21]),o&2&&(r.rootFrame=e[1]),o&12&&(r.indent=e[2]+(e[3]?1:0)),n.$set(r)},i(l){s||(L(n.$$.fragment,l),s=!0)},o(l){B(n.$$.fragment,l),s=!1},d(l){l&&R(t),ue(n,l)}}}function fn(i){let e,t,n,s,l,o,r=i[3]&&Ut(i),u=i[0].group&&i[0].group.rootFrame==i[0]&&!i[8]&&Gt(i),f=!i[8]&&i[0].children.length>0&&Kt(i);return{c(){e=h("div"),r&&r.c(),t=w(),u&&u.c(),n=w(),f&&f.c(),s=w(),l=h("div"),a(l,"class","visual-guide svelte-14yvyii"),j(l,"left",`${i[2]*35+21}px`),j(l,"backgroundColor",i[7]),a(e,"class","frame svelte-14yvyii")},m(d,m){H(d,e,m),r&&r.m(e,null),c(e,t),u&&u.m(e,null),c(e,n),f&&f.m(e,null),c(e,s),c(e,l),o=!0},p(d,[m]){d[3]?r?r.p(d,m):(r=Ut(d),r.c(),r.m(e,t)):r&&(r.d(1),r=null),d[0].group&&d[0].group.rootFrame==d[0]&&!d[8]?u?u.p(d,m):(u=Gt(d),u.c(),u.m(e,n)):u&&(u.d(1),u=null),!d[8]&&d[0].children.length>0?f?(f.p(d,m),m&257&&L(f,1)):(f=Kt(d),f.c(),L(f,1),f.m(e,s)):f&&($e(),B(f,1,1,()=>{f=null}),Ve()),m&4&&j(l,"left",`${d[2]*35+21}px`),m&128&&j(l,"backgroundColor",d[7])},i(d){o||(L(f),o=!0)},o(d){B(f),o=!1},d(d){d&&R(e),r&&r.d(),u&&u.d(),f&&f.d()}}}function Qt(){const i='a:not([disabled]), button:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])',e=document.querySelector(".call-stack-view");if(!e)throw new Error("callStackElement not found");var t=Array.prototype.filter.call(e.querySelectorAll(i),function(n){return n.offsetWidth>0||n.offsetHeight>0||n===document.activeElement});return t}function Zt(){const i=Qt();var e=i.indexOf(document.activeElement);if(e>-1){var t=i[e+1];t&&t.focus()}}function qt(){const i=Qt();var e=i.indexOf(document.activeElement);if(e>-1){var t=i[e-1];t&&t.focus()}}function dn(i,e,t){var S;let n,s,l,o,r;ge(i,Bt,g=>t(16,l=g)),ge(i,Nt,g=>t(17,o=g)),ge(i,Y,g=>t(18,r=g));let{frame:u}=e,{rootFrame:f}=e,{indent:d=0}=e,m;const p=u.time/f.time;let v;const _=`${u.filePathShort}:${(S=u.lineNo)==null?void 0:S.toString().padEnd(4," ")}`;let b,y=null;if(u.group){const g=u.group.libraries;g.length<4?y=g.join(", "):y=`${g[0]}, ${g[1]}, ${g[2]}...`}let k;k=zt(p);function P(g){F(u,!s,g.altKey)}function F(g,C,D=!0){if(Bt.update(X=>({...X,[g.uuid]:C})),D)for(const X of g.children)F(X,C,!0),g.group&&g.group.rootFrame==g&&$(g.group.id,!C)}function $(g,C){Nt.update(D=>({...D,[g]:C}))}function U(){u.group&&$(u.group.id,!n)}function M(g){let C=!0;g.key==="Enter"||g.key===" "?P(g):g.key==="ArrowLeft"&&!s?F(u,!0,g.altKey):g.key==="ArrowRight"&&s?F(u,!1,g.altKey):g.key==="ArrowUp"?qt():g.key==="ArrowDown"?Zt():C=!1,C&&(g.preventDefault(),g.stopPropagation())}function T(g){let C=!0;g.key==="Enter"||g.key===" "?U():g.key==="ArrowLeft"&&u.group?$(u.group.id,!1):g.key==="ArrowRight"&&u.group?$(u.group.id,!0):g.key==="ArrowUp"?qt():g.key==="ArrowDown"?Zt():C=!1,C&&(g.preventDefault(),g.stopPropagation())}return i.$$set=g=>{"frame"in g&&t(0,u=g.frame),"rootFrame"in g&&t(1,f=g.rootFrame),"indent"in g&&t(2,d=g.indent)},i.$$.update=()=>{var g,C;if(i.$$.dirty&131073&&(u.group?o[u.group.id??""]||((g=u.group)==null?void 0:g.rootFrame)===u||u.children.filter(D=>!D.group).length>1?t(3,m=!0):t(3,m=!1):t(3,m=!0)),i.$$.dirty&1&&(u.className?t(4,v=`${u.className}.${u.function}`):t(4,v=u.function)),i.$$.dirty&262145)if(r.timeFormat==="absolute")t(5,b=u.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(r.timeFormat==="proportion")t(5,b=`${(p*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");i.$$.dirty&131073&&t(9,n=o[((C=u.group)==null?void 0:C.id)??""]===!0),i.$$.dirty&65537&&t(8,s=l[u.uuid]===!0)},[u,f,d,m,v,b,y,k,s,n,p,_,P,U,M,T,l,o,r]}let jt=class extends de{constructor(e){super(),fe(this,e,dn,fn,oe,{frame:0,rootFrame:1,indent:2})}};function Yt(i,e,t){let n=i;for(const s of e)if(n=s(n,t),!n)return null;return n}const hn="\0",mn="[await]",qe="[self]",pn=[mn,qe,"[out-of-context]","[root]"],vn="c",gn="h";class je{constructor(e,t){A(this,"uuid",crypto.randomUUID());A(this,"identifier");A(this,"_identifierParts");A(this,"startTime");A(this,"time",0);A(this,"absorbedTime",0);A(this,"group",null);A(this,"attributes");A(this,"_children",[]);A(this,"parent",null);A(this,"context");var l;this.identifier=e.identifier,this._identifierParts=this.identifier.split(hn),this.startTime=e.startTime??0,this.time=e.time??0,this.attributes=e.attributes??{},this.context=t;let n=this.startTime;const s=(l=e.children)==null?void 0:l.map(o=>(o.startTime===void 0&&(o={...o,startTime:n},n+=o.time??0),n=o.startTime+(o.time??0),new je(o,t)));s&&this.addChildren(s)}cloneDeep(){return new je(this,this.context)}get children(){return this._children}addChild(e,t={}){if(e.removeFromParent(),e.parent=this,t.after){const n=this._children.indexOf(t.after);if(n==-1)throw new Error("After frame not found");this._children.splice(n+1,0,e)}else this._children.push(e)}addChildren(e,t={}){e=e.slice(),t.after?(e.slice().reverse(),e.forEach(s=>this.addChild(s,t))):e.forEach(n=>this.addChild(n,t))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(n=>n.startsWith(e)).map(n=>({data:n.slice(1),time:this.attributes[n]}))}getAttributeValue(e){const t=this.getAttributes(e);if(!t||t.length==0)return null;let n=0;for(let s=0;s<t.length;s++)t[s].time>t[n].time&&(n=s);return t[n].data}get hasTracebackHide(){return this.getAttributeValue(gn)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return pn.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||["/lib/","\\lib\\"].some(n=>e.includes(n))?!1:e.startsWith("<")?!!e.startsWith("<ipython-input-"):!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue(vn)??""}get library(){const e=this.filePathShort;return e?/^[^\\/.]*/.exec(e)[0]:null}}class _n{constructor(e){A(this,"id");A(this,"rootFrame");A(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const t=this._frames.indexOf(e);if(t===-1)throw new Error("Frame not found in group.");this._frames.splice(t,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const t of this.frames){let n=!1;for(const s of t.children)if(s.group!=this){n=!0;break}n&&e.push(t)}return e}get libraries(){const e=[];for(const t of this.frames){const n=t.library;n&&(e.includes(n)||e.push(n))}return e}}function rt(i,e){const{replaceWith:t}=e,n=i.parent;if(!n)throw new Error("Cannot delete the root frame");if(t=="children")n.addChildren(i.children,{after:i});else if(t=="self_time")n.addChild(new je({identifier:qe,time:i.time},n.context),{after:i});else if(t=="nothing")n.absorbedTime+=i.time;else throw new Zi(t);i.removeFromParent(),Ct(i,!0)}function bn(i,e){if(i.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=i.absorbedTime,e.time+=i.time,Object.entries(i.attributes).forEach(([t,n])=>{e.attributes[t]!==void 0?e.attributes[t]+=n:e.attributes[t]=n}),e.addChildren(i.children),i.removeFromParent(),Ct(i,!1)}function Ct(i,e){if(e&&i.children&&i.children.forEach(t=>{Ct(t,!0)}),i.group){const t=i.group;t.removeFrame(i),t.frames.length===1&&t.removeFrame(t.frames[0])}}function kt(i,e){if(!i)return null;for(const t of i.children)kt(t),t.filePath&&t.filePath.includes("<frozen importlib._bootstrap")&&rt(t,{replaceWith:"children"});return i}function Et(i,e){if(!i)return null;for(const t of i.children)Et(t),t.hasTracebackHide&&rt(t,{replaceWith:"children"});return i}function xt(i,e){if(!i)return null;const t={};for(const n of i.children.slice())if(t[n.identifier]){const s=t[n.identifier];bn(n,s)}else t[n.identifier]=n;return i.children.forEach(n=>xt(n)),i._children.sort((n,s)=>s.time-n.time),i}function Jt(i,e){if(!i)return null;const t=e.hideRegex,n=e.showRegex;function s(o){const r=o.filePath||"",u=n&&new RegExp(n).test(r),f=t&&new RegExp(t).test(r);return u?!1:f?!0:!o.isApplicationCode}function l(o,r){r.addFrame(o),o.children.forEach(u=>{s(u)&&l(u,r)})}return i.children.forEach(o=>{if(!o.group&&s(o)&&o.children.some(s)){const r=new _n(o);l(o,r)}Jt(o,e)}),i}function ei(i,e,t=!0){if(!i)return null;let n=null;for(const s of i.children)s.identifier===qe?n?(n.time+=s.time,s.removeFromParent()):n=s:n=null;return t&&i.children.forEach(s=>ei(s,e,!0)),i}function ti(i,e){return i?(i.children.length===1&&i.children[0].identifier===qe&&rt(i.children[0],{replaceWith:"nothing"}),i.children.forEach(t=>ti(t)),i):null}function ii(i,e,t=null){if(!i)return null;t===null&&(t=i.time,t<=0&&(t=1e-44));const n=e.filterThreshold??.01;for(const s of i.children.slice())s.time/t<n&&rt(s,{replaceWith:"nothing"});return i.children.forEach(s=>ii(s,e,t)),i}function ni(i,e){if(!i)return null;const t=o=>{var r;return((r=o.filePath)==null?void 0:r.includes("pyinstrument/__main__.py"))&&o.children.length>0},n=o=>{var r;return o.proportionOfParent>.8&&((r=o.filePath)==null?void 0:r.includes("<string>"))&&o.children.length>0},s=o=>{var r;return o.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(o.filePath??"")||((r=o.filePath)==null?void 0:r.includes("<frozen runpy>")))&&o.children.length>0};let l=i;if(!t(l)||(l=l.children[0],!n(l))||(l=l.children[0],!s(l)))return i;for(;s(l);)l=l.children[0];return l.removeFromParent(),l}function wn(i){let e,t,n;return t=new jt({props:{frame:i[2],rootFrame:i[2]}}),{c(){e=h("div"),_e(t.$$.fragment),a(e,"class","call-stack-margins svelte-1m7g2ko")},m(s,l){H(s,e,l),ce(t,e,null),n=!0},p(s,l){const o={};l&4&&(o.frame=s[2]),l&4&&(o.rootFrame=s[2]),t.$set(o)},i(s){n||(L(t.$$.fragment,s),n=!0)},o(s){B(t.$$.fragment,s),n=!1},d(s){s&&R(e),ue(t)}}}function yn(i){let e;return{c(){e=h("div"),e.innerHTML='<div class="error">All frames were filtered out.</div>',a(e,"class","margins")},m(t,n){H(t,e,n)},p:E,i:E,o:E,d(t){t&&R(e)}}}function An(i){let e,t,n,s,l;const o=[yn,wn],r=[];function u(f,d){return f[2]?1:0}return n=u(i),s=r[n]=o[n](i),{c(){e=h("div"),t=h("div"),s.c(),a(t,"class","scroll-inner svelte-1m7g2ko"),a(e,"class","call-stack-view svelte-1m7g2ko")},m(f,d){H(f,e,d),c(e,t),r[n].m(t,null),i[6](t),i[7](e),l=!0},p(f,[d]){let m=n;n=u(f),n===m?r[n].p(f,d):($e(),B(r[m],1,1,()=>{r[m]=null}),Ve(),s=r[n],s?s.p(f,d):(s=r[n]=o[n](f),s.c()),L(s,1),s.m(t,null))},i(f){l||(L(s),l=!0)},o(f){B(s),l=!1},d(f){f&&R(e),r[n].d(),i[6](null),i[7](null)}}}function Tn(i,e,t){let n,{session:s}=e;const l=Vt([Y],([m])=>{const p=[m.removeImportlib?kt:null,m.removeTracebackHide?Et:null,ei,xt,ti,m.removeIrrelevant?ii:null,m.removePyinstrument?ni:null,m.collapseMode!=="disabled"?Jt:null].filter(_=>_!==null),v={filterThreshold:m.removeIrrelevantThreshold,hideRegex:m.collapseMode=="custom"?m.collapseCustomHide:void 0,showRegex:m.collapseMode=="custom"?m.collapseCustomShow:void 0};return{processors:p,options:v}});ge(i,l,m=>t(5,n=m));let o,r;St(()=>{const m=o;if(!m)throw new Error("element not set");let p;return m.addEventListener("scroll",p=()=>{t(1,r.style.minHeight=`${m.scrollTop+m.clientHeight}px`,r)}),p(),()=>{m.removeEventListener("scroll",p)}});let u;function f(m){Se[m?"unshift":"push"](()=>{r=m,t(1,r)})}function d(m){Se[m?"unshift":"push"](()=>{o=m,t(0,o)})}return i.$$set=m=>{"session"in m&&t(4,s=m.session)},i.$$.update=()=>{i.$$.dirty&48&&t(2,u=Yt(s.rootFrame.cloneDeep(),n.processors,n.options))},[o,r,u,l,s,n,f,d]}class Cn extends de{constructor(e){super(),fe(this,e,Tn,An,oe,{session:4})}}class kn{constructor(e){A(this,"mediaQueryList",null);this.onDevicePixelRatioChanged=e,this._onChange=this._onChange.bind(this),this.createMediaQueryList()}createMediaQueryList(){this.removeMediaQueryList();let e=`(resolution: ${window.devicePixelRatio}dppx)`;this.mediaQueryList=matchMedia(e),this.mediaQueryList.addEventListener("change",this._onChange)}removeMediaQueryList(){var e;(e=this.mediaQueryList)==null||e.removeEventListener("change",this._onChange),this.mediaQueryList=null}_onChange(e){this.onDevicePixelRatioChanged(),this.createMediaQueryList()}destroy(){this.removeMediaQueryList()}}class En{constructor(e){A(this,"canvas");A(this,"_size_observer");A(this,"_devicePixelRatioObserver");A(this,"drawAnimationRequest",null);this.container=e,getComputedStyle(e).position!="absolute"&&(e.style.position="relative"),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.container.appendChild(this.canvas),this.setCanvasSize=this.setCanvasSize.bind(this),this._size_observer=new ResizeObserver(this.setCanvasSize),this._size_observer.observe(e),this._devicePixelRatioObserver=new kn(this.setCanvasSize),window.requestAnimationFrame(()=>{this.setCanvasSize()})}destroy(){this._size_observer.disconnect(),this._devicePixelRatioObserver.destroy(),this.canvas.remove(),this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null)}setNeedsRedraw(){this.drawAnimationRequest===null&&(this.drawAnimationRequest=window.requestAnimationFrame(()=>{this.drawAnimationRequest=null,this.canvasViewRedraw()}))}redrawIfNeeded(){this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null,this.canvasViewRedraw())}canvasViewRedraw(){const e=this.canvas.getContext("2d");e&&(e.resetTransform(),e.scale(window.devicePixelRatio,window.devicePixelRatio),this.redraw(e,{width:this.canvas.width/window.devicePixelRatio,height:this.canvas.height/window.devicePixelRatio}))}get width(){return this.canvas.width/window.devicePixelRatio}get height(){return this.canvas.height/window.devicePixelRatio}setCanvasSize(){const e=window.devicePixelRatio;this.canvas.height=this.container.clientHeight*e,this.canvas.width=this.container.clientWidth*e,this.canvasViewRedraw()}}function Mn(i){let e,t=i[2]=="self"?"self":"time",n,s,l,o=i[3](i[0].time)+"";return{c(){e=h("div"),n=I(t),s=w(),l=h("div"),a(e,"class","label svelte-ci3g2p"),a(l,"class","time-val svelte-ci3g2p")},m(r,u){H(r,e,u),c(e,n),H(r,s,u),H(r,l,u),l.innerHTML=o},p(r,u){u&4&&t!==(t=r[2]=="self"?"self":"time")&&ye(n,t),u&1&&o!==(o=r[3](r[0].time)+"")&&(l.innerHTML=o)},d(r){r&&(R(e),R(s),R(l))}}}function Fn(i){let e,t,n,s,l=i[3](i[0].time)+"",o,r=i[0].selfTime/i[0].time>.001&&si(i);return{c(){e=h("div"),e.textContent="time",t=w(),n=h("div"),s=h("div"),o=w(),r&&r.c(),a(e,"class","label svelte-ci3g2p"),a(s,"class","time-val svelte-ci3g2p"),a(n,"class","time-row svelte-ci3g2p")},m(u,f){H(u,e,f),H(u,t,f),H(u,n,f),c(n,s),s.innerHTML=l,c(n,o),r&&r.m(n,null)},p(u,f){f&1&&l!==(l=u[3](u[0].time)+"")&&(s.innerHTML=l),u[0].selfTime/u[0].time>.001?r?r.p(u,f):(r=si(u),r.c(),r.m(n,null)):r&&(r.d(1),r=null)},d(u){u&&(R(e),R(t),R(n)),r&&r.d()}}}function si(i){let e,t,n,s=i[3](i[0].selfTime)+"";return{c(){e=h("div"),e.textContent="self",t=w(),n=h("div"),a(e,"class","label svelte-ci3g2p"),a(n,"class","time-val svelte-ci3g2p")},m(l,o){H(l,e,o),H(l,t,o),H(l,n,o),n.innerHTML=s},p(l,o){o&1&&s!==(s=l[3](l[0].selfTime)+"")&&(n.innerHTML=s)},d(l){l&&(R(e),R(t),R(n))}}}function Pn(i){let e,t,n=i[0].name+"",s,l,o,r,u,f,d,m,p,v;function _(k,P){return k[2]=="both"?Fn:Mn}let b=_(i),y=b(i);return{c(){e=h("div"),t=h("div"),s=I(n),l=w(),y.c(),o=w(),r=h("div"),r.textContent="loc",u=w(),f=h("div"),d=h("div"),p=w(),v=new Ei(!1),a(t,"class","name svelte-ci3g2p"),a(r,"class","label svelte-ci3g2p"),a(d,"class","location-color svelte-ci3g2p"),a(d,"style",m=`background: ${i[0].locationColor}`),v.a=null,a(f,"class","location-row"),a(e,"class","timeline-canvas-view-tooltip svelte-ci3g2p"),a(e,"style",`font: ${oi}; max-width: ${Rn}px;`)},m(k,P){H(k,e,P),c(e,t),c(t,s),c(e,l),y.m(e,null),c(e,o),c(e,r),c(e,u),c(e,f),c(f,d),c(f,p),v.m(i[1],f)},p(k,[P]){P&1&&n!==(n=k[0].name+"")&&ye(s,n),b===(b=_(k))&&y?y.p(k,P):(y.d(1),y=b(k),y&&(y.c(),y.m(e,o))),P&1&&m!==(m=`background: ${k[0].locationColor}`)&&a(d,"style",m),P&2&&v.p(k[1])},i:E,o:E,d(k){k&&R(e),y.d()}}}function ri(i){return i.selfTime==i.time?"self":i.selfTime/i.time>.001?"both":"time"}function In(i,e){i.font=oi;const t=ri(e)=="both"?140:70,n=i.measureText(e.name).width,s=i.measureText(e.location).width+46;let o=Math.max(t,n,s)+20;return o>310&&(o=310),o}const Rn=310,oi="400 13px Source Sans Pro, sans-serif";function Sn(i,e,t){let{f:n}=e,s,l;function o(r){return`<span style="color: ${zt(r/n.totalTime)}">${r.toFixed(3)}</span>`}return i.$$set=r=>{"f"in r&&t(0,n=r.f)},i.$$.update=()=>{i.$$.dirty&1&&t(1,s=Tt(n.location)),i.$$.dirty&1&&t(2,l=ri(n))},[n,s,l,o]}class Hn extends de{constructor(e){super(),fe(this,e,Sn,Pn,oe,{f:0})}}const Ln="#212325",$n=18,Vn=17,Ye=28,ot=17,Dn=29,On=["#47A298","#9FC175","#C1A731","#C07210","#B84210","#B53134","#9A3586","#4958B5","#3475BA","#318DBC","#47A298"].map(xi);class Nn extends En{constructor(t){super(t);A(this,"zoom",1);A(this,"startT",0);A(this,"frames",[]);A(this,"isZoomedIn",!1);A(this,"tooltipContainer");A(this,"tooltipComponent",null);A(this,"_rootFrame",null);A(this,"_frameMaxT");A(this,"lastDrawWidth",0);A(this,"lastDrawHeight",0);A(this,"mouseLocation",null);A(this,"_libraryOrder",null);A(this,"_colors",[]);this.onWheel=this.onWheel.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.canvas.addEventListener("wheel",this.onWheel),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseleave",this.onMouseLeave),this.tooltipContainer=document.createElement("div"),this.tooltipContainer.style.position="absolute",this.tooltipContainer.style.pointerEvents="none",this.container.appendChild(this.tooltipContainer)}destroy(){super.destroy(),this.canvas.removeEventListener("wheel",this.onWheel)}setRootFrame(t){this.frames=[],this._frameMaxT=void 0,this._collectFrames(t,0),this.fitContents(),this.setNeedsRedraw()}_collectFrames(t,n){this.frames.push({frame:t,depth:n,isApplicationCode:t.isApplicationCode,library:t.library,className:t.className,filePathShort:t.filePathShort});for(const s of t.children)s.identifier!==qe&&this._collectFrames(s,n+1)}get frameMaxT(){return this._frameMaxT===void 0&&(this._frameMaxT=this.frames.reduce((t,n)=>Math.max(t,n.frame.startTime+n.frame.time),0)),this._frameMaxT}get minZoom(){return(this.width-2*Ye)/this.frameMaxT}get maxZoom(){return 6666666666666667e-8}fitContents(){this.startT=0,this.zoom=this.minZoom,this.isZoomedIn=!1}clampViewport(){this.zoom<this.minZoom?(this.zoom=this.minZoom,this.isZoomedIn=!1):this.isZoomedIn=!0,this.zoom>this.maxZoom&&(this.zoom=this.maxZoom),this.startT<0&&(this.startT=0);const t=this.frameMaxT-(this.width-2*Ye)/this.zoom;this.startT>t&&(this.startT=t)}redraw(t,n){var r,u;const{width:s,height:l}=n;(s!==this.lastDrawWidth||l!==this.lastDrawHeight)&&(this.isZoomedIn?this.clampViewport():this.fitContents()),this.lastDrawWidth=s,this.lastDrawHeight=l,t.fillStyle=Ln,t.fillRect(0,0,s,l),this.drawAxes(t);for(const f of this.frames)this.drawFrame(t,f);t.globalAlpha=1,t.fillStyle="red",t.font='23px "Source Sans Pro", sans-serif';const o=this.hitTest(((r=this.mouseLocation)==null?void 0:r.x)??0,((u=this.mouseLocation)==null?void 0:u.y)??0);this.updateTooltip(t,o)}drawAxes(t){const n=this.width/this.zoom;if(n==0)return;const s=Math.log10(n);let l=Math.ceil(s)+2;l<0&&(l=0);const o=Math.ceil(s)-3,r=u=>Oe(u,{from:[s,s-3],to:[.71,0]});for(let u=o;u<l;u++){let f=r(u);f=Math.max(0,Math.min(1,f)),f=Math.pow(f,2),this.drawAxis(t,Math.pow(10,u),f)}this.drawAxis(t,Math.pow(10,l),r(l),!0)}drawAxis(t,n,s,l=!1){t.fillStyle="white";const o=Math.floor(this.startT/n)*n,r=this.startT+this.width/this.zoom,u=Math.max(0,Math.ceil(-Math.log10(n)));for(let f=o;f<r;f+=n){const d=this.xForT(f);if(Math.round(f/n)%10===0&&!l)continue;t.globalAlpha=s,t.fillRect(d,ot,1,this.height-ot);const p=Oe(s,{from:[.12,.25],to:[0,.5],clamp:!0});if(p>.01){t.globalAlpha=p,t.font='13px "Source Sans Pro", sans-serif';let v=f.toFixed(u);v=="0"&&(v="0s"),t.fillText(v,d+3,ot+10)}t.globalAlpha=1}}drawFrame(t,n){const{x:s,y:l,w:o,h:r}=this.frameDims(n);if(!(s+o<0||s>this.width)){if(t.fillStyle=this.colorForFrame(n),t.globalAlpha=n.isApplicationCode?1:.5,o<2){t.fillRect(s,l,o,r);return}if(t.save(),t.beginPath(),t.rect(s,l,o,r),t.fill(),t.clip(),o>2){t.font='13px "Source Sans Pro", sans-serif',t.fillStyle="white";let f=this.frameName(n),d=s;d<0&&(d=0);const m=Math.floor(o/3.3);f.length>m&&(f=f.substring(0,m)),t.fillText(f,d+2,l+13)}t.restore()}}frameDims(t){const n=t.depth*$n+ot+Dn,s=Vn;let l=this.xForT(t.frame.startTime),r=this.xForT(t.frame.startTime+t.frame.time)-l;return r<1&&(r=1),r>1&&(r-=Oe(r,{from:[1,3],to:[0,1],clamp:!0})),{x:l,y:n,w:r,h:s}}xForT(t){return(t-this.startT)*this.zoom+Ye}tForX(t){return(t-Ye)/this.zoom+this.startT}frameName(t){let n;return t.className?n=`${t.className}.${t.frame.function}`:t.frame.function=="<module>"?n=t.filePathShort??t.frame.filePath??"":n=t.frame.function,n}frameSelfTime(t){let n=t.frame.time;const s=t.frame.children.filter(l=>!l.isSynthetic);for(const l of s)n-=l.time;return n}hitTest(t,n){for(const s of this.frames){const{x:l,y:o,w:r,h:u}=this.frameDims(s);if(t>=l&&t<=l+r&&n>=o&&n<=o+u)return s}return null}onWheel(t){const n=t.ctrlKey||t.metaKey,s=n?.01:.0023,l=this.tForX(t.offsetX);this.zoom*=1-t.deltaY*s,this.clampViewport(),this.startT=l-(t.offsetX-Ye)/this.zoom,n||(this.startT+=t.deltaX/this.zoom),this.clampViewport(),this.setNeedsRedraw(),t.preventDefault()}onMouseMove(t){this.mouseLocation={x:t.offsetX,y:t.offsetY},this.setNeedsRedraw()}onMouseLeave(t){this.mouseLocation=null,this.setNeedsRedraw()}_assignLibraryOrder(){const t={};for(const s of this.frames){const o=s.frame.library??"";t[o]=(t[o]||0)+1}const n=Object.keys(t);n.sort((s,l)=>t[l]-t[s]),this._libraryOrder=n}colorForLibraryIndex(t){if(this._colors[t]!==void 0)return this._colors[t];const n=Math.pow(2,Math.ceil(Math.log2(t+1))),l=(2*t-n+1)/n,o=qi(On,l);return this._colors[t]=o,o}libraryIndexForFrame(t){this._libraryOrder||this._assignLibraryOrder();const n=t.library||"";let s=this._libraryOrder.indexOf(n);return s===-1&&(s=this._libraryOrder.length,this._libraryOrder.push(n)),s}colorForFrame(t){const n=this.libraryIndexForFrame(t);return this.colorForLibraryIndex(n)}updateTooltip(t,n){var s;if(n){const l={name:this.frameName(n),time:n.frame.time,selfTime:this.frameSelfTime(n),totalTime:((s=this._rootFrame)==null?void 0:s.time)??1e-12,location:`${n.filePathShort}:${n.frame.lineNo}`,locationColor:this.colorForFrame(n)};if(this.tooltipComponent?this.tooltipComponent.$set({f:l}):this.tooltipComponent=new Hn({target:this.tooltipContainer,props:{f:l}}),this.mouseLocation){const o={x:this.mouseLocation.x+12,y:this.mouseLocation.y+12},r=In(t,l),u=this.width-10-r;o.x>u&&(o.x=u),this.tooltipContainer.style.left=`${o.x}px`,this.tooltipContainer.style.top=`${o.y}px`}}n||this.tooltipComponent&&(this.tooltipComponent.$destroy(),this.tooltipComponent=null)}}function Bn(i){let e;return{c(){e=h("div"),e.innerHTML="",a(e,"class","timeline svelte-1ekyre4")},m(t,n){H(t,e,n),i[6](e)},p:E,i:E,o:E,d(t){t&&R(e),i[6](null)}}}function zn(i,e,t){let n,{session:s}=e;const l=Vt([Ze],([d])=>({processors:[d.removeImportlib?kt:null,d.removeTracebackHide?Et:null,d.removePyinstrument?ni:null].filter(v=>v!==null),options:{}}));ge(i,l,d=>t(5,n=d));let o,r=null,u=null;function f(d){Se[d?"unshift":"push"](()=>{r=d,t(0,r)})}return i.$$set=d=>{"session"in d&&t(2,s=d.session)},i.$$.update=()=>{i.$$.dirty&36&&t(3,o=Yt(s.rootFrame.cloneDeep(),n.processors,n.options)),i.$$.dirty&1&&r&&t(4,u=new Nn(r)),i.$$.dirty&24&&o&&u&&u.setRootFrame(o)},[r,l,s,o,u,n,f]}class Wn extends de{constructor(e){super(),fe(this,e,zn,Bn,oe,{session:2})}}function Un(i){let e,t,n=i[1].viewMode+"",s;return{c(){e=h("div"),t=I("Unknown view mode: "),s=I(n),a(e,"class","error")},m(l,o){H(l,e,o),c(e,t),c(e,s)},p(l,o){o&2&&n!==(n=l[1].viewMode+"")&&ye(s,n)},i:E,o:E,d(l){l&&R(e)}}}function Gn(i){let e,t;return e=new Wn({props:{session:i[0]}}),{c(){_e(e.$$.fragment)},m(n,s){ce(e,n,s),t=!0},p(n,s){const l={};s&1&&(l.session=n[0]),e.$set(l)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function Kn(i){let e,t;return e=new Cn({props:{session:i[0]}}),{c(){_e(e.$$.fragment)},m(n,s){ce(e,n,s),t=!0},p(n,s){const l={};s&1&&(l.session=n[0]),e.$set(l)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function Xn(i){let e;return{c(){e=h("div"),e.innerHTML='<div class="spacer" style="height: 20px;"></div> <div class="error">No samples recorded.</div>',a(e,"class","margins")},m(t,n){H(t,e,n)},p:E,i:E,o:E,d(t){t&&R(e)}}}function Qn(i){let e,t,n,s,l,o,r,u;n=new cn({props:{session:i[0]}});const f=[Xn,Kn,Gn,Un],d=[];function m(p,v){return p[0].rootFrame?p[1].viewMode==="call-stack"?1:p[1].viewMode==="timeline"?2:3:0}return o=m(i),r=d[o]=f[o](i),{c(){e=h("div"),t=h("div"),_e(n.$$.fragment),s=w(),l=h("div"),r.c(),a(t,"class","header"),a(l,"class","body svelte-15bv5h8"),a(e,"class","app svelte-15bv5h8")},m(p,v){H(p,e,v),c(e,t),ce(n,t,null),c(e,s),c(e,l),d[o].m(l,null),u=!0},p(p,[v]){const _={};v&1&&(_.session=p[0]),n.$set(_);let b=o;o=m(p),o===b?d[o].p(p,v):($e(),B(d[b],1,1,()=>{d[b]=null}),Ve(),r=d[o],r?r.p(p,v):(r=d[o]=f[o](p),r.c()),L(r,1),r.m(l,null))},i(p){u||(L(n.$$.fragment,p),L(r),u=!0)},o(p){B(n.$$.fragment,p),B(r),u=!1},d(p){p&&R(e),ue(n),d[o].d()}}}function Zn(i,e,t){let n;ge(i,Qe,m=>t(1,n=m));let{session:s}=e;const l=document.createElement("link");l.rel="shortut icon",l.href=un,document.head.appendChild(l);const o=document.createElement("link");o.rel="preload",o.as="style",o.onload=()=>{o.rel="stylesheet"},o.href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600|Source+Sans+Pro:400,600&display=swap",document.head.appendChild(o);const r=s.rootFrame,u=r==null?void 0:r.time.toLocaleString(void 0,{maximumSignificantDigits:3});let f,d;return(d=/[^\s/]+(:\d+)?$/.exec(s.target_description))?f=d[0]:f=s.target_description,document.title=`${u}s - ${f} - pyinstrument`,i.$$set=m=>{"session"in m&&t(0,s=m.session)},[s,n]}class qn extends de{constructor(e){super(),fe(this,e,Zn,Qn,oe,{session:0})}}class jn{constructor(e){A(this,"startTime");A(this,"duration");A(this,"sampleCount");A(this,"target_description");A(this,"cpuTime");A(this,"rootFrame");A(this,"sysPath");A(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.target_description=e.session.target_description,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.rootFrame=new je(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let t=e;if(Ne(e).length>1)for(const s of this.sysPath){const l=Yn(e,s);Ne(l).length<Ne(t).length&&(t=l)}return this._shortenPathCache[e]=t,t}}function Ne(i){return i.split(/[/\\]/)}function li(i){const e=Ne(i);return e.length>0&&e[0].endsWith(":")?e[0]:null}function Yn(i,e){if(li(i)!=li(e))return i;const t=Ne(i),n=Ne(e);let s=0;for(;s<t.length&&s<n.length&&t[s]==n[s];)s++;return n.slice(s).map(o=>"..").concat(t.slice(s)).join("/")}return{render(i,e){const t=new jn(e);return new qn({target:i,props:{session:t}})}}}();
