var pyinstrumentHTMLRenderer=function(){"use strict";var Zt=Object.defineProperty;var xt=(P,U,G)=>U in P?Zt(P,U,{enumerable:!0,configurable:!0,writable:!0,value:G}):P[U]=G;var F=(P,U,G)=>xt(P,typeof U!="symbol"?U+"":U,G);function P(){}function U(t){return t()}function G(){return Object.create(null)}function X(t){t.forEach(U)}function Ne(t){return typeof t=="function"}function j(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function st(t){return Object.keys(t).length===0}function ot(t,...e){if(t==null){for(const i of e)i(void 0);return P}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function oe(t,e,n){t.$$.on_destroy.push(ot(e,n))}function d(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function lt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function $e(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function B(t){return document.createTextNode(t)}function y(){return B(" ")}function ct(){return B("")}function J(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Le(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Be(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ut(t){let e;return{p(...n){e=n,e.forEach(i=>t.push(i))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function at(t){return Array.from(t.childNodes)}function W(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ue(t,e){t.value=e??""}function R(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function H(t,e,n){t.classList.toggle(e,!!n)}let ee;function te(t){ee=t}function ze(){if(!ee)throw new Error("Function called outside component initialization");return ee}function ft(t){ze().$$.on_mount.push(t)}function dt(t){ze().$$.on_destroy.push(t)}const q=[],He=[];let Z=[];const Ge=[],ht=Promise.resolve();let be=!1;function pt(){be||(be=!0,ht.then(Xe))}function Ae(t){Z.push(t)}const we=new Set;let x=0;function Xe(){if(x!==0)return;const t=ee;do{try{for(;x<q.length;){const e=q[x];x++,te(e),mt(e.$$)}}catch(e){throw q.length=0,x=0,e}for(te(null),q.length=0,x=0;He.length;)He.pop()();for(let e=0;e<Z.length;e+=1){const n=Z[e];we.has(n)||(we.add(n),n())}Z.length=0}while(q.length);for(;Ge.length;)Ge.pop()();be=!1,we.clear(),te(t)}function mt(t){if(t.fragment!==null){t.update(),X(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ae)}}function gt(t){const e=[],n=[];Z.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Z=e}const le=new Set;let V;function ce(){V={r:0,c:[],p:V}}function ue(){V.r||X(V.c),V=V.p}function I(t,e){t&&t.i&&(le.delete(t),t.i(e))}function O(t,e,n,i){if(t&&t.o){if(le.has(t))return;le.add(t),V.c.push(()=>{le.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function ae(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function _t(t,e){O(t,1,1,()=>{e.delete(t.key)})}function vt(t,e,n,i,r,c,o,s,l,u,f,a){let m=t.length,_=c.length,E=m;const h={};for(;E--;)h[t[E].key]=E;const A=[],b=new Map,w=new Map,S=[];for(E=_;E--;){const p=a(r,c,E),k=n(p);let C=o.get(k);C?S.push(()=>C.p(p,e)):(C=u(k,p),C.c()),b.set(k,A[E]=C),k in h&&w.set(k,Math.abs(E-h[k]))}const $=new Set,T=new Set;function z(p){I(p,1),p.m(s,f),o.set(p.key,p),f=p.first,_--}for(;m&&_;){const p=A[_-1],k=t[m-1],C=p.key,M=k.key;p===k?(f=p.first,m--,_--):b.has(M)?!o.has(C)||$.has(C)?z(p):T.has(M)?m--:w.get(C)>w.get(M)?(T.add(C),z(p)):($.add(M),m--):(l(k,o),m--)}for(;m--;){const p=t[m];b.has(p.key)||l(p,o)}for(;_;)z(A[_-1]);return X(S),A}function fe(t){t&&t.c()}function ne(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),Ae(()=>{const c=t.$$.on_mount.map(U).filter(Ne);t.$$.on_destroy?t.$$.on_destroy.push(...c):X(c),t.$$.on_mount=[]}),r.forEach(Ae)}function ie(t,e){const n=t.$$;n.fragment!==null&&(gt(n.after_update),X(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function bt(t,e){t.$$.dirty[0]===-1&&(q.push(t),pt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function de(t,e,n,i,r,c,o=null,s=[-1]){const l=ee;te(t);const u=t.$$={fragment:null,ctx:[],props:c,update:P,not_equal:r,bound:G(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:G(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(a,m,..._)=>{const E=_.length?_[0]:m;return u.ctx&&r(u.ctx[a],u.ctx[a]=E)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](E),f&&bt(t,a)),m}):[],u.update(),f=!0,X(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const a=at(e.target);u.fragment&&u.fragment.l(a),a.forEach(D)}else u.fragment&&u.fragment.c();e.intro&&I(t.$$.fragment),ne(t,e.target,e.anchor),Xe()}te(l)}class he{constructor(){F(this,"$$");F(this,"$$set")}$destroy(){ie(this,1),this.$destroy=P}$on(e,n){if(!Ne(n))return P;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!st(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const At="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(At);const K=[];function ye(t,e=P){let n;const i=new Set;function r(s){if(j(t,s)&&(t=s,n)){const l=!K.length;for(const u of i)u[1](),K.push(u,t);if(l){for(let u=0;u<K.length;u+=2)K[u][0](K[u+1]);K.length=0}}}function c(s){r(s(t))}function o(s,l=P){const u=[s,l];return i.add(u),i.size===1&&(n=e(r,c)||P),s(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:c,subscribe:o}}const Ve=ye({}),Qe=ye({}),pe=ye("absolute");function wt(t){let e,n,i,r,c,o,s,l,u,f,a,m,_,E,h,A,b,w,S,$,T,z,p,k,C,M=t[0].sampleCount+"",Me,nt,_e,it,ve,De,Oe,rt;return De=ut(t[6][0]),{c(){e=v("div"),n=v("div"),i=v("div"),r=v("div"),r.textContent="pyinstrument",c=y(),o=v("div"),s=v("label"),s.textContent="Absolute time",l=y(),u=v("input"),f=y(),a=v("div"),a.textContent="Recorded:",m=y(),_=v("div"),_.textContent=`${t[2]}`,E=y(),h=v("div"),h.textContent="Duration:",A=y(),b=v("div"),b.textContent=`${t[4]} seconds`,w=y(),S=v("label"),S.textContent="Proportional time",$=y(),T=v("input"),z=y(),p=v("div"),p.textContent="Samples:",k=y(),C=v("div"),Me=B(M),nt=y(),_e=v("div"),_e.textContent="CPU time:",it=y(),ve=v("div"),ve.textContent=`${t[3]} seconds`,g(r,"class","title svelte-tewt95"),g(s,"class","metric-label svelte-tewt95"),g(s,"for","absolute"),g(u,"type","radio"),u.__value="absolute",Ue(u,u.__value),g(u,"id","absolute"),g(u,"name","time-format"),u.checked=!0,g(a,"class","metric-label svelte-tewt95"),g(_,"class","metric-value svelte-tewt95"),g(h,"class","metric-label svelte-tewt95"),g(b,"class","metric-value svelte-tewt95"),g(S,"class","metric-label svelte-tewt95"),g(S,"for","proportion"),g(T,"type","radio"),T.__value="proportion",Ue(T,T.__value),g(T,"id","proportion"),g(T,"name","time-format"),g(p,"class","metric-label svelte-tewt95"),g(C,"class","metric-value svelte-tewt95"),g(_e,"class","metric-label svelte-tewt95"),g(ve,"class","metric-value svelte-tewt95"),g(o,"class","metrics svelte-tewt95"),g(i,"class","row svelte-tewt95"),g(n,"class","margins"),g(e,"class","header svelte-tewt95"),De.p(u,T)},m(Q,se){L(Q,e,se),d(e,n),d(n,i),d(i,r),d(i,c),d(i,o),d(o,s),d(o,l),d(o,u),u.checked=u.__value===t[1],d(o,f),d(o,a),d(o,m),d(o,_),d(o,E),d(o,h),d(o,A),d(o,b),d(o,w),d(o,S),d(o,$),d(o,T),T.checked=T.__value===t[1],d(o,z),d(o,p),d(o,k),d(o,C),d(C,Me),d(o,nt),d(o,_e),d(o,it),d(o,ve),Oe||(rt=[J(u,"change",t[5]),J(T,"change",t[7])],Oe=!0)},p(Q,[se]){se&2&&(u.checked=u.__value===Q[1]),se&2&&(T.checked=T.__value===Q[1]),se&1&&M!==(M=Q[0].sampleCount+"")&&W(Me,M)},i:P,o:P,d(Q){Q&&D(e),De.r(),Oe=!1,X(rt)}}}function yt(t,e,n){var a;let i;oe(t,pe,m=>n(1,i=m));let{session:r}=e;const c=new Date(r.startTime*1e3).toLocaleString(),o=(a=r.cpuTime)==null?void 0:a.toLocaleString(void 0,{maximumSignificantDigits:3}),s=r.duration.toLocaleString(void 0,{maximumSignificantDigits:3}),l=[[]];function u(){i=this.__value,pe.set(i)}function f(){i=this.__value,pe.set(i)}return t.$$set=m=>{"session"in m&&n(0,r=m.session)},[r,i,c,o,s,u,l,f]}class Et extends he{constructor(e){super(),de(this,e,yt,wt,j,{session:0})}}const Ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACPTkDJAAAFPklEQVRYCdWXu4skVRSHb3VXP2bcXUVMBkRMTVww2XQDExEEH4iKiUYGhuJEPgJhUSMzQQSDRVzETNDMTTfUwL/ARUwM1t3pV1WX33eqbnfP9MxOu5kHTt9T93F+v3vOubeqi7QhT1+58vhiVn1G19WiaQ6KIqVQOmyT+h9kuUxp2bAAtQkpij9pbw5G5fu/3br1x8ql4NW0+rVJzaN29nop9VUeCtoerXpMTj53g+AGcINR1YB3RIJMN6dIxd/luLxcZoftzltwAct+SiNGh2jJ84BnSQWJTeBNW2C0ZrvufrZA5y2JmuemWkfCjYq5IsC6q2iE2V0LuDdMaYxKZDxo+yS3JZkEY+5SsAU7P5q1qZNEAxnXGo0NubomQM4dWPnCMAU/fUCnoA7kFjPEPohuqfO6uc++0xKSVHUcHDbNwZpAeFyHyMcg408G16mSnwW3b5OEz3rtCAyJnHUQUSEFmMdki0CMmsNOX/gkpf1RSpf223Q43jC2MMw4tFWsjwHzBngsIOT6CaEf7wGKrTo/agFbH8oWAQdkWTF5htGntSDn2h2YBTal/9603Z2++swZ0+5BZIjdQwfUz5DcGwHVotSfdpYtAg7oUKzaycyo6PjmkA4cRmgBuf5zSj/80kbAuToaYHz9afdgCiCxJF3gpudfZampOyGnEwAwIkEbuROBXEauXZGdYzrEtFTTpx3zHGeewGoFcFxk2Cdlxempy8/oZyXm1KO3R14fIraPXEzpAnXgyVBmRMdjNgdVsqZgxLw9cl4C7m7N+d17pOqIuaj2LKetQzs1Ai3E+reRJip4CSnz2wPYHC9wFL66MYko9k8pwgmAU4hqbxZhO6tNXba321V8Uvruc4ZzGgQxErnFNszqItqC0DdpTtzfeqWJ21DwpRp5WkOdHwFJqM4UMLcdeB2AADPUkigSm00VOZixsOL8WfUB3oWd4ZWcT8CpgLz2XkoPX+IgEIU+q6K6QZqzqxoAr15vupqC8Air0wm7JwUL2AWJByIAuDXQEGZ1aegRASY4Ppq0AOZZIoZYsLh4zDsa4PSfeA+En/tGQMI5ZTe+xClhN+Q5z4b67TfZJeATiAQw4J4KwTzCOfT2nSb3JRALAJTEfKPQcrGBG5GwwCLMRCRAXcgiQY1IYD8ogbzuDd5qF7gL+p4ESM05Z//coWXH1oEE5oQkQPOi3EroDDk/Ai40Cp3SRE2AG+8MWyOk5h1j7ixnEogPD0dVcv/FVwXXLceKs20K5rCaFk06fKmOD424akkTXUFkVwanEtBZfH7hMK5eCEwBl0DNYHvJ0Idd4MHXr7djkGDtWQV3GqlTCRhybzqv1R4zbA/fXabRfhFAHkvflJO77XivuyElbRHG+h3yL6EtAu4iPkoF5q4veRn1ecEUAwYg0pSyQwAoRk3qz4p4DS+wawpxSVHoY9cobBHQtxBBBMBrN/rkvOEC6lF0hF/nKvaS31yE155btLVAFKIidbSDbBMI9HaluzjC4ZKQWHieBIcVPqvbyg/b503Dh91kTcB/LH4Z6wmNI8X2PnyxTkPSUI7JP7MjvE5hTrwDuO+rLvT2uXxnAXNNgL9LLHxdB16jOi24XgOEK68EyMKMb/uYRERol1w+FmRN67XrWonsKDdzRNPmXzPjbEXHxwWttsCcwpXki8cte91afP7zkdQuYch/zSizVv66ffvOwZNPfLus/YNSPMYuLkZIda66yw3NzwHMeCOBXcBNdVH8OBiXLx/7c5qJrFrK/GOYfETH97Sr/jOM38FnvodDGv8f+Rcj1XBLIcDKAQAAAABJRU5ErkJggg==";function We(t,e,n){const i=t.slice();return i[19]=e[n],i}function qe(t){let e,n,i,r,c,o,s,l,u,f,a,m,_,E;return{c(){e=v("div"),n=v("div"),i=$e("svg"),r=$e("path"),c=y(),o=v("div"),s=B(t[5]),l=y(),u=v("div"),f=B(t[4]),a=y(),m=v("div"),m.textContent=`${t[11]}`,g(r,"d","M.937-.016L5.793 4.84.937 9.696z"),g(r,"fill",t[7]),g(r,"fill-rule","evenodd"),g(r,"fill-opacity",".582"),g(i,"width","6"),g(i,"height","10"),g(n,"class","frame-triangle svelte-1fyhnvv"),H(n,"rotate",!t[9]),R(n,"visibility",t[0].children.length>0?"visible":"hidden"),g(o,"class","time svelte-1fyhnvv"),R(o,"color",t[7]),R(o,"font-weight",t[10]<.2?500:600),g(u,"class","name svelte-1fyhnvv"),g(m,"class","code-position svelte-1fyhnvv"),g(e,"class","frame-description svelte-1fyhnvv"),H(e,"application-code",t[0].isApplicationCode),H(e,"children-visible",!t[9]),R(e,"padding-left",`${t[2]*35}px`)},m(h,A){L(h,e,A),d(e,n),d(n,i),d(i,r),d(e,c),d(e,o),d(o,s),d(e,l),d(e,u),d(u,f),d(e,a),d(e,m),_||(E=J(e,"click",Be(Le(t[12]))),_=!0)},p(h,A){A&128&&g(r,"fill",h[7]),A&512&&H(n,"rotate",!h[9]),A&1&&R(n,"visibility",h[0].children.length>0?"visible":"hidden"),A&32&&W(s,h[5]),A&128&&R(o,"color",h[7]),A&16&&W(f,h[4]),A&1&&H(e,"application-code",h[0].isApplicationCode),A&512&&H(e,"children-visible",!h[9]),A&4&&R(e,"padding-left",`${h[2]*35}px`)},d(h){h&&D(e),_=!1,E()}}}function Ze(t){let e,n,i,r,c=t[0].group.frames.length+"",o,s,l,u,f,a;return{c(){e=v("div"),n=v("div"),i=v("div"),i.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',r=y(),o=B(c),s=B(` frames hidden
        (`),l=B(t[6]),u=B(")"),g(i,"class","group-triangle svelte-1fyhnvv"),H(i,"rotate",t[8]),g(n,"class","group-header-button svelte-1fyhnvv"),g(e,"class","group-header svelte-1fyhnvv"),R(e,"padding-left",`${t[2]*35}px`)},m(m,_){L(m,e,_),d(e,n),d(n,i),d(n,r),d(n,o),d(n,s),d(n,l),d(n,u),f||(a=J(e,"click",Be(Le(t[13]))),f=!0)},p(m,_){_&256&&H(i,"rotate",m[8]),_&1&&c!==(c=m[0].group.frames.length+"")&&W(o,c),_&64&&W(l,m[6]),_&4&&R(e,"padding-left",`${m[2]*35}px`)},d(m){m&&D(e),f=!1,a()}}}function xe(t){let e,n=[],i=new Map,r,c=ae(t[0].children);const o=s=>s[19].identifier;for(let s=0;s<c.length;s+=1){let l=We(t,c,s),u=o(l);i.set(u,n[s]=Ke(u,l))}return{c(){e=v("div");for(let s=0;s<n.length;s+=1)n[s].c();g(e,"class","children svelte-1fyhnvv")},m(s,l){L(s,e,l);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);r=!0},p(s,l){l&15&&(c=ae(s[0].children),ce(),n=vt(n,l,o,1,s,c,i,e,_t,Ke,null,We),ue())},i(s){if(!r){for(let l=0;l<c.length;l+=1)I(n[l]);r=!0}},o(s){for(let l=0;l<n.length;l+=1)O(n[l]);r=!1},d(s){s&&D(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function Ke(t,e){let n,i,r;return i=new Ye({props:{frame:e[19],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:t,first:null,c(){n=ct(),fe(i.$$.fragment),this.first=n},m(c,o){L(c,n,o),ne(i,c,o),r=!0},p(c,o){e=c;const s={};o&1&&(s.frame=e[19]),o&2&&(s.rootFrame=e[1]),o&12&&(s.indent=e[2]+(e[3]?1:0)),i.$set(s)},i(c){r||(I(i.$$.fragment,c),r=!0)},o(c){O(i.$$.fragment,c),r=!1},d(c){c&&D(n),ie(i,c)}}}function kt(t){let e,n,i,r,c,o,s=t[3]&&qe(t),l=t[0].group&&t[0].group.rootFrame==t[0]&&!t[9]&&Ze(t),u=!t[9]&&t[0].children.length>0&&xe(t);return{c(){e=v("div"),s&&s.c(),n=y(),l&&l.c(),i=y(),u&&u.c(),r=y(),c=v("div"),c.innerHTML="",g(c,"class","visual-guide svelte-1fyhnvv"),R(c,"left",`${t[2]*35+21}px`),R(c,"backgroundColor",t[7]),g(e,"class","frame svelte-1fyhnvv")},m(f,a){L(f,e,a),s&&s.m(e,null),d(e,n),l&&l.m(e,null),d(e,i),u&&u.m(e,null),d(e,r),d(e,c),o=!0},p(f,[a]){f[3]?s?s.p(f,a):(s=qe(f),s.c(),s.m(e,n)):s&&(s.d(1),s=null),f[0].group&&f[0].group.rootFrame==f[0]&&!f[9]?l?l.p(f,a):(l=Ze(f),l.c(),l.m(e,i)):l&&(l.d(1),l=null),!f[9]&&f[0].children.length>0?u?(u.p(f,a),a&513&&I(u,1)):(u=xe(f),u.c(),I(u,1),u.m(e,r)):u&&(ce(),O(u,1,1,()=>{u=null}),ue()),a&4&&R(c,"left",`${f[2]*35+21}px`),a&128&&R(c,"backgroundColor",f[7])},i(f){o||(I(u),o=!0)},o(f){O(u),o=!1},d(f){f&&D(e),s&&s.d(),l&&l.d(),u&&u.d()}}}function Pt(t,e,n){var z;let i,r,c,o,s;oe(t,Qe,p=>n(14,c=p)),oe(t,Ve,p=>n(15,o=p)),oe(t,pe,p=>n(16,s=p));let{frame:l}=e,{rootFrame:u}=e,{indent:f=0}=e,a;const m=l.time/u.time;let _;const E=`${l.filePathShort}:${(z=l.lineNo)==null?void 0:z.toString().padEnd(4," ")}`;let h,A=null;if(l.group){const p=l.group.libraries;p.length<4?A=p.join(", "):A=`${p[0]}, ${p[1]}, ${p[2]}...`}let b;m>.6?b="#FF4159":m>.3?b="#F5A623":m>.2?b="#D8CB2A":b="#7ED321";function w(p){S(l,!r,p.altKey)}function S(p,k,C=!0){if(Qe.update(M=>({...M,[p.uuid]:k})),C)for(const M of p.children)S(M,k,!0),p.group&&p.group.rootFrame==p&&$(p.group.id,!k)}function $(p,k){Ve.update(C=>({...C,[p]:k}))}function T(){l.group&&$(l.group.id,!i)}return t.$$set=p=>{"frame"in p&&n(0,l=p.frame),"rootFrame"in p&&n(1,u=p.rootFrame),"indent"in p&&n(2,f=p.indent)},t.$$.update=()=>{var p,k;if(t.$$.dirty&32769&&(l.group?o[l.group.id??""]||((p=l.group)==null?void 0:p.rootFrame)===l||l.children.filter(C=>!C.group).length>1?n(3,a=!0):n(3,a=!1):n(3,a=!0)),t.$$.dirty&1&&(l.className?n(4,_=`${l.className}.${l.function}`):n(4,_=l.function)),t.$$.dirty&65537)if(s==="absolute")n(5,h=l.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(s==="proportion")n(5,h=`${(m*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");t.$$.dirty&32769&&n(8,i=o[((k=l.group)==null?void 0:k.id)??""]===!0),t.$$.dirty&16385&&n(9,r=c[l.uuid]===!0)},[l,u,f,a,_,h,A,b,i,r,m,E,w,T,c,o,s]}let Ye=class extends he{constructor(e){super(),de(this,e,Pt,kt,j,{frame:0,rootFrame:1,indent:2})}};const Ct="\0",Tt="[await]",me="[self]",St=[Tt,me,"[out-of-context]","[root]"],Rt="c",It="h";class re{constructor(e,n){F(this,"uuid",crypto.randomUUID());F(this,"identifier");F(this,"_identifierParts");F(this,"time",0);F(this,"absorbedTime",0);F(this,"group",null);F(this,"attributes");F(this,"_children",[]);F(this,"parent",null);F(this,"context");var r;this.identifier=e.identifier,this._identifierParts=this.identifier.split(Ct),this.time=e.time??0,this.attributes=e.attributes??{},this.context=n;const i=(r=e.children)==null?void 0:r.map(c=>new re(c,n));i&&this.addChildren(i)}cloneDeep(){return new re(this,this.context)}get children(){return this._children}addChild(e,n={}){if(e.removeFromParent(),e.parent=this,n.after){const i=this._children.indexOf(n.after);this._children.splice(i+1,0,e)}else this._children.push(e)}addChildren(e,n={}){n.after?(e.slice().reverse(),e.forEach(r=>this.addChild(r,n))):e.forEach(i=>this.addChild(i,n))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(i=>i.startsWith(e)).map(i=>({data:i.slice(1),time:this.attributes[i]}))}getAttributeValue(e){const n=this.getAttributes(e);if(!n||n.length==0)return null;let i=0;for(let r=0;r<n.length;r++)n[r].time>n[i].time&&(i=r);return n[i].data}get hasTracebackhide(){return this.getAttributeValue(It)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return St.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||["/lib/","\\lib\\"].some(i=>e.includes(i))?!1:e.startsWith("<")?!!e.startsWith("<ipython-input-"):!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue(Rt)??""}}class Mt{constructor(e){F(this,"id");F(this,"rootFrame");F(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const n=this._frames.indexOf(e);if(n===-1)throw new Error("Frame not found in group.");this._frames.splice(n,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const n of this.frames){let i=!1;for(const r of n.children)if(r.group!=this){i=!0;break}i&&e.push(n)}return e}get libraries(){const e=[];for(const n of this.frames){const i=n.filePathShort;if(!i)continue;const r=/^[^\\/.]*/.exec(i)[0];e.includes(r)||e.push(r)}return e}}class Dt extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function ge(t,e){const{replaceWith:n}=e,i=t.parent;if(!i)throw new Error("Cannot delete the root frame");if(n=="children")i.addChildren(t.children,{after:t});else if(n=="self_time")i.addChild(new re({identifier:me},i.context));else if(n=="nothing")i.absorbedTime+=t.time;else throw new Dt(n);t.removeFromParent(),Ee(t,!0)}function Ot(t,e){if(t.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=t.absorbedTime,e.time+=t.time,Object.entries(t.attributes).forEach(([n,i])=>{e.attributes[n]!==void 0?e.attributes[n]+=i:e.attributes[n]=i}),e.addChildren(t.children),t.removeFromParent(),Ee(t,!1)}function Ee(t,e){if(e&&t.children&&t.children.forEach(n=>{Ee(n,!0)}),t.group){const n=t.group;n.removeFrame(t),n.frames.length===1&&n.removeFrame(n.frames[0])}}const N=[];function Fe(t,e){if(!t)return null;for(const n of t.children)Fe(n),n.filePath&&n.filePath.includes("<frozen importlib._bootstrap")&&ge(n,{replaceWith:"children"});return t}N.push({name:"remove_importlib",description:"Removes <frozen importlib._bootstrap frames that clutter the output.",function:Fe,optionsSpec:[],category:"normal"});function ke(t,e){if(!t)return null;for(const n of t.children)ke(n),n.hasTracebackhide&&ge(n,{replaceWith:"children"});return t}N.push({name:"remove_tracebackhide",description:"Removes frames that have set a local __tracebackhide__ (e.g. __tracebackhide__ = True), to hide them from the output.",function:ke,optionsSpec:[],category:"advanced"});function Pe(t,e){if(!t)return null;const n={};for(const i of t.children.slice())if(n[i.identifier]){const r=n[i.identifier];Ot(i,r)}else n[i.identifier]=i;return t.children.forEach(i=>Pe(i)),t._children.sort((i,r)=>r.time-i.time),t}N.push({name:"aggregate_repeated_calls",description:"Converts a timeline into a time-aggregate summary. Adds together calls along the same call stack, so that repeated calls appear as the same frame. Removes time-linearity - frames are sorted according to total time spent.",function:Pe,optionsSpec:[],category:"normal"});function Ce(t,e){if(!t)return null;const n=e.hideRegex,i=e.showRegex;function r(o){const s=o.filePath||"",l=i&&new RegExp(i).test(s),u=n&&new RegExp(n).test(s);return l?!1:u?!0:!o.isApplicationCode}function c(o,s){s.addFrame(o),o.children.forEach(l=>{r(l)&&c(l,s)})}return t.children.forEach(o=>{if(!o.group&&r(o)&&o.children.some(r)){const s=new Mt(o);c(o,s)}Ce(o,e)}),t}N.push({name:"Group library frames",description:"Groups frames that should be hidden.",function:Ce,optionsSpec:[{key:"hideRegex",name:"Hide regex",value:{type:"string",default:""}},{key:"showRegex",name:"Show regex",value:{type:"string",default:""}}],category:"normal"});function Te(t,e,n=!0){if(!t)return null;let i=null;for(const r of t.children)r.identifier===me?i?(i.time+=r.time,r.removeFromParent()):i=r:i=null;return n&&t.children.forEach(r=>Te(r,e,!0)),t}N.push({name:"Merge consecutive self time",description:"Combines consecutive 'self time' frames.",function:Te,optionsSpec:[],category:"advanced"});function Se(t,e){return t?(t.children.length===1&&t.children[0].identifier===me&&ge(t.children[0],{replaceWith:"nothing"}),t.children.forEach(n=>Se(n)),t):null}N.push({name:"Remove unnecessary self time nodes",description:"Removes unnecessary self-time nodes.",function:Se,optionsSpec:[],category:"advanced"});function Re(t,e,n=null){if(!t)return null;n===null&&(n=t.time,n<=0&&(n=1e-44));const i=e.filterThreshold||.01;for(const r of t.children.slice())r.time/n<i&&ge(r,{replaceWith:"nothing"});return t.children.forEach(r=>Re(r,e,n)),t}N.push({name:"Remove irrelevant nodes",description:"Removes nodes that represent less than a certain percentage of the output.",function:Re,optionsSpec:[{key:"filterThreshold",name:"Filter threshold",value:{type:"number",default:.01,min:0,max:1,sliderMin:1e-4,sliderMax:1}}],category:"normal"});function je(t,e){if(!t)return null;const n=o=>{var s;return((s=o.filePath)==null?void 0:s.includes("pyinstrument/__main__.py"))&&o.children.length>0},i=o=>{var s;return o.proportionOfParent>.8&&((s=o.filePath)==null?void 0:s.includes("<string>"))&&o.children.length>0},r=o=>{var s;return o.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(o.filePath??"")||((s=o.filePath)==null?void 0:s.includes("<frozen runpy>")))&&o.children.length>0};let c=t;if(!n(c)||(c=c.children[0],!i(c))||(c=c.children[0],!r(c)))return t;for(;r(c);)c=c.children[0];return c.removeFromParent(),c}N.push({name:"Remove first pyinstrument frames",description:"Removes the initial frames specific to the command line use of pyinstrument.",function:je,optionsSpec:[],category:"advanced"});function Je(t,e,n){const i=t.slice();return i[7]=e[n],i[8]=e,i[9]=n,i}function et(t){let e,n,i,r=t[7].name+"",c,o,s,l;function u(){t[5].call(n,t[7])}return{c(){e=v("label"),n=v("input"),i=y(),c=B(r),o=y(),g(n,"type","checkbox")},m(f,a){L(f,e,a),d(e,n),n.checked=t[0][t[7].name],d(e,i),d(e,c),d(e,o),s||(l=J(n,"change",u),s=!0)},p(f,a){t=f,a&1&&(n.checked=t[0][t[7].name])},d(f){f&&D(e),s=!1,l()}}}function Nt(t){let e,n;return e=new Ye({props:{frame:t[1],rootFrame:t[1]}}),{c(){fe(e.$$.fragment)},m(i,r){ne(e,i,r),n=!0},p(i,r){const c={};r&2&&(c.frame=i[1]),r&2&&(c.rootFrame=i[1]),e.$set(c)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){O(e.$$.fragment,i),n=!1},d(i){ie(e,i)}}}function $t(t){let e;return{c(){e=v("div"),e.textContent="All frames were filtered out.",g(e,"class","error")},m(n,i){L(n,e,i)},p:P,i:P,o:P,d(n){n&&D(e)}}}function Lt(t){let e,n,i,r,c,o,s,l,u,f=ae(N),a=[];for(let h=0;h<f.length;h+=1)a[h]=et(Je(t,f,h));const m=[$t,Nt],_=[];function E(h,A){return h[1]?1:0}return s=E(t),l=_[s]=m[s](t),{c(){e=v("div"),n=v("div"),i=v("h2"),i.textContent="Options",r=y(),c=v("div");for(let h=0;h<a.length;h+=1)a[h].c();o=y(),l.c(),g(c,"class","processor-options"),g(n,"class","options"),g(e,"class","tree-view")},m(h,A){L(h,e,A),d(e,n),d(n,i),d(n,r),d(n,c);for(let b=0;b<a.length;b+=1)a[b]&&a[b].m(c,null);d(e,o),_[s].m(e,null),u=!0},p(h,[A]){if(A&1){f=ae(N);let w;for(w=0;w<f.length;w+=1){const S=Je(h,f,w);a[w]?a[w].p(S,A):(a[w]=et(S),a[w].c(),a[w].m(c,null))}for(;w<a.length;w+=1)a[w].d(1);a.length=f.length}let b=s;s=E(h),s===b?_[s].p(h,A):(ce(),O(_[b],1,1,()=>{_[b]=null}),ue(),l=_[s],l?l.p(h,A):(l=_[s]=m[s](h),l.c()),I(l,1),l.m(e,null))},i(h){u||(I(l),u=!0)},o(h){O(l),u=!1},d(h){h&&D(e),lt(a,h),_[s].d()}}}function Bt(t,e,n){let i=t;for(const r of e)if(i=r.function(i,n),!i)return null;return i}function Ut(t,e,n){let{session:i}=e;const r=[Fe,ke,Te,Pe,Se,Re,je,Ce];let c,o={},s={};for(const f of N){o[f.name]=r.includes(f.function);for(const a of f.optionsSpec)s[a.name]=a.value.default}let l;function u(f){o[f.name]=this.checked,n(0,o)}return t.$$set=f=>{"session"in f&&n(2,i=f.session)},t.$$.update=()=>{t.$$.dirty&1&&n(3,c=r.map(f=>N.find(a=>a.function==f)).filter(f=>o[f.name])),t.$$.dirty&28&&n(1,l=Bt(i.rootFrame.cloneDeep(),c,s))},[o,l,i,c,s,u]}class zt extends he{constructor(e){super(),de(this,e,Ut,Lt,j,{session:2})}}function Ht(t){let e,n;return e=new zt({props:{session:t[0]}}),{c(){fe(e.$$.fragment)},m(i,r){ne(e,i,r),n=!0},p(i,r){const c={};r&1&&(c.session=i[0]),e.$set(c)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){O(e.$$.fragment,i),n=!1},d(i){ie(e,i)}}}function Gt(t){let e;return{c(){e=v("div"),e.textContent="No samples recorded.",g(e,"class","error")},m(n,i){L(n,e,i)},p:P,i:P,o:P,d(n){n&&D(e)}}}function Xt(t){let e,n,i,r,c,o,s,l,u,f,a,m,_;n=new Et({props:{session:t[0]}});const E=[Gt,Ht],h=[];function A(b,w){return b[0].rootFrame?1:0}return a=A(t),m=h[a]=E[a](t),{c(){e=v("div"),fe(n.$$.fragment),i=y(),r=v("div"),c=y(),o=v("div"),s=v("div"),l=v("span"),l.textContent="Program: ",u=B(t[1]),f=y(),m.c(),g(r,"class","spacer"),R(r,"height","20px"),g(l,"class","label svelte-1gm5pcf"),g(s,"class","program svelte-1gm5pcf"),g(o,"class","margins"),g(e,"class","app svelte-1gm5pcf")},m(b,w){L(b,e,w),ne(n,e,null),d(e,i),d(e,r),d(e,c),d(e,o),d(o,s),d(s,l),d(s,u),d(o,f),h[a].m(o,null),_=!0},p(b,[w]){const S={};w&1&&(S.session=b[0]),n.$set(S),(!_||w&2)&&W(u,b[1]);let $=a;a=A(b),a===$?h[a].p(b,w):(ce(),O(h[$],1,1,()=>{h[$]=null}),ue(),m=h[a],m?m.p(b,w):(m=h[a]=E[a](b),m.c()),I(m,1),m.m(o,null))},i(b){_||(I(n.$$.fragment,b),I(m),_=!0)},o(b){O(n.$$.fragment,b),O(m),_=!1},d(b){b&&D(e),ie(n),h[a].d()}}}function Ie(){document.body.style.minHeight=`${window.scrollY+window.innerHeight}px`}function Vt(t,e,n){let{session:i}=e;const r=document.createElement("link");r.rel="shortut icon",r.href=Ft,document.head.appendChild(r),ft(()=>{window.addEventListener("scroll",Ie),Ie()}),dt(()=>{window.removeEventListener("scroll",Ie)});const c=i.rootFrame,o=c==null?void 0:c.time.toLocaleString(void 0,{maximumSignificantDigits:3});let s=c==null?void 0:c.function;return s=="<module>"&&(s=i.program),document.title=`${o}s - ${s} - pyinstrument`,t.$$set=l=>{"session"in l&&n(0,i=l.session)},[i,s]}class Qt extends he{constructor(e){super(),de(this,e,Vt,Xt,j,{session:0})}}class Wt{constructor(e){F(this,"startTime");F(this,"duration");F(this,"sampleCount");F(this,"program");F(this,"cpuTime");F(this,"rootFrame");F(this,"sysPath");F(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.program=e.session.program,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.rootFrame=new re(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let n=e;if(Y(e).length>1)for(const r of this.sysPath){const c=qt(e,r);Y(c).length<Y(n).length&&(n=c)}return this._shortenPathCache[e]=n,n}}function Y(t){return t.split(/[/\\]/)}function tt(t){const e=Y(t);return e.length>0&&e[0].endsWith(":")?e[0]:null}function qt(t,e){if(tt(t)!=tt(e))return t;const n=Y(t),i=Y(e);let r=0;for(;r<n.length&&r<i.length&&n[r]==i[r];)r++;return i.slice(r).map(o=>"..").concat(n.slice(r)).join("/")}return{render(t,e){const n=new Wt(e);return new Qt({target:t,props:{session:n}})}}}();
