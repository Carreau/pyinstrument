var pyinstrumentHTMLRenderer=function(){"use strict";var as=Object.defineProperty;var cs=(E,ge,Pe)=>ge in E?as(E,ge,{enumerable:!0,configurable:!0,writable:!0,value:Pe}):E[ge]=Pe;var T=(E,ge,Pe)=>cs(E,typeof ge!="symbol"?ge+"":ge,Pe);function E(){}function ge(t){return t()}function Pe(){return Object.create(null)}function oe(t){t.forEach(ge)}function vt(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ei(t){return Object.keys(t).length===0}function Lt(t,...e){if(t==null){for(const n of e)n(void 0);return E}const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function _e(t,e,i){t.$$.on_destroy.push(Lt(e,i))}function Fi(t,e,i){return t.set(i),e}function u(t,e){t.appendChild(e)}function S(t,e,i){t.insertBefore(e,i||null)}function R(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function I(t){return document.createTextNode(t)}function b(){return I(" ")}function Pi(){return I("")}function N(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function gt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function _t(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function a(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function wt(t){let e;return{p(...i){e=i,e.forEach(n=>t.push(n))},r(){e.forEach(i=>t.splice(t.indexOf(i),1))}}}function Ii(t){return Array.from(t.childNodes)}function Ae(t,e){e=""+e,t.data!==e&&(t.data=e)}function ce(t,e){t.value=e??""}function j(t,e,i,n){i==null?t.style.removeProperty(e):t.style.setProperty(e,i,"")}function ke(t,e,i){t.classList.toggle(e,!!i)}function Ri(t,e,{bubbles:i=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:n})}class Si{constructor(e=!1){T(this,"is_svg",!1);T(this,"e");T(this,"n");T(this,"t");T(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,i,n=null){this.e||(this.is_svg?this.e=$(i.nodeName):this.e=d(i.nodeType===11?"TEMPLATE":i.nodeName),this.t=i.tagName!=="TEMPLATE"?i:i.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let i=0;i<this.n.length;i+=1)S(this.t,this.n[i],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(R)}}let Ye;function Xe(t){Ye=t}function Ht(){if(!Ye)throw new Error("Function called outside component initialization");return Ye}function Dt(t){Ht().$$.on_mount.push(t)}function Li(){const t=Ht();return(e,i,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const l=Ri(e,i,{cancelable:n});return s.slice().forEach(o=>{o.call(t,l)}),!l.defaultPrevented}return!0}}const Se=[],Le=[];let He=[];const Ot=[],Hi=Promise.resolve();let bt=!1;function Di(){bt||(bt=!0,Hi.then(Vt))}function yt(t){He.push(t)}const At=new Set;let De=0;function Vt(){if(De!==0)return;const t=Ye;do{try{for(;De<Se.length;){const e=Se[De];De++,Xe(e),Oi(e.$$)}}catch(e){throw Se.length=0,De=0,e}for(Xe(null),Se.length=0,De=0;Le.length;)Le.pop()();for(let e=0;e<He.length;e+=1){const i=He[e];At.has(i)||(At.add(i),i())}He.length=0}while(Se.length);for(;Ot.length;)Ot.pop()();bt=!1,At.clear(),Xe(t)}function Oi(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(yt)}}function Vi(t){const e=[],i=[];He.forEach(n=>t.indexOf(n)===-1?e.push(n):i.push(n)),i.forEach(n=>n()),He=e}const st=new Set;let Ie;function Oe(){Ie={r:0,c:[],p:Ie}}function Ve(){Ie.r||oe(Ie.c),Ie=Ie.p}function H(t,e){t&&t.i&&(st.delete(t),t.i(e))}function B(t,e,i,n){if(t&&t.o){if(st.has(t))return;st.add(t),Ie.c.push(()=>{st.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}function $t(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function $i(t,e){B(t,1,1,()=>{e.delete(t.key)})}function Ni(t,e,i,n,s,l,o,r,c,f,p,h){let m=t.length,v=l.length,_=m;const w={};for(;_--;)w[t[_].key]=_;const C=[],y=new Map,A=new Map,P=[];for(_=v;_--;){const k=h(s,l,_),L=i(k);let g=o.get(L);g?P.push(()=>g.p(k,e)):(g=f(L,k),g.c()),y.set(L,C[_]=g),L in w&&A.set(L,Math.abs(_-w[L]))}const D=new Set,W=new Set;function F(k){H(k,1),k.m(r,p),o.set(k.key,k),p=k.first,v--}for(;m&&v;){const k=C[v-1],L=t[m-1],g=k.key,M=L.key;k===L?(p=k.first,m--,v--):y.has(M)?!o.has(g)||D.has(g)?F(k):W.has(M)?m--:A.get(g)>A.get(M)?(W.add(g),F(k)):(D.add(M),m--):(c(L,o),m--)}for(;m--;){const k=t[m];y.has(k.key)||c(k,o)}for(;v;)F(C[v-1]);return oe(P),C}function we(t){t&&t.c()}function ue(t,e,i){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,i),yt(()=>{const l=t.$$.on_mount.map(ge).filter(vt);t.$$.on_destroy?t.$$.on_destroy.push(...l):oe(l),t.$$.on_mount=[]}),s.forEach(yt)}function fe(t,e){const i=t.$$;i.fragment!==null&&(Vi(i.after_update),oe(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function Bi(t,e){t.$$.dirty[0]===-1&&(Se.push(t),Di(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function de(t,e,i,n,s,l,o=null,r=[-1]){const c=Ye;Xe(t);const f=t.$$={fragment:null,ctx:[],props:l,update:E,not_equal:s,bound:Pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Pe(),dirty:r,skip_bound:!1,root:e.target||c.$$.root};o&&o(f.root);let p=!1;if(f.ctx=i?i(t,e.props||{},(h,m,...v)=>{const _=v.length?v[0]:m;return f.ctx&&s(f.ctx[h],f.ctx[h]=_)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](_),p&&Bi(t,h)),m}):[],f.update(),p=!0,oe(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const h=Ii(e.target);f.fragment&&f.fragment.l(h),h.forEach(R)}else f.fragment&&f.fragment.c();e.intro&&H(t.$$.fragment),ue(t,e.target,e.anchor),Vt()}Xe(c)}class he{constructor(){T(this,"$$");T(this,"$$set")}$destroy(){fe(this,1),this.$destroy=E}$on(e,i){if(!vt(i))return E;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const s=n.indexOf(i);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Ei(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ui="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ui);function zi(t){let e,i;return{c(){e=$("svg"),i=$("path"),a(i,"fill-rule","evenodd"),a(i,"clip-rule","evenodd"),a(i,"d","M5.11634 0.889422C4.86506 -0.296474 3.17237 -0.296474 2.92109 0.889422C2.78291 1.54158 2.10994 1.93011 1.47607 1.72371C0.323418 1.34837 -0.522932 2.81429 0.378448 3.62484C0.87414 4.07059 0.87414 4.84767 0.378448 5.29341C-0.522931 6.10397 0.323418 7.56989 1.47607 7.19455C2.10994 6.98814 2.78291 7.37668 2.92109 8.02883C3.17237 9.21473 4.86506 9.21473 5.11634 8.02883C5.25452 7.37668 5.92749 6.98814 6.56136 7.19455C7.71401 7.56989 8.56036 6.10397 7.65898 5.29341C7.16329 4.84767 7.16329 4.07059 7.65898 3.62484C8.56036 2.81429 7.71401 1.34837 6.56136 1.72371C5.92749 1.93011 5.25452 1.54158 5.11634 0.889422ZM4.01883 6.33408C5.05436 6.33408 5.89383 5.49462 5.89383 4.45908C5.89383 3.42355 5.05436 2.58408 4.01883 2.58408C2.98329 2.58408 2.14383 3.42355 2.14383 4.45908C2.14383 5.49462 2.98329 6.33408 4.01883 6.33408Z"),a(i,"fill","currentColor"),a(e,"width","9"),a(e,"height","9"),a(e,"viewBox","0 0 9 9"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(n,s){S(n,e,s),u(e,i)},p:E,i:E,o:E,d(n){n&&R(e)}}}class Wi extends he{constructor(e){super(),de(this,e,null,zi,le,{})}}function xi(t){let e,i,n,s,l,o,r,c,f,p,h,m,v,_,w,C,y;return{c(){e=$("svg"),i=$("g"),n=$("path"),s=$("path"),l=$("defs"),o=$("filter"),r=$("feFlood"),c=$("feBlend"),f=$("feGaussianBlur"),p=$("linearGradient"),h=$("stop"),m=$("stop"),v=$("stop"),_=$("linearGradient"),w=$("stop"),C=$("stop"),y=$("stop"),a(n,"fill-rule","evenodd"),a(n,"clip-rule","evenodd"),a(n,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(n,"fill","url(#paint0_linear_67_262)"),a(i,"opacity","0.5"),a(i,"filter","url(#filter0_f_67_262)"),a(s,"fill-rule","evenodd"),a(s,"clip-rule","evenodd"),a(s,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(s,"fill","url(#paint1_linear_67_262)"),a(r,"flood-opacity","0"),a(r,"result","BackgroundImageFix"),a(c,"mode","normal"),a(c,"in","SourceGraphic"),a(c,"in2","BackgroundImageFix"),a(c,"result","shape"),a(f,"stdDeviation","3.39785"),a(f,"result","effect1_foregroundBlur_67_262"),a(o,"id","filter0_f_67_262"),a(o,"x","3.2043"),a(o,"y","2.2043"),a(o,"width","36.0914"),a(o,"height","41.0914"),a(o,"filterUnits","userSpaceOnUse"),a(o,"color-interpolation-filters","sRGB"),a(h,"stop-color","#FFAA00"),a(m,"offset","0.514478"),a(m,"stop-color","#FFEB00"),a(v,"offset","1"),a(v,"stop-color","#98FF05"),a(p,"id","paint0_linear_67_262"),a(p,"x1","7.3769"),a(p,"y1","18.4566"),a(p,"x2","20.6583"),a(p,"y2","33.1038"),a(p,"gradientUnits","userSpaceOnUse"),a(w,"stop-color","#FFC834"),a(C,"offset","0.514478"),a(C,"stop-color","#FAF534"),a(y,"offset","1"),a(y,"stop-color","#B8FF38"),a(_,"id","paint1_linear_67_262"),a(_,"x1","7.3769"),a(_,"y1","18.4566"),a(_,"x2","20.6583"),a(_,"y2","33.1038"),a(_,"gradientUnits","userSpaceOnUse"),a(e,"width","44"),a(e,"height","44"),a(e,"viewBox","0 0 44 44"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(A,P){S(A,e,P),u(e,i),u(i,n),u(e,s),u(e,l),u(l,o),u(o,r),u(o,c),u(o,f),u(l,p),u(p,h),u(p,m),u(p,v),u(l,_),u(_,w),u(_,C),u(_,y)},p:E,i:E,o:E,d(A){A&&R(e)}}}class Gi extends he{constructor(e){super(),de(this,e,null,xi,le,{})}}const $e=[];function Yi(t,e){return{subscribe:rt(t,e).subscribe}}function rt(t,e=E){let i;const n=new Set;function s(r){if(le(t,r)&&(t=r,i)){const c=!$e.length;for(const f of n)f[1](),$e.push(f,t);if(c){for(let f=0;f<$e.length;f+=2)$e[f][0]($e[f+1]);$e.length=0}}}function l(r){s(r(t))}function o(r,c=E){const f=[r,c];return n.add(f),n.size===1&&(i=e(s,l)||E),r(t),()=>{n.delete(f),n.size===0&&i&&(i(),i=null)}}return{set:s,update:l,subscribe:o}}function Nt(t,e,i){const n=!Array.isArray(t),s=n?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return Yi(i,(o,r)=>{let c=!1;const f=[];let p=0,h=E;const m=()=>{if(p)return;h();const _=e(n?f[0]:f,o,r);l?o(_):h=vt(_)?_:E},v=s.map((_,w)=>Lt(_,C=>{f[w]=C,p&=~(1<<w),c&&m()},()=>{p|=1<<w}));return c=!0,m(),function(){oe(v),h(),c=!1}})}var Tt={local:{},session:{}};function Xi(t){return t==="local"?localStorage:sessionStorage}function Ct(t,e,i){var n,s,l,o,r,c,f,p;i!=null&&i.onError&&console.warn("onError has been deprecated. Please use onWriteError instead");const h=(n=i==null?void 0:i.serializer)!=null?n:JSON,m=(s=i==null?void 0:i.storage)!=null?s:"local",v=(l=i==null?void 0:i.syncTabs)!=null?l:!0,_=(r=(o=i==null?void 0:i.onWriteError)!=null?o:i==null?void 0:i.onError)!=null?r:F=>console.error(`Error when writing value from persisted store "${t}" to ${m}`,F),w=(c=i==null?void 0:i.onParseError)!=null?c:(F,k)=>console.error(`Error when parsing ${F?'"'+F+'"':"value"} from persisted store "${t}"`,k),C=(f=i==null?void 0:i.beforeRead)!=null?f:F=>F,y=(p=i==null?void 0:i.beforeWrite)!=null?p:F=>F,A=typeof window<"u"&&typeof document<"u",P=A?Xi(m):null;function D(F,k){const L=y(k);try{P==null||P.setItem(F,h.stringify(L))}catch(g){_(g)}}function W(){function F(M){try{return h.parse(M)}catch(V){w(M,V)}}const k=P==null?void 0:P.getItem(t);if(k==null)return e;const L=F(k);return L==null?e:C(L)}if(!Tt[m][t]){const F=W(),k=rt(F,M=>{if(A&&m=="local"&&v){const V=X=>{if(X.key===t&&X.newValue){let U;try{U=h.parse(X.newValue)}catch(te){w(X.newValue,te);return}const Re=C(U);M(Re)}};return window.addEventListener("storage",V),()=>window.removeEventListener("storage",V)}}),{subscribe:L,set:g}=k;Tt[m][t]={set(M){g(M),D(t,M)},update(M){return k.update(V=>{const X=M(V);return D(t,X),X})},reset(){this.set(e)},subscribe:L}}return Tt[m][t]}function Bt(){return{collapseMode:"non-application",collapseCustomHide:"",collapseCustomShow:"",removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:.001,timeFormat:"absolute"}}const q=Ct("pyinstrument:viewOptionsCallStack",Bt(),{syncTabs:!0,beforeRead(t){return{...Bt(),...t}}}),Ke=Ct("pyinstrument:viewOptions",{viewMode:"call-stack"},{syncTabs:!1}),Ze=Ct("pyinstrument:viewOptionsTimeline",{removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:1e-4},{syncTabs:!0});function Ki(t){let e,i,n,s,l,o,r,c,f,p,h,m,v,_,w,C,y,A,P,D,W,F,k,L,g,M,V,X,U,Re,te,ee,K,Me,x,Je,et,ae,G,tt,ie,me,pe,be,ve,Te,it,Ce,J,Ue,Ee,nt,z,O,Z,mi,ct,pi,vi,ze,Fe,gi,We,ut,_i,wi,ye,bi,yi,xe,ft,Ai,Ge,dt,ht,ne,Ti,Ci,mt,pt,se,ki,It,Rt,St,Mi;return It=wt(t[5][0]),Rt=wt(t[5][1]),{c(){e=d("div"),i=d("div"),n=d("div"),n.textContent="Collapse frames",s=b(),l=d("div"),o=d("div"),r=d("input"),c=b(),f=d("label"),p=I("Non-application code"),h=b(),m=d("div"),m.textContent=`Application code is anything run from outside the Python home
          directory.`,v=b(),_=d("div"),w=d("input"),C=b(),y=d("label"),A=I("Custom"),P=b(),D=d("div"),W=I(`Regex on the source file path.
          `),F=d("div"),k=d("label"),k.textContent="Show",L=b(),g=d("input"),M=b(),V=d("label"),V.textContent="Hide",X=b(),U=d("input"),Re=I(`
          If neither match, non-application rule is used.`),te=b(),ee=d("div"),K=d("input"),Me=b(),x=d("label"),Je=I("Disabled"),et=b(),ae=d("div"),G=d("div"),G.textContent="Remove frames",tt=b(),ie=d("div"),me=d("div"),pe=d("input"),be=b(),ve=d("label"),Te=I("importlib machinery"),it=b(),Ce=d("div"),J=d("input"),Ue=b(),Ee=d("label"),nt=I("Frames declaring __traceback_hide__"),z=b(),O=d("div"),Z=d("input"),mi=b(),ct=d("label"),pi=I("pyinstrument frames"),vi=b(),ze=d("div"),Fe=d("input"),gi=b(),We=d("span"),ut=d("label"),_i=I("Frames with durations less than"),wi=b(),ye=d("input"),bi=I(`
          % of the total time`),yi=b(),xe=d("div"),ft=d("div"),ft.textContent="Time format",Ai=b(),Ge=d("div"),dt=d("div"),ht=d("label"),ne=d("input"),Ti=I(`
          Absolute time in seconds`),Ci=b(),mt=d("div"),pt=d("label"),se=d("input"),ki=I(`
          Percentage of the total run time`),a(n,"class","name svelte-1pecl4m"),a(r,"id",t[1]+"collapseModeAll"),a(r,"type","radio"),r.__value="non-application",ce(r,r.__value),a(r,"class","svelte-1pecl4m"),a(f,"for",t[1]+"collapseModeAll"),a(m,"class","description svelte-1pecl4m"),a(o,"class","option svelte-1pecl4m"),a(w,"id",t[1]+"collapseModeCustom"),a(w,"type","radio"),w.__value="custom",ce(w,w.__value),a(w,"class","svelte-1pecl4m"),a(y,"for",t[1]+"collapseModeCustom"),a(k,"for","collapseCustomShow"),a(k,"class","svelte-1pecl4m"),a(g,"id","collapseCustomShow"),a(g,"type","text"),a(g,"placeholder","myproject"),a(g,"spellcheck","false"),a(g,"autocapitalize","off"),a(g,"autocomplete","off"),a(g,"autocorrect","off"),a(g,"class","svelte-1pecl4m"),a(V,"for","collapseCustomHide"),a(V,"class","svelte-1pecl4m"),a(U,"id","collapseCustomHide"),a(U,"type","text"),a(U,"placeholder",".*/lib/.*"),a(U,"spellcheck","false"),a(U,"autocapitalize","off"),a(U,"autocomplete","off"),a(U,"autocorrect","off"),a(U,"class","svelte-1pecl4m"),a(F,"class","mini-input-grid svelte-1pecl4m"),a(D,"class","description svelte-1pecl4m"),a(_,"class","option svelte-1pecl4m"),a(K,"id",t[1]+"collapseModeDisabled"),a(K,"type","radio"),K.__value="disabled",ce(K,K.__value),a(K,"class","svelte-1pecl4m"),a(x,"for",t[1]+"collapseModeDisabled"),a(ee,"class","option svelte-1pecl4m"),a(l,"class","body"),a(i,"class","option-group svelte-1pecl4m"),a(G,"class","name svelte-1pecl4m"),a(pe,"id",t[1]+"removeImportlib"),a(pe,"type","checkbox"),a(pe,"class","svelte-1pecl4m"),a(ve,"for",t[1]+"removeImportlib"),a(me,"class","option svelte-1pecl4m"),a(J,"id",t[1]+"removeTracebackHide"),a(J,"type","checkbox"),a(J,"class","svelte-1pecl4m"),a(Ee,"for",t[1]+"removeTracebackHide"),a(Ce,"class","option svelte-1pecl4m"),a(Z,"id",t[1]+"removePyinstrument"),a(Z,"type","checkbox"),a(Z,"class","svelte-1pecl4m"),a(ct,"for",t[1]+"removePyinstrument"),a(O,"class","option svelte-1pecl4m"),a(Fe,"id",t[1]+"removeIrrelevant"),a(Fe,"type","checkbox"),a(Fe,"class","svelte-1pecl4m"),a(ut,"for",t[1]+"removeIrrelevant"),a(ye,"type","number"),ye.value=t[2](),a(ye,"min","0"),a(ye,"max","99"),a(ye,"step","0.01"),j(ye,"width","4em"),a(ye,"class","svelte-1pecl4m"),a(ze,"class","option svelte-1pecl4m"),a(ie,"class","body"),a(ae,"class","option-group svelte-1pecl4m"),a(ft,"class","name svelte-1pecl4m"),a(ne,"type","radio"),ne.__value="absolute",ce(ne,ne.__value),a(ne,"class","svelte-1pecl4m"),a(dt,"class","option svelte-1pecl4m"),a(se,"type","radio"),se.__value="proportion",ce(se,se.__value),a(se,"class","svelte-1pecl4m"),a(mt,"class","option svelte-1pecl4m"),a(Ge,"class","body"),a(xe,"class","option-group svelte-1pecl4m"),a(e,"class","view-options-call-stack svelte-1pecl4m"),It.p(ne,se),Rt.p(r,w,K)},m(Q,re){S(Q,e,re),u(e,i),u(i,n),u(i,s),u(i,l),u(l,o),u(o,r),r.checked=r.__value===t[0].collapseMode,u(o,c),u(o,f),u(f,p),u(o,h),u(o,m),u(l,v),u(l,_),u(_,w),w.checked=w.__value===t[0].collapseMode,u(_,C),u(_,y),u(y,A),u(_,P),u(_,D),u(D,W),u(D,F),u(F,k),u(F,L),u(F,g),ce(g,t[0].collapseCustomShow),u(F,M),u(F,V),u(F,X),u(F,U),ce(U,t[0].collapseCustomHide),u(D,Re),u(l,te),u(l,ee),u(ee,K),K.checked=K.__value===t[0].collapseMode,u(ee,Me),u(ee,x),u(x,Je),u(e,et),u(e,ae),u(ae,G),u(ae,tt),u(ae,ie),u(ie,me),u(me,pe),pe.checked=t[0].removeImportlib,u(me,be),u(me,ve),u(ve,Te),u(ie,it),u(ie,Ce),u(Ce,J),J.checked=t[0].removeTracebackHide,u(Ce,Ue),u(Ce,Ee),u(Ee,nt),u(ie,z),u(ie,O),u(O,Z),Z.checked=t[0].removePyinstrument,u(O,mi),u(O,ct),u(ct,pi),u(ie,vi),u(ie,ze),u(ze,Fe),Fe.checked=t[0].removeIrrelevant,u(ze,gi),u(ze,We),u(We,ut),u(ut,_i),u(We,wi),u(We,ye),u(We,bi),u(e,yi),u(e,xe),u(xe,ft),u(xe,Ai),u(xe,Ge),u(Ge,dt),u(dt,ht),u(ht,ne),ne.checked=ne.__value===t[0].timeFormat,u(ht,Ti),u(Ge,Ci),u(Ge,mt),u(mt,pt),u(pt,se),se.checked=se.__value===t[0].timeFormat,u(pt,ki),St||(Mi=[N(r,"change",t[4]),N(w,"change",t[6]),N(g,"input",t[7]),N(U,"input",t[8]),N(K,"change",t[9]),N(pe,"change",t[10]),N(J,"change",t[11]),N(Z,"change",t[12]),N(Fe,"change",t[13]),N(ye,"input",t[3]),N(ne,"change",t[14]),N(se,"change",t[15])],St=!0)},p(Q,[re]){re&1&&(r.checked=r.__value===Q[0].collapseMode),re&1&&(w.checked=w.__value===Q[0].collapseMode),re&1&&g.value!==Q[0].collapseCustomShow&&ce(g,Q[0].collapseCustomShow),re&1&&U.value!==Q[0].collapseCustomHide&&ce(U,Q[0].collapseCustomHide),re&1&&(K.checked=K.__value===Q[0].collapseMode),re&1&&(pe.checked=Q[0].removeImportlib),re&1&&(J.checked=Q[0].removeTracebackHide),re&1&&(Z.checked=Q[0].removePyinstrument),re&1&&(Fe.checked=Q[0].removeIrrelevant),re&1&&(ne.checked=ne.__value===Q[0].timeFormat),re&1&&(se.checked=se.__value===Q[0].timeFormat)},i:E,o:E,d(Q){Q&&R(e),It.r(),Rt.r(),St=!1,oe(Mi)}}}function Zi(t,e,i){let n;_e(t,q,P=>i(0,n=P));const s=Math.random().toString(36).substring(4);function l(){return(n.removeIrrelevantThreshold*100).toLocaleString(void 0,{maximumFractionDigits:4})}function o(P){Fi(q,n.removeIrrelevantThreshold=P.currentTarget.valueAsNumber/100,n)}const r=[[],[]];function c(){n.collapseMode=this.__value,q.set(n)}function f(){n.collapseMode=this.__value,q.set(n)}function p(){n.collapseCustomShow=this.value,q.set(n)}function h(){n.collapseCustomHide=this.value,q.set(n)}function m(){n.collapseMode=this.__value,q.set(n)}function v(){n.removeImportlib=this.checked,q.set(n)}function _(){n.removeTracebackHide=this.checked,q.set(n)}function w(){n.removePyinstrument=this.checked,q.set(n)}function C(){n.removeIrrelevant=this.checked,q.set(n)}function y(){n.timeFormat=this.__value,q.set(n)}function A(){n.timeFormat=this.__value,q.set(n)}return[n,s,l,o,c,r,f,p,h,m,v,_,w,C,y,A]}class Qi extends he{constructor(e){super(),de(this,e,Zi,Ki,le,{})}}function ji(t){let e,i,n,s,l,o,r,c,f,p,h,m,v,_,w,C,y,A,P,D,W,F,k,L;return{c(){e=d("div"),i=d("div"),n=d("div"),n.textContent="Remove frames",s=b(),l=d("div"),o=d("div"),r=d("input"),c=b(),f=d("label"),p=I("importlib machinery"),h=b(),m=d("div"),v=d("input"),_=b(),w=d("label"),C=I("Frames declaring __traceback_hide__"),y=b(),A=d("div"),P=d("input"),D=b(),W=d("label"),F=I("pyinstrument frames"),a(n,"class","name"),a(r,"id",t[1]+"removeImportlib"),a(r,"type","checkbox"),a(f,"for",t[1]+"removeImportlib"),a(o,"class","option"),a(v,"id",t[1]+"removeTracebackHide"),a(v,"type","checkbox"),a(w,"for",t[1]+"removeTracebackHide"),a(m,"class","option"),a(P,"id",t[1]+"removePyinstrument"),a(P,"type","checkbox"),a(W,"for",t[1]+"removePyinstrument"),a(A,"class","option"),a(l,"class","body"),a(i,"class","option-group"),a(e,"class","view-options-timeline svelte-vsz8zm")},m(g,M){S(g,e,M),u(e,i),u(i,n),u(i,s),u(i,l),u(l,o),u(o,r),r.checked=t[0].removeImportlib,u(o,c),u(o,f),u(f,p),u(l,h),u(l,m),u(m,v),v.checked=t[0].removeTracebackHide,u(m,_),u(m,w),u(w,C),u(l,y),u(l,A),u(A,P),P.checked=t[0].removePyinstrument,u(A,D),u(A,W),u(W,F),k||(L=[N(r,"change",t[2]),N(v,"change",t[3]),N(P,"change",t[4])],k=!0)},p(g,[M]){M&1&&(r.checked=g[0].removeImportlib),M&1&&(v.checked=g[0].removeTracebackHide),M&1&&(P.checked=g[0].removePyinstrument)},i:E,o:E,d(g){g&&R(e),k=!1,oe(L)}}}function qi(t,e,i){let n;_e(t,Ze,c=>i(0,n=c));const s=Math.random().toString(36).substring(4);function l(){n.removeImportlib=this.checked,Ze.set(n)}function o(){n.removeTracebackHide=this.checked,Ze.set(n)}function r(){n.removePyinstrument=this.checked,Ze.set(n)}return[n,s,l,o,r]}class Ji extends he{constructor(e){super(),de(this,e,qi,ji,le,{})}}class en extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function tn(t,e){const i=e*(t.length-1),n=Math.floor(i),s=Math.ceil(i),l=t[n],o=t[s],r=i-n;return sn(r,{to:[l,o]})}function nn(t,e,i){return t===1/0?(console.warn("clamp: value is Infinity, returning `max`",t),i):t===-1/0?(console.warn("clamp: value is -Infinity, returning `min`",t),e):Number.isFinite(t)?t<e?e:t>i?i:t:(console.warn("clamp: value isn't finite, returning `min`",t),e)}function Ne(t,e){const{from:i=[0,1],to:n=[0,1]}=e,s=e.clamp||!1;let l=(t-i[0])/(i[1]-i[0])*(n[1]-n[0])+n[0];return s&&(l=nn(l,Math.min(n[0],n[1]),Math.max(n[0],n[1]))),l}function sn(t,e){return`rgb(
      ${Ne(t,{from:e.from,to:[e.to[0][0],e.to[1][0]],clamp:e.clamp})},
      ${Ne(t,{from:e.from,to:[e.to[0][1],e.to[1][1]],clamp:e.clamp})},
      ${Ne(t,{from:e.from,to:[e.to[0][2],e.to[1][2]],clamp:e.clamp})}
    )`}function rn(t){if(t.substr(0,1)=="#"){var e=(t.length-1)/3,i=[17,1,.062272][e-1];return[Math.round(parseInt(t.substr(1,e),16)*i),Math.round(parseInt(t.substr(1+e,e),16)*i),Math.round(parseInt(t.substr(1+2*e,e),16)*i)]}else return t.split("(")[1].split(")")[0].split(",").map(n=>+n)}function on(t,e,i={}){const{ignore:n=[],capture:s=!0}=i,l=window;if(!l)return()=>{};let o=!0,r=!1;const c=v=>n.some(_=>typeof _=="string"?Array.from(document.querySelectorAll(_)).some(w=>w===v.target||v.composedPath().includes(w)):_&&(v.target===_||v.composedPath().includes(_))),f=v=>{if(!(!t||t===v.target||v.composedPath().includes(t))){if(v.detail===0&&(o=!c(v)),!o){o=!0;return}e(v)}},p=v=>{r||(r=!0,setTimeout(()=>{r=!1},0),f(v))},h=v=>{o=!c(v)&&!!(t&&!v.composedPath().includes(t))};return l.addEventListener("click",p,{passive:!0,capture:s}),l.addEventListener("pointerdown",h,{passive:!0}),()=>{l.removeEventListener("click",p,{capture:s}),l.removeEventListener("pointerdown",h)}}function ln(t){const e=document.createElement("div");return e.appendChild(document.createTextNode(t)),e.innerHTML}function kt(t){return ln(t).replace(/(\/|\\)/g,i=>`${i}<wbr>`)}function an(t,e){if(t.length==0)return null;let i=t[0],n=e(i);for(const s of t){const l=e(s);l>n&&(i=s,n=l)}return i}function cn(t){let e,i;return e=new Ji({}),{c(){we(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function un(t){let e,i;return e=new Qi({}),{c(){we(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function fn(t){let e,i,n,s,l,o,r,c;const f=[un,cn],p=[];function h(m,v){return m[0].viewMode==="call-stack"?0:m[0].viewMode==="timeline"?1:-1}return~(o=h(t))&&(r=p[o]=f[o](t)),{c(){e=d("div"),i=d("div"),n=d("div"),s=I(t[2]),l=b(),r&&r.c(),a(n,"class","title svelte-f96okc"),a(i,"class","box svelte-f96okc"),a(e,"class","view-options svelte-f96okc")},m(m,v){S(m,e,v),u(e,i),u(i,n),u(n,s),u(i,l),~o&&p[o].m(i,null),t[3](i),c=!0},p(m,[v]){(!c||v&4)&&Ae(s,m[2]);let _=o;o=h(m),o!==_&&(r&&(Oe(),B(p[_],1,1,()=>{p[_]=null}),Ve()),~o?(r=p[o],r||(r=p[o]=f[o](m),r.c()),H(r,1),r.m(i,null)):r=null)},i(m){c||(H(r),c=!0)},o(m){B(r),c=!1},d(m){m&&R(e),~o&&p[o].d(),t[3](null)}}}function dn(t,e,i){let n;_e(t,Ke,f=>i(0,n=f));const s=Li();function l(){s("close")}let o;Dt(()=>{if(o)return on(o,l,{ignore:[".js-view-options-button"]})});let r="View options";function c(f){Le[f?"unshift":"push"](()=>{o=f,i(1,o)})}return t.$$.update=()=>{t.$$.dirty&1&&(n.viewMode==="call-stack"?i(2,r="Call stack view options"):n.viewMode==="timeline"&&i(2,r="Timeline view options"))},[n,o,r,c]}class hn extends he{constructor(e){super(),de(this,e,dn,fn,le,{})}}function Ut(t){let e,i;return e=new hn({}),e.$on("close",t[9]),{c(){we(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},p:E,i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function mn(t){let e,i,n,s,l,o,r,c,f=kt(t[0].target_description)+"",p,h,m,v,_,w,C,y,A,P,D,W,F,k=t[0].sampleCount+"",L,g,M,V,X,U,Re,te,ee,K,Me,x,Je,et,ae,G,tt,ie,me,pe,be,ve,Te,it,Ce,J,Ue,Ee,nt;l=new Gi({}),Te=new Wi({});let z=t[1]&&Ut(t);return Ue=wt(t[7][0]),{c(){e=d("div"),i=d("div"),n=d("div"),s=d("div"),we(l.$$.fragment),o=b(),r=d("div"),c=d("div"),p=b(),h=d("div"),m=d("div"),v=d("span"),v.textContent="Recorded:",_=b(),w=d("span"),w.textContent=`${t[3]}`,C=b(),y=d("br"),A=b(),P=d("div"),D=d("span"),D.textContent="Samples:",W=b(),F=d("span"),L=I(k),g=b(),M=d("div"),V=d("span"),V.textContent="CPU utilization:",X=b(),U=d("span"),U.textContent=`${(t[4]*100).toFixed(0)}%`,Re=b(),te=d("div"),ee=d("div"),K=I(`View:
            `),Me=d("label"),x=d("input"),Je=I(`
              Call stack`),et=b(),ae=d("label"),G=d("input"),tt=I(`
              Timeline`),ie=b(),me=d("div"),pe=b(),be=d("div"),ve=d("button"),we(Te.$$.fragment),it=I(`
              View options`),Ce=b(),z&&z.c(),a(s,"class","logo svelte-1u5a81f"),a(c,"class","target-description svelte-1u5a81f"),a(v,"class","metric-label svelte-1u5a81f"),a(w,"class","metric-value svelte-1u5a81f"),a(m,"class","metric date svelte-1u5a81f"),a(y,"class","svelte-1u5a81f"),a(D,"class","metric-label svelte-1u5a81f"),a(F,"class","metric-value svelte-1u5a81f"),a(P,"class","metric svelte-1u5a81f"),a(V,"class","metric-label svelte-1u5a81f"),a(U,"class","metric-value svelte-1u5a81f"),a(M,"class","metric svelte-1u5a81f"),a(h,"class","metrics svelte-1u5a81f"),a(x,"type","radio"),x.__value="call-stack",ce(x,x.__value),a(x,"class","svelte-1u5a81f"),a(Me,"class","svelte-1u5a81f"),a(G,"type","radio"),G.__value="timeline",ce(G,G.__value),a(G,"class","svelte-1u5a81f"),a(ae,"class","svelte-1u5a81f"),a(ee,"class","toggle"),a(me,"class","spacer"),j(me,"flex","1"),a(ve,"class","js-view-options-button svelte-1u5a81f"),a(be,"class","button-container svelte-1u5a81f"),a(te,"class","view-options svelte-1u5a81f"),a(r,"class","layout svelte-1u5a81f"),a(n,"class","row svelte-1u5a81f"),a(i,"class","margins"),a(e,"class","header svelte-1u5a81f"),Ue.p(x,G)},m(O,Z){S(O,e,Z),u(e,i),u(i,n),u(n,s),ue(l,s,null),u(n,o),u(n,r),u(r,c),c.innerHTML=f,u(r,p),u(r,h),u(h,m),u(m,v),u(m,_),u(m,w),u(h,C),u(h,y),u(h,A),u(h,P),u(P,D),u(P,W),u(P,F),u(F,L),u(h,g),u(h,M),u(M,V),u(M,X),u(M,U),u(r,Re),u(r,te),u(te,ee),u(ee,K),u(ee,Me),u(Me,x),x.checked=x.__value===t[2].viewMode,u(Me,Je),u(ee,et),u(ee,ae),u(ae,G),G.checked=G.__value===t[2].viewMode,u(ae,tt),u(te,ie),u(te,me),u(te,pe),u(te,be),u(be,ve),ue(Te,ve,null),u(ve,it),u(be,Ce),z&&z.m(be,null),J=!0,Ee||(nt=[N(x,"change",t[6]),N(G,"change",t[8]),N(ve,"click",_t(gt(t[5])))],Ee=!0)},p(O,[Z]){(!J||Z&1)&&f!==(f=kt(O[0].target_description)+"")&&(c.innerHTML=f),(!J||Z&1)&&k!==(k=O[0].sampleCount+"")&&Ae(L,k),Z&4&&(x.checked=x.__value===O[2].viewMode),Z&4&&(G.checked=G.__value===O[2].viewMode),O[1]?z?(z.p(O,Z),Z&2&&H(z,1)):(z=Ut(O),z.c(),H(z,1),z.m(be,null)):z&&(Oe(),B(z,1,1,()=>{z=null}),Ve())},i(O){J||(H(l.$$.fragment,O),H(Te.$$.fragment,O),H(z),J=!0)},o(O){B(l.$$.fragment,O),B(Te.$$.fragment,O),B(z),J=!1},d(O){O&&R(e),fe(l),fe(Te),z&&z.d(),Ue.r(),Ee=!1,oe(nt)}}}function pn(t,e,i){let n;_e(t,Ke,v=>i(2,n=v));let{session:s}=e;const l=new Date(s.startTime*1e3).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"}),o=s.cpuTime/s.duration;let r=!1;function c(v){i(1,r=!r)}const f=[[]];function p(){n.viewMode=this.__value,Ke.set(n)}function h(){n.viewMode=this.__value,Ke.set(n)}const m=()=>i(1,r=!1);return t.$$set=v=>{"session"in v&&i(0,s=v.session)},[s,r,n,l,o,c,p,f,h,m]}class vn extends he{constructor(e){super(),de(this,e,pn,mn,le,{session:0})}}const gn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWmSURBVHgBtVc7i11VFF5rn3PvPKoLFlqmDGPhaGVpJQoWAZEEGxERFBsDgnY6KFpaWWrQysRGf4BgmSKQFCKWKQMKTqNzz2svv/XY55ybeycTCw+z736cs/f61rdee5hmz/Hx85c66m4QyTEzrdAo4cd6EuuJ2P4wtbmUgfZkCyRoWVcwyMI29ybW47sfhRfXf793+z4X4ZchPEl3F2esElYrbRVaEjQGEKGE3jcUofGwlIEBygoACAa0fmDrdV4AOAg6FV4+W49nUPdlEW4AElGNtqjZ+hqIdI2NAC7KuvAZloyJCR+IukGmF5A6iH/IbEBWLN2NevbBFQ6tCoAF3u7VggYQtQJyFlygOAADI74Jf669QDiWWh6xFRMUgLF6PAGYkcgGgGkBE/x8AiSVaykG0AUxlgm7BY0BUMAQL8R77LM96F98A98kBeu+kAdlgA0MntUGACmOFDQl5sm+Rai6lwpMLtiEgSVGE8wVFBkAB7XcU+rdJOoLSU0x8Aii3ta/0AWqMHjlM6LDPaYDHLSsnRn9pjMny2jBCDSu9H3tDqpCmw4C6lgHqAQmWB05uwwF8RCAQpU7jIbQYCElBsjAlabfqJdnD7lKwzVcIVVOgmKpF2g921pS8/QRvuETmwDEKZdwFHMocYHffYSfBc0opojVIomjx/dY64CkxVktMsgar16/IhbKygANruwWA+YDkURUcNHQaK5ps1XhBwaAzf6M9YzWq3Ac1EKACm80cB8KV6IdPsCR0aQAMBAaUkxXPyU6WDqlypKaSEOtmCCpDyAKFgu1gSecrhdar4n++VsiGUVWDHUpdJkYEPEkEyDc7paHTShXbkuNhqQfaF5wMt16lff69JYFFYT3A8AYgFxku5xtBtw9R7YsEiH85hcYLIsfuO0lfCCHvTtMWxszNRhDebp+LRsTGobFr0zBiO5tBnhWaZgiDwD5gi3Wiw+YcDAwoDfB+MaFq83RsP8M5zSYdFjsBwfh9YAjErbyQLHNVNUsH2Dl2odCh4dE+0vQXjtI9YG2z05zOKvSbdR3eKdtLTbugVKzoOQxC+7KA5NtJPiXEZaH5xDglMrOBMHTWxdWhA/QVqtgEdx3EtVwSkDOxE4GHESpCZzcHLe+4gg3HA7P69jpfvutTA0GTQNNkXAs5UYJVjC593keik/JBohzALjQsXbrJtRksRgntzm7nVX4GnZumtC4D23N4aIAZWdv9LyZv+3IA87AlHY1HQu9+q7Qwb7nAQ01FbQ+g5NBaNOKA2jdD0bg4+UjzCrbqu6IgrLB6aLRF6KWB0ZNUj15QvLCRVa8PNanqiq7pM7kbVXDEvdaipMmHIRfBa2//aYC9WI5vjH6ydLsB1ezpePiK9PhYcoLnjSK5kljNUWqvXppKdVxo4XFhIsJ93gXy/8clxIvt0X7i4XrU8+1D+wGgKPGW/UCzHfew9VsXywVZxbz8GYdKqS4rCTfZ/NZvD8WA/Yxu/aW661F7q+cIbsXVO6EcVf3b0t9SIXFx9N+kwEO3w8QVmhggq+/9xSroVdiv5TZlr0SanL6/KXOK5SaL9b/G4DRdDzONZbPuAjXS4bnfPWBPrJkjhzpYbdR8OeXz62nvBt3HD3z3F/2f0Fyx9O7XL2HAoj7YG33AK8Bag4TrJlOa0DrrVtrj7DsPBtKlgstsZGIcOW+B0wvlMP1EOqcCh1rTldb+/Xcw2woqbaLeh/Vbl7vH/Vgx08TABrehO53ccJKK1ZWP+gjpRqAKdaN8jxLs5r7Bx5TMBm18kjxOOZ0ub/3flUW/nzw4PSJp568CT0vYXq5aGJgslc4o7doPI6dcis2eUq950Ug1DqF9NvQ/uVf79y5v+E1IptedEInNj+iT2L9Nfv9jf7gI/pFdP4D5rfoaYw/Lv+pReVRq/JOEEXOee/PAf7/PP8C3bt510T4rIwAAAAASUVORK5CYII=",zt=rt({}),Wt=rt({});function xt(t){return t>.6?"#FF4159":t>.3?"#F5A623":t>.2?"#D8CB2A":"#7ED321"}function Gt(t,e,i){const n=t.slice();return n[21]=e[i],n}function Yt(t){let e,i,n,s,l,o,r,c,f,p,h,m,v,_,w,C;return{c(){e=d("div"),i=d("div"),n=$("svg"),s=$("path"),l=b(),o=d("div"),r=I(t[5]),c=b(),f=d("div"),p=I(t[4]),h=b(),m=d("div"),m.textContent=`${t[11]}`,v=b(),_=d("div"),a(s,"d","M.937-.016L5.793 4.84.937 9.696z"),a(s,"fill",t[7]),a(s,"fill-rule","evenodd"),a(s,"fill-opacity",".582"),a(n,"width","6"),a(n,"height","10"),a(i,"class","frame-triangle svelte-14yvyii"),ke(i,"rotate",!t[8]),j(i,"visibility",t[0].children.length>0?"visible":"hidden"),a(o,"class","time svelte-14yvyii"),j(o,"color",t[7]),j(o,"font-weight",t[10]<.2?500:600),a(f,"class","name svelte-14yvyii"),a(m,"class","code-position svelte-14yvyii"),a(e,"class","frame-description svelte-14yvyii"),a(e,"role","button"),a(e,"tabindex","0"),ke(e,"application-code",t[0].isApplicationCode),ke(e,"children-visible",!t[8]),j(e,"padding-left",`${t[2]*35}px`),a(_,"class","visual-guide svelte-14yvyii"),j(_,"left",`${t[2]*35+21}px`),j(_,"backgroundColor",t[7])},m(y,A){S(y,e,A),u(e,i),u(i,n),u(n,s),u(e,l),u(e,o),u(o,r),u(e,c),u(e,f),u(f,p),u(e,h),u(e,m),S(y,v,A),S(y,_,A),w||(C=[N(e,"keydown",t[14]),N(e,"click",_t(gt(t[12])))],w=!0)},p(y,A){A&128&&a(s,"fill",y[7]),A&256&&ke(i,"rotate",!y[8]),A&1&&j(i,"visibility",y[0].children.length>0?"visible":"hidden"),A&32&&Ae(r,y[5]),A&128&&j(o,"color",y[7]),A&16&&Ae(p,y[4]),A&1&&ke(e,"application-code",y[0].isApplicationCode),A&256&&ke(e,"children-visible",!y[8]),A&4&&j(e,"padding-left",`${y[2]*35}px`),A&4&&j(_,"left",`${y[2]*35+21}px`),A&128&&j(_,"backgroundColor",y[7])},d(y){y&&(R(e),R(v),R(_)),w=!1,oe(C)}}}function Xt(t){let e,i,n,s,l=t[0].group.frames.length+"",o,r,c,f,p,h;return{c(){e=d("div"),i=d("div"),n=d("div"),n.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',s=b(),o=I(l),r=I(" frames hidden ("),c=I(t[6]),f=I(")"),a(n,"class","group-triangle svelte-14yvyii"),ke(n,"rotate",t[9]),a(i,"class","group-header-button svelte-14yvyii"),a(e,"class","group-header svelte-14yvyii"),a(e,"role","button"),a(e,"tabindex","0"),j(e,"padding-left",`${t[2]*35}px`)},m(m,v){S(m,e,v),u(e,i),u(i,n),u(i,s),u(i,o),u(i,r),u(i,c),u(i,f),p||(h=[N(e,"keydown",t[15]),N(e,"click",_t(gt(t[13])))],p=!0)},p(m,v){v&512&&ke(n,"rotate",m[9]),v&1&&l!==(l=m[0].group.frames.length+"")&&Ae(o,l),v&64&&Ae(c,m[6]),v&4&&j(e,"padding-left",`${m[2]*35}px`)},d(m){m&&R(e),p=!1,oe(h)}}}function Kt(t){let e,i=[],n=new Map,s,l=$t(t[0].children);const o=r=>r[21].uuid;for(let r=0;r<l.length;r+=1){let c=Gt(t,l,r),f=o(c);n.set(f,i[r]=Zt(f,c))}return{c(){e=d("div");for(let r=0;r<i.length;r+=1)i[r].c();a(e,"class","children svelte-14yvyii")},m(r,c){S(r,e,c);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);s=!0},p(r,c){c&15&&(l=$t(r[0].children),Oe(),i=Ni(i,c,o,1,r,l,n,e,$i,Zt,null,Gt),Ve())},i(r){if(!s){for(let c=0;c<l.length;c+=1)H(i[c]);s=!0}},o(r){for(let c=0;c<i.length;c+=1)B(i[c]);s=!1},d(r){r&&R(e);for(let c=0;c<i.length;c+=1)i[c].d()}}}function Zt(t,e){let i,n,s;return n=new Jt({props:{frame:e[21],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:t,first:null,c(){i=Pi(),we(n.$$.fragment),this.first=i},m(l,o){S(l,i,o),ue(n,l,o),s=!0},p(l,o){e=l;const r={};o&1&&(r.frame=e[21]),o&2&&(r.rootFrame=e[1]),o&12&&(r.indent=e[2]+(e[3]?1:0)),n.$set(r)},i(l){s||(H(n.$$.fragment,l),s=!0)},o(l){B(n.$$.fragment,l),s=!1},d(l){l&&R(i),fe(n,l)}}}function _n(t){let e,i,n,s,l=t[3]&&Yt(t),o=t[0].group&&t[0].group.rootFrame==t[0]&&!t[8]&&Xt(t),r=!t[8]&&t[0].children.length>0&&Kt(t);return{c(){e=d("div"),l&&l.c(),i=b(),o&&o.c(),n=b(),r&&r.c(),a(e,"class","frame svelte-14yvyii")},m(c,f){S(c,e,f),l&&l.m(e,null),u(e,i),o&&o.m(e,null),u(e,n),r&&r.m(e,null),s=!0},p(c,[f]){c[3]?l?l.p(c,f):(l=Yt(c),l.c(),l.m(e,i)):l&&(l.d(1),l=null),c[0].group&&c[0].group.rootFrame==c[0]&&!c[8]?o?o.p(c,f):(o=Xt(c),o.c(),o.m(e,n)):o&&(o.d(1),o=null),!c[8]&&c[0].children.length>0?r?(r.p(c,f),f&257&&H(r,1)):(r=Kt(c),r.c(),H(r,1),r.m(e,null)):r&&(Oe(),B(r,1,1,()=>{r=null}),Ve())},i(c){s||(H(r),s=!0)},o(c){B(r),s=!1},d(c){c&&R(e),l&&l.d(),o&&o.d(),r&&r.d()}}}function Qt(){const t='a:not([disabled]), button:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])',e=document.querySelector(".call-stack-view");if(!e)throw new Error("callStackElement not found");var i=Array.prototype.filter.call(e.querySelectorAll(t),function(n){return n.offsetWidth>0||n.offsetHeight>0||n===document.activeElement});return i}function jt(){const t=Qt();var e=t.indexOf(document.activeElement);if(e>-1){var i=t[e+1];i&&i.focus()}}function qt(){const t=Qt();var e=t.indexOf(document.activeElement);if(e>-1){var i=t[e-1];i&&i.focus()}}function wn(t,e,i){var L;let n,s,l,o,r;_e(t,Wt,g=>i(16,l=g)),_e(t,zt,g=>i(17,o=g)),_e(t,q,g=>i(18,r=g));let{frame:c}=e,{rootFrame:f}=e,{indent:p=0}=e,h;const m=c.time/f.time;let v;const _=`${c.filePathShort}:${(L=c.lineNo)==null?void 0:L.toString().padEnd(4," ")}`;let w,C=null;if(c.group){const g=c.group.libraries;g.length<4?C=g.join(", "):C=`${g[0]}, ${g[1]}, ${g[2]}...`}let y;y=xt(m);function A(g){P(c,!s,g.altKey)}function P(g,M,V=!0){if(Wt.update(X=>({...X,[g.uuid]:M})),V)for(const X of g.children)P(X,M,!0),g.group&&g.group.rootFrame==g&&D(g.group.id,!M)}function D(g,M){zt.update(V=>({...V,[g]:M}))}function W(){c.group&&D(c.group.id,!n)}function F(g){let M=!0;g.key==="Enter"||g.key===" "?A(g):g.key==="ArrowLeft"&&!s?P(c,!0,g.altKey):g.key==="ArrowRight"&&s?P(c,!1,g.altKey):g.key==="ArrowUp"?qt():g.key==="ArrowDown"?jt():M=!1,M&&(g.preventDefault(),g.stopPropagation())}function k(g){let M=!0;g.key==="Enter"||g.key===" "?W():g.key==="ArrowLeft"&&c.group?D(c.group.id,!1):g.key==="ArrowRight"&&c.group?D(c.group.id,!0):g.key==="ArrowUp"?qt():g.key==="ArrowDown"?jt():M=!1,M&&(g.preventDefault(),g.stopPropagation())}return t.$$set=g=>{"frame"in g&&i(0,c=g.frame),"rootFrame"in g&&i(1,f=g.rootFrame),"indent"in g&&i(2,p=g.indent)},t.$$.update=()=>{var g,M;if(t.$$.dirty&131073&&(c.group?o[c.group.id??""]||((g=c.group)==null?void 0:g.rootFrame)===c||c.children.filter(V=>!V.group).length>1?i(3,h=!0):i(3,h=!1):i(3,h=!0)),t.$$.dirty&1&&(c.className?i(4,v=`${c.className}.${c.function}`):i(4,v=c.function)),t.$$.dirty&262145)if(r.timeFormat==="absolute")i(5,w=c.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(r.timeFormat==="proportion")i(5,w=`${(m*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");t.$$.dirty&131073&&i(9,n=o[((M=c.group)==null?void 0:M.id)??""]===!0),t.$$.dirty&65537&&i(8,s=l[c.uuid]===!0)},[c,f,p,h,v,w,C,y,s,n,m,_,A,W,F,k,l,o,r]}let Jt=class extends he{constructor(e){super(),de(this,e,wn,_n,le,{frame:0,rootFrame:1,indent:2})}};function ei(t,e,i){let n=t;for(const s of e)if(n=s(n,i),!n)return null;return n}for(var Y=[],Mt=0;Mt<256;++Mt)Y.push((Mt+256).toString(16).slice(1));function bn(t,e=0){return(Y[t[e+0]]+Y[t[e+1]]+Y[t[e+2]]+Y[t[e+3]]+"-"+Y[t[e+4]]+Y[t[e+5]]+"-"+Y[t[e+6]]+Y[t[e+7]]+"-"+Y[t[e+8]]+Y[t[e+9]]+"-"+Y[t[e+10]]+Y[t[e+11]]+Y[t[e+12]]+Y[t[e+13]]+Y[t[e+14]]+Y[t[e+15]]).toLowerCase()}var ot,yn=new Uint8Array(16);function An(){if(!ot&&(ot=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ot))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ot(yn)}var Tn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ti={randomUUID:Tn};function Cn(t,e,i){if(ti.randomUUID&&!e&&!t)return ti.randomUUID();t=t||{};var n=t.random||(t.rng||An)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,bn(n)}const kn="\0",Mn="[await]",Qe="[self]",En=[Mn,Qe,"[out-of-context]","[root]"],Fn="c",Pn="h";class je{constructor(e,i){T(this,"uuid",Cn());T(this,"identifier");T(this,"_identifierParts");T(this,"startTime");T(this,"time",0);T(this,"absorbedTime",0);T(this,"group",null);T(this,"attributes");T(this,"_children",[]);T(this,"parent",null);T(this,"context");var l;this.identifier=e.identifier,this._identifierParts=this.identifier.split(kn),this.startTime=e.startTime??0,this.time=e.time??0,this.attributes=e.attributes??{},this.context=i;let n=this.startTime;const s=(l=e.children)==null?void 0:l.map(o=>(o.startTime===void 0&&(o={...o,startTime:n},n+=o.time??0),n=o.startTime+(o.time??0),new je(o,i)));s&&this.addChildren(s)}cloneDeep(){return new je(this,this.context)}get children(){return this._children}addChild(e,i={}){if(e.removeFromParent(),e.parent=this,i.after){const n=this._children.indexOf(i.after);if(n==-1)throw new Error("After frame not found");this._children.splice(n+1,0,e)}else this._children.push(e)}addChildren(e,i={}){e=e.slice(),i.after?(e.slice().reverse(),e.forEach(s=>this.addChild(s,i))):e.forEach(n=>this.addChild(n,i))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(n=>n.startsWith(e)).map(n=>({data:n.slice(1),time:this.attributes[n]}))}getAttributeValue(e){const i=this.getAttributes(e);if(!i||i.length==0)return null;let n=0;for(let s=0;s<i.length;s++)i[s].time>i[n].time&&(n=s);return i[n].data}get hasTracebackHide(){return this.getAttributeValue(Pn)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return En.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||this.context.sysPrefixes.some(n=>e.startsWith(n))?!1:e.startsWith("<")?e.startsWith("<ipython-input-")?!0:e=="<string>"||e=="<stdin>"?this.parent?this.parent.isApplicationCode:!0:!1:!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue(Fn)??""}get library(){const e=this.filePathShort;return e?/^[\\/.]*([^\\/.]*)/.exec(e)[0]??"":null}}class In{constructor(e){T(this,"id");T(this,"rootFrame");T(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const i=this._frames.indexOf(e);if(i===-1)throw new Error("Frame not found in group.");this._frames.splice(i,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const i of this.frames){let n=!1;for(const s of i.children)if(s.group!=this){n=!0;break}n&&e.push(i)}return e}get libraries(){const e=[];for(const i of this.frames){const n=i.library;n&&(e.includes(n)||e.push(n))}return e}}function lt(t,e){const{replaceWith:i}=e,n=t.parent;if(!n)throw new Error("Cannot delete the root frame");if(i=="children")n.addChildren(t.children,{after:t});else if(i=="self_time")n.addChild(new je({identifier:Qe,time:t.time},n.context),{after:t});else if(i=="nothing")n.absorbedTime+=t.time;else throw new en(i);t.removeFromParent(),Et(t,!0)}function Rn(t,e){if(t.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=t.absorbedTime,e.time+=t.time,Object.entries(t.attributes).forEach(([i,n])=>{e.attributes[i]!==void 0?e.attributes[i]+=n:e.attributes[i]=n}),e.addChildren(t.children),t.removeFromParent(),Et(t,!1)}function Et(t,e){if(e&&t.children&&t.children.forEach(i=>{Et(i,!0)}),t.group){const i=t.group;i.removeFrame(t),i.frames.length===1&&i.removeFrame(i.frames[0])}}function Ft(t,e){if(!t)return null;for(const i of t.children)Ft(i),i.filePath&&i.filePath.includes("<frozen importlib._bootstrap")&&lt(i,{replaceWith:"children"});return t}function Pt(t,e){if(!t)return null;for(const i of t.children)Pt(i),i.hasTracebackHide&&lt(i,{replaceWith:"children"});return t}function ii(t,e){if(!t)return null;const i={};for(const n of t.children.slice())if(i[n.identifier]){const s=i[n.identifier];Rn(n,s)}else i[n.identifier]=n;return t.children.forEach(n=>ii(n)),t._children.sort((n,s)=>s.time-n.time),t}function ni(t,e){if(!t)return null;const i=e.hideRegex,n=e.showRegex;function s(o){const r=o.filePath||"",c=n&&new RegExp(n).test(r),f=i&&new RegExp(i).test(r);return c?!1:f?!0:!o.isApplicationCode}function l(o,r){r.addFrame(o),o.children.forEach(c=>{s(c)&&l(c,r)})}return t.children.forEach(o=>{if(!o.group&&s(o)&&o.children.some(s)){const r=new In(o);l(o,r)}ni(o,e)}),t}function si(t,e,i=!0){if(!t)return null;let n=null;for(const s of t.children)s.identifier===Qe?n?(n.time+=s.time,s.removeFromParent()):n=s:n=null;return i&&t.children.forEach(s=>si(s,e,!0)),t}function ri(t,e){return t?(t.children.length===1&&t.children[0].identifier===Qe&&lt(t.children[0],{replaceWith:"nothing"}),t.children.forEach(i=>ri(i)),t):null}function oi(t,e,i=null){if(!t)return null;i===null&&(i=t.time,i<=0&&(i=1e-44));const n=e.filterThreshold??.01;for(const s of t.children.slice())s.time/i<n&&lt(s,{replaceWith:"nothing"});return t.children.forEach(s=>oi(s,e,i)),t}function li(t,e){if(!t)return null;const i=r=>an(r,c=>c.time),n=r=>{var c;return((c=r.filePath)==null?void 0:c.includes("pyinstrument/__main__.py"))&&r.children.length>0},s=r=>{var c;return r.proportionOfParent>.8&&((c=r.filePath)==null?void 0:c.includes("<string>"))&&r.children.length>0},l=r=>{var c;return r.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(r.filePath??"")||((c=r.filePath)==null?void 0:c.includes("<frozen runpy>")))&&r.children.length>0};let o=t;if(!n(o)||(o=i(o.children),!s(o))||(o=i(o.children),!l(o)))return t;for(;l(o);)o=i(o.children);return o.removeFromParent(),o}function Sn(t){let e,i,n;return i=new Jt({props:{frame:t[2],rootFrame:t[2]}}),{c(){e=d("div"),we(i.$$.fragment),a(e,"class","call-stack-margins svelte-1m7g2ko")},m(s,l){S(s,e,l),ue(i,e,null),n=!0},p(s,l){const o={};l&4&&(o.frame=s[2]),l&4&&(o.rootFrame=s[2]),i.$set(o)},i(s){n||(H(i.$$.fragment,s),n=!0)},o(s){B(i.$$.fragment,s),n=!1},d(s){s&&R(e),fe(i)}}}function Ln(t){let e;return{c(){e=d("div"),e.innerHTML='<div class="error">All frames were filtered out.</div>',a(e,"class","margins")},m(i,n){S(i,e,n)},p:E,i:E,o:E,d(i){i&&R(e)}}}function Hn(t){let e,i,n,s,l;const o=[Ln,Sn],r=[];function c(f,p){return f[2]?1:0}return n=c(t),s=r[n]=o[n](t),{c(){e=d("div"),i=d("div"),s.c(),a(i,"class","scroll-inner svelte-1m7g2ko"),a(e,"class","call-stack-view svelte-1m7g2ko")},m(f,p){S(f,e,p),u(e,i),r[n].m(i,null),t[6](i),t[7](e),l=!0},p(f,[p]){let h=n;n=c(f),n===h?r[n].p(f,p):(Oe(),B(r[h],1,1,()=>{r[h]=null}),Ve(),s=r[n],s?s.p(f,p):(s=r[n]=o[n](f),s.c()),H(s,1),s.m(i,null))},i(f){l||(H(s),l=!0)},o(f){B(s),l=!1},d(f){f&&R(e),r[n].d(),t[6](null),t[7](null)}}}function Dn(t,e,i){let n,{session:s}=e;const l=Nt([q],([h])=>{const m=[h.removeImportlib?Ft:null,h.removeTracebackHide?Pt:null,si,ii,ri,h.removeIrrelevant?oi:null,h.removePyinstrument?li:null,h.collapseMode!=="disabled"?ni:null].filter(_=>_!==null),v={filterThreshold:h.removeIrrelevantThreshold,hideRegex:h.collapseMode=="custom"?h.collapseCustomHide:void 0,showRegex:h.collapseMode=="custom"?h.collapseCustomShow:void 0};return{processors:m,options:v}});_e(t,l,h=>i(5,n=h));let o,r;Dt(()=>{const h=o;if(!h)throw new Error("element not set");let m;return h.addEventListener("scroll",m=()=>{i(1,r.style.minHeight=`${h.scrollTop+h.clientHeight}px`,r)}),m(),()=>{h.removeEventListener("scroll",m)}});let c;function f(h){Le[h?"unshift":"push"](()=>{r=h,i(1,r)})}function p(h){Le[h?"unshift":"push"](()=>{o=h,i(0,o)})}return t.$$set=h=>{"session"in h&&i(4,s=h.session)},t.$$.update=()=>{t.$$.dirty&48&&i(2,c=ei(s.rootFrame.cloneDeep(),n.processors,n.options))},[o,r,c,l,s,n,f,p]}class On extends he{constructor(e){super(),de(this,e,Dn,Hn,le,{session:4})}}class Vn{constructor(e){T(this,"mediaQueryList",null);this.onDevicePixelRatioChanged=e,this._onChange=this._onChange.bind(this),this.createMediaQueryList()}createMediaQueryList(){this.removeMediaQueryList();let e=`(resolution: ${window.devicePixelRatio}dppx)`;this.mediaQueryList=matchMedia(e),this.mediaQueryList.addEventListener("change",this._onChange)}removeMediaQueryList(){var e;(e=this.mediaQueryList)==null||e.removeEventListener("change",this._onChange),this.mediaQueryList=null}_onChange(e){this.onDevicePixelRatioChanged(),this.createMediaQueryList()}destroy(){this.removeMediaQueryList()}}class $n{constructor(e){T(this,"canvas");T(this,"_size_observer");T(this,"_devicePixelRatioObserver");T(this,"drawAnimationRequest",null);this.container=e,getComputedStyle(e).position!="absolute"&&(e.style.position="relative"),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.container.appendChild(this.canvas),this.setCanvasSize=this.setCanvasSize.bind(this),this._size_observer=new ResizeObserver(this.setCanvasSize),this._size_observer.observe(e),this._devicePixelRatioObserver=new Vn(this.setCanvasSize),window.requestAnimationFrame(()=>{this.setCanvasSize()})}destroy(){this._size_observer.disconnect(),this._devicePixelRatioObserver.destroy(),this.canvas.remove(),this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null)}setNeedsRedraw(){this.drawAnimationRequest===null&&(this.drawAnimationRequest=window.requestAnimationFrame(()=>{this.drawAnimationRequest=null,this.canvasViewRedraw()}))}redrawIfNeeded(){this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null,this.canvasViewRedraw())}canvasViewRedraw(){const e=this.canvas.getContext("2d");e&&(e.resetTransform(),e.scale(window.devicePixelRatio,window.devicePixelRatio),this.redraw(e,{width:this.canvas.width/window.devicePixelRatio,height:this.canvas.height/window.devicePixelRatio}))}get width(){return this.canvas.width/window.devicePixelRatio}get height(){return this.canvas.height/window.devicePixelRatio}setCanvasSize(){const e=window.devicePixelRatio;this.canvas.height=this.container.clientHeight*e,this.canvas.width=this.container.clientWidth*e,this.canvasViewRedraw()}}function Nn(t){let e,i=t[2]=="self"?"self":"time",n,s,l,o=t[3](t[0].time)+"";return{c(){e=d("div"),n=I(i),s=b(),l=d("div"),a(e,"class","label svelte-ci3g2p"),a(l,"class","time-val svelte-ci3g2p")},m(r,c){S(r,e,c),u(e,n),S(r,s,c),S(r,l,c),l.innerHTML=o},p(r,c){c&4&&i!==(i=r[2]=="self"?"self":"time")&&Ae(n,i),c&1&&o!==(o=r[3](r[0].time)+"")&&(l.innerHTML=o)},d(r){r&&(R(e),R(s),R(l))}}}function Bn(t){let e,i,n,s,l=t[3](t[0].time)+"",o,r=t[0].selfTime/t[0].time>.001&&ai(t);return{c(){e=d("div"),e.textContent="time",i=b(),n=d("div"),s=d("div"),o=b(),r&&r.c(),a(e,"class","label svelte-ci3g2p"),a(s,"class","time-val svelte-ci3g2p"),a(n,"class","time-row svelte-ci3g2p")},m(c,f){S(c,e,f),S(c,i,f),S(c,n,f),u(n,s),s.innerHTML=l,u(n,o),r&&r.m(n,null)},p(c,f){f&1&&l!==(l=c[3](c[0].time)+"")&&(s.innerHTML=l),c[0].selfTime/c[0].time>.001?r?r.p(c,f):(r=ai(c),r.c(),r.m(n,null)):r&&(r.d(1),r=null)},d(c){c&&(R(e),R(i),R(n)),r&&r.d()}}}function ai(t){let e,i,n,s=t[3](t[0].selfTime)+"";return{c(){e=d("div"),e.textContent="self",i=b(),n=d("div"),a(e,"class","label svelte-ci3g2p"),a(n,"class","time-val svelte-ci3g2p")},m(l,o){S(l,e,o),S(l,i,o),S(l,n,o),n.innerHTML=s},p(l,o){o&1&&s!==(s=l[3](l[0].selfTime)+"")&&(n.innerHTML=s)},d(l){l&&(R(e),R(i),R(n))}}}function Un(t){let e,i,n=t[0].name+"",s,l,o,r,c,f,p,h,m,v;function _(y,A){return y[2]=="both"?Bn:Nn}let w=_(t),C=w(t);return{c(){e=d("div"),i=d("div"),s=I(n),l=b(),C.c(),o=b(),r=d("div"),r.textContent="loc",c=b(),f=d("div"),p=d("div"),m=b(),v=new Si(!1),a(i,"class","name svelte-ci3g2p"),a(r,"class","label svelte-ci3g2p"),a(p,"class","location-color svelte-ci3g2p"),a(p,"style",h=`background: ${t[0].locationColor}`),v.a=null,a(f,"class","location-row"),a(e,"class","timeline-canvas-view-tooltip svelte-ci3g2p"),a(e,"style",`font: ${ui}; max-width: ${Wn}px;`)},m(y,A){S(y,e,A),u(e,i),u(i,s),u(e,l),C.m(e,null),u(e,o),u(e,r),u(e,c),u(e,f),u(f,p),u(f,m),v.m(t[1],f)},p(y,[A]){A&1&&n!==(n=y[0].name+"")&&Ae(s,n),w===(w=_(y))&&C?C.p(y,A):(C.d(1),C=w(y),C&&(C.c(),C.m(e,o))),A&1&&h!==(h=`background: ${y[0].locationColor}`)&&a(p,"style",h),A&2&&v.p(y[1])},i:E,o:E,d(y){y&&R(e),C.d()}}}function ci(t){return t.selfTime==t.time?"self":t.selfTime/t.time>.001?"both":"time"}function zn(t,e){t.font=ui;const i=ci(e)=="both"?140:70,n=t.measureText(e.name).width,s=t.measureText(e.location).width+46;let o=Math.max(i,n,s)+20;return o>310&&(o=310),o}const Wn=310,ui="400 13px Source Sans Pro, sans-serif";function xn(t,e,i){let{f:n}=e,s,l;function o(r){return`<span style="color: ${xt(r/n.totalTime)}">${r.toFixed(3)}</span>`}return t.$$set=r=>{"f"in r&&i(0,n=r.f)},t.$$.update=()=>{t.$$.dirty&1&&i(1,s=kt(n.location)),t.$$.dirty&1&&i(2,l=ci(n))},[n,s,l,o]}class Gn extends he{constructor(e){super(),de(this,e,xn,Un,le,{f:0})}}const Yn="#212325",fi=18,Xn=17,qe=28,at=17,di=29,Kn=["#3475BA","#318DBC","#47A298","#8AAE5D","#C1A731","#C07210","#B84210","#B53134","#9A3586","#4958B5","#3475BA"].map(rn);class Zn extends $n{constructor(i){super(i);T(this,"zoom",1);T(this,"startT",0);T(this,"yOffset",0);T(this,"frames",[]);T(this,"isZoomedIn",!1);T(this,"tooltipContainer");T(this,"tooltipComponent",null);T(this,"_rootFrame",null);T(this,"maxDepth",0);T(this,"_frameMaxT");T(this,"lastDrawWidth",0);T(this,"lastDrawHeight",0);T(this,"mouseLocation",null);T(this,"mouseDownLocation",null);T(this,"_libraryOrder",null);T(this,"_colors",[]);this.onWheel=this.onWheel.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.windowMouseUp=this.windowMouseUp.bind(this),this.canvas.addEventListener("wheel",this.onWheel),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseleave",this.onMouseLeave),this.canvas.addEventListener("mousedown",this.onMouseDown),this.tooltipContainer=document.createElement("div"),this.tooltipContainer.style.position="absolute",this.tooltipContainer.style.pointerEvents="none",this.container.appendChild(this.tooltipContainer)}destroy(){super.destroy(),this.canvas.removeEventListener("wheel",this.onWheel)}setRootFrame(i){this._rootFrame=i,this.frames=[],this._frameMaxT=void 0,this.maxDepth=0,this._collectFrames(i,0),this.fitContents(),this.setNeedsRedraw()}_collectFrames(i,n){this.frames.push({frame:i,depth:n,isApplicationCode:i.isApplicationCode,library:i.library,className:i.className,filePathShort:i.filePathShort}),this.maxDepth=Math.max(this.maxDepth,n);for(const s of i.children)s.identifier!==Qe&&this._collectFrames(s,n+1)}get frameMaxT(){return this._frameMaxT===void 0&&(this._frameMaxT=this.frames.reduce((i,n)=>Math.max(i,n.frame.startTime+n.frame.time),0)),this._frameMaxT}get maxYOffset(){return Math.max(0,(this.maxDepth+1)*fi+at*2+di-this.height)}get minZoom(){return(this.width-2*qe)/this.frameMaxT}get maxZoom(){return 6666666666666667e-8}fitContents(){this.startT=0,this.zoom=this.minZoom,this.isZoomedIn=!1}clampViewport(){this.zoom<this.minZoom?(this.zoom=this.minZoom,this.isZoomedIn=!1):this.isZoomedIn=!0,this.zoom>this.maxZoom&&(this.zoom=this.maxZoom),this.startT<0&&(this.startT=0);const i=this.frameMaxT-(this.width-2*qe)/this.zoom;this.startT>i&&(this.startT=i),this.yOffset<0&&(this.yOffset=0),this.yOffset>this.maxYOffset&&(this.yOffset=this.maxYOffset)}redraw(i,n){var f,p;const{width:s,height:l}=n;(s!==this.lastDrawWidth||l!==this.lastDrawHeight)&&(this.isZoomedIn?this.clampViewport():this.fitContents()),this.lastDrawWidth=s,this.lastDrawHeight=l,i.fillStyle=Yn,i.fillRect(0,0,s,l),this.drawAxes(i);for(const h of this.frames)this.drawFrame(i,h);i.globalAlpha=1;const o=this.maxYOffset>0||this.isZoomedIn,r=!!this.mouseDownLocation;this.canvas.style.cursor=r&&o?"grabbing":"initial",i.fillStyle="red",i.font='23px "Source Sans Pro", sans-serif';let c;r||(c=this.hitTest(((f=this.mouseLocation)==null?void 0:f.x)??0,((p=this.mouseLocation)==null?void 0:p.y)??0)),this.updateTooltip(i,c)}drawAxes(i){const n=this.width/this.zoom;if(n==0)return;const s=Math.log10(n);let l=Math.ceil(s)+2;l<0&&(l=0);const o=Math.ceil(s)-3,r=c=>Ne(c,{from:[s,s-3],to:[.71,0]});for(let c=o;c<l;c++){let f=r(c);f=Math.max(0,Math.min(1,f)),f=Math.pow(f,2),this.drawAxis(i,Math.pow(10,c),f)}this.drawAxis(i,Math.pow(10,l),r(l),!0)}drawAxis(i,n,s,l=!1){i.fillStyle="white";const o=Math.floor(this.startT/n)*n,r=this.startT+this.width/this.zoom,c=Math.max(0,Math.ceil(-Math.log10(n)));for(let f=o;f<r;f+=n){const p=this.xForT(f);if(Math.round(f/n)%10===0&&!l)continue;i.globalAlpha=s;const m=at-this.yOffset;i.fillRect(p,m,1,this.height-m);const v=Ne(s,{from:[.12,.25],to:[0,.5],clamp:!0});if(v>.01){i.globalAlpha=v,i.font='13px "Source Sans Pro", sans-serif';let _=f.toFixed(c);_=="0"&&(_="0s");let w=m+10;i.fillText(_,p+3,w);let C=this.height+at+10-this.yOffset;C<this.height-3&&(C=this.height-3),i.fillText(_,p+3,C)}i.globalAlpha=1}}drawFrame(i,n){const{x:s,y:l,w:o,h:r}=this.frameDims(n);if(!(s+o<0||s>this.width)){if(i.fillStyle=this.colorForFrame(n),i.globalAlpha=n.isApplicationCode?1:.5,o<2){i.fillRect(s,l,o,r);return}if(i.save(),i.beginPath(),i.rect(s,l,o,r),i.fill(),i.clip(),o>2){i.font='13px "Source Sans Pro", sans-serif',i.fillStyle="white";let f=this.frameName(n),p=s;p<0&&(p=0);const h=Math.floor(o/3.3);f.length>h&&(f=f.substring(0,h)),i.fillText(f,p+2,l+13)}i.restore()}}frameDims(i){const n=i.depth*fi+at+di-this.yOffset,s=Xn;let l=this.xForT(i.frame.startTime),r=this.xForT(i.frame.startTime+i.frame.time)-l;return r<1&&(r=1),r>1&&(r-=Ne(r,{from:[1,3],to:[0,1],clamp:!0})),{x:l,y:n,w:r,h:s}}xForT(i){return(i-this.startT)*this.zoom+qe}tForX(i){return(i-qe)/this.zoom+this.startT}frameName(i){let n;return i.className?n=`${i.className}.${i.frame.function}`:i.frame.function=="<module>"?n=i.filePathShort??i.frame.filePath??"":n=i.frame.function,n}frameSelfTime(i){let n=i.frame.time;const s=i.frame.children.filter(l=>!l.isSynthetic);for(const l of s)n-=l.time;return n}hitTest(i,n){for(const s of this.frames){const{x:l,y:o,w:r,h:c}=this.frameDims(s);if(i>=l&&i<=l+r&&n>=o&&n<=o+c)return s}return null}onWheel(i){const n=i.ctrlKey||i.metaKey,s=n?.01:.0023,l=this.tForX(i.offsetX);this.zoom*=1-i.deltaY*s,this.clampViewport(),this.startT=l-(i.offsetX-qe)/this.zoom,n||(this.startT+=i.deltaX/this.zoom),this.clampViewport(),this.setNeedsRedraw(),i.preventDefault()}onMouseMove(i){const n={x:i.offsetX,y:i.offsetY},s=this.mouseLocation;if(this.mouseLocation=n,s&&this.mouseDownLocation){const l={x:n.x-s.x,y:n.y-s.y};this.startT-=l.x/this.zoom,this.yOffset-=l.y,this.clampViewport()}this.setNeedsRedraw()}onMouseLeave(i){this.mouseLocation=null,this.setNeedsRedraw()}onMouseDown(i){(i.button===0||i.button===1)&&(this.mouseDownLocation={x:i.offsetX,y:i.offsetY},window.addEventListener("mouseup",this.windowMouseUp),this.setNeedsRedraw())}windowMouseUp(i){window.removeEventListener("mouseup",this.windowMouseUp),this.mouseDownLocation=null,this.setNeedsRedraw()}_assignLibraryOrder(){const i={};for(const s of this.frames){const o=s.frame.library??"";i[o]=(i[o]||0)+s.frame.time}const n=Object.keys(i);n.sort((s,l)=>i[l]-i[s]),this._libraryOrder=n}colorForLibraryIndex(i){if(this._colors[i]!==void 0)return this._colors[i];const n=Math.pow(2,Math.ceil(Math.log2(i+1))),l=(2*i-n+1)/n,o=tn(Kn,l);return this._colors[i]=o,o}libraryIndexForFrame(i){this._libraryOrder||this._assignLibraryOrder();const n=i.library||"";let s=this._libraryOrder.indexOf(n);return s===-1&&(s=this._libraryOrder.length,this._libraryOrder.push(n)),s}colorForFrame(i){const n=this.libraryIndexForFrame(i);return this.colorForLibraryIndex(n)}updateTooltip(i,n){var s;if(n){const l={name:this.frameName(n),time:n.frame.time,selfTime:this.frameSelfTime(n),totalTime:((s=this._rootFrame)==null?void 0:s.time)??1e-12,location:`${n.filePathShort}:${n.frame.lineNo}`,locationColor:this.colorForFrame(n)};if(this.tooltipComponent?this.tooltipComponent.$set({f:l}):this.tooltipComponent=new Gn({target:this.tooltipContainer,props:{f:l}}),this.mouseLocation){const o={x:this.mouseLocation.x+12,y:this.mouseLocation.y+12},r=zn(i,l),c=this.width-10-r;o.x>c&&(o.x=c);const p=this.height-10-60;o.y>p&&(o.y=p),this.tooltipContainer.style.left=`${o.x}px`,this.tooltipContainer.style.top=`${o.y}px`}}n||this.tooltipComponent&&(this.tooltipComponent.$destroy(),this.tooltipComponent=null)}}function Qn(t){let e;return{c(){e=d("div"),e.innerHTML="",a(e,"class","timeline svelte-p2tt1k")},m(i,n){S(i,e,n),t[6](e)},p:E,i:E,o:E,d(i){i&&R(e),t[6](null)}}}function jn(t,e,i){let n,{session:s}=e;const l=Nt([Ze],([p])=>({processors:[p.removeImportlib?Ft:null,p.removeTracebackHide?Pt:null,p.removePyinstrument?li:null].filter(v=>v!==null),options:{}}));_e(t,l,p=>i(5,n=p));let o,r=null,c=null;function f(p){Le[p?"unshift":"push"](()=>{r=p,i(0,r)})}return t.$$set=p=>{"session"in p&&i(2,s=p.session)},t.$$.update=()=>{t.$$.dirty&36&&i(3,o=ei(s.rootFrame.cloneDeep(),n.processors,n.options)),t.$$.dirty&1&&r&&i(4,c=new Zn(r)),t.$$.dirty&24&&o&&c&&c.setRootFrame(o)},[r,l,s,o,c,n,f]}class qn extends he{constructor(e){super(),de(this,e,jn,Qn,le,{session:2})}}function Jn(t){let e,i,n=t[1].viewMode+"",s;return{c(){e=d("div"),i=I("Unknown view mode: "),s=I(n),a(e,"class","error")},m(l,o){S(l,e,o),u(e,i),u(e,s)},p(l,o){o&2&&n!==(n=l[1].viewMode+"")&&Ae(s,n)},i:E,o:E,d(l){l&&R(e)}}}function es(t){let e,i;return e=new qn({props:{session:t[0]}}),{c(){we(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},p(n,s){const l={};s&1&&(l.session=n[0]),e.$set(l)},i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function ts(t){let e,i;return e=new On({props:{session:t[0]}}),{c(){we(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},p(n,s){const l={};s&1&&(l.session=n[0]),e.$set(l)},i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function is(t){let e;return{c(){e=d("div"),e.innerHTML='<div class="spacer" style="height: 20px;"></div> <div class="error">No samples recorded.</div>',a(e,"class","margins")},m(i,n){S(i,e,n)},p:E,i:E,o:E,d(i){i&&R(e)}}}function ns(t){let e,i,n,s,l,o,r,c;n=new vn({props:{session:t[0]}});const f=[is,ts,es,Jn],p=[];function h(m,v){return m[0].rootFrame?m[1].viewMode==="call-stack"?1:m[1].viewMode==="timeline"?2:3:0}return o=h(t),r=p[o]=f[o](t),{c(){e=d("div"),i=d("div"),we(n.$$.fragment),s=b(),l=d("div"),r.c(),a(i,"class","header"),a(l,"class","body svelte-15bv5h8"),a(e,"class","app svelte-15bv5h8")},m(m,v){S(m,e,v),u(e,i),ue(n,i,null),u(e,s),u(e,l),p[o].m(l,null),c=!0},p(m,[v]){const _={};v&1&&(_.session=m[0]),n.$set(_);let w=o;o=h(m),o===w?p[o].p(m,v):(Oe(),B(p[w],1,1,()=>{p[w]=null}),Ve(),r=p[o],r?r.p(m,v):(r=p[o]=f[o](m),r.c()),H(r,1),r.m(l,null))},i(m){c||(H(n.$$.fragment,m),H(r),c=!0)},o(m){B(n.$$.fragment,m),B(r),c=!1},d(m){m&&R(e),fe(n),p[o].d()}}}function ss(t,e,i){let n;_e(t,Ke,h=>i(1,n=h));let{session:s}=e;const l=document.createElement("link");l.rel="shortcut icon",l.href=gn,document.head.appendChild(l);const o=document.createElement("link");o.rel="preload",o.as="style",o.onload=()=>{o.rel="stylesheet"},o.href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600|Source+Sans+Pro:400,600&display=swap",document.head.appendChild(o);const r=s.rootFrame,c=r==null?void 0:r.time.toLocaleString(void 0,{maximumSignificantDigits:3});let f,p;return(p=/[^\s/]+(:\d+)?$/.exec(s.target_description))?f=p[0]:f=s.target_description,document.title=`${c}s - ${f} - pyinstrument`,t.$$set=h=>{"session"in h&&i(0,s=h.session)},[s,n]}class rs extends he{constructor(e){super(),de(this,e,ss,ns,le,{session:0})}}class os{constructor(e){T(this,"startTime");T(this,"duration");T(this,"sampleCount");T(this,"target_description");T(this,"cpuTime");T(this,"rootFrame");T(this,"sysPath");T(this,"sysPrefixes");T(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.target_description=e.session.target_description,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.sysPrefixes=e.session.sys_prefixes,this.rootFrame=new je(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let i=e;if(Be(e).length>1)for(const s of this.sysPath){const l=ls(e,s);Be(l).length<Be(i).length&&(i=l)}return this._shortenPathCache[e]=i,i}}function Be(t){return t.split(/[/\\]/)}function hi(t){const e=Be(t);return e.length>0&&e[0].endsWith(":")?e[0]:null}function ls(t,e){if(hi(t)!=hi(e))return t;const i=Be(t),n=Be(e);let s=0;for(;s<i.length&&s<n.length&&i[s]==n[s];)s++;return n.slice(s).map(o=>"..").concat(i.slice(s)).join("/")}return{render(t,e){const i=new os(e);return new rs({target:t,props:{session:i}})}}}();
