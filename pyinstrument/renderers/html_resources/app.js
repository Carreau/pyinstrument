var pyinstrumentHTMLRenderer=function(){"use strict";var Xi=Object.defineProperty;var Ji=(y,X,pe)=>X in y?Xi(y,X,{enumerable:!0,configurable:!0,writable:!0,value:pe}):y[X]=pe;var b=(y,X,pe)=>Ji(y,typeof X!="symbol"?X+"":X,pe);function y(){}function X(i){return i()}function pe(){return Object.create(null)}function re(i){i.forEach(X)}function ze(i){return typeof i=="function"}function K(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function It(i){return Object.keys(i).length===0}function nt(i,...e){if(i==null){for(const n of e)n(void 0);return y}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ae(i,e,t){i.$$.on_destroy.push(nt(e,t))}function f(i,e){i.appendChild(e)}function L(i,e,t){i.insertBefore(e,t||null)}function V(i){i.parentNode&&i.parentNode.removeChild(i)}function v(i){return document.createElement(i)}function O(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function S(i){return document.createTextNode(i)}function E(){return S(" ")}function $t(){return S("")}function J(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function We(i){return function(e){return e.preventDefault(),i.call(this,e)}}function Ue(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function a(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function st(i){let e;return{p(...t){e=t,e.forEach(n=>i.push(n))},r(){e.forEach(t=>i.splice(i.indexOf(t),1))}}}function Vt(i){return Array.from(i.childNodes)}function ce(i,e){e=""+e,i.data!==e&&(i.data=e)}function oe(i,e){i.value=e??""}function U(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,"")}function ue(i,e,t){i.classList.toggle(e,!!t)}function Ot(i,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(i,{detail:e,bubbles:t,cancelable:n})}let Re;function Se(i){Re=i}function Ge(){if(!Re)throw new Error("Function called outside component initialization");return Re}function rt(i){Ge().$$.on_mount.push(i)}function Dt(i){Ge().$$.on_destroy.push(i)}function Lt(){const i=Ge();return(e,t,{cancelable:n=!1}={})=>{const s=i.$$.callbacks[e];if(s){const r=Ot(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(i,r)}),!r.defaultPrevented}return!0}}const _e=[],De=[];let we=[];const ot=[],Ht=Promise.resolve();let je=!1;function Bt(){je||(je=!0,Ht.then(lt))}function xe(i){we.push(i)}const Qe=new Set;let be=0;function lt(){if(be!==0)return;const i=Re;do{try{for(;be<_e.length;){const e=_e[be];be++,Se(e),Nt(e.$$)}}catch(e){throw _e.length=0,be=0,e}for(Se(null),_e.length=0,be=0;De.length;)De.pop()();for(let e=0;e<we.length;e+=1){const t=we[e];Qe.has(t)||(Qe.add(t),t())}we.length=0}while(_e.length);for(;ot.length;)ot.pop()();je=!1,Qe.clear(),Se(i)}function Nt(i){if(i.fragment!==null){i.update(),re(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(xe)}}function zt(i){const e=[],t=[];we.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),we=e}const Le=new Set;let me;function ye(){me={r:0,c:[],p:me}}function Ae(){me.r||re(me.c),me=me.p}function P(i,e){i&&i.i&&(Le.delete(i),i.i(e))}function I(i,e,t,n){if(i&&i.o){if(Le.has(i))return;Le.add(i),me.c.push(()=>{Le.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function at(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Wt(i,e){I(i,1,1,()=>{e.delete(i.key)})}function Ut(i,e,t,n,s,r,o,l,c,u,d,p){let h=i.length,m=r.length,_=h;const w={};for(;_--;)w[i[_].key]=_;const A=[],k=new Map,H=new Map,N=[];for(_=m;_--;){const g=p(s,r,_),T=t(g);let C=o.get(T);C?N.push(()=>C.p(g,e)):(C=u(T,g),C.c()),k.set(T,A[_]=C),T in w&&H.set(T,Math.abs(_-w[T]))}const $=new Set,q=new Set;function F(g){P(g,1),g.m(l,d),o.set(g.key,g),d=g.first,m--}for(;h&&m;){const g=A[m-1],T=i[h-1],C=g.key,R=T.key;g===T?(d=g.first,h--,m--):k.has(R)?!o.has(C)||$.has(C)?F(g):q.has(R)?h--:H.get(C)>H.get(R)?(q.add(C),F(g)):($.add(R),h--):(c(T,o),h--)}for(;h--;){const g=i[h];k.has(g.key)||c(g,o)}for(;m;)F(A[m-1]);return re(N),A}function ee(i){i&&i.c()}function Z(i,e,t){const{fragment:n,after_update:s}=i.$$;n&&n.m(e,t),xe(()=>{const r=i.$$.on_mount.map(X).filter(ze);i.$$.on_destroy?i.$$.on_destroy.push(...r):re(r),i.$$.on_mount=[]}),s.forEach(xe)}function Y(i,e){const t=i.$$;t.fragment!==null&&(zt(t.after_update),re(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Gt(i,e){i.$$.dirty[0]===-1&&(_e.push(i),Bt(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function te(i,e,t,n,s,r,o=null,l=[-1]){const c=Re;Se(i);const u=i.$$={fragment:null,ctx:[],props:r,update:y,not_equal:s,bound:pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:pe(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let d=!1;if(u.ctx=t?t(i,e.props||{},(p,h,...m)=>{const _=m.length?m[0]:h;return u.ctx&&s(u.ctx[p],u.ctx[p]=_)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](_),d&&Gt(i,p)),h}):[],u.update(),d=!0,re(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const p=Vt(e.target);u.fragment&&u.fragment.l(p),p.forEach(V)}else u.fragment&&u.fragment.c();e.intro&&P(i.$$.fragment),Z(i,e.target,e.anchor),lt()}Se(c)}class ie{constructor(){b(this,"$$");b(this,"$$set")}$destroy(){Y(this,1),this.$destroy=y}$on(e,t){if(!ze(t))return y;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!It(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const jt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(jt);function xt(i){let e,t;return{c(){e=O("svg"),t=O("path"),a(t,"fill-rule","evenodd"),a(t,"clip-rule","evenodd"),a(t,"d","M5.11634 0.889422C4.86506 -0.296474 3.17237 -0.296474 2.92109 0.889422C2.78291 1.54158 2.10994 1.93011 1.47607 1.72371C0.323418 1.34837 -0.522932 2.81429 0.378448 3.62484C0.87414 4.07059 0.87414 4.84767 0.378448 5.29341C-0.522931 6.10397 0.323418 7.56989 1.47607 7.19455C2.10994 6.98814 2.78291 7.37668 2.92109 8.02883C3.17237 9.21473 4.86506 9.21473 5.11634 8.02883C5.25452 7.37668 5.92749 6.98814 6.56136 7.19455C7.71401 7.56989 8.56036 6.10397 7.65898 5.29341C7.16329 4.84767 7.16329 4.07059 7.65898 3.62484C8.56036 2.81429 7.71401 1.34837 6.56136 1.72371C5.92749 1.93011 5.25452 1.54158 5.11634 0.889422ZM4.01883 6.33408C5.05436 6.33408 5.89383 5.49462 5.89383 4.45908C5.89383 3.42355 5.05436 2.58408 4.01883 2.58408C2.98329 2.58408 2.14383 3.42355 2.14383 4.45908C2.14383 5.49462 2.98329 6.33408 4.01883 6.33408Z"),a(t,"fill","currentColor"),a(e,"width","9"),a(e,"height","9"),a(e,"viewBox","0 0 9 9"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(n,s){L(n,e,s),f(e,t)},p:y,i:y,o:y,d(n){n&&V(e)}}}class Qt extends ie{constructor(e){super(),te(this,e,null,xt,K,{})}}function qt(i){let e,t,n,s,r,o,l,c,u,d,p,h,m,_,w,A,k;return{c(){e=O("svg"),t=O("g"),n=O("path"),s=O("path"),r=O("defs"),o=O("filter"),l=O("feFlood"),c=O("feBlend"),u=O("feGaussianBlur"),d=O("linearGradient"),p=O("stop"),h=O("stop"),m=O("stop"),_=O("linearGradient"),w=O("stop"),A=O("stop"),k=O("stop"),a(n,"fill-rule","evenodd"),a(n,"clip-rule","evenodd"),a(n,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(n,"fill","url(#paint0_linear_67_262)"),a(t,"opacity","0.5"),a(t,"filter","url(#filter0_f_67_262)"),a(s,"fill-rule","evenodd"),a(s,"clip-rule","evenodd"),a(s,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(s,"fill","url(#paint1_linear_67_262)"),a(l,"flood-opacity","0"),a(l,"result","BackgroundImageFix"),a(c,"mode","normal"),a(c,"in","SourceGraphic"),a(c,"in2","BackgroundImageFix"),a(c,"result","shape"),a(u,"stdDeviation","3.39785"),a(u,"result","effect1_foregroundBlur_67_262"),a(o,"id","filter0_f_67_262"),a(o,"x","3.2043"),a(o,"y","2.2043"),a(o,"width","36.0914"),a(o,"height","41.0914"),a(o,"filterUnits","userSpaceOnUse"),a(o,"color-interpolation-filters","sRGB"),a(p,"stop-color","#FFAA00"),a(h,"offset","0.514478"),a(h,"stop-color","#FFEB00"),a(m,"offset","1"),a(m,"stop-color","#98FF05"),a(d,"id","paint0_linear_67_262"),a(d,"x1","7.3769"),a(d,"y1","18.4566"),a(d,"x2","20.6583"),a(d,"y2","33.1038"),a(d,"gradientUnits","userSpaceOnUse"),a(w,"stop-color","#FFC834"),a(A,"offset","0.514478"),a(A,"stop-color","#FAF534"),a(k,"offset","1"),a(k,"stop-color","#B8FF38"),a(_,"id","paint1_linear_67_262"),a(_,"x1","7.3769"),a(_,"y1","18.4566"),a(_,"x2","20.6583"),a(_,"y2","33.1038"),a(_,"gradientUnits","userSpaceOnUse"),a(e,"width","44"),a(e,"height","44"),a(e,"viewBox","0 0 44 44"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(H,N){L(H,e,N),f(e,t),f(t,n),f(e,s),f(e,r),f(r,o),f(o,l),f(o,c),f(o,u),f(r,d),f(d,p),f(d,h),f(d,m),f(r,_),f(_,w),f(_,A),f(_,k)},p:y,i:y,o:y,d(H){H&&V(e)}}}class Kt extends ie{constructor(e){super(),te(this,e,null,qt,K,{})}}const Ce=[];function Zt(i,e){return{subscribe:He(i,e).subscribe}}function He(i,e=y){let t;const n=new Set;function s(l){if(K(i,l)&&(i=l,t)){const c=!Ce.length;for(const u of n)u[1](),Ce.push(u,i);if(c){for(let u=0;u<Ce.length;u+=2)Ce[u][0](Ce[u+1]);Ce.length=0}}}function r(l){s(l(i))}function o(l,c=y){const u=[l,c];return n.add(u),n.size===1&&(t=e(s,r)||y),l(i),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:s,update:r,subscribe:o}}function Yt(i,e,t){const n=!Array.isArray(i),s=n?[i]:i;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return Zt(t,(o,l)=>{let c=!1;const u=[];let d=0,p=y;const h=()=>{if(d)return;p();const _=e(n?u[0]:u,o,l);r?o(_):p=ze(_)?_:y},m=s.map((_,w)=>nt(_,A=>{u[w]=A,d&=~(1<<w),c&&h()},()=>{d|=1<<w}));return c=!0,h(),function(){re(m),p(),c=!1}})}var qe={local:{},session:{}};function Xt(i){return i==="local"?localStorage:sessionStorage}function Ke(i,e,t){var n,s,r,o,l,c,u,d;t!=null&&t.onError&&console.warn("onError has been deprecated. Please use onWriteError instead");const p=(n=t==null?void 0:t.serializer)!=null?n:JSON,h=(s=t==null?void 0:t.storage)!=null?s:"local",m=(r=t==null?void 0:t.syncTabs)!=null?r:!0,_=(l=(o=t==null?void 0:t.onWriteError)!=null?o:t==null?void 0:t.onError)!=null?l:F=>console.error(`Error when writing value from persisted store "${i}" to ${h}`,F),w=(c=t==null?void 0:t.onParseError)!=null?c:(F,g)=>console.error(`Error when parsing ${F?'"'+F+'"':"value"} from persisted store "${i}"`,g),A=(u=t==null?void 0:t.beforeRead)!=null?u:F=>F,k=(d=t==null?void 0:t.beforeWrite)!=null?d:F=>F,H=typeof window<"u"&&typeof document<"u",N=H?Xt(h):null;function $(F,g){const T=k(g);try{N==null||N.setItem(F,p.stringify(T))}catch(C){_(C)}}function q(){function F(R){try{return p.parse(R)}catch(B){w(R,B)}}const g=N==null?void 0:N.getItem(i);if(g==null)return e;const T=F(g);return T==null?e:A(T)}if(!qe[h][i]){const F=q(),g=He(F,R=>{if(H&&h=="local"&&m){const B=x=>{if(x.key===i&&x.newValue){let G;try{G=p.parse(x.newValue)}catch(ge){w(x.newValue,ge);return}const le=A(G);R(le)}};return window.addEventListener("storage",B),()=>window.removeEventListener("storage",B)}}),{subscribe:T,set:C}=g;qe[h][i]={set(R){C(R),$(i,R)},update(R){return g.update(B=>{const x=R(B);return $(i,x),x})},reset(){this.set(e)},subscribe:T}}return qe[h][i]}function ct(){return{collapseMode:"non-application",collapseCustomHide:"",collapseCustomShow:"",hideImportlib:!0,hideTracebackHide:!0,hidePyinstrument:!0,hideIrrelevant:!0,hideIrrelevantThreshold:.001,timeFormat:"absolute"}}const fe=Ke("pyinstrument:viewOptionsCallStack",ct(),{syncTabs:!0,beforeRead(i){return{...ct(),...i}}}),Ie=Ke("pyinstrument:viewOptions",{viewMode:"call-stack"},{syncTabs:!1});Ke("pyinstrument:viewOptionsTimeline",{hideImportlib:!0,hideTracebackHide:!0,hidePyinstrument:!0,hideIrrelevant:!0,hideIrrelevantThreshold:1e-4},{syncTabs:!0});function Jt(i){let e,t,n,s,r,o,l,c,u,d,p,h,m,_,w,A,k,H,N,$,q,F,g,T,C,R,B,x,G,le,ge,Q,D,Oe,ne,j,Fe,Te,de;return Fe=st(i[3][0]),{c(){e=v("div"),t=v("div"),n=v("div"),n.textContent="Collapse frames",s=E(),r=v("div"),o=v("div"),l=v("input"),c=E(),u=v("label"),d=S("Non-application code"),p=E(),h=v("div"),h.textContent=`Application code is anything run from outside the Python home
          directory.`,m=E(),_=v("div"),w=v("input"),A=E(),k=v("label"),H=S("Custom"),N=E(),$=v("div"),q=S(`Regex on the source file path.
          `),F=v("div"),g=v("label"),g.textContent="Show",T=E(),C=v("input"),R=E(),B=v("label"),B.textContent="Hide",x=E(),G=v("input"),le=S(`
          If neither match, non-application rule is used.`),ge=E(),Q=v("div"),D=v("input"),Oe=E(),ne=v("label"),j=S("Disabled"),a(n,"class","name svelte-i5gc6f"),a(l,"id",i[1]+"collapseModeAll"),a(l,"type","radio"),l.__value="non-application",oe(l,l.__value),a(u,"for",i[1]+"collapseModeAll"),a(h,"class","description svelte-i5gc6f"),a(o,"class","option svelte-i5gc6f"),a(w,"id",i[1]+"collapseModeCustom"),a(w,"type","radio"),w.__value="custom",oe(w,w.__value),a(k,"for",i[1]+"collapseModeCustom"),a(g,"for","collapseCustomShow"),a(g,"class","svelte-i5gc6f"),a(C,"id","collapseCustomShow"),a(C,"type","text"),a(C,"placeholder","myproject"),a(C,"class","svelte-i5gc6f"),a(B,"for","collapseCustomHide"),a(B,"class","svelte-i5gc6f"),a(G,"id","collapseCustomHide"),a(G,"type","text"),a(G,"placeholder",".*/lib/.*"),a(G,"class","svelte-i5gc6f"),a(F,"class","mini-input-grid svelte-i5gc6f"),a($,"class","description svelte-i5gc6f"),a(_,"class","option svelte-i5gc6f"),a(D,"id",i[1]+"collapseModeDisabled"),a(D,"type","radio"),D.__value="disabled",oe(D,D.__value),a(ne,"for",i[1]+"collapseModeDisabled"),a(Q,"class","option svelte-i5gc6f"),a(r,"class","body"),a(t,"class","option-group svelte-i5gc6f"),a(e,"class","view-options-call-stack svelte-i5gc6f"),Fe.p(l,w,D)},m(M,se){L(M,e,se),f(e,t),f(t,n),f(t,s),f(t,r),f(r,o),f(o,l),l.checked=l.__value===i[0].collapseMode,f(o,c),f(o,u),f(u,d),f(o,p),f(o,h),f(r,m),f(r,_),f(_,w),w.checked=w.__value===i[0].collapseMode,f(_,A),f(_,k),f(k,H),f(_,N),f(_,$),f($,q),f($,F),f(F,g),f(F,T),f(F,C),oe(C,i[0].collapseCustomShow),f(F,R),f(F,B),f(F,x),f(F,G),oe(G,i[0].collapseCustomHide),f($,le),f(r,ge),f(r,Q),f(Q,D),D.checked=D.__value===i[0].collapseMode,f(Q,Oe),f(Q,ne),f(ne,j),Te||(de=[J(l,"change",i[2]),J(w,"change",i[4]),J(C,"input",i[5]),J(G,"input",i[6]),J(D,"change",i[7])],Te=!0)},p(M,[se]){se&1&&(l.checked=l.__value===M[0].collapseMode),se&1&&(w.checked=w.__value===M[0].collapseMode),se&1&&C.value!==M[0].collapseCustomShow&&oe(C,M[0].collapseCustomShow),se&1&&G.value!==M[0].collapseCustomHide&&oe(G,M[0].collapseCustomHide),se&1&&(D.checked=D.__value===M[0].collapseMode)},i:y,o:y,d(M){M&&V(e),Fe.r(),Te=!1,re(de)}}}function ei(i,e,t){let n;ae(i,fe,p=>t(0,n=p));const s=Math.random().toString(36).substring(4),r=[[]];function o(){n.collapseMode=this.__value,fe.set(n)}function l(){n.collapseMode=this.__value,fe.set(n)}function c(){n.collapseCustomShow=this.value,fe.set(n)}function u(){n.collapseCustomHide=this.value,fe.set(n)}function d(){n.collapseMode=this.__value,fe.set(n)}return[n,s,o,r,l,c,u,d]}class ti extends ie{constructor(e){super(),te(this,e,ei,Jt,K,{})}}function ii(i){let e;return{c(){e=v("div"),e.innerHTML="",a(e,"class","view-options-timeline")},m(t,n){L(t,e,n)},p:y,i:y,o:y,d(t){t&&V(e)}}}class ni extends ie{constructor(e){super(),te(this,e,null,ii,K,{})}}class si extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function ri(i,e){const t=e*(i.length-1),n=Math.floor(t),s=Math.ceil(t),r=i[n],o=i[s],l=t-n;return li(l,{to:[r,o]})}function oi(i,e,t){return i===1/0?(console.warn("clamp: value is Infinity, returning `max`",i),t):i===-1/0?(console.warn("clamp: value is -Infinity, returning `min`",i),e):Number.isFinite(i)?i<e?e:i>t?t:i:(console.warn("clamp: value isn't finite, returning `min`",i),e)}function Ze(i,e){const{from:t=[0,1],to:n=[0,1]}=e,s=e.clamp||!1;let r=(i-t[0])/(t[1]-t[0])*(n[1]-n[0])+n[0];return s&&(r=oi(r,Math.min(n[0],n[1]),Math.max(n[0],n[1]))),r}function li(i,e){return`rgb(
      ${Ze(i,{from:e.from,to:[e.to[0][0],e.to[1][0]],clamp:e.clamp})},
      ${Ze(i,{from:e.from,to:[e.to[0][1],e.to[1][1]],clamp:e.clamp})},
      ${Ze(i,{from:e.from,to:[e.to[0][2],e.to[1][2]],clamp:e.clamp})}
    )`}function ai(i){if(i.substr(0,1)=="#"){var e=(i.length-1)/3,t=[17,1,.062272][e-1];return[Math.round(parseInt(i.substr(1,e),16)*t),Math.round(parseInt(i.substr(1+e,e),16)*t),Math.round(parseInt(i.substr(1+2*e,e),16)*t)]}else return i.split("(")[1].split(")")[0].split(",").map(n=>+n)}function ci(i,e,t={}){const{ignore:n=[],capture:s=!0}=t,r=window;if(!r)return()=>{};let o=!0,l=!1;const c=m=>n.some(_=>typeof _=="string"?Array.from(document.querySelectorAll(_)).some(w=>w===m.target||m.composedPath().includes(w)):_&&(m.target===_||m.composedPath().includes(_))),u=m=>{if(!(!i||i===m.target||m.composedPath().includes(i))){if(m.detail===0&&(o=!c(m)),!o){o=!0;return}e(m)}},d=m=>{l||(l=!0,setTimeout(()=>{l=!1},0),u(m))},p=m=>{o=!c(m)&&!!(i&&!m.composedPath().includes(i))};return r.addEventListener("click",d,{passive:!0,capture:s}),r.addEventListener("pointerdown",p,{passive:!0}),()=>{r.removeEventListener("click",d,{capture:s}),r.removeEventListener("pointerdown",p)}}function ui(i){let e,t;return e=new ni({}),{c(){ee(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function fi(i){let e,t;return e=new ti({}),{c(){ee(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function di(i){let e,t,n,s,r,o,l,c;const u=[fi,ui],d=[];function p(h,m){return h[0].viewMode==="call-stack"?0:h[0].viewMode==="timeline"?1:-1}return~(o=p(i))&&(l=d[o]=u[o](i)),{c(){e=v("div"),t=v("div"),n=v("div"),s=S(i[2]),r=E(),l&&l.c(),a(n,"class","title svelte-f96okc"),a(t,"class","box svelte-f96okc"),a(e,"class","view-options svelte-f96okc")},m(h,m){L(h,e,m),f(e,t),f(t,n),f(n,s),f(t,r),~o&&d[o].m(t,null),i[3](t),c=!0},p(h,[m]){(!c||m&4)&&ce(s,h[2]);let _=o;o=p(h),o!==_&&(l&&(ye(),I(d[_],1,1,()=>{d[_]=null}),Ae()),~o?(l=d[o],l||(l=d[o]=u[o](h),l.c()),P(l,1),l.m(t,null)):l=null)},i(h){c||(P(l),c=!0)},o(h){I(l),c=!1},d(h){h&&V(e),~o&&d[o].d(),i[3](null)}}}function hi(i,e,t){let n;ae(i,Ie,u=>t(0,n=u));const s=Lt();function r(){s("close")}let o;rt(()=>{if(o)return ci(o,r,{ignore:[".js-view-options-button"]})});let l="View options";function c(u){De[u?"unshift":"push"](()=>{o=u,t(1,o)})}return i.$$.update=()=>{i.$$.dirty&1&&(n.viewMode==="call-stack"?t(2,l="Call stack view options"):n.viewMode==="timeline"&&t(2,l="Timeline view options"))},[n,o,l,c]}class pi extends ie{constructor(e){super(),te(this,e,hi,di,K,{})}}function ut(i){let e,t;return e=new pi({}),e.$on("close",i[9]),{c(){ee(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p:y,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function mi(i){let e,t,n,s,r,o,l,c,u=i[0].target_description+"",d,p,h,m,_,w,A,k,H,N,$,q,F,g,T=i[0].sampleCount+"",C,R,B,x,G,le,ge,Q,D,Oe,ne,j,Fe,Te,de,M,se,Pt,Ne,Mt,ve,Pe,Me,kt,Rt,ke,tt,it,St;r=new Kt({}),Me=new Qt({});let z=i[1]&&ut(i);return tt=st(i[7][0]),{c(){e=v("div"),t=v("div"),n=v("div"),s=v("div"),ee(r.$$.fragment),o=E(),l=v("div"),c=v("div"),d=S(u),p=E(),h=v("div"),m=v("div"),_=v("span"),_.textContent="Recorded:",w=E(),A=v("span"),A.textContent=`${i[3]}`,k=E(),H=v("br"),N=E(),$=v("div"),q=v("span"),q.textContent="Samples:",F=E(),g=v("span"),C=S(T),R=E(),B=v("div"),x=v("span"),x.textContent="CPU utilization:",G=E(),le=v("span"),le.textContent=`${(i[4]*100).toFixed(0)}%`,ge=E(),Q=v("div"),D=v("div"),Oe=S(`View:
            `),ne=v("label"),j=v("input"),Fe=S(`
              Call stack`),Te=E(),de=v("label"),M=v("input"),se=S(`
              Timeline`),Pt=E(),Ne=v("div"),Mt=E(),ve=v("div"),Pe=v("button"),ee(Me.$$.fragment),kt=S(`
              View options`),Rt=E(),z&&z.c(),a(s,"class","logo svelte-g6343"),a(c,"class","target-description svelte-g6343"),a(_,"class","metric-label svelte-g6343"),a(A,"class","metric-value svelte-g6343"),a(m,"class","metric date svelte-g6343"),a(H,"class","svelte-g6343"),a(q,"class","metric-label svelte-g6343"),a(g,"class","metric-value svelte-g6343"),a($,"class","metric svelte-g6343"),a(x,"class","metric-label svelte-g6343"),a(le,"class","metric-value svelte-g6343"),a(B,"class","metric svelte-g6343"),a(h,"class","metrics svelte-g6343"),a(j,"type","radio"),j.__value="call-stack",oe(j,j.__value),a(j,"class","svelte-g6343"),a(ne,"class","svelte-g6343"),a(M,"type","radio"),M.__value="timeline",oe(M,M.__value),a(M,"class","svelte-g6343"),a(de,"class","svelte-g6343"),a(D,"class","toggle"),a(Ne,"class","spacer"),U(Ne,"flex","1"),a(Pe,"class","js-view-options-button svelte-g6343"),a(ve,"class","button-container svelte-g6343"),a(Q,"class","view-options svelte-g6343"),a(l,"class","layout svelte-g6343"),a(n,"class","row svelte-g6343"),a(t,"class","margins"),a(e,"class","header svelte-g6343"),tt.p(j,M)},m(W,he){L(W,e,he),f(e,t),f(t,n),f(n,s),Z(r,s,null),f(n,o),f(n,l),f(l,c),f(c,d),f(l,p),f(l,h),f(h,m),f(m,_),f(m,w),f(m,A),f(h,k),f(h,H),f(h,N),f(h,$),f($,q),f($,F),f($,g),f(g,C),f(h,R),f(h,B),f(B,x),f(B,G),f(B,le),f(l,ge),f(l,Q),f(Q,D),f(D,Oe),f(D,ne),f(ne,j),j.checked=j.__value===i[2].viewMode,f(ne,Fe),f(D,Te),f(D,de),f(de,M),M.checked=M.__value===i[2].viewMode,f(de,se),f(Q,Pt),f(Q,Ne),f(Q,Mt),f(Q,ve),f(ve,Pe),Z(Me,Pe,null),f(Pe,kt),f(ve,Rt),z&&z.m(ve,null),ke=!0,it||(St=[J(j,"change",i[6]),J(M,"change",i[8]),J(Pe,"click",Ue(We(i[5])))],it=!0)},p(W,[he]){(!ke||he&1)&&u!==(u=W[0].target_description+"")&&ce(d,u),(!ke||he&1)&&T!==(T=W[0].sampleCount+"")&&ce(C,T),he&4&&(j.checked=j.__value===W[2].viewMode),he&4&&(M.checked=M.__value===W[2].viewMode),W[1]?z?(z.p(W,he),he&2&&P(z,1)):(z=ut(W),z.c(),P(z,1),z.m(ve,null)):z&&(ye(),I(z,1,1,()=>{z=null}),Ae())},i(W){ke||(P(r.$$.fragment,W),P(Me.$$.fragment,W),P(z),ke=!0)},o(W){I(r.$$.fragment,W),I(Me.$$.fragment,W),I(z),ke=!1},d(W){W&&V(e),Y(r),Y(Me),z&&z.d(),tt.r(),it=!1,re(St)}}}function gi(i,e,t){let n;ae(i,Ie,m=>t(2,n=m));let{session:s}=e;const r=new Date(s.startTime*1e3).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"}),o=s.cpuTime/s.duration;let l=!1;function c(m){t(1,l=!l)}const u=[[]];function d(){n.viewMode=this.__value,Ie.set(n)}function p(){n.viewMode=this.__value,Ie.set(n)}const h=()=>t(1,l=!1);return i.$$set=m=>{"session"in m&&t(0,s=m.session)},[s,l,n,r,o,c,d,u,p,h]}class vi extends ie{constructor(e){super(),te(this,e,gi,mi,K,{session:0})}}const _i="data:image/png;base64,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",ft=He({}),dt=He({});function ht(i,e,t){const n=i.slice();return n[19]=e[t],n}function pt(i){let e,t,n,s,r,o,l,c,u,d,p,h,m,_;return{c(){e=v("div"),t=v("div"),n=O("svg"),s=O("path"),r=E(),o=v("div"),l=S(i[5]),c=E(),u=v("div"),d=S(i[4]),p=E(),h=v("div"),h.textContent=`${i[11]}`,a(s,"d","M.937-.016L5.793 4.84.937 9.696z"),a(s,"fill",i[7]),a(s,"fill-rule","evenodd"),a(s,"fill-opacity",".582"),a(n,"width","6"),a(n,"height","10"),a(t,"class","frame-triangle svelte-1hxft88"),ue(t,"rotate",!i[9]),U(t,"visibility",i[0].children.length>0?"visible":"hidden"),a(o,"class","time svelte-1hxft88"),U(o,"color",i[7]),U(o,"font-weight",i[10]<.2?500:600),a(u,"class","name svelte-1hxft88"),a(h,"class","code-position svelte-1hxft88"),a(e,"class","frame-description svelte-1hxft88"),ue(e,"application-code",i[0].isApplicationCode),ue(e,"children-visible",!i[9]),U(e,"padding-left",`${i[2]*35}px`)},m(w,A){L(w,e,A),f(e,t),f(t,n),f(n,s),f(e,r),f(e,o),f(o,l),f(e,c),f(e,u),f(u,d),f(e,p),f(e,h),m||(_=J(e,"click",Ue(We(i[12]))),m=!0)},p(w,A){A&128&&a(s,"fill",w[7]),A&512&&ue(t,"rotate",!w[9]),A&1&&U(t,"visibility",w[0].children.length>0?"visible":"hidden"),A&32&&ce(l,w[5]),A&128&&U(o,"color",w[7]),A&16&&ce(d,w[4]),A&1&&ue(e,"application-code",w[0].isApplicationCode),A&512&&ue(e,"children-visible",!w[9]),A&4&&U(e,"padding-left",`${w[2]*35}px`)},d(w){w&&V(e),m=!1,_()}}}function mt(i){let e,t,n,s,r=i[0].group.frames.length+"",o,l,c,u,d,p;return{c(){e=v("div"),t=v("div"),n=v("div"),n.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',s=E(),o=S(r),l=S(` frames hidden
        (`),c=S(i[6]),u=S(")"),a(n,"class","group-triangle svelte-1hxft88"),ue(n,"rotate",i[8]),a(t,"class","group-header-button svelte-1hxft88"),a(e,"class","group-header svelte-1hxft88"),U(e,"padding-left",`${i[2]*35}px`)},m(h,m){L(h,e,m),f(e,t),f(t,n),f(t,s),f(t,o),f(t,l),f(t,c),f(t,u),d||(p=J(e,"click",Ue(We(i[13]))),d=!0)},p(h,m){m&256&&ue(n,"rotate",h[8]),m&1&&r!==(r=h[0].group.frames.length+"")&&ce(o,r),m&64&&ce(c,h[6]),m&4&&U(e,"padding-left",`${h[2]*35}px`)},d(h){h&&V(e),d=!1,p()}}}function gt(i){let e,t=[],n=new Map,s,r=at(i[0].children);const o=l=>l[19].uuid;for(let l=0;l<r.length;l+=1){let c=ht(i,r,l),u=o(c);n.set(u,t[l]=vt(u,c))}return{c(){e=v("div");for(let l=0;l<t.length;l+=1)t[l].c();a(e,"class","children svelte-1hxft88")},m(l,c){L(l,e,c);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);s=!0},p(l,c){c&15&&(r=at(l[0].children),ye(),t=Ut(t,c,o,1,l,r,n,e,Wt,vt,null,ht),Ae())},i(l){if(!s){for(let c=0;c<r.length;c+=1)P(t[c]);s=!0}},o(l){for(let c=0;c<t.length;c+=1)I(t[c]);s=!1},d(l){l&&V(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function vt(i,e){let t,n,s;return n=new _t({props:{frame:e[19],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:i,first:null,c(){t=$t(),ee(n.$$.fragment),this.first=t},m(r,o){L(r,t,o),Z(n,r,o),s=!0},p(r,o){e=r;const l={};o&1&&(l.frame=e[19]),o&2&&(l.rootFrame=e[1]),o&12&&(l.indent=e[2]+(e[3]?1:0)),n.$set(l)},i(r){s||(P(n.$$.fragment,r),s=!0)},o(r){I(n.$$.fragment,r),s=!1},d(r){r&&V(t),Y(n,r)}}}function wi(i){let e,t,n,s,r,o,l=i[3]&&pt(i),c=i[0].group&&i[0].group.rootFrame==i[0]&&!i[9]&&mt(i),u=!i[9]&&i[0].children.length>0&&gt(i);return{c(){e=v("div"),l&&l.c(),t=E(),c&&c.c(),n=E(),u&&u.c(),s=E(),r=v("div"),r.innerHTML="",a(r,"class","visual-guide svelte-1hxft88"),U(r,"left",`${i[2]*35+21}px`),U(r,"backgroundColor",i[7]),a(e,"class","frame svelte-1hxft88")},m(d,p){L(d,e,p),l&&l.m(e,null),f(e,t),c&&c.m(e,null),f(e,n),u&&u.m(e,null),f(e,s),f(e,r),o=!0},p(d,[p]){d[3]?l?l.p(d,p):(l=pt(d),l.c(),l.m(e,t)):l&&(l.d(1),l=null),d[0].group&&d[0].group.rootFrame==d[0]&&!d[9]?c?c.p(d,p):(c=mt(d),c.c(),c.m(e,n)):c&&(c.d(1),c=null),!d[9]&&d[0].children.length>0?u?(u.p(d,p),p&513&&P(u,1)):(u=gt(d),u.c(),P(u,1),u.m(e,s)):u&&(ye(),I(u,1,1,()=>{u=null}),Ae()),p&4&&U(r,"left",`${d[2]*35+21}px`),p&128&&U(r,"backgroundColor",d[7])},i(d){o||(P(u),o=!0)},o(d){I(u),o=!1},d(d){d&&V(e),l&&l.d(),c&&c.d(),u&&u.d()}}}function bi(i,e,t){var F;let n,s,r,o,l;ae(i,dt,g=>t(14,r=g)),ae(i,ft,g=>t(15,o=g)),ae(i,fe,g=>t(16,l=g));let{frame:c}=e,{rootFrame:u}=e,{indent:d=0}=e,p;const h=c.time/u.time;let m;const _=`${c.filePathShort}:${(F=c.lineNo)==null?void 0:F.toString().padEnd(4," ")}`;let w,A=null;if(c.group){const g=c.group.libraries;g.length<4?A=g.join(", "):A=`${g[0]}, ${g[1]}, ${g[2]}...`}let k;h>.6?k="#FF4159":h>.3?k="#F5A623":h>.2?k="#D8CB2A":k="#7ED321";function H(g){N(c,!s,g.altKey)}function N(g,T,C=!0){if(dt.update(R=>({...R,[g.uuid]:T})),C)for(const R of g.children)N(R,T,!0),g.group&&g.group.rootFrame==g&&$(g.group.id,!T)}function $(g,T){ft.update(C=>({...C,[g]:T}))}function q(){c.group&&$(c.group.id,!n)}return i.$$set=g=>{"frame"in g&&t(0,c=g.frame),"rootFrame"in g&&t(1,u=g.rootFrame),"indent"in g&&t(2,d=g.indent)},i.$$.update=()=>{var g,T;if(i.$$.dirty&32769&&(c.group?o[c.group.id??""]||((g=c.group)==null?void 0:g.rootFrame)===c||c.children.filter(C=>!C.group).length>1?t(3,p=!0):t(3,p=!1):t(3,p=!0)),i.$$.dirty&1&&(c.className?t(4,m=`${c.className}.${c.function}`):t(4,m=c.function)),i.$$.dirty&65537)if(l.timeFormat==="absolute")t(5,w=c.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(l.timeFormat==="proportion")t(5,w=`${(h*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");i.$$.dirty&32769&&t(8,n=o[((T=c.group)==null?void 0:T.id)??""]===!0),i.$$.dirty&16385&&t(9,s=r[c.uuid]===!0)},[c,u,d,p,m,w,A,k,n,s,h,_,H,q,r,o,l]}let _t=class extends ie{constructor(e){super(),te(this,e,bi,wi,K,{frame:0,rootFrame:1,indent:2})}};function wt(i,e,t){let n=i;for(const s of e)if(n=s(n,t),!n)return null;return n}const yi="\0",Ai="[await]",$e="[self]",Ci=[Ai,$e,"[out-of-context]","[root]"],Ei="c",Fi="h";class Ve{constructor(e,t){b(this,"uuid",crypto.randomUUID());b(this,"identifier");b(this,"_identifierParts");b(this,"startTime");b(this,"time",0);b(this,"absorbedTime",0);b(this,"group",null);b(this,"attributes");b(this,"_children",[]);b(this,"parent",null);b(this,"context");var r;this.identifier=e.identifier,this._identifierParts=this.identifier.split(yi),this.startTime=e.startTime??0,this.time=e.time??0,this.attributes=e.attributes??{},this.context=t;let n=this.startTime;const s=(r=e.children)==null?void 0:r.map(o=>(o.startTime===void 0&&(o={...o,startTime:n},n+=o.time??0),n=o.startTime+(o.time??0),new Ve(o,t)));s&&this.addChildren(s)}cloneDeep(){return new Ve(this,this.context)}get children(){return this._children}addChild(e,t={}){if(e.removeFromParent(),e.parent=this,t.after){const n=this._children.indexOf(t.after);if(n==-1)throw new Error("After frame not found");this._children.splice(n+1,0,e)}else this._children.push(e)}addChildren(e,t={}){e=e.slice(),t.after?(e.slice().reverse(),e.forEach(s=>this.addChild(s,t))):e.forEach(n=>this.addChild(n,t))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(n=>n.startsWith(e)).map(n=>({data:n.slice(1),time:this.attributes[n]}))}getAttributeValue(e){const t=this.getAttributes(e);if(!t||t.length==0)return null;let n=0;for(let s=0;s<t.length;s++)t[s].time>t[n].time&&(n=s);return t[n].data}get hasTracebackhide(){return this.getAttributeValue(Fi)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return Ci.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||["/lib/","\\lib\\"].some(n=>e.includes(n))?!1:e.startsWith("<")?!!e.startsWith("<ipython-input-"):!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue(Ei)??""}get library(){const e=this.filePathShort;return e?/^[^\\/.]*/.exec(e)[0]:null}}class Ti{constructor(e){b(this,"id");b(this,"rootFrame");b(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const t=this._frames.indexOf(e);if(t===-1)throw new Error("Frame not found in group.");this._frames.splice(t,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const t of this.frames){let n=!1;for(const s of t.children)if(s.group!=this){n=!0;break}n&&e.push(t)}return e}get libraries(){const e=[];for(const t of this.frames){const n=t.library;n&&(e.includes(n)||e.push(n))}return e}}function Be(i,e){const{replaceWith:t}=e,n=i.parent;if(!n)throw new Error("Cannot delete the root frame");if(t=="children")n.addChildren(i.children,{after:i});else if(t=="self_time")n.addChild(new Ve({identifier:$e,time:i.time},n.context),{after:i});else if(t=="nothing")n.absorbedTime+=i.time;else throw new si(t);i.removeFromParent(),Ye(i,!0)}function Pi(i,e){if(i.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=i.absorbedTime,e.time+=i.time,Object.entries(i.attributes).forEach(([t,n])=>{e.attributes[t]!==void 0?e.attributes[t]+=n:e.attributes[t]=n}),e.addChildren(i.children),i.removeFromParent(),Ye(i,!1)}function Ye(i,e){if(e&&i.children&&i.children.forEach(t=>{Ye(t,!0)}),i.group){const t=i.group;t.removeFrame(i),t.frames.length===1&&t.removeFrame(t.frames[0])}}function Xe(i,e){if(!i)return null;for(const t of i.children)Xe(t),t.filePath&&t.filePath.includes("<frozen importlib._bootstrap")&&Be(t,{replaceWith:"children"});return i}function Je(i,e){if(!i)return null;for(const t of i.children)Je(t),t.hasTracebackhide&&Be(t,{replaceWith:"children"});return i}function bt(i,e){if(!i)return null;const t={};for(const n of i.children.slice())if(t[n.identifier]){const s=t[n.identifier];Pi(n,s)}else t[n.identifier]=n;return i.children.forEach(n=>bt(n)),i._children.sort((n,s)=>s.time-n.time),i}function yt(i,e){if(!i)return null;const t=e.hideRegex,n=e.showRegex;function s(o){const l=o.filePath||"",c=n&&new RegExp(n).test(l),u=t&&new RegExp(t).test(l);return c?!1:u?!0:!o.isApplicationCode}function r(o,l){l.addFrame(o),o.children.forEach(c=>{s(c)&&r(c,l)})}return i.children.forEach(o=>{if(!o.group&&s(o)&&o.children.some(s)){const l=new Ti(o);r(o,l)}yt(o,e)}),i}function At(i,e,t=!0){if(!i)return null;let n=null;for(const s of i.children)s.identifier===$e?n?(n.time+=s.time,s.removeFromParent()):n=s:n=null;return t&&i.children.forEach(s=>At(s,e,!0)),i}function Ct(i,e){return i?(i.children.length===1&&i.children[0].identifier===$e&&Be(i.children[0],{replaceWith:"nothing"}),i.children.forEach(t=>Ct(t)),i):null}function Et(i,e,t=null){if(!i)return null;t===null&&(t=i.time,t<=0&&(t=1e-44));const n=e.filterThreshold||.01;for(const s of i.children.slice())s.time/t<n&&Be(s,{replaceWith:"nothing"});return i.children.forEach(s=>Et(s,e,t)),i}function Ft(i,e){if(!i)return null;const t=o=>{var l;return((l=o.filePath)==null?void 0:l.includes("pyinstrument/__main__.py"))&&o.children.length>0},n=o=>{var l;return o.proportionOfParent>.8&&((l=o.filePath)==null?void 0:l.includes("<string>"))&&o.children.length>0},s=o=>{var l;return o.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(o.filePath??"")||((l=o.filePath)==null?void 0:l.includes("<frozen runpy>")))&&o.children.length>0};let r=i;if(!t(r)||(r=r.children[0],!n(r))||(r=r.children[0],!s(r)))return i;for(;s(r);)r=r.children[0];return r.removeFromParent(),r}function Mi(i){let e,t;return e=new _t({props:{frame:i[0],rootFrame:i[0]}}),{c(){ee(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.frame=n[0]),s&1&&(r.rootFrame=n[0]),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function ki(i){let e;return{c(){e=v("div"),e.textContent="All frames were filtered out.",a(e,"class","error")},m(t,n){L(t,e,n)},p:y,i:y,o:y,d(t){t&&V(e)}}}function Ri(i){let e,t,n,s,r,o,l;const c=[ki,Mi],u=[];function d(p,h){return p[0]?1:0}return r=d(i),o=u[r]=c[r](i),{c(){e=v("div"),t=v("div"),n=E(),s=v("div"),o.c(),a(t,"class","spacer"),U(t,"height","20px"),a(s,"class","margins"),a(e,"class","tree-view")},m(p,h){L(p,e,h),f(e,t),f(e,n),f(e,s),u[r].m(s,null),l=!0},p(p,[h]){let m=r;r=d(p),r===m?u[r].p(p,h):(ye(),I(u[m],1,1,()=>{u[m]=null}),Ae(),o=u[r],o?o.p(p,h):(o=u[r]=c[r](p),o.c()),P(o,1),o.m(s,null))},i(p){l||(P(o),l=!0)},o(p){I(o),l=!1},d(p){p&&V(e),u[r].d()}}}function Si(i,e,t){let n,{session:s}=e;const r=Yt([fe],([l])=>({processors:[l.hideImportlib?Xe:null,l.hideTracebackHide?Je:null,At,bt,Ct,l.hideIrrelevant?Et:null,l.hidePyinstrument?Ft:null,l.collapseMode!=="disabled"?yt:null].filter(d=>d!==null),options:{}}));ae(i,r,l=>t(3,n=l));let o;return i.$$set=l=>{"session"in l&&t(2,s=l.session)},i.$$.update=()=>{i.$$.dirty&12&&t(0,o=wt(s.rootFrame.cloneDeep(),n.processors,n.options))},[o,r,s,n]}class Ii extends ie{constructor(e){super(),te(this,e,Si,Ri,K,{session:2})}}class $i{constructor(e){b(this,"mediaQueryList",null);this.onDevicePixelRatioChanged=e,this._onChange=this._onChange.bind(this),this.createMediaQueryList()}createMediaQueryList(){this.removeMediaQueryList();let e=`(resolution: ${window.devicePixelRatio}dppx)`;this.mediaQueryList=matchMedia(e),this.mediaQueryList.addEventListener("change",this._onChange)}removeMediaQueryList(){var e;(e=this.mediaQueryList)==null||e.removeEventListener("change",this._onChange),this.mediaQueryList=null}_onChange(e){this.onDevicePixelRatioChanged(),this.createMediaQueryList()}destroy(){this.removeMediaQueryList()}}class Vi{constructor(e){b(this,"canvas");b(this,"_size_observer");b(this,"_devicePixelRatioObserver");b(this,"drawAnimationRequest",null);this.container=e,getComputedStyle(e).position!="absolute"&&(e.style.position="relative"),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.container.appendChild(this.canvas),this.setCanvasSize=this.setCanvasSize.bind(this),this._size_observer=new ResizeObserver(this.setCanvasSize),this._size_observer.observe(e),this._devicePixelRatioObserver=new $i(this.setCanvasSize),window.requestAnimationFrame(()=>{this.setCanvasSize()})}destroy(){this._size_observer.disconnect(),this._devicePixelRatioObserver.destroy(),this.canvas.remove(),this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null)}setNeedsRedraw(){this.drawAnimationRequest===null&&(this.drawAnimationRequest=window.requestAnimationFrame(()=>{this.drawAnimationRequest=null,this.canvasViewRedraw()}))}redrawIfNeeded(){this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null,this.canvasViewRedraw())}canvasViewRedraw(){const e=this.canvas.getContext("2d");e&&(e.resetTransform(),e.scale(window.devicePixelRatio,window.devicePixelRatio),this.redraw(e,{width:this.canvas.width/window.devicePixelRatio,height:this.canvas.height/window.devicePixelRatio}))}get width(){return this.canvas.width/window.devicePixelRatio}get height(){return this.canvas.height/window.devicePixelRatio}setCanvasSize(){const e=window.devicePixelRatio;this.canvas.height=this.container.clientHeight*e,this.canvas.width=this.container.clientWidth*e,this.canvasViewRedraw()}}const Oi="#212325",Di=18,Li=17,Hi=["#47A298","#9FC175","#C1A731","#C07210","#B84210","#B53134","#9A3586","#4958B5","#3475BA","#318DBC","#47A298"].map(ai);class Bi extends Vi{constructor(t){super(t);b(this,"zoom",1);b(this,"startT",0);b(this,"frames",[]);b(this,"isZoomedIn",!1);b(this,"lastDrawWidth",0);b(this,"lastDrawHeight",0);b(this,"mouseLocation",null);b(this,"_libraryOrder",null);b(this,"_colors",[]);this.onWheel=this.onWheel.bind(this),this.canvas.addEventListener("wheel",this.onWheel)}destroy(){super.destroy(),this.canvas.removeEventListener("wheel",this.onWheel)}setRootFrame(t){this.frames=[],this._collectFrames(t,0),this.fitContents()}_collectFrames(t,n){this.frames.push({frame:t,depth:n});for(const s of t.children)s.identifier!==$e&&this._collectFrames(s,n+1)}get frameMaxT(){return this.frames.reduce((t,n)=>Math.max(t,n.frame.startTime+n.frame.time),0)}get minZoom(){return this.width/this.frameMaxT}fitContents(){this.startT=0,this.zoom=this.minZoom,this.isZoomedIn=!1}clampViewport(){this.zoom<this.minZoom?(this.zoom=this.minZoom,this.isZoomedIn=!1):this.isZoomedIn=!0,this.startT<0&&(this.startT=0);const t=this.frameMaxT-this.width/this.zoom;this.startT>t&&(this.startT=t)}redraw(t,n){const{width:s,height:r}=n;(s!==this.lastDrawWidth||r!==this.lastDrawHeight)&&(this.isZoomedIn?this.clampViewport():this.fitContents()),this.lastDrawWidth=s,this.lastDrawHeight=r,t.fillStyle=Oi,t.fillRect(0,0,s,r);for(const o of this.frames)this.drawFrame(t,o);t.globalAlpha=1,t.fillStyle="red",t.fillText(`startT: ${this.startT}`,10,10),t.fillText(`zoom: ${this.zoom}`,10,20)}drawFrame(t,n){const s=n.depth*Di,r=Li;let o=this.xForT(n.frame.startTime);const l=this.xForT(n.frame.startTime+n.frame.time);let c=l-o;if(!(l<0||o>this.width)){if(c<1&&(c=1),c>2&&(c-=1),t.fillStyle=this.colorForFrame(n),t.globalAlpha=n.frame.isApplicationCode?1:.5,c<2){t.fillRect(o,s,c,r);return}if(t.save(),t.beginPath(),t.rect(o,s,c,r),t.fill(),t.clip(),c>2){t.font='13px "Source Sans Pro", sans-serif',t.fillStyle="white";let u;n.frame.className?u=`${n.frame.className}.${n.frame.function}`:n.frame.function=="<module>"?u=n.frame.filePathShort??n.frame.filePath??"":u=n.frame.function,o<0&&(o=0),t.fillText(u,o+2,s+13)}t.restore()}}xForT(t){return(t-this.startT)*this.zoom}onWheel(t){if(t.ctrlKey||t.metaKey){const n=this.startT+t.offsetX/this.zoom;this.zoom*=1-t.deltaY/100,this.startT=n-t.offsetX/this.zoom,this.clampViewport(),this.setNeedsRedraw(),t.preventDefault();return}this.startT+=t.deltaX/this.zoom,this.clampViewport(),this.setNeedsRedraw(),t.preventDefault()}onMouseMove(t){this.mouseLocation={x:t.offsetX,y:t.offsetY},this.setNeedsRedraw()}onMouseLeave(t){this.mouseLocation=null,this.setNeedsRedraw()}_assignLibraryOrder(){const t={};for(const s of this.frames){const o=s.frame.library??"";t[o]=(t[o]||0)+1}const n=Object.keys(t);n.sort((s,r)=>t[r]-t[s]),this._libraryOrder=n}colorForLibraryIndex(t){if(this._colors[t]!==void 0)return this._colors[t];const n=Math.pow(2,Math.ceil(Math.log2(t+1))),r=(2*t-n+1)/n,o=ri(Hi,r);return this._colors[t]=o,o}colorForFrame(t){var r;this._libraryOrder||this._assignLibraryOrder();let n=((r=this._libraryOrder)==null?void 0:r.indexOf(t.frame.library||""))??0;return n===-1&&(n=0),this.colorForLibraryIndex(n)}}function Ni(i){let e;return{c(){e=v("div"),e.innerHTML="",a(e,"class","timeline svelte-lmsdxq")},m(t,n){L(t,e,n),i[4](e)},p:y,i:y,o:y,d(t){t&&V(e),i[4](null)}}}function zi(i,e,t){let{session:n}=e;const s=[Xe,Je,Ft],r={};let o,l=null,c=null;function u(d){De[d?"unshift":"push"](()=>{l=d,t(0,l)})}return i.$$set=d=>{"session"in d&&t(1,n=d.session)},i.$$.update=()=>{i.$$.dirty&2&&t(2,o=wt(n.rootFrame.cloneDeep(),s,r)),i.$$.dirty&1&&l&&t(3,c=new Bi(l)),i.$$.dirty&12&&o&&c&&c.setRootFrame(o)},[l,n,o,c,u]}class Wi extends ie{constructor(e){super(),te(this,e,zi,Ni,K,{session:1})}}function Ui(i){let e,t=i[1].viewMode+"",n;return{c(){e=S("Unknown view mode: "),n=S(t)},m(s,r){L(s,e,r),L(s,n,r)},p(s,r){r&2&&t!==(t=s[1].viewMode+"")&&ce(n,t)},i:y,o:y,d(s){s&&(V(e),V(n))}}}function Gi(i){let e,t;return e=new Wi({props:{session:i[0]}}),{c(){ee(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.session=n[0]),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function ji(i){let e,t;return e=new Ii({props:{session:i[0]}}),{c(){ee(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.session=n[0]),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function xi(i){let e,t,n;return{c(){e=v("div"),t=E(),n=v("div"),n.innerHTML='<div class="error">No samples recorded.</div>',a(e,"class","spacer"),U(e,"height","20px"),a(n,"class","margins")},m(s,r){L(s,e,r),L(s,t,r),L(s,n,r)},p:y,i:y,o:y,d(s){s&&(V(e),V(t),V(n))}}}function Qi(i){let e,t,n,s,r,o;t=new vi({props:{session:i[0]}});const l=[xi,ji,Gi,Ui],c=[];function u(d,p){return d[0].rootFrame?d[1].viewMode==="call-stack"?1:d[1].viewMode==="timeline"?2:3:0}return s=u(i),r=c[s]=l[s](i),{c(){e=v("div"),ee(t.$$.fragment),n=E(),r.c(),a(e,"class","app svelte-1qrzcke")},m(d,p){L(d,e,p),Z(t,e,null),f(e,n),c[s].m(e,null),o=!0},p(d,[p]){const h={};p&1&&(h.session=d[0]),t.$set(h);let m=s;s=u(d),s===m?c[s].p(d,p):(ye(),I(c[m],1,1,()=>{c[m]=null}),Ae(),r=c[s],r?r.p(d,p):(r=c[s]=l[s](d),r.c()),P(r,1),r.m(e,null))},i(d){o||(P(t.$$.fragment,d),P(r),o=!0)},o(d){I(t.$$.fragment,d),I(r),o=!1},d(d){d&&V(e),Y(t),c[s].d()}}}function et(){document.body.style.minHeight=`${window.scrollY+window.innerHeight}px`}function qi(i,e,t){let n;ae(i,Ie,p=>t(1,n=p));let{session:s}=e;const r=document.createElement("link");r.rel="shortut icon",r.href=_i,document.head.appendChild(r);const o=document.createElement("link");o.rel="preload",o.as="style",o.onload=()=>{o.rel="stylesheet"},o.href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600|Source+Sans+Pro:400,600&display=swap",document.head.appendChild(o),rt(()=>{window.addEventListener("scroll",et),et()}),Dt(()=>{window.removeEventListener("scroll",et)});const l=s.rootFrame,c=l==null?void 0:l.time.toLocaleString(void 0,{maximumSignificantDigits:3});s.target_description="Block at /Users/joerick/Projects/pyinstrument/pyinstrument/console.py:80";let u,d;return(d=/[^\s/]+(:\d+)?$/.exec(s.target_description))?u=d[0]:u=s.target_description,document.title=`${c}s - ${u} - pyinstrument`,i.$$set=p=>{"session"in p&&t(0,s=p.session)},[s,n]}class Ki extends ie{constructor(e){super(),te(this,e,qi,Qi,K,{session:0})}}class Zi{constructor(e){b(this,"startTime");b(this,"duration");b(this,"sampleCount");b(this,"target_description");b(this,"cpuTime");b(this,"rootFrame");b(this,"sysPath");b(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.target_description=e.session.target_description,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.rootFrame=new Ve(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let t=e;if(Ee(e).length>1)for(const s of this.sysPath){const r=Yi(e,s);Ee(r).length<Ee(t).length&&(t=r)}return this._shortenPathCache[e]=t,t}}function Ee(i){return i.split(/[/\\]/)}function Tt(i){const e=Ee(i);return e.length>0&&e[0].endsWith(":")?e[0]:null}function Yi(i,e){if(Tt(i)!=Tt(e))return i;const t=Ee(i),n=Ee(e);let s=0;for(;s<t.length&&s<n.length&&t[s]==n[s];)s++;return n.slice(s).map(o=>"..").concat(t.slice(s)).join("/")}return{render(i,e){const t=new Zi(e);return new Ki({target:i,props:{session:t}})}}}();
