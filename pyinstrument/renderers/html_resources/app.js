var pyinstrumentHTMLRenderer=function(){"use strict";var Zt=Object.defineProperty;var en=(E,L,K)=>L in E?Zt(E,L,{enumerable:!0,configurable:!0,writable:!0,value:K}):E[L]=K;var P=(E,L,K)=>en(E,typeof L!="symbol"?L+"":L,K);function E(){}function L(t){return t()}function K(){return Object.create(null)}function Y(t){t.forEach(L)}function Ne(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ut(t){return Object.keys(t).length===0}function at(t,...e){if(t==null){for(const i of e)i(void 0);return E}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function fe(t,e,n){t.$$.on_destroy.push(at(e,n))}function d(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function Be(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function Ve(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function V(t){return document.createTextNode(t)}function F(){return V(" ")}function ft(){return V("")}function ne(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Le(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Ue(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function dt(t){let e;return{p(...n){e=n,e.forEach(i=>t.push(i))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function ht(t){return Array.from(t.childNodes)}function G(t,e){e=""+e,t.data!==e&&(t.data=e)}function We(t,e){t.value=e??""}function S(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function W(t,e,n){t.classList.toggle(e,!!n)}let ie;function re(t){ie=t}function Ke(){if(!ie)throw new Error("Function called outside component initialization");return ie}function pt(t){Ke().$$.on_mount.push(t)}function mt(t){Ke().$$.on_destroy.push(t)}const Q=[],Ye=[];let X=[];const je=[],gt=Promise.resolve();let Ae=!1;function _t(){Ae||(Ae=!0,gt.then(He))}function ye(t){X.push(t)}const Fe=new Set;let q=0;function He(){if(q!==0)return;const t=ie;do{try{for(;q<Q.length;){const e=Q[q];q++,re(e),vt(e.$$)}}catch(e){throw Q.length=0,q=0,e}for(re(null),Q.length=0,q=0;Ye.length;)Ye.pop()();for(let e=0;e<X.length;e+=1){const n=X[e];Fe.has(n)||(Fe.add(n),n())}X.length=0}while(Q.length);for(;je.length;)je.pop()();Ae=!1,Fe.clear(),re(t)}function vt(t){if(t.fragment!==null){t.update(),Y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ye)}}function bt(t){const e=[],n=[];X.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),X=e}const de=new Set;let j;function he(){j={r:0,c:[],p:j}}function pe(){j.r||Y(j.c),j=j.p}function D(t,e){t&&t.i&&(de.delete(t),t.i(e))}function M(t,e,n,i){if(t&&t.o){if(de.has(t))return;de.add(t),j.c.push(()=>{de.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function x(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function wt(t,e){M(t,1,1,()=>{e.delete(t.key)})}function At(t,e,n,i,r,o,l,s,c,u,f,a){let h=t.length,_=o.length,y=h;const p={};for(;y--;)p[t[y].key]=y;const w=[],b=new Map,A=new Map,T=[];for(y=_;y--;){const m=a(r,o,y),C=n(m);let k=l.get(C);k?T.push(()=>k.p(m,e)):(k=u(C,m),k.c()),b.set(C,w[y]=k),C in p&&A.set(C,Math.abs(y-p[C]))}const B=new Set,R=new Set;function U(m){D(m,1),m.m(s,f),l.set(m.key,m),f=m.first,_--}for(;h&&_;){const m=w[_-1],C=t[h-1],k=m.key,N=C.key;m===C?(f=m.first,h--,_--):b.has(N)?!l.has(k)||B.has(k)?U(m):R.has(N)?h--:A.get(k)>A.get(N)?(R.add(k),U(m)):(B.add(N),h--):(c(C,l),h--)}for(;h--;){const m=t[h];b.has(m.key)||c(m,l)}for(;_;)U(w[_-1]);return Y(T),w}function se(t){t&&t.c()}function J(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),ye(()=>{const o=t.$$.on_mount.map(L).filter(Ne);t.$$.on_destroy?t.$$.on_destroy.push(...o):Y(o),t.$$.on_mount=[]}),r.forEach(ye)}function Z(t,e){const n=t.$$;n.fragment!==null&&(bt(n.after_update),Y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(t,e){t.$$.dirty[0]===-1&&(Q.push(t),_t(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function oe(t,e,n,i,r,o,l=null,s=[-1]){const c=ie;re(t);const u=t.$$={fragment:null,ctx:[],props:o,update:E,not_equal:r,bound:K(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:K(),dirty:s,skip_bound:!1,root:e.target||c.$$.root};l&&l(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(a,h,..._)=>{const y=_.length?_[0]:h;return u.ctx&&r(u.ctx[a],u.ctx[a]=y)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](y),f&&yt(t,a)),h}):[],u.update(),f=!0,Y(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const a=ht(e.target);u.fragment&&u.fragment.l(a),a.forEach(I)}else u.fragment&&u.fragment.c();e.intro&&D(t.$$.fragment),J(t,e.target,e.anchor),He()}re(c)}class le{constructor(){P(this,"$$");P(this,"$$set")}$destroy(){Z(this,1),this.$destroy=E}$on(e,n){if(!Ne(n))return E;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!ut(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ft="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ft);const ee=[];function Ee(t,e=E){let n;const i=new Set;function r(s){if(z(t,s)&&(t=s,n)){const c=!ee.length;for(const u of i)u[1](),ee.push(u,t);if(c){for(let u=0;u<ee.length;u+=2)ee[u][0](ee[u+1]);ee.length=0}}}function o(s){r(s(t))}function l(s,c=E){const u=[s,c];return i.add(u),i.size===1&&(n=e(r,o)||E),s(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:l}}const ze=Ee({}),Ge=Ee({}),me=Ee("absolute");function Et(t){let e,n,i,r,o,l,s,c,u,f,a,h,_,y,p,w,b,A,T,B,R,U,m,C,k,N=t[0].sampleCount+"",$e,ot,be,lt,we,Oe,Me,ct;return Oe=dt(t[6][0]),{c(){e=v("div"),n=v("div"),i=v("div"),r=v("div"),r.textContent="pyinstrument",o=F(),l=v("div"),s=v("label"),s.textContent="Absolute time",c=F(),u=v("input"),f=F(),a=v("div"),a.textContent="Recorded:",h=F(),_=v("div"),_.textContent=`${t[2]}`,y=F(),p=v("div"),p.textContent="Duration:",w=F(),b=v("div"),b.textContent=`${t[4]} seconds`,A=F(),T=v("label"),T.textContent="Proportional time",B=F(),R=v("input"),U=F(),m=v("div"),m.textContent="Samples:",C=F(),k=v("div"),$e=V(N),ot=F(),be=v("div"),be.textContent="CPU time:",lt=F(),we=v("div"),we.textContent=`${t[3]} seconds`,g(r,"class","title svelte-tewt95"),g(s,"class","metric-label svelte-tewt95"),g(s,"for","absolute"),g(u,"type","radio"),u.__value="absolute",We(u,u.__value),g(u,"id","absolute"),g(u,"name","time-format"),u.checked=!0,g(a,"class","metric-label svelte-tewt95"),g(_,"class","metric-value svelte-tewt95"),g(p,"class","metric-label svelte-tewt95"),g(b,"class","metric-value svelte-tewt95"),g(T,"class","metric-label svelte-tewt95"),g(T,"for","proportion"),g(R,"type","radio"),R.__value="proportion",We(R,R.__value),g(R,"id","proportion"),g(R,"name","time-format"),g(m,"class","metric-label svelte-tewt95"),g(k,"class","metric-value svelte-tewt95"),g(be,"class","metric-label svelte-tewt95"),g(we,"class","metric-value svelte-tewt95"),g(l,"class","metrics svelte-tewt95"),g(i,"class","row svelte-tewt95"),g(n,"class","margins"),g(e,"class","header svelte-tewt95"),Oe.p(u,R)},m(H,ae){$(H,e,ae),d(e,n),d(n,i),d(i,r),d(i,o),d(i,l),d(l,s),d(l,c),d(l,u),u.checked=u.__value===t[1],d(l,f),d(l,a),d(l,h),d(l,_),d(l,y),d(l,p),d(l,w),d(l,b),d(l,A),d(l,T),d(l,B),d(l,R),R.checked=R.__value===t[1],d(l,U),d(l,m),d(l,C),d(l,k),d(k,$e),d(l,ot),d(l,be),d(l,lt),d(l,we),Me||(ct=[ne(u,"change",t[5]),ne(R,"change",t[7])],Me=!0)},p(H,[ae]){ae&2&&(u.checked=u.__value===H[1]),ae&2&&(R.checked=R.__value===H[1]),ae&1&&N!==(N=H[0].sampleCount+"")&&G($e,N)},i:E,o:E,d(H){H&&I(e),Oe.r(),Me=!1,Y(ct)}}}function Pt(t,e,n){var a;let i;fe(t,me,h=>n(1,i=h));let{session:r}=e;const o=new Date(r.startTime*1e3).toLocaleString(),l=(a=r.cpuTime)==null?void 0:a.toLocaleString(void 0,{maximumSignificantDigits:3}),s=r.duration.toLocaleString(void 0,{maximumSignificantDigits:3}),c=[[]];function u(){i=this.__value,me.set(i)}function f(){i=this.__value,me.set(i)}return t.$$set=h=>{"session"in h&&n(0,r=h.session)},[r,i,o,l,s,u,c,f]}class Ct extends le{constructor(e){super(),oe(this,e,Pt,Et,z,{session:0})}}const kt="data:image/png;base64,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";function Qe(t,e,n){const i=t.slice();return i[19]=e[n],i}function Xe(t){let e,n,i,r,o,l,s,c,u,f,a,h,_,y;return{c(){e=v("div"),n=v("div"),i=Ve("svg"),r=Ve("path"),o=F(),l=v("div"),s=V(t[5]),c=F(),u=v("div"),f=V(t[4]),a=F(),h=v("div"),h.textContent=`${t[11]}`,g(r,"d","M.937-.016L5.793 4.84.937 9.696z"),g(r,"fill",t[7]),g(r,"fill-rule","evenodd"),g(r,"fill-opacity",".582"),g(i,"width","6"),g(i,"height","10"),g(n,"class","frame-triangle svelte-1fyhnvv"),W(n,"rotate",!t[9]),S(n,"visibility",t[0].children.length>0?"visible":"hidden"),g(l,"class","time svelte-1fyhnvv"),S(l,"color",t[7]),S(l,"font-weight",t[10]<.2?500:600),g(u,"class","name svelte-1fyhnvv"),g(h,"class","code-position svelte-1fyhnvv"),g(e,"class","frame-description svelte-1fyhnvv"),W(e,"application-code",t[0].isApplicationCode),W(e,"children-visible",!t[9]),S(e,"padding-left",`${t[2]*35}px`)},m(p,w){$(p,e,w),d(e,n),d(n,i),d(i,r),d(e,o),d(e,l),d(l,s),d(e,c),d(e,u),d(u,f),d(e,a),d(e,h),_||(y=ne(e,"click",Ue(Le(t[12]))),_=!0)},p(p,w){w&128&&g(r,"fill",p[7]),w&512&&W(n,"rotate",!p[9]),w&1&&S(n,"visibility",p[0].children.length>0?"visible":"hidden"),w&32&&G(s,p[5]),w&128&&S(l,"color",p[7]),w&16&&G(f,p[4]),w&1&&W(e,"application-code",p[0].isApplicationCode),w&512&&W(e,"children-visible",!p[9]),w&4&&S(e,"padding-left",`${p[2]*35}px`)},d(p){p&&I(e),_=!1,y()}}}function qe(t){let e,n,i,r,o=t[0].group.frames.length+"",l,s,c,u,f,a;return{c(){e=v("div"),n=v("div"),i=v("div"),i.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',r=F(),l=V(o),s=V(` frames hidden
        (`),c=V(t[6]),u=V(")"),g(i,"class","group-triangle svelte-1fyhnvv"),W(i,"rotate",t[8]),g(n,"class","group-header-button svelte-1fyhnvv"),g(e,"class","group-header svelte-1fyhnvv"),S(e,"padding-left",`${t[2]*35}px`)},m(h,_){$(h,e,_),d(e,n),d(n,i),d(n,r),d(n,l),d(n,s),d(n,c),d(n,u),f||(a=ne(e,"click",Ue(Le(t[13]))),f=!0)},p(h,_){_&256&&W(i,"rotate",h[8]),_&1&&o!==(o=h[0].group.frames.length+"")&&G(l,o),_&64&&G(c,h[6]),_&4&&S(e,"padding-left",`${h[2]*35}px`)},d(h){h&&I(e),f=!1,a()}}}function xe(t){let e,n=[],i=new Map,r,o=x(t[0].children);const l=s=>s[19].identifier;for(let s=0;s<o.length;s+=1){let c=Qe(t,o,s),u=l(c);i.set(u,n[s]=Je(u,c))}return{c(){e=v("div");for(let s=0;s<n.length;s+=1)n[s].c();g(e,"class","children svelte-1fyhnvv")},m(s,c){$(s,e,c);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);r=!0},p(s,c){c&15&&(o=x(s[0].children),he(),n=At(n,c,l,1,s,o,i,e,wt,Je,null,Qe),pe())},i(s){if(!r){for(let c=0;c<o.length;c+=1)D(n[c]);r=!0}},o(s){for(let c=0;c<n.length;c+=1)M(n[c]);r=!1},d(s){s&&I(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function Je(t,e){let n,i,r;return i=new Ze({props:{frame:e[19],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:t,first:null,c(){n=ft(),se(i.$$.fragment),this.first=n},m(o,l){$(o,n,l),J(i,o,l),r=!0},p(o,l){e=o;const s={};l&1&&(s.frame=e[19]),l&2&&(s.rootFrame=e[1]),l&12&&(s.indent=e[2]+(e[3]?1:0)),i.$set(s)},i(o){r||(D(i.$$.fragment,o),r=!0)},o(o){M(i.$$.fragment,o),r=!1},d(o){o&&I(n),Z(i,o)}}}function Rt(t){let e,n,i,r,o,l,s=t[3]&&Xe(t),c=t[0].group&&t[0].group.rootFrame==t[0]&&!t[9]&&qe(t),u=!t[9]&&t[0].children.length>0&&xe(t);return{c(){e=v("div"),s&&s.c(),n=F(),c&&c.c(),i=F(),u&&u.c(),r=F(),o=v("div"),o.innerHTML="",g(o,"class","visual-guide svelte-1fyhnvv"),S(o,"left",`${t[2]*35+21}px`),S(o,"backgroundColor",t[7]),g(e,"class","frame svelte-1fyhnvv")},m(f,a){$(f,e,a),s&&s.m(e,null),d(e,n),c&&c.m(e,null),d(e,i),u&&u.m(e,null),d(e,r),d(e,o),l=!0},p(f,[a]){f[3]?s?s.p(f,a):(s=Xe(f),s.c(),s.m(e,n)):s&&(s.d(1),s=null),f[0].group&&f[0].group.rootFrame==f[0]&&!f[9]?c?c.p(f,a):(c=qe(f),c.c(),c.m(e,i)):c&&(c.d(1),c=null),!f[9]&&f[0].children.length>0?u?(u.p(f,a),a&513&&D(u,1)):(u=xe(f),u.c(),D(u,1),u.m(e,r)):u&&(he(),M(u,1,1,()=>{u=null}),pe()),a&4&&S(o,"left",`${f[2]*35+21}px`),a&128&&S(o,"backgroundColor",f[7])},i(f){l||(D(u),l=!0)},o(f){M(u),l=!1},d(f){f&&I(e),s&&s.d(),c&&c.d(),u&&u.d()}}}function St(t,e,n){var U;let i,r,o,l,s;fe(t,Ge,m=>n(14,o=m)),fe(t,ze,m=>n(15,l=m)),fe(t,me,m=>n(16,s=m));let{frame:c}=e,{rootFrame:u}=e,{indent:f=0}=e,a;const h=c.time/u.time;let _;const y=`${c.filePathShort}:${(U=c.lineNo)==null?void 0:U.toString().padEnd(4," ")}`;let p,w=null;if(c.group){const m=c.group.libraries;m.length<4?w=m.join(", "):w=`${m[0]}, ${m[1]}, ${m[2]}...`}let b;h>.6?b="#FF4159":h>.3?b="#F5A623":h>.2?b="#D8CB2A":b="#7ED321";function A(m){T(c,!r,m.altKey)}function T(m,C,k=!0){if(Ge.update(N=>({...N,[m.uuid]:C})),k)for(const N of m.children)T(N,C,!0),m.group&&m.group.rootFrame==m&&B(m.group.id,!C)}function B(m,C){ze.update(k=>({...k,[m]:C}))}function R(){c.group&&B(c.group.id,!i)}return t.$$set=m=>{"frame"in m&&n(0,c=m.frame),"rootFrame"in m&&n(1,u=m.rootFrame),"indent"in m&&n(2,f=m.indent)},t.$$.update=()=>{var m,C;if(t.$$.dirty&32769&&(c.group?l[c.group.id??""]||((m=c.group)==null?void 0:m.rootFrame)===c||c.children.filter(k=>!k.group).length>1?n(3,a=!0):n(3,a=!1):n(3,a=!0)),t.$$.dirty&1&&(c.className?n(4,_=`${c.className}.${c.function}`):n(4,_=c.function)),t.$$.dirty&65537)if(s==="absolute")n(5,p=c.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(s==="proportion")n(5,p=`${(h*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");t.$$.dirty&32769&&n(8,i=l[((C=c.group)==null?void 0:C.id)??""]===!0),t.$$.dirty&16385&&n(9,r=o[c.uuid]===!0)},[c,u,f,a,_,p,w,b,i,r,h,y,A,R,o,l,s]}let Ze=class extends le{constructor(e){super(),oe(this,e,St,Rt,z,{frame:0,rootFrame:1,indent:2})}};function et(t,e,n){let i=t;for(const r of e)if(i=r.function(i,n),!i)return null;return i}const Tt="\0",It="[await]",ce="[self]",Dt=[It,ce,"[out-of-context]","[root]"],$t="c",Ot="h";class ue{constructor(e,n){P(this,"uuid",crypto.randomUUID());P(this,"identifier");P(this,"_identifierParts");P(this,"time",0);P(this,"absorbedTime",0);P(this,"group",null);P(this,"attributes");P(this,"_children",[]);P(this,"parent",null);P(this,"context");var r;this.identifier=e.identifier,this._identifierParts=this.identifier.split(Tt),this.time=e.time??0,this.attributes=e.attributes??{},this.context=n;const i=(r=e.children)==null?void 0:r.map(o=>new ue(o,n));i&&this.addChildren(i)}cloneDeep(){return new ue(this,this.context)}get children(){return this._children}addChild(e,n={}){if(e.removeFromParent(),e.parent=this,n.after){const i=this._children.indexOf(n.after);this._children.splice(i+1,0,e)}else this._children.push(e)}addChildren(e,n={}){n.after?(e.slice().reverse(),e.forEach(r=>this.addChild(r,n))):e.forEach(i=>this.addChild(i,n))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(i=>i.startsWith(e)).map(i=>({data:i.slice(1),time:this.attributes[i]}))}getAttributeValue(e){const n=this.getAttributes(e);if(!n||n.length==0)return null;let i=0;for(let r=0;r<n.length;r++)n[r].time>n[i].time&&(i=r);return n[i].data}get hasTracebackhide(){return this.getAttributeValue(Ot)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return Dt.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||["/lib/","\\lib\\"].some(i=>e.includes(i))?!1:e.startsWith("<")?!!e.startsWith("<ipython-input-"):!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue($t)??""}get library(){const e=this.filePathShort;return e?/^[^\\/.]*/.exec(e)[0]:null}}class Mt{constructor(e){P(this,"id");P(this,"rootFrame");P(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const n=this._frames.indexOf(e);if(n===-1)throw new Error("Frame not found in group.");this._frames.splice(n,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const n of this.frames){let i=!1;for(const r of n.children)if(r.group!=this){i=!0;break}i&&e.push(n)}return e}get libraries(){const e=[];for(const n of this.frames){const i=n.library;i&&(e.includes(i)||e.push(i))}return e}}class Nt extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function ge(t,e){const{replaceWith:n}=e,i=t.parent;if(!i)throw new Error("Cannot delete the root frame");if(n=="children")i.addChildren(t.children,{after:t});else if(n=="self_time")i.addChild(new ue({identifier:ce},i.context));else if(n=="nothing")i.absorbedTime+=t.time;else throw new Nt(n);t.removeFromParent(),Pe(t,!0)}function Bt(t,e){if(t.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=t.absorbedTime,e.time+=t.time,Object.entries(t.attributes).forEach(([n,i])=>{e.attributes[n]!==void 0?e.attributes[n]+=i:e.attributes[n]=i}),e.addChildren(t.children),t.removeFromParent(),Pe(t,!1)}function Pe(t,e){if(e&&t.children&&t.children.forEach(n=>{Pe(n,!0)}),t.group){const n=t.group;n.removeFrame(t),n.frames.length===1&&n.removeFrame(n.frames[0])}}const O=[];function _e(t,e){if(!t)return null;for(const n of t.children)_e(n),n.filePath&&n.filePath.includes("<frozen importlib._bootstrap")&&ge(n,{replaceWith:"children"});return t}O.push({name:"remove_importlib",description:"Removes <frozen importlib._bootstrap frames that clutter the output.",function:_e,optionsSpec:[],category:"normal"});function ve(t,e){if(!t)return null;for(const n of t.children)ve(n),n.hasTracebackhide&&ge(n,{replaceWith:"children"});return t}O.push({name:"remove_tracebackhide",description:"Removes frames that have set a local __tracebackhide__ (e.g. __tracebackhide__ = True), to hide them from the output.",function:ve,optionsSpec:[],category:"advanced"});function Ce(t,e){if(!t)return null;const n={};for(const i of t.children.slice())if(n[i.identifier]){const r=n[i.identifier];Bt(i,r)}else n[i.identifier]=i;return t.children.forEach(i=>Ce(i)),t._children.sort((i,r)=>r.time-i.time),t}O.push({name:"aggregate_repeated_calls",description:"Converts a timeline into a time-aggregate summary. Adds together calls along the same call stack, so that repeated calls appear as the same frame. Removes time-linearity - frames are sorted according to total time spent.",function:Ce,optionsSpec:[],category:"normal"});function ke(t,e){if(!t)return null;const n=e.hideRegex,i=e.showRegex;function r(l){const s=l.filePath||"",c=i&&new RegExp(i).test(s),u=n&&new RegExp(n).test(s);return c?!1:u?!0:!l.isApplicationCode}function o(l,s){s.addFrame(l),l.children.forEach(c=>{r(c)&&o(c,s)})}return t.children.forEach(l=>{if(!l.group&&r(l)&&l.children.some(r)){const s=new Mt(l);o(l,s)}ke(l,e)}),t}O.push({name:"Group library frames",description:"Groups frames that should be hidden.",function:ke,optionsSpec:[{key:"hideRegex",name:"Hide regex",value:{type:"string",default:""}},{key:"showRegex",name:"Show regex",value:{type:"string",default:""}}],category:"normal"});function Re(t,e,n=!0){if(!t)return null;let i=null;for(const r of t.children)r.identifier===ce?i?(i.time+=r.time,r.removeFromParent()):i=r:i=null;return n&&t.children.forEach(r=>Re(r,e,!0)),t}O.push({name:"Merge consecutive self time",description:"Combines consecutive 'self time' frames.",function:Re,optionsSpec:[],category:"advanced"});function Se(t,e){return t?(t.children.length===1&&t.children[0].identifier===ce&&ge(t.children[0],{replaceWith:"nothing"}),t.children.forEach(n=>Se(n)),t):null}O.push({name:"Remove unnecessary self time nodes",description:"Removes unnecessary self-time nodes.",function:Se,optionsSpec:[],category:"advanced"});function Te(t,e,n=null){if(!t)return null;n===null&&(n=t.time,n<=0&&(n=1e-44));const i=e.filterThreshold||.01;for(const r of t.children.slice())r.time/n<i&&ge(r,{replaceWith:"nothing"});return t.children.forEach(r=>Te(r,e,n)),t}O.push({name:"Remove irrelevant nodes",description:"Removes nodes that represent less than a certain percentage of the output.",function:Te,optionsSpec:[{key:"filterThreshold",name:"Filter threshold",value:{type:"number",default:.01,min:0,max:1,sliderMin:1e-4,sliderMax:1}}],category:"normal"});function Ie(t,e){if(!t)return null;const n=l=>{var s;return((s=l.filePath)==null?void 0:s.includes("pyinstrument/__main__.py"))&&l.children.length>0},i=l=>{var s;return l.proportionOfParent>.8&&((s=l.filePath)==null?void 0:s.includes("<string>"))&&l.children.length>0},r=l=>{var s;return l.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(l.filePath??"")||((s=l.filePath)==null?void 0:s.includes("<frozen runpy>")))&&l.children.length>0};let o=t;if(!n(o)||(o=o.children[0],!i(o))||(o=o.children[0],!r(o)))return t;for(;r(o);)o=o.children[0];return o.removeFromParent(),o}O.push({name:"Remove first pyinstrument frames",description:"Removes the initial frames specific to the command line use of pyinstrument.",function:Ie,optionsSpec:[],category:"advanced"});function tt(t,e,n){const i=t.slice();return i[7]=e[n],i[8]=e,i[9]=n,i}function nt(t){let e,n,i,r=t[7].name+"",o,l,s,c;function u(){t[5].call(n,t[7])}return{c(){e=v("label"),n=v("input"),i=F(),o=V(r),l=F(),g(n,"type","checkbox")},m(f,a){$(f,e,a),d(e,n),n.checked=t[0][t[7].name],d(e,i),d(e,o),d(e,l),s||(c=ne(n,"change",u),s=!0)},p(f,a){t=f,a&1&&(n.checked=t[0][t[7].name])},d(f){f&&I(e),s=!1,c()}}}function Vt(t){let e,n;return e=new Ze({props:{frame:t[1],rootFrame:t[1]}}),{c(){se(e.$$.fragment)},m(i,r){J(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.frame=i[1]),r&2&&(o.rootFrame=i[1]),e.$set(o)},i(i){n||(D(e.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),n=!1},d(i){Z(e,i)}}}function Lt(t){let e;return{c(){e=v("div"),e.textContent="All frames were filtered out.",g(e,"class","error")},m(n,i){$(n,e,i)},p:E,i:E,o:E,d(n){n&&I(e)}}}function Ut(t){let e,n,i,r,o,l,s,c,u,f=x(O),a=[];for(let p=0;p<f.length;p+=1)a[p]=nt(tt(t,f,p));const h=[Lt,Vt],_=[];function y(p,w){return p[1]?1:0}return s=y(t),c=_[s]=h[s](t),{c(){e=v("div"),n=v("div"),i=v("h2"),i.textContent="Options",r=F(),o=v("div");for(let p=0;p<a.length;p+=1)a[p].c();l=F(),c.c(),g(o,"class","processor-options"),g(n,"class","options"),g(e,"class","tree-view")},m(p,w){$(p,e,w),d(e,n),d(n,i),d(n,r),d(n,o);for(let b=0;b<a.length;b+=1)a[b]&&a[b].m(o,null);d(e,l),_[s].m(e,null),u=!0},p(p,[w]){if(w&1){f=x(O);let A;for(A=0;A<f.length;A+=1){const T=tt(p,f,A);a[A]?a[A].p(T,w):(a[A]=nt(T),a[A].c(),a[A].m(o,null))}for(;A<a.length;A+=1)a[A].d(1);a.length=f.length}let b=s;s=y(p),s===b?_[s].p(p,w):(he(),M(_[b],1,1,()=>{_[b]=null}),pe(),c=_[s],c?c.p(p,w):(c=_[s]=h[s](p),c.c()),D(c,1),c.m(e,null))},i(p){u||(D(c),u=!0)},o(p){M(c),u=!1},d(p){p&&I(e),Be(a,p),_[s].d()}}}function Wt(t,e,n){let{session:i}=e;const r=[_e,ve,Re,Ce,Se,Te,Ie,ke];let o,l={},s={};for(const f of O){l[f.name]=r.includes(f.function);for(const a of f.optionsSpec)s[a.name]=a.value.default}let c;function u(f){l[f.name]=this.checked,n(0,l)}return t.$$set=f=>{"session"in f&&n(2,i=f.session)},t.$$.update=()=>{t.$$.dirty&1&&n(3,o=r.map(f=>O.find(a=>a.function==f)).filter(f=>l[f.name])),t.$$.dirty&28&&n(1,c=et(i.rootFrame.cloneDeep(),o,s))},[l,c,i,o,s,u]}class Kt extends le{constructor(e){super(),oe(this,e,Wt,Ut,z,{session:2})}}function it(t,e,n){const i=t.slice();return i[8]=e[n].frame,i[9]=e[n].startTime,i[10]=e[n].depth,i}function rt(t){let e;return{c(){e=v("div"),e.textContent=`${t[8].function}`,g(e,"class","frame svelte-z2msq1"),S(e,"top",`${t[10]*21}px`),S(e,"left",`${t[9]*2e4}px`),S(e,"width",`${t[8].time*2e4}px`)},m(n,i){$(n,e,i)},p:E,d(n){n&&I(e)}}}function Yt(t){let e,n,i=x(t[0]),r=[];for(let o=0;o<i.length;o+=1)r[o]=rt(it(t,i,o));return{c(){e=v("div"),n=v("div");for(let o=0;o<r.length;o+=1)r[o].c();g(n,"class","frames svelte-z2msq1"),g(e,"class","timeline")},m(o,l){$(o,e,l),d(e,n);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(n,null)},p(o,[l]){if(l&1){i=x(o[0]);let s;for(s=0;s<i.length;s+=1){const c=it(o,i,s);r[s]?r[s].p(c,l):(r[s]=rt(c),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=i.length}},i:E,o:E,d(o){o&&I(e),Be(r,o)}}}function jt(t,e,n){let{session:i}=e;const r=[_e,ve,Ie];let o,l={},s={};for(const a of O){l[a.name]=r.includes(a.function);for(const h of a.optionsSpec)s[h.name]=h.value.default}let c;const u=[];function f(a,h,_){u.push({frame:a,startTime:h,depth:_});let y=h;for(const p of a.children)p.identifier!==ce&&f(p,y,_+1),y+=p.time}return t.$$set=a=>{"session"in a&&n(1,i=a.session)},t.$$.update=()=>{t.$$.dirty&8&&n(2,o=r.map(a=>O.find(h=>h.function==a)).filter(a=>l[a.name])),t.$$.dirty&22&&n(5,c=et(i.rootFrame.cloneDeep(),o,s)),t.$$.dirty&32&&c&&f(c,0,0)},[u,i,o,l,s,c]}class Ht extends le{constructor(e){super(),oe(this,e,jt,Yt,z,{session:1})}}function zt(t){let e,n,i,r;return e=new Kt({props:{session:t[0]}}),i=new Ht({props:{session:t[0]}}),{c(){se(e.$$.fragment),n=F(),se(i.$$.fragment)},m(o,l){J(e,o,l),$(o,n,l),J(i,o,l),r=!0},p(o,l){const s={};l&1&&(s.session=o[0]),e.$set(s);const c={};l&1&&(c.session=o[0]),i.$set(c)},i(o){r||(D(e.$$.fragment,o),D(i.$$.fragment,o),r=!0)},o(o){M(e.$$.fragment,o),M(i.$$.fragment,o),r=!1},d(o){o&&I(n),Z(e,o),Z(i,o)}}}function Gt(t){let e;return{c(){e=v("div"),e.textContent="No samples recorded.",g(e,"class","error")},m(n,i){$(n,e,i)},p:E,i:E,o:E,d(n){n&&I(e)}}}function Qt(t){let e,n,i,r,o,l,s,c,u,f,a,h,_;n=new Ct({props:{session:t[0]}});const y=[Gt,zt],p=[];function w(b,A){return b[0].rootFrame?1:0}return a=w(t),h=p[a]=y[a](t),{c(){e=v("div"),se(n.$$.fragment),i=F(),r=v("div"),o=F(),l=v("div"),s=v("div"),c=v("span"),c.textContent="Program: ",u=V(t[1]),f=F(),h.c(),g(r,"class","spacer"),S(r,"height","20px"),g(c,"class","label svelte-1gm5pcf"),g(s,"class","program svelte-1gm5pcf"),g(l,"class","margins"),g(e,"class","app svelte-1gm5pcf")},m(b,A){$(b,e,A),J(n,e,null),d(e,i),d(e,r),d(e,o),d(e,l),d(l,s),d(s,c),d(s,u),d(l,f),p[a].m(l,null),_=!0},p(b,[A]){const T={};A&1&&(T.session=b[0]),n.$set(T),(!_||A&2)&&G(u,b[1]);let B=a;a=w(b),a===B?p[a].p(b,A):(he(),M(p[B],1,1,()=>{p[B]=null}),pe(),h=p[a],h?h.p(b,A):(h=p[a]=y[a](b),h.c()),D(h,1),h.m(l,null))},i(b){_||(D(n.$$.fragment,b),D(h),_=!0)},o(b){M(n.$$.fragment,b),M(h),_=!1},d(b){b&&I(e),Z(n),p[a].d()}}}function De(){document.body.style.minHeight=`${window.scrollY+window.innerHeight}px`}function Xt(t,e,n){let{session:i}=e;const r=document.createElement("link");r.rel="shortut icon",r.href=kt,document.head.appendChild(r),pt(()=>{window.addEventListener("scroll",De),De()}),mt(()=>{window.removeEventListener("scroll",De)});const o=i.rootFrame,l=o==null?void 0:o.time.toLocaleString(void 0,{maximumSignificantDigits:3});let s=o==null?void 0:o.function;return s=="<module>"&&(s=i.program),document.title=`${l}s - ${s} - pyinstrument`,t.$$set=c=>{"session"in c&&n(0,i=c.session)},[i,s]}class qt extends le{constructor(e){super(),oe(this,e,Xt,Qt,z,{session:0})}}class xt{constructor(e){P(this,"startTime");P(this,"duration");P(this,"sampleCount");P(this,"program");P(this,"cpuTime");P(this,"rootFrame");P(this,"sysPath");P(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.program=e.session.program,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.rootFrame=new ue(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let n=e;if(te(e).length>1)for(const r of this.sysPath){const o=Jt(e,r);te(o).length<te(n).length&&(n=o)}return this._shortenPathCache[e]=n,n}}function te(t){return t.split(/[/\\]/)}function st(t){const e=te(t);return e.length>0&&e[0].endsWith(":")?e[0]:null}function Jt(t,e){if(st(t)!=st(e))return t;const n=te(t),i=te(e);let r=0;for(;r<n.length&&r<i.length&&n[r]==i[r];)r++;return i.slice(r).map(l=>"..").concat(n.slice(r)).join("/")}return{render(t,e){const n=new xt(e);return new qt({target:t,props:{session:n}})}}}();
