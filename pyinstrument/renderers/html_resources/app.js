var pyinstrumentHTMLRenderer=function(){"use strict";var On=Object.defineProperty;var Dn=(k,ue,Ie)=>ue in k?On(k,ue,{enumerable:!0,configurable:!0,writable:!0,value:Ie}):k[ue]=Ie;var C=(k,ue,Ie)=>Dn(k,typeof ue!="symbol"?ue+"":ue,Ie);function k(){}function ue(t){return t()}function Ie(){return Object.create(null)}function de(t){t.forEach(ue)}function mt(t){return typeof t=="function"}function re(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function hi(t){return Object.keys(t).length===0}function It(t,...e){if(t==null){for(const n of e)n(void 0);return k}const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function fe(t,e,i){t.$$.on_destroy.push(It(e,i))}function pi(t,e,i){return t.set(i),e}function a(t,e){t.appendChild(e)}function G(t,e,i){t.insertBefore(e,i||null)}function U(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function L(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function T(t){return document.createTextNode(t)}function w(){return T(" ")}function mi(){return T("")}function B(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function vt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function gt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function s(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function _t(t){let e;return{p(...i){e=i,e.forEach(n=>t.push(n))},r(){e.forEach(i=>t.splice(t.indexOf(i),1))}}}function vi(t){return Array.from(t.childNodes)}function Ee(t,e){e=""+e,t.data!==e&&(t.data=e)}function se(t,e){t.value=e??""}function q(t,e,i,n){i==null?t.style.removeProperty(e):t.style.setProperty(e,i,"")}function Te(t,e,i){t.classList.toggle(e,!!i)}function gi(t,e,{bubbles:i=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:n})}let Ze;function qe(t){Ze=t}function Rt(){if(!Ze)throw new Error("Function called outside component initialization");return Ze}function St(t){Rt().$$.on_mount.push(t)}function _i(){const t=Rt();return(e,i,{cancelable:n=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=gi(e,i,{cancelable:n});return r.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}const Ve=[],He=[];let Oe=[];const Vt=[],bi=Promise.resolve();let bt=!1;function wi(){bt||(bt=!0,bi.then(Ht))}function wt(t){Oe.push(t)}const yt=new Set;let De=0;function Ht(){if(De!==0)return;const t=Ze;do{try{for(;De<Ve.length;){const e=Ve[De];De++,qe(e),yi(e.$$)}}catch(e){throw Ve.length=0,De=0,e}for(qe(null),Ve.length=0,De=0;He.length;)He.pop()();for(let e=0;e<Oe.length;e+=1){const i=Oe[e];yt.has(i)||(yt.add(i),i())}Oe.length=0}while(Ve.length);for(;Vt.length;)Vt.pop()();bt=!1,yt.clear(),qe(t)}function yi(t){if(t.fragment!==null){t.update(),de(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(wt)}}function Ai(t){const e=[],i=[];Oe.forEach(n=>t.indexOf(n)===-1?e.push(n):i.push(n)),i.forEach(n=>n()),Oe=e}const rt=new Set;let Re;function $e(){Re={r:0,c:[],p:Re}}function Le(){Re.r||de(Re.c),Re=Re.p}function V(t,e){t&&t.i&&(rt.delete(t),t.i(e))}function D(t,e,i,n){if(t&&t.o){if(rt.has(t))return;rt.add(t),Re.c.push(()=>{rt.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}function Ot(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ci(t,e){D(t,1,1,()=>{e.delete(t.key)})}function Fi(t,e,i,n,r,o,l,c,u,d,f,m){let h=t.length,v=o.length,_=h;const b={};for(;_--;)b[t[_].key]=_;const A=[],I=new Map,R=new Map,M=[];for(_=v;_--;){const g=m(r,o,_),E=i(g);let y=l.get(E);y?M.push(()=>y.p(g,e)):(y=d(E,g),y.c()),I.set(E,A[_]=y),E in b&&R.set(E,Math.abs(_-b[E]))}const H=new Set,z=new Set;function F(g){V(g,1),g.m(c,f),l.set(g.key,g),f=g.first,v--}for(;h&&v;){const g=A[v-1],E=t[h-1],y=g.key,P=E.key;g===E?(f=g.first,h--,v--):I.has(P)?!l.has(y)||H.has(y)?F(g):z.has(P)?h--:R.get(y)>R.get(P)?(z.add(y),F(g)):(H.add(P),h--):(u(E,l),h--)}for(;h--;){const g=t[h];I.has(g.key)||u(g,l)}for(;v;)F(A[v-1]);return de(M),A}function he(t){t&&t.c()}function le(t,e,i){const{fragment:n,after_update:r}=t.$$;n&&n.m(e,i),wt(()=>{const o=t.$$.on_mount.map(ue).filter(mt);t.$$.on_destroy?t.$$.on_destroy.push(...o):de(o),t.$$.on_mount=[]}),r.forEach(wt)}function oe(t,e){const i=t.$$;i.fragment!==null&&(Ai(i.after_update),de(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function ki(t,e){t.$$.dirty[0]===-1&&(Ve.push(t),wi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pe(t,e,i,n,r,o,l=null,c=[-1]){const u=Ze;qe(t);const d=t.$$={fragment:null,ctx:[],props:o,update:k,not_equal:r,bound:Ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ie(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};l&&l(d.root);let f=!1;if(d.ctx=i?i(t,e.props||{},(m,h,...v)=>{const _=v.length?v[0]:h;return d.ctx&&r(d.ctx[m],d.ctx[m]=_)&&(!d.skip_bound&&d.bound[m]&&d.bound[m](_),f&&ki(t,m)),h}):[],d.update(),f=!0,de(d.before_update),d.fragment=n?n(d.ctx):!1,e.target){if(e.hydrate){const m=vi(e.target);d.fragment&&d.fragment.l(m),m.forEach(U)}else d.fragment&&d.fragment.c();e.intro&&V(t.$$.fragment),le(t,e.target,e.anchor),Ht()}qe(u)}class me{constructor(){C(this,"$$");C(this,"$$set")}$destroy(){oe(this,1),this.$destroy=k}$on(e,i){if(!mt(i))return k;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const r=n.indexOf(i);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!hi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ei="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ei);function Ti(t){let e,i;return{c(){e=L("svg"),i=L("path"),s(i,"fill-rule","evenodd"),s(i,"clip-rule","evenodd"),s(i,"d","M5.11634 0.889422C4.86506 -0.296474 3.17237 -0.296474 2.92109 0.889422C2.78291 1.54158 2.10994 1.93011 1.47607 1.72371C0.323418 1.34837 -0.522932 2.81429 0.378448 3.62484C0.87414 4.07059 0.87414 4.84767 0.378448 5.29341C-0.522931 6.10397 0.323418 7.56989 1.47607 7.19455C2.10994 6.98814 2.78291 7.37668 2.92109 8.02883C3.17237 9.21473 4.86506 9.21473 5.11634 8.02883C5.25452 7.37668 5.92749 6.98814 6.56136 7.19455C7.71401 7.56989 8.56036 6.10397 7.65898 5.29341C7.16329 4.84767 7.16329 4.07059 7.65898 3.62484C8.56036 2.81429 7.71401 1.34837 6.56136 1.72371C5.92749 1.93011 5.25452 1.54158 5.11634 0.889422ZM4.01883 6.33408C5.05436 6.33408 5.89383 5.49462 5.89383 4.45908C5.89383 3.42355 5.05436 2.58408 4.01883 2.58408C2.98329 2.58408 2.14383 3.42355 2.14383 4.45908C2.14383 5.49462 2.98329 6.33408 4.01883 6.33408Z"),s(i,"fill","currentColor"),s(e,"width","9"),s(e,"height","9"),s(e,"viewBox","0 0 9 9"),s(e,"fill","none"),s(e,"xmlns","http://www.w3.org/2000/svg")},m(n,r){G(n,e,r),a(e,i)},p:k,i:k,o:k,d(n){n&&U(e)}}}class Mi extends me{constructor(e){super(),pe(this,e,null,Ti,re,{})}}function Pi(t){let e,i,n,r,o,l,c,u,d,f,m,h,v,_,b,A,I;return{c(){e=L("svg"),i=L("g"),n=L("path"),r=L("path"),o=L("defs"),l=L("filter"),c=L("feFlood"),u=L("feBlend"),d=L("feGaussianBlur"),f=L("linearGradient"),m=L("stop"),h=L("stop"),v=L("stop"),_=L("linearGradient"),b=L("stop"),A=L("stop"),I=L("stop"),s(n,"fill-rule","evenodd"),s(n,"clip-rule","evenodd"),s(n,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),s(n,"fill","url(#paint0_linear_67_262)"),s(i,"opacity","0.5"),s(i,"filter","url(#filter0_f_67_262)"),s(r,"fill-rule","evenodd"),s(r,"clip-rule","evenodd"),s(r,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),s(r,"fill","url(#paint1_linear_67_262)"),s(c,"flood-opacity","0"),s(c,"result","BackgroundImageFix"),s(u,"mode","normal"),s(u,"in","SourceGraphic"),s(u,"in2","BackgroundImageFix"),s(u,"result","shape"),s(d,"stdDeviation","3.39785"),s(d,"result","effect1_foregroundBlur_67_262"),s(l,"id","filter0_f_67_262"),s(l,"x","3.2043"),s(l,"y","2.2043"),s(l,"width","36.0914"),s(l,"height","41.0914"),s(l,"filterUnits","userSpaceOnUse"),s(l,"color-interpolation-filters","sRGB"),s(m,"stop-color","#FFAA00"),s(h,"offset","0.514478"),s(h,"stop-color","#FFEB00"),s(v,"offset","1"),s(v,"stop-color","#98FF05"),s(f,"id","paint0_linear_67_262"),s(f,"x1","7.3769"),s(f,"y1","18.4566"),s(f,"x2","20.6583"),s(f,"y2","33.1038"),s(f,"gradientUnits","userSpaceOnUse"),s(b,"stop-color","#FFC834"),s(A,"offset","0.514478"),s(A,"stop-color","#FAF534"),s(I,"offset","1"),s(I,"stop-color","#B8FF38"),s(_,"id","paint1_linear_67_262"),s(_,"x1","7.3769"),s(_,"y1","18.4566"),s(_,"x2","20.6583"),s(_,"y2","33.1038"),s(_,"gradientUnits","userSpaceOnUse"),s(e,"width","44"),s(e,"height","44"),s(e,"viewBox","0 0 44 44"),s(e,"fill","none"),s(e,"xmlns","http://www.w3.org/2000/svg")},m(R,M){G(R,e,M),a(e,i),a(i,n),a(e,r),a(e,o),a(o,l),a(l,c),a(l,u),a(l,d),a(o,f),a(f,m),a(f,h),a(f,v),a(o,_),a(_,b),a(_,A),a(_,I)},p:k,i:k,o:k,d(R){R&&U(e)}}}class Ii extends me{constructor(e){super(),pe(this,e,null,Pi,re,{})}}const Be=[];function Ri(t,e){return{subscribe:st(t,e).subscribe}}function st(t,e=k){let i;const n=new Set;function r(c){if(re(t,c)&&(t=c,i)){const u=!Be.length;for(const d of n)d[1](),Be.push(d,t);if(u){for(let d=0;d<Be.length;d+=2)Be[d][0](Be[d+1]);Be.length=0}}}function o(c){r(c(t))}function l(c,u=k){const d=[c,u];return n.add(d),n.size===1&&(i=e(r,o)||k),c(t),()=>{n.delete(d),n.size===0&&i&&(i(),i=null)}}return{set:r,update:o,subscribe:l}}function Dt(t,e,i){const n=!Array.isArray(t),r=n?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Ri(i,(l,c)=>{let u=!1;const d=[];let f=0,m=k;const h=()=>{if(f)return;m();const _=e(n?d[0]:d,l,c);o?l(_):m=mt(_)?_:k},v=r.map((_,b)=>It(_,A=>{d[b]=A,f&=~(1<<b),u&&h()},()=>{f|=1<<b}));return u=!0,h(),function(){de(v),m(),u=!1}})}var At={local:{},session:{}};function Si(t){return t==="local"?localStorage:sessionStorage}function Ct(t,e,i){var n,r,o,l,c,u,d,f;i!=null&&i.onError&&console.warn("onError has been deprecated. Please use onWriteError instead");const m=(n=i==null?void 0:i.serializer)!=null?n:JSON,h=(r=i==null?void 0:i.storage)!=null?r:"local",v=(o=i==null?void 0:i.syncTabs)!=null?o:!0,_=(c=(l=i==null?void 0:i.onWriteError)!=null?l:i==null?void 0:i.onError)!=null?c:F=>console.error(`Error when writing value from persisted store "${t}" to ${h}`,F),b=(u=i==null?void 0:i.onParseError)!=null?u:(F,g)=>console.error(`Error when parsing ${F?'"'+F+'"':"value"} from persisted store "${t}"`,g),A=(d=i==null?void 0:i.beforeRead)!=null?d:F=>F,I=(f=i==null?void 0:i.beforeWrite)!=null?f:F=>F,R=typeof window<"u"&&typeof document<"u",M=R?Si(h):null;function H(F,g){const E=I(g);try{M==null||M.setItem(F,m.stringify(E))}catch(y){_(y)}}function z(){function F(P){try{return m.parse(P)}catch(W){b(P,W)}}const g=M==null?void 0:M.getItem(t);if(g==null)return e;const E=F(g);return E==null?e:A(E)}if(!At[h][t]){const F=z(),g=st(F,P=>{if(R&&h=="local"&&v){const W=Y=>{if(Y.key===t&&Y.newValue){let N;try{N=m.parse(Y.newValue)}catch(Se){b(Y.newValue,Se);return}const be=A(N);P(be)}};return window.addEventListener("storage",W),()=>window.removeEventListener("storage",W)}}),{subscribe:E,set:y}=g;At[h][t]={set(P){y(P),H(t,P)},update(P){return g.update(W=>{const Y=P(W);return H(t,Y),Y})},reset(){this.set(e)},subscribe:E}}return At[h][t]}function $t(){return{collapseMode:"non-application",collapseCustomHide:"",collapseCustomShow:"",removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:.001,timeFormat:"absolute"}}const K=Ct("pyinstrument:viewOptionsCallStack",$t(),{syncTabs:!0,beforeRead(t){return{...$t(),...t}}}),Ke=Ct("pyinstrument:viewOptions",{viewMode:"call-stack"},{syncTabs:!1}),Ye=Ct("pyinstrument:viewOptionsTimeline",{removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:1e-4},{syncTabs:!0});function Vi(t){let e,i,n,r,o,l,c,u,d,f,m,h,v,_,b,A,I,R,M,H,z,F,g,E,y,P,W,Y,N,be,Se,X,$,et,ve,Q,tt,we,ge,Z,x,ye,J,it,ne,Ae,Ce,Fe,ae,ke,Me,We,nt,O,S,ce,at,ti,ii,Ue,Pe,ni,Ge,ct,ri,si,_e,li,oi,je,ut,ai,Qe,dt,ft,ee,ci,ui,ht,pt,te,di,Tt,Mt,Pt,fi;return Tt=_t(t[5][0]),Mt=_t(t[5][1]),{c(){e=p("div"),i=p("div"),n=p("div"),n.textContent="Collapse frames",r=w(),o=p("div"),l=p("div"),c=p("input"),u=w(),d=p("label"),f=T("Non-application code"),m=w(),h=p("div"),h.textContent=`Application code is anything run from outside the Python home
          directory.`,v=w(),_=p("div"),b=p("input"),A=w(),I=p("label"),R=T("Custom"),M=w(),H=p("div"),z=T(`Regex on the source file path.
          `),F=p("div"),g=p("label"),g.textContent="Show",E=w(),y=p("input"),P=w(),W=p("label"),W.textContent="Hide",Y=w(),N=p("input"),be=T(`
          If neither match, non-application rule is used.`),Se=w(),X=p("div"),$=p("input"),et=w(),ve=p("label"),Q=T("Disabled"),tt=w(),we=p("div"),ge=p("div"),ge.textContent="Remove frames",Z=w(),x=p("div"),ye=p("div"),J=p("input"),it=w(),ne=p("label"),Ae=T("importlib machinery"),Ce=w(),Fe=p("div"),ae=p("input"),ke=w(),Me=p("label"),We=T("Frames declaring __traceback_hide__"),nt=w(),O=p("div"),S=p("input"),ce=w(),at=p("label"),ti=T("pyinstrument frames"),ii=w(),Ue=p("div"),Pe=p("input"),ni=w(),Ge=p("span"),ct=p("label"),ri=T("Frames with durations less than"),si=w(),_e=p("input"),li=T(`
          % of the total time`),oi=w(),je=p("div"),ut=p("div"),ut.textContent="Time format",ai=w(),Qe=p("div"),dt=p("div"),ft=p("label"),ee=p("input"),ci=T(`
          Absolute time in seconds`),ui=w(),ht=p("div"),pt=p("label"),te=p("input"),di=T(`
          Percentage of the total run time`),s(n,"class","name svelte-1pecl4m"),s(c,"id",t[1]+"collapseModeAll"),s(c,"type","radio"),c.__value="non-application",se(c,c.__value),s(c,"class","svelte-1pecl4m"),s(d,"for",t[1]+"collapseModeAll"),s(h,"class","description svelte-1pecl4m"),s(l,"class","option svelte-1pecl4m"),s(b,"id",t[1]+"collapseModeCustom"),s(b,"type","radio"),b.__value="custom",se(b,b.__value),s(b,"class","svelte-1pecl4m"),s(I,"for",t[1]+"collapseModeCustom"),s(g,"for","collapseCustomShow"),s(g,"class","svelte-1pecl4m"),s(y,"id","collapseCustomShow"),s(y,"type","text"),s(y,"placeholder","myproject"),s(y,"spellcheck","false"),s(y,"autocapitalize","off"),s(y,"autocomplete","off"),s(y,"autocorrect","off"),s(y,"class","svelte-1pecl4m"),s(W,"for","collapseCustomHide"),s(W,"class","svelte-1pecl4m"),s(N,"id","collapseCustomHide"),s(N,"type","text"),s(N,"placeholder",".*/lib/.*"),s(N,"spellcheck","false"),s(N,"autocapitalize","off"),s(N,"autocomplete","off"),s(N,"autocorrect","off"),s(N,"class","svelte-1pecl4m"),s(F,"class","mini-input-grid svelte-1pecl4m"),s(H,"class","description svelte-1pecl4m"),s(_,"class","option svelte-1pecl4m"),s($,"id",t[1]+"collapseModeDisabled"),s($,"type","radio"),$.__value="disabled",se($,$.__value),s($,"class","svelte-1pecl4m"),s(ve,"for",t[1]+"collapseModeDisabled"),s(X,"class","option svelte-1pecl4m"),s(o,"class","body"),s(i,"class","option-group svelte-1pecl4m"),s(ge,"class","name svelte-1pecl4m"),s(J,"id",t[1]+"removeImportlib"),s(J,"type","checkbox"),s(J,"class","svelte-1pecl4m"),s(ne,"for",t[1]+"removeImportlib"),s(ye,"class","option svelte-1pecl4m"),s(ae,"id",t[1]+"removeTracebackHide"),s(ae,"type","checkbox"),s(ae,"class","svelte-1pecl4m"),s(Me,"for",t[1]+"removeTracebackHide"),s(Fe,"class","option svelte-1pecl4m"),s(S,"id",t[1]+"removePyinstrument"),s(S,"type","checkbox"),s(S,"class","svelte-1pecl4m"),s(at,"for",t[1]+"removePyinstrument"),s(O,"class","option svelte-1pecl4m"),s(Pe,"id",t[1]+"removeIrrelevant"),s(Pe,"type","checkbox"),s(Pe,"class","svelte-1pecl4m"),s(ct,"for",t[1]+"removeIrrelevant"),s(_e,"type","number"),_e.value=t[2](),s(_e,"min","0"),s(_e,"max","99"),s(_e,"step","0.01"),q(_e,"width","4em"),s(_e,"class","svelte-1pecl4m"),s(Ue,"class","option svelte-1pecl4m"),s(x,"class","body"),s(we,"class","option-group svelte-1pecl4m"),s(ut,"class","name svelte-1pecl4m"),s(ee,"type","radio"),ee.__value="absolute",se(ee,ee.__value),s(ee,"class","svelte-1pecl4m"),s(dt,"class","option svelte-1pecl4m"),s(te,"type","radio"),te.__value="proportion",se(te,te.__value),s(te,"class","svelte-1pecl4m"),s(ht,"class","option svelte-1pecl4m"),s(Qe,"class","body"),s(je,"class","option-group svelte-1pecl4m"),s(e,"class","view-options-call-stack svelte-1pecl4m"),Tt.p(ee,te),Mt.p(c,b,$)},m(j,ie){G(j,e,ie),a(e,i),a(i,n),a(i,r),a(i,o),a(o,l),a(l,c),c.checked=c.__value===t[0].collapseMode,a(l,u),a(l,d),a(d,f),a(l,m),a(l,h),a(o,v),a(o,_),a(_,b),b.checked=b.__value===t[0].collapseMode,a(_,A),a(_,I),a(I,R),a(_,M),a(_,H),a(H,z),a(H,F),a(F,g),a(F,E),a(F,y),se(y,t[0].collapseCustomShow),a(F,P),a(F,W),a(F,Y),a(F,N),se(N,t[0].collapseCustomHide),a(H,be),a(o,Se),a(o,X),a(X,$),$.checked=$.__value===t[0].collapseMode,a(X,et),a(X,ve),a(ve,Q),a(e,tt),a(e,we),a(we,ge),a(we,Z),a(we,x),a(x,ye),a(ye,J),J.checked=t[0].removeImportlib,a(ye,it),a(ye,ne),a(ne,Ae),a(x,Ce),a(x,Fe),a(Fe,ae),ae.checked=t[0].removeTracebackHide,a(Fe,ke),a(Fe,Me),a(Me,We),a(x,nt),a(x,O),a(O,S),S.checked=t[0].removePyinstrument,a(O,ce),a(O,at),a(at,ti),a(x,ii),a(x,Ue),a(Ue,Pe),Pe.checked=t[0].removeIrrelevant,a(Ue,ni),a(Ue,Ge),a(Ge,ct),a(ct,ri),a(Ge,si),a(Ge,_e),a(Ge,li),a(e,oi),a(e,je),a(je,ut),a(je,ai),a(je,Qe),a(Qe,dt),a(dt,ft),a(ft,ee),ee.checked=ee.__value===t[0].timeFormat,a(ft,ci),a(Qe,ui),a(Qe,ht),a(ht,pt),a(pt,te),te.checked=te.__value===t[0].timeFormat,a(pt,di),Pt||(fi=[B(c,"change",t[4]),B(b,"change",t[6]),B(y,"input",t[7]),B(N,"input",t[8]),B($,"change",t[9]),B(J,"change",t[10]),B(ae,"change",t[11]),B(S,"change",t[12]),B(Pe,"change",t[13]),B(_e,"input",t[3]),B(ee,"change",t[14]),B(te,"change",t[15])],Pt=!0)},p(j,[ie]){ie&1&&(c.checked=c.__value===j[0].collapseMode),ie&1&&(b.checked=b.__value===j[0].collapseMode),ie&1&&y.value!==j[0].collapseCustomShow&&se(y,j[0].collapseCustomShow),ie&1&&N.value!==j[0].collapseCustomHide&&se(N,j[0].collapseCustomHide),ie&1&&($.checked=$.__value===j[0].collapseMode),ie&1&&(J.checked=j[0].removeImportlib),ie&1&&(ae.checked=j[0].removeTracebackHide),ie&1&&(S.checked=j[0].removePyinstrument),ie&1&&(Pe.checked=j[0].removeIrrelevant),ie&1&&(ee.checked=ee.__value===j[0].timeFormat),ie&1&&(te.checked=te.__value===j[0].timeFormat)},i:k,o:k,d(j){j&&U(e),Tt.r(),Mt.r(),Pt=!1,de(fi)}}}function Hi(t,e,i){let n;fe(t,K,M=>i(0,n=M));const r=Math.random().toString(36).substring(4);function o(){return(n.removeIrrelevantThreshold*100).toLocaleString(void 0,{maximumFractionDigits:4})}function l(M){pi(K,n.removeIrrelevantThreshold=M.currentTarget.valueAsNumber/100,n)}const c=[[],[]];function u(){n.collapseMode=this.__value,K.set(n)}function d(){n.collapseMode=this.__value,K.set(n)}function f(){n.collapseCustomShow=this.value,K.set(n)}function m(){n.collapseCustomHide=this.value,K.set(n)}function h(){n.collapseMode=this.__value,K.set(n)}function v(){n.removeImportlib=this.checked,K.set(n)}function _(){n.removeTracebackHide=this.checked,K.set(n)}function b(){n.removePyinstrument=this.checked,K.set(n)}function A(){n.removeIrrelevant=this.checked,K.set(n)}function I(){n.timeFormat=this.__value,K.set(n)}function R(){n.timeFormat=this.__value,K.set(n)}return[n,r,o,l,u,c,d,f,m,h,v,_,b,A,I,R]}class Oi extends me{constructor(e){super(),pe(this,e,Hi,Vi,re,{})}}function Di(t){let e,i,n,r,o,l,c,u,d,f,m,h,v,_,b,A,I,R,M,H,z,F,g,E;return{c(){e=p("div"),i=p("div"),n=p("div"),n.textContent="Remove frames",r=w(),o=p("div"),l=p("div"),c=p("input"),u=w(),d=p("label"),f=T("importlib machinery"),m=w(),h=p("div"),v=p("input"),_=w(),b=p("label"),A=T("Frames declaring __traceback_hide__"),I=w(),R=p("div"),M=p("input"),H=w(),z=p("label"),F=T("pyinstrument frames"),s(n,"class","name"),s(c,"id",t[1]+"removeImportlib"),s(c,"type","checkbox"),s(d,"for",t[1]+"removeImportlib"),s(l,"class","option"),s(v,"id",t[1]+"removeTracebackHide"),s(v,"type","checkbox"),s(b,"for",t[1]+"removeTracebackHide"),s(h,"class","option"),s(M,"id",t[1]+"removePyinstrument"),s(M,"type","checkbox"),s(z,"for",t[1]+"removePyinstrument"),s(R,"class","option"),s(o,"class","body"),s(i,"class","option-group"),s(e,"class","view-options-timeline svelte-vsz8zm")},m(y,P){G(y,e,P),a(e,i),a(i,n),a(i,r),a(i,o),a(o,l),a(l,c),c.checked=t[0].removeImportlib,a(l,u),a(l,d),a(d,f),a(o,m),a(o,h),a(h,v),v.checked=t[0].removeTracebackHide,a(h,_),a(h,b),a(b,A),a(o,I),a(o,R),a(R,M),M.checked=t[0].removePyinstrument,a(R,H),a(R,z),a(z,F),g||(E=[B(c,"change",t[2]),B(v,"change",t[3]),B(M,"change",t[4])],g=!0)},p(y,[P]){P&1&&(c.checked=y[0].removeImportlib),P&1&&(v.checked=y[0].removeTracebackHide),P&1&&(M.checked=y[0].removePyinstrument)},i:k,o:k,d(y){y&&U(e),g=!1,de(E)}}}function $i(t,e,i){let n;fe(t,Ye,u=>i(0,n=u));const r=Math.random().toString(36).substring(4);function o(){n.removeImportlib=this.checked,Ye.set(n)}function l(){n.removeTracebackHide=this.checked,Ye.set(n)}function c(){n.removePyinstrument=this.checked,Ye.set(n)}return[n,r,o,l,c]}class Li extends me{constructor(e){super(),pe(this,e,$i,Di,re,{})}}class Bi extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function Ni(t,e){const i=e*(t.length-1),n=Math.floor(i),r=Math.ceil(i),o=t[n],l=t[r],c=i-n;return Wi(c,{to:[o,l]})}function zi(t,e,i){return t===1/0?(console.warn("clamp: value is Infinity, returning `max`",t),i):t===-1/0?(console.warn("clamp: value is -Infinity, returning `min`",t),e):Number.isFinite(t)?t<e?e:t>i?i:t:(console.warn("clamp: value isn't finite, returning `min`",t),e)}function Ne(t,e){const{from:i=[0,1],to:n=[0,1]}=e,r=e.clamp||!1;let o=(t-i[0])/(i[1]-i[0])*(n[1]-n[0])+n[0];return r&&(o=zi(o,Math.min(n[0],n[1]),Math.max(n[0],n[1]))),o}function Wi(t,e){return`rgb(
      ${Ne(t,{from:e.from,to:[e.to[0][0],e.to[1][0]],clamp:e.clamp})},
      ${Ne(t,{from:e.from,to:[e.to[0][1],e.to[1][1]],clamp:e.clamp})},
      ${Ne(t,{from:e.from,to:[e.to[0][2],e.to[1][2]],clamp:e.clamp})}
    )`}function Ui(t){if(t.substr(0,1)=="#"){var e=(t.length-1)/3,i=[17,1,.062272][e-1];return[Math.round(parseInt(t.substr(1,e),16)*i),Math.round(parseInt(t.substr(1+e,e),16)*i),Math.round(parseInt(t.substr(1+2*e,e),16)*i)]}else return t.split("(")[1].split(")")[0].split(",").map(n=>+n)}function Gi(t,e,i={}){const{ignore:n=[],capture:r=!0}=i,o=window;if(!o)return()=>{};let l=!0,c=!1;const u=v=>n.some(_=>typeof _=="string"?Array.from(document.querySelectorAll(_)).some(b=>b===v.target||v.composedPath().includes(b)):_&&(v.target===_||v.composedPath().includes(_))),d=v=>{if(!(!t||t===v.target||v.composedPath().includes(t))){if(v.detail===0&&(l=!u(v)),!l){l=!0;return}e(v)}},f=v=>{c||(c=!0,setTimeout(()=>{c=!1},0),d(v))},m=v=>{l=!u(v)&&!!(t&&!v.composedPath().includes(t))};return o.addEventListener("click",f,{passive:!0,capture:r}),o.addEventListener("pointerdown",m,{passive:!0}),()=>{o.removeEventListener("click",f,{capture:r}),o.removeEventListener("pointerdown",m)}}function ji(t){let e,i;return e=new Li({}),{c(){he(e.$$.fragment)},m(n,r){le(e,n,r),i=!0},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){oe(e,n)}}}function Qi(t){let e,i;return e=new Oi({}),{c(){he(e.$$.fragment)},m(n,r){le(e,n,r),i=!0},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){oe(e,n)}}}function Zi(t){let e,i,n,r,o,l,c,u;const d=[Qi,ji],f=[];function m(h,v){return h[0].viewMode==="call-stack"?0:h[0].viewMode==="timeline"?1:-1}return~(l=m(t))&&(c=f[l]=d[l](t)),{c(){e=p("div"),i=p("div"),n=p("div"),r=T(t[2]),o=w(),c&&c.c(),s(n,"class","title svelte-f96okc"),s(i,"class","box svelte-f96okc"),s(e,"class","view-options svelte-f96okc")},m(h,v){G(h,e,v),a(e,i),a(i,n),a(n,r),a(i,o),~l&&f[l].m(i,null),t[3](i),u=!0},p(h,[v]){(!u||v&4)&&Ee(r,h[2]);let _=l;l=m(h),l!==_&&(c&&($e(),D(f[_],1,1,()=>{f[_]=null}),Le()),~l?(c=f[l],c||(c=f[l]=d[l](h),c.c()),V(c,1),c.m(i,null)):c=null)},i(h){u||(V(c),u=!0)},o(h){D(c),u=!1},d(h){h&&U(e),~l&&f[l].d(),t[3](null)}}}function qi(t,e,i){let n;fe(t,Ke,d=>i(0,n=d));const r=_i();function o(){r("close")}let l;St(()=>{if(l)return Gi(l,o,{ignore:[".js-view-options-button"]})});let c="View options";function u(d){He[d?"unshift":"push"](()=>{l=d,i(1,l)})}return t.$$.update=()=>{t.$$.dirty&1&&(n.viewMode==="call-stack"?i(2,c="Call stack view options"):n.viewMode==="timeline"&&i(2,c="Timeline view options"))},[n,l,c,u]}class Ki extends me{constructor(e){super(),pe(this,e,qi,Zi,re,{})}}function Lt(t){let e,i;return e=new Ki({}),e.$on("close",t[9]),{c(){he(e.$$.fragment)},m(n,r){le(e,n,r),i=!0},p:k,i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){oe(e,n)}}}function Yi(t){let e,i,n,r,o,l,c,u,d=t[0].target_description+"",f,m,h,v,_,b,A,I,R,M,H,z,F,g,E=t[0].sampleCount+"",y,P,W,Y,N,be,Se,X,$,et,ve,Q,tt,we,ge,Z,x,ye,J,it,ne,Ae,Ce,Fe,ae,ke,Me,We,nt;o=new Ii({}),Ce=new Mi({});let O=t[1]&&Lt(t);return Me=_t(t[7][0]),{c(){e=p("div"),i=p("div"),n=p("div"),r=p("div"),he(o.$$.fragment),l=w(),c=p("div"),u=p("div"),f=T(d),m=w(),h=p("div"),v=p("div"),_=p("span"),_.textContent="Recorded:",b=w(),A=p("span"),A.textContent=`${t[3]}`,I=w(),R=p("br"),M=w(),H=p("div"),z=p("span"),z.textContent="Samples:",F=w(),g=p("span"),y=T(E),P=w(),W=p("div"),Y=p("span"),Y.textContent="CPU utilization:",N=w(),be=p("span"),be.textContent=`${(t[4]*100).toFixed(0)}%`,Se=w(),X=p("div"),$=p("div"),et=T(`View:
            `),ve=p("label"),Q=p("input"),tt=T(`
              Call stack`),we=w(),ge=p("label"),Z=p("input"),x=T(`
              Timeline`),ye=w(),J=p("div"),it=w(),ne=p("div"),Ae=p("button"),he(Ce.$$.fragment),Fe=T(`
              View options`),ae=w(),O&&O.c(),s(r,"class","logo svelte-g6343"),s(u,"class","target-description svelte-g6343"),s(_,"class","metric-label svelte-g6343"),s(A,"class","metric-value svelte-g6343"),s(v,"class","metric date svelte-g6343"),s(R,"class","svelte-g6343"),s(z,"class","metric-label svelte-g6343"),s(g,"class","metric-value svelte-g6343"),s(H,"class","metric svelte-g6343"),s(Y,"class","metric-label svelte-g6343"),s(be,"class","metric-value svelte-g6343"),s(W,"class","metric svelte-g6343"),s(h,"class","metrics svelte-g6343"),s(Q,"type","radio"),Q.__value="call-stack",se(Q,Q.__value),s(Q,"class","svelte-g6343"),s(ve,"class","svelte-g6343"),s(Z,"type","radio"),Z.__value="timeline",se(Z,Z.__value),s(Z,"class","svelte-g6343"),s(ge,"class","svelte-g6343"),s($,"class","toggle"),s(J,"class","spacer"),q(J,"flex","1"),s(Ae,"class","js-view-options-button svelte-g6343"),s(ne,"class","button-container svelte-g6343"),s(X,"class","view-options svelte-g6343"),s(c,"class","layout svelte-g6343"),s(n,"class","row svelte-g6343"),s(i,"class","margins"),s(e,"class","header svelte-g6343"),Me.p(Q,Z)},m(S,ce){G(S,e,ce),a(e,i),a(i,n),a(n,r),le(o,r,null),a(n,l),a(n,c),a(c,u),a(u,f),a(c,m),a(c,h),a(h,v),a(v,_),a(v,b),a(v,A),a(h,I),a(h,R),a(h,M),a(h,H),a(H,z),a(H,F),a(H,g),a(g,y),a(h,P),a(h,W),a(W,Y),a(W,N),a(W,be),a(c,Se),a(c,X),a(X,$),a($,et),a($,ve),a(ve,Q),Q.checked=Q.__value===t[2].viewMode,a(ve,tt),a($,we),a($,ge),a(ge,Z),Z.checked=Z.__value===t[2].viewMode,a(ge,x),a(X,ye),a(X,J),a(X,it),a(X,ne),a(ne,Ae),le(Ce,Ae,null),a(Ae,Fe),a(ne,ae),O&&O.m(ne,null),ke=!0,We||(nt=[B(Q,"change",t[6]),B(Z,"change",t[8]),B(Ae,"click",gt(vt(t[5])))],We=!0)},p(S,[ce]){(!ke||ce&1)&&d!==(d=S[0].target_description+"")&&Ee(f,d),(!ke||ce&1)&&E!==(E=S[0].sampleCount+"")&&Ee(y,E),ce&4&&(Q.checked=Q.__value===S[2].viewMode),ce&4&&(Z.checked=Z.__value===S[2].viewMode),S[1]?O?(O.p(S,ce),ce&2&&V(O,1)):(O=Lt(S),O.c(),V(O,1),O.m(ne,null)):O&&($e(),D(O,1,1,()=>{O=null}),Le())},i(S){ke||(V(o.$$.fragment,S),V(Ce.$$.fragment,S),V(O),ke=!0)},o(S){D(o.$$.fragment,S),D(Ce.$$.fragment,S),D(O),ke=!1},d(S){S&&U(e),oe(o),oe(Ce),O&&O.d(),Me.r(),We=!1,de(nt)}}}function Xi(t,e,i){let n;fe(t,Ke,v=>i(2,n=v));let{session:r}=e;const o=new Date(r.startTime*1e3).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"}),l=r.cpuTime/r.duration;let c=!1;function u(v){i(1,c=!c)}const d=[[]];function f(){n.viewMode=this.__value,Ke.set(n)}function m(){n.viewMode=this.__value,Ke.set(n)}const h=()=>i(1,c=!1);return t.$$set=v=>{"session"in v&&i(0,r=v.session)},[r,c,n,o,l,u,f,d,m,h]}class xi extends me{constructor(e){super(),pe(this,e,Xi,Yi,re,{session:0})}}const Ji="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWmSURBVHgBtVc7i11VFF5rn3PvPKoLFlqmDGPhaGVpJQoWAZEEGxERFBsDgnY6KFpaWWrQysRGf4BgmSKQFCKWKQMKTqNzz2svv/XY55ybeycTCw+z736cs/f61rdee5hmz/Hx85c66m4QyTEzrdAo4cd6EuuJ2P4wtbmUgfZkCyRoWVcwyMI29ybW47sfhRfXf793+z4X4ZchPEl3F2esElYrbRVaEjQGEKGE3jcUofGwlIEBygoACAa0fmDrdV4AOAg6FV4+W49nUPdlEW4AElGNtqjZ+hqIdI2NAC7KuvAZloyJCR+IukGmF5A6iH/IbEBWLN2NevbBFQ6tCoAF3u7VggYQtQJyFlygOAADI74Jf669QDiWWh6xFRMUgLF6PAGYkcgGgGkBE/x8AiSVaykG0AUxlgm7BY0BUMAQL8R77LM96F98A98kBeu+kAdlgA0MntUGACmOFDQl5sm+Rai6lwpMLtiEgSVGE8wVFBkAB7XcU+rdJOoLSU0x8Aii3ta/0AWqMHjlM6LDPaYDHLSsnRn9pjMny2jBCDSu9H3tDqpCmw4C6lgHqAQmWB05uwwF8RCAQpU7jIbQYCElBsjAlabfqJdnD7lKwzVcIVVOgmKpF2g921pS8/QRvuETmwDEKZdwFHMocYHffYSfBc0opojVIomjx/dY64CkxVktMsgar16/IhbKygANruwWA+YDkURUcNHQaK5ps1XhBwaAzf6M9YzWq3Ac1EKACm80cB8KV6IdPsCR0aQAMBAaUkxXPyU6WDqlypKaSEOtmCCpDyAKFgu1gSecrhdar4n++VsiGUVWDHUpdJkYEPEkEyDc7paHTShXbkuNhqQfaF5wMt16lff69JYFFYT3A8AYgFxku5xtBtw9R7YsEiH85hcYLIsfuO0lfCCHvTtMWxszNRhDebp+LRsTGobFr0zBiO5tBnhWaZgiDwD5gi3Wiw+YcDAwoDfB+MaFq83RsP8M5zSYdFjsBwfh9YAjErbyQLHNVNUsH2Dl2odCh4dE+0vQXjtI9YG2z05zOKvSbdR3eKdtLTbugVKzoOQxC+7KA5NtJPiXEZaH5xDglMrOBMHTWxdWhA/QVqtgEdx3EtVwSkDOxE4GHESpCZzcHLe+4gg3HA7P69jpfvutTA0GTQNNkXAs5UYJVjC593keik/JBohzALjQsXbrJtRksRgntzm7nVX4GnZumtC4D23N4aIAZWdv9LyZv+3IA87AlHY1HQu9+q7Qwb7nAQ01FbQ+g5NBaNOKA2jdD0bg4+UjzCrbqu6IgrLB6aLRF6KWB0ZNUj15QvLCRVa8PNanqiq7pM7kbVXDEvdaipMmHIRfBa2//aYC9WI5vjH6ydLsB1ezpePiK9PhYcoLnjSK5kljNUWqvXppKdVxo4XFhIsJ93gXy/8clxIvt0X7i4XrU8+1D+wGgKPGW/UCzHfew9VsXywVZxbz8GYdKqS4rCTfZ/NZvD8WA/Yxu/aW661F7q+cIbsXVO6EcVf3b0t9SIXFx9N+kwEO3w8QVmhggq+/9xSroVdiv5TZlr0SanL6/KXOK5SaL9b/G4DRdDzONZbPuAjXS4bnfPWBPrJkjhzpYbdR8OeXz62nvBt3HD3z3F/2f0Fyx9O7XL2HAoj7YG33AK8Bag4TrJlOa0DrrVtrj7DsPBtKlgstsZGIcOW+B0wvlMP1EOqcCh1rTldb+/Xcw2woqbaLeh/Vbl7vH/Vgx08TABrehO53ccJKK1ZWP+gjpRqAKdaN8jxLs5r7Bx5TMBm18kjxOOZ0ub/3flUW/nzw4PSJp568CT0vYXq5aGJgslc4o7doPI6dcis2eUq950Ug1DqF9NvQ/uVf79y5v+E1IptedEInNj+iT2L9Nfv9jf7gI/pFdP4D5rfoaYw/Lv+pReVRq/JOEEXOee/PAf7/PP8C3bt510T4rIwAAAAASUVORK5CYII=",Bt=st({}),Nt=st({});function zt(t,e,i){const n=t.slice();return n[19]=e[i],n}function Wt(t){let e,i,n,r,o,l,c,u,d,f,m,h,v,_;return{c(){e=p("div"),i=p("div"),n=L("svg"),r=L("path"),o=w(),l=p("div"),c=T(t[5]),u=w(),d=p("div"),f=T(t[4]),m=w(),h=p("div"),h.textContent=`${t[11]}`,s(r,"d","M.937-.016L5.793 4.84.937 9.696z"),s(r,"fill",t[7]),s(r,"fill-rule","evenodd"),s(r,"fill-opacity",".582"),s(n,"width","6"),s(n,"height","10"),s(i,"class","frame-triangle svelte-1hxft88"),Te(i,"rotate",!t[9]),q(i,"visibility",t[0].children.length>0?"visible":"hidden"),s(l,"class","time svelte-1hxft88"),q(l,"color",t[7]),q(l,"font-weight",t[10]<.2?500:600),s(d,"class","name svelte-1hxft88"),s(h,"class","code-position svelte-1hxft88"),s(e,"class","frame-description svelte-1hxft88"),Te(e,"application-code",t[0].isApplicationCode),Te(e,"children-visible",!t[9]),q(e,"padding-left",`${t[2]*35}px`)},m(b,A){G(b,e,A),a(e,i),a(i,n),a(n,r),a(e,o),a(e,l),a(l,c),a(e,u),a(e,d),a(d,f),a(e,m),a(e,h),v||(_=B(e,"click",gt(vt(t[12]))),v=!0)},p(b,A){A&128&&s(r,"fill",b[7]),A&512&&Te(i,"rotate",!b[9]),A&1&&q(i,"visibility",b[0].children.length>0?"visible":"hidden"),A&32&&Ee(c,b[5]),A&128&&q(l,"color",b[7]),A&16&&Ee(f,b[4]),A&1&&Te(e,"application-code",b[0].isApplicationCode),A&512&&Te(e,"children-visible",!b[9]),A&4&&q(e,"padding-left",`${b[2]*35}px`)},d(b){b&&U(e),v=!1,_()}}}function Ut(t){let e,i,n,r,o=t[0].group.frames.length+"",l,c,u,d,f,m;return{c(){e=p("div"),i=p("div"),n=p("div"),n.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',r=w(),l=T(o),c=T(` frames hidden
        (`),u=T(t[6]),d=T(")"),s(n,"class","group-triangle svelte-1hxft88"),Te(n,"rotate",t[8]),s(i,"class","group-header-button svelte-1hxft88"),s(e,"class","group-header svelte-1hxft88"),q(e,"padding-left",`${t[2]*35}px`)},m(h,v){G(h,e,v),a(e,i),a(i,n),a(i,r),a(i,l),a(i,c),a(i,u),a(i,d),f||(m=B(e,"click",gt(vt(t[13]))),f=!0)},p(h,v){v&256&&Te(n,"rotate",h[8]),v&1&&o!==(o=h[0].group.frames.length+"")&&Ee(l,o),v&64&&Ee(u,h[6]),v&4&&q(e,"padding-left",`${h[2]*35}px`)},d(h){h&&U(e),f=!1,m()}}}function Gt(t){let e,i=[],n=new Map,r,o=Ot(t[0].children);const l=c=>c[19].uuid;for(let c=0;c<o.length;c+=1){let u=zt(t,o,c),d=l(u);n.set(d,i[c]=jt(d,u))}return{c(){e=p("div");for(let c=0;c<i.length;c+=1)i[c].c();s(e,"class","children svelte-1hxft88")},m(c,u){G(c,e,u);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(e,null);r=!0},p(c,u){u&15&&(o=Ot(c[0].children),$e(),i=Fi(i,u,l,1,c,o,n,e,Ci,jt,null,zt),Le())},i(c){if(!r){for(let u=0;u<o.length;u+=1)V(i[u]);r=!0}},o(c){for(let u=0;u<i.length;u+=1)D(i[u]);r=!1},d(c){c&&U(e);for(let u=0;u<i.length;u+=1)i[u].d()}}}function jt(t,e){let i,n,r;return n=new Qt({props:{frame:e[19],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:t,first:null,c(){i=mi(),he(n.$$.fragment),this.first=i},m(o,l){G(o,i,l),le(n,o,l),r=!0},p(o,l){e=o;const c={};l&1&&(c.frame=e[19]),l&2&&(c.rootFrame=e[1]),l&12&&(c.indent=e[2]+(e[3]?1:0)),n.$set(c)},i(o){r||(V(n.$$.fragment,o),r=!0)},o(o){D(n.$$.fragment,o),r=!1},d(o){o&&U(i),oe(n,o)}}}function en(t){let e,i,n,r,o,l,c=t[3]&&Wt(t),u=t[0].group&&t[0].group.rootFrame==t[0]&&!t[9]&&Ut(t),d=!t[9]&&t[0].children.length>0&&Gt(t);return{c(){e=p("div"),c&&c.c(),i=w(),u&&u.c(),n=w(),d&&d.c(),r=w(),o=p("div"),o.innerHTML="",s(o,"class","visual-guide svelte-1hxft88"),q(o,"left",`${t[2]*35+21}px`),q(o,"backgroundColor",t[7]),s(e,"class","frame svelte-1hxft88")},m(f,m){G(f,e,m),c&&c.m(e,null),a(e,i),u&&u.m(e,null),a(e,n),d&&d.m(e,null),a(e,r),a(e,o),l=!0},p(f,[m]){f[3]?c?c.p(f,m):(c=Wt(f),c.c(),c.m(e,i)):c&&(c.d(1),c=null),f[0].group&&f[0].group.rootFrame==f[0]&&!f[9]?u?u.p(f,m):(u=Ut(f),u.c(),u.m(e,n)):u&&(u.d(1),u=null),!f[9]&&f[0].children.length>0?d?(d.p(f,m),m&513&&V(d,1)):(d=Gt(f),d.c(),V(d,1),d.m(e,r)):d&&($e(),D(d,1,1,()=>{d=null}),Le()),m&4&&q(o,"left",`${f[2]*35+21}px`),m&128&&q(o,"backgroundColor",f[7])},i(f){l||(V(d),l=!0)},o(f){D(d),l=!1},d(f){f&&U(e),c&&c.d(),u&&u.d(),d&&d.d()}}}function tn(t,e,i){var F;let n,r,o,l,c;fe(t,Nt,g=>i(14,o=g)),fe(t,Bt,g=>i(15,l=g)),fe(t,K,g=>i(16,c=g));let{frame:u}=e,{rootFrame:d}=e,{indent:f=0}=e,m;const h=u.time/d.time;let v;const _=`${u.filePathShort}:${(F=u.lineNo)==null?void 0:F.toString().padEnd(4," ")}`;let b,A=null;if(u.group){const g=u.group.libraries;g.length<4?A=g.join(", "):A=`${g[0]}, ${g[1]}, ${g[2]}...`}let I;h>.6?I="#FF4159":h>.3?I="#F5A623":h>.2?I="#D8CB2A":I="#7ED321";function R(g){M(u,!r,g.altKey)}function M(g,E,y=!0){if(Nt.update(P=>({...P,[g.uuid]:E})),y)for(const P of g.children)M(P,E,!0),g.group&&g.group.rootFrame==g&&H(g.group.id,!E)}function H(g,E){Bt.update(y=>({...y,[g]:E}))}function z(){u.group&&H(u.group.id,!n)}return t.$$set=g=>{"frame"in g&&i(0,u=g.frame),"rootFrame"in g&&i(1,d=g.rootFrame),"indent"in g&&i(2,f=g.indent)},t.$$.update=()=>{var g,E;if(t.$$.dirty&32769&&(u.group?l[u.group.id??""]||((g=u.group)==null?void 0:g.rootFrame)===u||u.children.filter(y=>!y.group).length>1?i(3,m=!0):i(3,m=!1):i(3,m=!0)),t.$$.dirty&1&&(u.className?i(4,v=`${u.className}.${u.function}`):i(4,v=u.function)),t.$$.dirty&65537)if(c.timeFormat==="absolute")i(5,b=u.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(c.timeFormat==="proportion")i(5,b=`${(h*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");t.$$.dirty&32769&&i(8,n=l[((E=u.group)==null?void 0:E.id)??""]===!0),t.$$.dirty&16385&&i(9,r=o[u.uuid]===!0)},[u,d,f,m,v,b,A,I,n,r,h,_,R,z,o,l,c]}let Qt=class extends me{constructor(e){super(),pe(this,e,tn,en,re,{frame:0,rootFrame:1,indent:2})}};function Zt(t,e,i){let n=t;for(const r of e)if(n=r(n,i),!n)return null;return n}const nn="\0",rn="[await]",Xe="[self]",sn=[rn,Xe,"[out-of-context]","[root]"],ln="c",on="h";class xe{constructor(e,i){C(this,"uuid",crypto.randomUUID());C(this,"identifier");C(this,"_identifierParts");C(this,"startTime");C(this,"time",0);C(this,"absorbedTime",0);C(this,"group",null);C(this,"attributes");C(this,"_children",[]);C(this,"parent",null);C(this,"context");var o;this.identifier=e.identifier,this._identifierParts=this.identifier.split(nn),this.startTime=e.startTime??0,this.time=e.time??0,this.attributes=e.attributes??{},this.context=i;let n=this.startTime;const r=(o=e.children)==null?void 0:o.map(l=>(l.startTime===void 0&&(l={...l,startTime:n},n+=l.time??0),n=l.startTime+(l.time??0),new xe(l,i)));r&&this.addChildren(r)}cloneDeep(){return new xe(this,this.context)}get children(){return this._children}addChild(e,i={}){if(e.removeFromParent(),e.parent=this,i.after){const n=this._children.indexOf(i.after);if(n==-1)throw new Error("After frame not found");this._children.splice(n+1,0,e)}else this._children.push(e)}addChildren(e,i={}){e=e.slice(),i.after?(e.slice().reverse(),e.forEach(r=>this.addChild(r,i))):e.forEach(n=>this.addChild(n,i))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(n=>n.startsWith(e)).map(n=>({data:n.slice(1),time:this.attributes[n]}))}getAttributeValue(e){const i=this.getAttributes(e);if(!i||i.length==0)return null;let n=0;for(let r=0;r<i.length;r++)i[r].time>i[n].time&&(n=r);return i[n].data}get hasTracebackHide(){return this.getAttributeValue(on)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return sn.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||["/lib/","\\lib\\"].some(n=>e.includes(n))?!1:e.startsWith("<")?!!e.startsWith("<ipython-input-"):!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue(ln)??""}get library(){const e=this.filePathShort;return e?/^[^\\/.]*/.exec(e)[0]:null}}class an{constructor(e){C(this,"id");C(this,"rootFrame");C(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const i=this._frames.indexOf(e);if(i===-1)throw new Error("Frame not found in group.");this._frames.splice(i,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const i of this.frames){let n=!1;for(const r of i.children)if(r.group!=this){n=!0;break}n&&e.push(i)}return e}get libraries(){const e=[];for(const i of this.frames){const n=i.library;n&&(e.includes(n)||e.push(n))}return e}}function lt(t,e){const{replaceWith:i}=e,n=t.parent;if(!n)throw new Error("Cannot delete the root frame");if(i=="children")n.addChildren(t.children,{after:t});else if(i=="self_time")n.addChild(new xe({identifier:Xe,time:t.time},n.context),{after:t});else if(i=="nothing")n.absorbedTime+=t.time;else throw new Bi(i);t.removeFromParent(),Ft(t,!0)}function cn(t,e){if(t.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=t.absorbedTime,e.time+=t.time,Object.entries(t.attributes).forEach(([i,n])=>{e.attributes[i]!==void 0?e.attributes[i]+=n:e.attributes[i]=n}),e.addChildren(t.children),t.removeFromParent(),Ft(t,!1)}function Ft(t,e){if(e&&t.children&&t.children.forEach(i=>{Ft(i,!0)}),t.group){const i=t.group;i.removeFrame(t),i.frames.length===1&&i.removeFrame(i.frames[0])}}function kt(t,e){if(!t)return null;for(const i of t.children)kt(i),i.filePath&&i.filePath.includes("<frozen importlib._bootstrap")&&lt(i,{replaceWith:"children"});return t}function Et(t,e){if(!t)return null;for(const i of t.children)Et(i),i.hasTracebackHide&&lt(i,{replaceWith:"children"});return t}function qt(t,e){if(!t)return null;const i={};for(const n of t.children.slice())if(i[n.identifier]){const r=i[n.identifier];cn(n,r)}else i[n.identifier]=n;return t.children.forEach(n=>qt(n)),t._children.sort((n,r)=>r.time-n.time),t}function Kt(t,e){if(!t)return null;const i=e.hideRegex,n=e.showRegex;function r(l){const c=l.filePath||"",u=n&&new RegExp(n).test(c),d=i&&new RegExp(i).test(c);return u?!1:d?!0:!l.isApplicationCode}function o(l,c){c.addFrame(l),l.children.forEach(u=>{r(u)&&o(u,c)})}return t.children.forEach(l=>{if(!l.group&&r(l)&&l.children.some(r)){const c=new an(l);o(l,c)}Kt(l,e)}),t}function Yt(t,e,i=!0){if(!t)return null;let n=null;for(const r of t.children)r.identifier===Xe?n?(n.time+=r.time,r.removeFromParent()):n=r:n=null;return i&&t.children.forEach(r=>Yt(r,e,!0)),t}function Xt(t,e){return t?(t.children.length===1&&t.children[0].identifier===Xe&&lt(t.children[0],{replaceWith:"nothing"}),t.children.forEach(i=>Xt(i)),t):null}function xt(t,e,i=null){if(!t)return null;i===null&&(i=t.time,i<=0&&(i=1e-44));const n=e.filterThreshold??.01;for(const r of t.children.slice())r.time/i<n&&lt(r,{replaceWith:"nothing"});return t.children.forEach(r=>xt(r,e,i)),t}function Jt(t,e){if(!t)return null;const i=l=>{var c;return((c=l.filePath)==null?void 0:c.includes("pyinstrument/__main__.py"))&&l.children.length>0},n=l=>{var c;return l.proportionOfParent>.8&&((c=l.filePath)==null?void 0:c.includes("<string>"))&&l.children.length>0},r=l=>{var c;return l.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(l.filePath??"")||((c=l.filePath)==null?void 0:c.includes("<frozen runpy>")))&&l.children.length>0};let o=t;if(!i(o)||(o=o.children[0],!n(o))||(o=o.children[0],!r(o)))return t;for(;r(o);)o=o.children[0];return o.removeFromParent(),o}function un(t){let e,i;return e=new Qt({props:{frame:t[2],rootFrame:t[2]}}),{c(){he(e.$$.fragment)},m(n,r){le(e,n,r),i=!0},p(n,r){const o={};r&4&&(o.frame=n[2]),r&4&&(o.rootFrame=n[2]),e.$set(o)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){oe(e,n)}}}function dn(t){let e;return{c(){e=p("div"),e.textContent="All frames were filtered out.",s(e,"class","error")},m(i,n){G(i,e,n)},p:k,i:k,o:k,d(i){i&&U(e)}}}function fn(t){let e,i,n,r,o,l;const c=[dn,un],u=[];function d(f,m){return f[2]?1:0}return r=d(t),o=u[r]=c[r](t),{c(){e=p("div"),i=p("div"),n=p("div"),o.c(),s(n,"class","margins"),s(i,"class","scroll-inner svelte-gly4tt"),s(e,"class","call-stack-view svelte-gly4tt")},m(f,m){G(f,e,m),a(e,i),a(i,n),u[r].m(n,null),t[6](i),t[7](e),l=!0},p(f,[m]){let h=r;r=d(f),r===h?u[r].p(f,m):($e(),D(u[h],1,1,()=>{u[h]=null}),Le(),o=u[r],o?o.p(f,m):(o=u[r]=c[r](f),o.c()),V(o,1),o.m(n,null))},i(f){l||(V(o),l=!0)},o(f){D(o),l=!1},d(f){f&&U(e),u[r].d(),t[6](null),t[7](null)}}}function hn(t,e,i){let n,{session:r}=e;const o=Dt([K],([m])=>{const h=[m.removeImportlib?kt:null,m.removeTracebackHide?Et:null,Yt,qt,Xt,m.removeIrrelevant?xt:null,m.removePyinstrument?Jt:null,m.collapseMode!=="disabled"?Kt:null].filter(_=>_!==null),v={filterThreshold:m.removeIrrelevantThreshold,hideRegex:m.collapseMode=="custom"?m.collapseCustomHide:void 0,showRegex:m.collapseMode=="custom"?m.collapseCustomShow:void 0};return{processors:h,options:v}});fe(t,o,m=>i(5,n=m));let l,c;St(()=>{const m=l;if(!m)throw new Error("element not set");let h;return m.addEventListener("scroll",h=()=>{i(1,c.style.minHeight=`${m.scrollTop+m.clientHeight}px`,c)}),h(),()=>{m.removeEventListener("scroll",h)}});let u;function d(m){He[m?"unshift":"push"](()=>{c=m,i(1,c)})}function f(m){He[m?"unshift":"push"](()=>{l=m,i(0,l)})}return t.$$set=m=>{"session"in m&&i(4,r=m.session)},t.$$.update=()=>{t.$$.dirty&48&&i(2,u=Zt(r.rootFrame.cloneDeep(),n.processors,n.options))},[l,c,u,o,r,n,d,f]}class pn extends me{constructor(e){super(),pe(this,e,hn,fn,re,{session:4})}}class mn{constructor(e){C(this,"mediaQueryList",null);this.onDevicePixelRatioChanged=e,this._onChange=this._onChange.bind(this),this.createMediaQueryList()}createMediaQueryList(){this.removeMediaQueryList();let e=`(resolution: ${window.devicePixelRatio}dppx)`;this.mediaQueryList=matchMedia(e),this.mediaQueryList.addEventListener("change",this._onChange)}removeMediaQueryList(){var e;(e=this.mediaQueryList)==null||e.removeEventListener("change",this._onChange),this.mediaQueryList=null}_onChange(e){this.onDevicePixelRatioChanged(),this.createMediaQueryList()}destroy(){this.removeMediaQueryList()}}class vn{constructor(e){C(this,"canvas");C(this,"_size_observer");C(this,"_devicePixelRatioObserver");C(this,"drawAnimationRequest",null);this.container=e,getComputedStyle(e).position!="absolute"&&(e.style.position="relative"),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.container.appendChild(this.canvas),this.setCanvasSize=this.setCanvasSize.bind(this),this._size_observer=new ResizeObserver(this.setCanvasSize),this._size_observer.observe(e),this._devicePixelRatioObserver=new mn(this.setCanvasSize),window.requestAnimationFrame(()=>{this.setCanvasSize()})}destroy(){this._size_observer.disconnect(),this._devicePixelRatioObserver.destroy(),this.canvas.remove(),this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null)}setNeedsRedraw(){this.drawAnimationRequest===null&&(this.drawAnimationRequest=window.requestAnimationFrame(()=>{this.drawAnimationRequest=null,this.canvasViewRedraw()}))}redrawIfNeeded(){this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null,this.canvasViewRedraw())}canvasViewRedraw(){const e=this.canvas.getContext("2d");e&&(e.resetTransform(),e.scale(window.devicePixelRatio,window.devicePixelRatio),this.redraw(e,{width:this.canvas.width/window.devicePixelRatio,height:this.canvas.height/window.devicePixelRatio}))}get width(){return this.canvas.width/window.devicePixelRatio}get height(){return this.canvas.height/window.devicePixelRatio}setCanvasSize(){const e=window.devicePixelRatio;this.canvas.height=this.container.clientHeight*e,this.canvas.width=this.container.clientWidth*e,this.canvasViewRedraw()}}const gn="#212325",_n=18,bn=17,Je=28,ot=17,wn=29,yn=["#47A298","#9FC175","#C1A731","#C07210","#B84210","#B53134","#9A3586","#4958B5","#3475BA","#318DBC","#47A298"].map(Ui);class An extends vn{constructor(i){super(i);C(this,"zoom",1);C(this,"startT",0);C(this,"frames",[]);C(this,"isZoomedIn",!1);C(this,"_frameMaxT");C(this,"lastDrawWidth",0);C(this,"lastDrawHeight",0);C(this,"mouseLocation",null);C(this,"_libraryOrder",null);C(this,"_colors",[]);this.onWheel=this.onWheel.bind(this),this.canvas.addEventListener("wheel",this.onWheel)}destroy(){super.destroy(),this.canvas.removeEventListener("wheel",this.onWheel)}setRootFrame(i){this.frames=[],this._frameMaxT=void 0,this._collectFrames(i,0),this.fitContents(),this.setNeedsRedraw()}_collectFrames(i,n){this.frames.push({frame:i,depth:n,isApplicationCode:i.isApplicationCode,library:i.library,className:i.className,filePathShort:i.filePathShort});for(const r of i.children)r.identifier!==Xe&&this._collectFrames(r,n+1)}get frameMaxT(){return this._frameMaxT===void 0&&(this._frameMaxT=this.frames.reduce((i,n)=>Math.max(i,n.frame.startTime+n.frame.time),0)),this._frameMaxT}get minZoom(){return(this.width-2*Je)/this.frameMaxT}get maxZoom(){return 6666666666666667e-8}fitContents(){this.startT=0,this.zoom=this.minZoom,this.isZoomedIn=!1}clampViewport(){this.zoom<this.minZoom?(this.zoom=this.minZoom,this.isZoomedIn=!1):this.isZoomedIn=!0,this.zoom>this.maxZoom&&(this.zoom=this.maxZoom),this.startT<0&&(this.startT=0);const i=this.frameMaxT-(this.width-2*Je)/this.zoom;this.startT>i&&(this.startT=i)}redraw(i,n){const{width:r,height:o}=n;(r!==this.lastDrawWidth||o!==this.lastDrawHeight)&&(this.isZoomedIn?this.clampViewport():this.fitContents()),this.lastDrawWidth=r,this.lastDrawHeight=o,i.fillStyle=gn,i.fillRect(0,0,r,o),this.drawAxes(i);for(const l of this.frames)this.drawFrame(i,l);i.globalAlpha=1,i.fillStyle="red",i.font='23px "Source Sans Pro", sans-serif'}drawAxes(i){const n=this.width/this.zoom;if(n==0)return;const r=Math.log10(n);let o=Math.ceil(r)+2;o<0&&(o=0);const l=Math.ceil(r)-3,c=u=>Ne(u,{from:[r,r-3],to:[.71,0]});for(let u=l;u<o;u++){let d=c(u);d=Math.max(0,Math.min(1,d)),d=Math.pow(d,2),this.drawAxis(i,Math.pow(10,u),d)}this.drawAxis(i,Math.pow(10,o),c(o),!0)}drawAxis(i,n,r,o=!1){i.fillStyle="white";const l=Math.ceil(this.startT/n)*n,c=this.startT+this.width/this.zoom,u=Math.max(0,Math.ceil(-Math.log10(n)));for(let d=l;d<c;d+=n){const f=this.xForT(d);if(Math.round(d/n)%10===0&&!o)continue;i.globalAlpha=r,i.fillRect(f,ot,1,this.height-ot);const h=Ne(r,{from:[.12,.25],to:[0,.5],clamp:!0});if(h>.01){i.globalAlpha=h,i.font='13px "Source Sans Pro", sans-serif';let v=d.toFixed(u);v=="0"&&(v="0s"),i.fillText(v,f+3,ot+10)}i.globalAlpha=1}}drawFrame(i,n){const r=n.depth*_n+ot+wn,o=bn;let l=this.xForT(n.frame.startTime);const c=this.xForT(n.frame.startTime+n.frame.time);let u=c-l;if(!(c<0||l>this.width)){if(u<1&&(u=1),u>1&&(u-=Ne(u,{from:[1,3],to:[0,1],clamp:!0})),i.fillStyle=this.colorForFrame(n),i.globalAlpha=n.isApplicationCode?1:.5,u<2){i.fillRect(l,r,u,o);return}if(i.save(),i.beginPath(),i.rect(l,r,u,o),i.fill(),i.clip(),u>2){i.font='13px "Source Sans Pro", sans-serif',i.fillStyle="white";let d;n.className?d=`${n.className}.${n.frame.function}`:n.frame.function=="<module>"?d=n.filePathShort??n.frame.filePath??"":d=n.frame.function,l<0&&(l=0);const f=Math.floor(u/3.3);d.length>f&&(d=d.substring(0,f)),i.fillText(d,l+2,r+13)}i.restore()}}xForT(i){return(i-this.startT)*this.zoom+Je}tForX(i){return(i-Je)/this.zoom+this.startT}onWheel(i){const n=i.ctrlKey||i.metaKey,r=n?.01:.0023,o=this.tForX(i.offsetX);this.zoom*=1-i.deltaY*r,this.clampViewport(),this.startT=o-(i.offsetX-Je)/this.zoom,n||(this.startT+=i.deltaX/this.zoom),this.clampViewport(),this.setNeedsRedraw(),i.preventDefault()}onMouseMove(i){this.mouseLocation={x:i.offsetX,y:i.offsetY},this.setNeedsRedraw()}onMouseLeave(i){this.mouseLocation=null,this.setNeedsRedraw()}_assignLibraryOrder(){const i={};for(const r of this.frames){const l=r.frame.library??"";i[l]=(i[l]||0)+1}const n=Object.keys(i);n.sort((r,o)=>i[o]-i[r]),this._libraryOrder=n}colorForLibraryIndex(i){if(this._colors[i]!==void 0)return this._colors[i];const n=Math.pow(2,Math.ceil(Math.log2(i+1))),o=(2*i-n+1)/n,l=Ni(yn,o);return this._colors[i]=l,l}libraryIndexForFrame(i){this._libraryOrder||this._assignLibraryOrder();const n=i.library||"";let r=this._libraryOrder.indexOf(n);return r===-1&&(r=this._libraryOrder.length,this._libraryOrder.push(n)),r}colorForFrame(i){const n=this.libraryIndexForFrame(i);return this.colorForLibraryIndex(n)}}function Cn(t){let e;return{c(){e=p("div"),e.innerHTML="",s(e,"class","timeline svelte-1ekyre4")},m(i,n){G(i,e,n),t[6](e)},p:k,i:k,o:k,d(i){i&&U(e),t[6](null)}}}function Fn(t,e,i){let n,{session:r}=e;const o=Dt([Ye],([f])=>({processors:[f.removeImportlib?kt:null,f.removeTracebackHide?Et:null,f.removePyinstrument?Jt:null].filter(v=>v!==null),options:{}}));fe(t,o,f=>i(5,n=f));let l,c=null,u=null;function d(f){He[f?"unshift":"push"](()=>{c=f,i(0,c)})}return t.$$set=f=>{"session"in f&&i(2,r=f.session)},t.$$.update=()=>{t.$$.dirty&36&&i(3,l=Zt(r.rootFrame.cloneDeep(),n.processors,n.options)),t.$$.dirty&1&&c&&i(4,u=new An(c)),t.$$.dirty&24&&l&&u&&u.setRootFrame(l)},[c,o,r,l,u,n,d]}class kn extends me{constructor(e){super(),pe(this,e,Fn,Cn,re,{session:2})}}function En(t){let e,i,n=t[1].viewMode+"",r;return{c(){e=p("div"),i=T("Unknown view mode: "),r=T(n),s(e,"class","error")},m(o,l){G(o,e,l),a(e,i),a(e,r)},p(o,l){l&2&&n!==(n=o[1].viewMode+"")&&Ee(r,n)},i:k,o:k,d(o){o&&U(e)}}}function Tn(t){let e,i;return e=new kn({props:{session:t[0]}}),{c(){he(e.$$.fragment)},m(n,r){le(e,n,r),i=!0},p(n,r){const o={};r&1&&(o.session=n[0]),e.$set(o)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){oe(e,n)}}}function Mn(t){let e,i;return e=new pn({props:{session:t[0]}}),{c(){he(e.$$.fragment)},m(n,r){le(e,n,r),i=!0},p(n,r){const o={};r&1&&(o.session=n[0]),e.$set(o)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){oe(e,n)}}}function Pn(t){let e;return{c(){e=p("div"),e.innerHTML='<div class="spacer" style="height: 20px;"></div> <div class="error">No samples recorded.</div>',s(e,"class","margins")},m(i,n){G(i,e,n)},p:k,i:k,o:k,d(i){i&&U(e)}}}function In(t){let e,i,n,r,o,l,c,u;n=new xi({props:{session:t[0]}});const d=[Pn,Mn,Tn,En],f=[];function m(h,v){return h[0].rootFrame?h[1].viewMode==="call-stack"?1:h[1].viewMode==="timeline"?2:3:0}return l=m(t),c=f[l]=d[l](t),{c(){e=p("div"),i=p("div"),he(n.$$.fragment),r=w(),o=p("div"),c.c(),s(i,"class","header"),s(o,"class","body svelte-15bv5h8"),s(e,"class","app svelte-15bv5h8")},m(h,v){G(h,e,v),a(e,i),le(n,i,null),a(e,r),a(e,o),f[l].m(o,null),u=!0},p(h,[v]){const _={};v&1&&(_.session=h[0]),n.$set(_);let b=l;l=m(h),l===b?f[l].p(h,v):($e(),D(f[b],1,1,()=>{f[b]=null}),Le(),c=f[l],c?c.p(h,v):(c=f[l]=d[l](h),c.c()),V(c,1),c.m(o,null))},i(h){u||(V(n.$$.fragment,h),V(c),u=!0)},o(h){D(n.$$.fragment,h),D(c),u=!1},d(h){h&&U(e),oe(n),f[l].d()}}}function Rn(t,e,i){let n;fe(t,Ke,m=>i(1,n=m));let{session:r}=e;const o=document.createElement("link");o.rel="shortut icon",o.href=Ji,document.head.appendChild(o);const l=document.createElement("link");l.rel="preload",l.as="style",l.onload=()=>{l.rel="stylesheet"},l.href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600|Source+Sans+Pro:400,600&display=swap",document.head.appendChild(l);const c=r.rootFrame,u=c==null?void 0:c.time.toLocaleString(void 0,{maximumSignificantDigits:3});r.target_description="Block at /Users/joerick/Projects/pyinstrument/pyinstrument/console.py:80";let d,f;return(f=/[^\s/]+(:\d+)?$/.exec(r.target_description))?d=f[0]:d=r.target_description,document.title=`${u}s - ${d} - pyinstrument`,t.$$set=m=>{"session"in m&&i(0,r=m.session)},[r,n]}class Sn extends me{constructor(e){super(),pe(this,e,Rn,In,re,{session:0})}}class Vn{constructor(e){C(this,"startTime");C(this,"duration");C(this,"sampleCount");C(this,"target_description");C(this,"cpuTime");C(this,"rootFrame");C(this,"sysPath");C(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.target_description=e.session.target_description,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.rootFrame=new xe(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let i=e;if(ze(e).length>1)for(const r of this.sysPath){const o=Hn(e,r);ze(o).length<ze(i).length&&(i=o)}return this._shortenPathCache[e]=i,i}}function ze(t){return t.split(/[/\\]/)}function ei(t){const e=ze(t);return e.length>0&&e[0].endsWith(":")?e[0]:null}function Hn(t,e){if(ei(t)!=ei(e))return t;const i=ze(t),n=ze(e);let r=0;for(;r<i.length&&r<n.length&&i[r]==n[r];)r++;return n.slice(r).map(l=>"..").concat(i.slice(r)).join("/")}return{render(t,e){const i=new Vn(e);return new Sn({target:t,props:{session:i}})}}}();
