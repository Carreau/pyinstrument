var pyinstrumentHTMLRenderer=function(){"use strict";var Lt=Object.defineProperty;var Bt=(U,b,M)=>b in U?Lt(U,b,{enumerable:!0,configurable:!0,writable:!0,value:M}):U[b]=M;var P=(U,b,M)=>(Bt(U,typeof b!="symbol"?b+"":b,M),M);const U="";function b(){}function M(t){return t()}function Pe(){return Object.create(null)}function H(t){t.forEach(M)}function Ce(t){return typeof t=="function"}function V(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function je(t){return Object.keys(t).length===0}function Je(t,...e){if(t==null)return b;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function pe(t,e,n){t.$$.on_destroy.push(Je(e,n))}function a(t,e){t.appendChild(e)}function O(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function et(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function ye(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function D(t){return document.createTextNode(t)}function E(){return D(" ")}function tt(){return D("")}function J(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Te(t){return function(e){return e.preventDefault(),t.call(this,e)}}function ke(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function nt(t){return Array.from(t.childNodes)}function X(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function $(t,e,n){t.classList[n?"add":"remove"](e)}let W;function q(t){W=t}function Re(){if(!W)throw new Error("Function called outside component initialization");return W}function it(t){Re().$$.on_mount.push(t)}function rt(t){Re().$$.on_destroy.push(t)}const Z=[],Se=[],ee=[],Ie=[],st=Promise.resolve();let me=!1;function ot(){me||(me=!0,st.then(De))}function ge(t){ee.push(t)}const _e=new Set;let te=0;function De(){const t=W;do{for(;te<Z.length;){const e=Z[te];te++,q(e),lt(e.$$)}for(q(null),Z.length=0,te=0;Se.length;)Se.pop()();for(let e=0;e<ee.length;e+=1){const n=ee[e];_e.has(n)||(_e.add(n),n())}ee.length=0}while(Z.length);for(;Ie.length;)Ie.pop()();me=!1,_e.clear(),q(t)}function lt(t){if(t.fragment!==null){t.update(),H(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ge)}}const ne=new Set;let L;function ve(){L={r:0,c:[],p:L}}function be(){L.r||H(L.c),L=L.p}function T(t,e){t&&t.i&&(ne.delete(t),t.i(e))}function R(t,e,n,i){if(t&&t.o){if(ne.has(t))return;ne.add(t),L.c.push(()=>{ne.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function ie(t){t&&t.c()}function x(t,e,n,i){const{fragment:r,after_update:u}=t.$$;r&&r.m(e,n),i||ge(()=>{const s=t.$$.on_mount.map(M).filter(Ce);t.$$.on_destroy?t.$$.on_destroy.push(...s):H(s),t.$$.on_mount=[]}),u.forEach(ge)}function Y(t,e){const n=t.$$;n.fragment!==null&&(H(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(t,e){t.$$.dirty[0]===-1&&(Z.push(t),ot(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function re(t,e,n,i,r,u,s,o=[-1]){const c=W;q(t);const l=t.$$={fragment:null,ctx:[],props:u,update:b,not_equal:r,bound:Pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Pe(),dirty:o,skip_bound:!1,root:e.target||c.$$.root};s&&s(l.root);let h=!1;if(l.ctx=n?n(t,e.props||{},(f,p,...v)=>{const C=v.length?v[0]:p;return l.ctx&&r(l.ctx[f],l.ctx[f]=C)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](C),h&&ct(t,f)),p}):[],l.update(),h=!0,H(l.before_update),l.fragment=i?i(l.ctx):!1,e.target){if(e.hydrate){const f=nt(e.target);l.fragment&&l.fragment.l(f),f.forEach(I)}else l.fragment&&l.fragment.c();e.intro&&T(t.$$.fragment),x(t,e.target,e.anchor,e.customElement),De()}q(c)}class se{$destroy(){Y(this,1),this.$destroy=b}$on(e,n){if(!Ce(n))return b;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!je(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const G=[];function Oe(t,e=b){let n;const i=new Set;function r(o){if(V(t,o)&&(t=o,n)){const c=!G.length;for(const l of i)l[1](),G.push(l,t);if(c){for(let l=0;l<G.length;l+=2)G[l][0](G[l+1]);G.length=0}}}function u(o){r(o(t))}function s(o,c=b){const l=[o,c];return i.add(l),i.size===1&&(n=e(r)||b),o(t),()=>{i.delete(l),i.size===0&&(n(),n=null)}}return{set:r,update:u,subscribe:s}}const Me=Oe({}),oe=Oe("absolute"),zt="";function ut(t){let e,n,i,r,u,s,o,c,l,h,f,p,v,C,g,A,w,k,S,_,F,N,B,ue,ae,fe=t[0].sampleCount+"",Ee,xe,de,Ye,he,Fe,Ke;return{c(){e=m("div"),n=m("div"),i=m("div"),r=m("div"),r.textContent="pyinstrument",u=E(),s=m("div"),o=m("label"),o.textContent="Absolute time",c=E(),l=m("input"),h=E(),f=m("div"),f.textContent="Recorded:",p=E(),v=m("div"),v.textContent=`${t[2]}`,C=E(),g=m("div"),g.textContent="Duration:",A=E(),w=m("div"),w.textContent=`${t[4]} seconds`,k=E(),S=m("label"),S.textContent="Proportional time",_=E(),F=m("input"),N=E(),B=m("div"),B.textContent="Samples:",ue=E(),ae=m("div"),Ee=D(fe),xe=E(),de=m("div"),de.textContent="CPU time:",Ye=E(),he=m("div"),he.textContent=`${t[3]} seconds`,d(r,"class","title svelte-tewt95"),d(o,"class","metric-label svelte-tewt95"),d(o,"for","absolute"),d(l,"type","radio"),l.__value="absolute",l.value=l.__value,d(l,"id","absolute"),d(l,"name","time-format"),l.checked=!0,t[6][0].push(l),d(f,"class","metric-label svelte-tewt95"),d(v,"class","metric-value svelte-tewt95"),d(g,"class","metric-label svelte-tewt95"),d(w,"class","metric-value svelte-tewt95"),d(S,"class","metric-label svelte-tewt95"),d(S,"for","proportion"),d(F,"type","radio"),F.__value="proportion",F.value=F.__value,d(F,"id","proportion"),d(F,"name","time-format"),t[6][0].push(F),d(B,"class","metric-label svelte-tewt95"),d(ae,"class","metric-value svelte-tewt95"),d(de,"class","metric-label svelte-tewt95"),d(he,"class","metric-value svelte-tewt95"),d(s,"class","metrics svelte-tewt95"),d(i,"class","row svelte-tewt95"),d(n,"class","margins"),d(e,"class","header svelte-tewt95")},m(z,j){O(z,e,j),a(e,n),a(n,i),a(i,r),a(i,u),a(i,s),a(s,o),a(s,c),a(s,l),l.checked=l.__value===t[1],a(s,h),a(s,f),a(s,p),a(s,v),a(s,C),a(s,g),a(s,A),a(s,w),a(s,k),a(s,S),a(s,_),a(s,F),F.checked=F.__value===t[1],a(s,N),a(s,B),a(s,ue),a(s,ae),a(ae,Ee),a(s,xe),a(s,de),a(s,Ye),a(s,he),Fe||(Ke=[J(l,"change",t[5]),J(F,"change",t[7])],Fe=!0)},p(z,[j]){j&2&&(l.checked=l.__value===z[1]),j&2&&(F.checked=F.__value===z[1]),j&1&&fe!==(fe=z[0].sampleCount+"")&&X(Ee,fe)},i:b,o:b,d(z){z&&I(e),t[6][0].splice(t[6][0].indexOf(l),1),t[6][0].splice(t[6][0].indexOf(F),1),Fe=!1,H(Ke)}}}function at(t,e,n){var f;let i;pe(t,oe,p=>n(1,i=p));let{session:r}=e;const u=new Date(r.startTime*1e3).toLocaleString(),s=(f=r.cpuTime)==null?void 0:f.toLocaleString(void 0,{maximumSignificantDigits:3}),o=r.duration.toLocaleString(void 0,{maximumSignificantDigits:3}),c=[[]];function l(){i=this.__value,oe.set(i)}function h(){i=this.__value,oe.set(i)}return t.$$set=p=>{"session"in p&&n(0,r=p.session)},[r,i,u,s,o,l,c,h]}class ft extends se{constructor(e){super(),re(this,e,at,ut,V,{session:0})}}const dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACPTkDJAAAFPklEQVRYCdWXu4skVRSHb3VXP2bcXUVMBkRMTVww2XQDExEEH4iKiUYGhuJEPgJhUSMzQQSDRVzETNDMTTfUwL/ARUwM1t3pV1WX33eqbnfP9MxOu5kHTt9T93F+v3vOubeqi7QhT1+58vhiVn1G19WiaQ6KIqVQOmyT+h9kuUxp2bAAtQkpij9pbw5G5fu/3br1x8ql4NW0+rVJzaN29nop9VUeCtoerXpMTj53g+AGcINR1YB3RIJMN6dIxd/luLxcZoftzltwAct+SiNGh2jJ84BnSQWJTeBNW2C0ZrvufrZA5y2JmuemWkfCjYq5IsC6q2iE2V0LuDdMaYxKZDxo+yS3JZkEY+5SsAU7P5q1qZNEAxnXGo0NubomQM4dWPnCMAU/fUCnoA7kFjPEPohuqfO6uc++0xKSVHUcHDbNwZpAeFyHyMcg408G16mSnwW3b5OEz3rtCAyJnHUQUSEFmMdki0CMmsNOX/gkpf1RSpf223Q43jC2MMw4tFWsjwHzBngsIOT6CaEf7wGKrTo/agFbH8oWAQdkWTF5htGntSDn2h2YBTal/9603Z2++swZ0+5BZIjdQwfUz5DcGwHVotSfdpYtAg7oUKzaycyo6PjmkA4cRmgBuf5zSj/80kbAuToaYHz9afdgCiCxJF3gpudfZampOyGnEwAwIkEbuROBXEauXZGdYzrEtFTTpx3zHGeewGoFcFxk2Cdlxempy8/oZyXm1KO3R14fIraPXEzpAnXgyVBmRMdjNgdVsqZgxLw9cl4C7m7N+d17pOqIuaj2LKetQzs1Ai3E+reRJip4CSnz2wPYHC9wFL66MYko9k8pwgmAU4hqbxZhO6tNXba321V8Uvruc4ZzGgQxErnFNszqItqC0DdpTtzfeqWJ21DwpRp5WkOdHwFJqM4UMLcdeB2AADPUkigSm00VOZixsOL8WfUB3oWd4ZWcT8CpgLz2XkoPX+IgEIU+q6K6QZqzqxoAr15vupqC8Air0wm7JwUL2AWJByIAuDXQEGZ1aegRASY4Ppq0AOZZIoZYsLh4zDsa4PSfeA+En/tGQMI5ZTe+xClhN+Q5z4b67TfZJeATiAQw4J4KwTzCOfT2nSb3JRALAJTEfKPQcrGBG5GwwCLMRCRAXcgiQY1IYD8ogbzuDd5qF7gL+p4ESM05Z//coWXH1oEE5oQkQPOi3EroDDk/Ai40Cp3SRE2AG+8MWyOk5h1j7ixnEogPD0dVcv/FVwXXLceKs20K5rCaFk06fKmOD424akkTXUFkVwanEtBZfH7hMK5eCEwBl0DNYHvJ0Idd4MHXr7djkGDtWQV3GqlTCRhybzqv1R4zbA/fXabRfhFAHkvflJO77XivuyElbRHG+h3yL6EtAu4iPkoF5q4veRn1ecEUAwYg0pSyQwAoRk3qz4p4DS+wawpxSVHoY9cobBHQtxBBBMBrN/rkvOEC6lF0hF/nKvaS31yE155btLVAFKIidbSDbBMI9HaluzjC4ZKQWHieBIcVPqvbyg/b503Dh91kTcB/LH4Z6wmNI8X2PnyxTkPSUI7JP7MjvE5hTrwDuO+rLvT2uXxnAXNNgL9LLHxdB16jOi24XgOEK68EyMKMb/uYRERol1w+FmRN67XrWonsKDdzRNPmXzPjbEXHxwWttsCcwpXki8cte91afP7zkdQuYch/zSizVv66ffvOwZNPfLus/YNSPMYuLkZIda66yw3NzwHMeCOBXcBNdVH8OBiXLx/7c5qJrFrK/GOYfETH97Sr/jOM38FnvodDGv8f+Rcj1XBLIcDKAQAAAABJRU5ErkJggg==",Ut="";function $e(t,e,n){const i=t.slice();return i[16]=e[n],i}function Ne(t){let e,n,i,r,u,s,o,c,l,h,f,p,v,C;return{c(){e=m("div"),n=m("div"),i=ye("svg"),r=ye("path"),u=E(),s=m("div"),o=D(t[6]),c=E(),l=m("div"),h=D(t[5]),f=E(),p=m("div"),p.textContent=`${t[11]}`,d(r,"d","M.937-.016L5.793 4.84.937 9.696z"),d(r,"fill",t[8]),d(r,"fill-rule","evenodd"),d(r,"fill-opacity",".582"),d(i,"width","6"),d(i,"height","10"),d(n,"class","frame-triangle svelte-512hcv"),$(n,"rotate",t[3]),y(n,"visibility",t[0].children.length>0?"visible":"hidden"),d(s,"class","time svelte-512hcv"),y(s,"color",t[8]),y(s,"font-weight",t[10]<.2?500:600),d(l,"class","name svelte-512hcv"),d(p,"class","code-position svelte-512hcv"),d(e,"class","frame-description svelte-512hcv"),$(e,"application-code",t[0].isApplicationCode),$(e,"children-visible",t[3]),y(e,"padding-left",`${t[2]*35}px`)},m(g,A){O(g,e,A),a(e,n),a(n,i),a(i,r),a(e,u),a(e,s),a(s,o),a(e,c),a(e,l),a(l,h),a(e,f),a(e,p),v||(C=J(e,"click",ke(Te(t[12]))),v=!0)},p(g,A){A&256&&d(r,"fill",g[8]),A&8&&$(n,"rotate",g[3]),A&1&&y(n,"visibility",g[0].children.length>0?"visible":"hidden"),A&64&&X(o,g[6]),A&256&&y(s,"color",g[8]),A&32&&X(h,g[5]),A&1&&$(e,"application-code",g[0].isApplicationCode),A&8&&$(e,"children-visible",g[3]),A&4&&y(e,"padding-left",`${g[2]*35}px`)},d(g){g&&I(e),v=!1,C()}}}function Le(t){let e,n,i,r,u=t[0].group.frames.length+"",s,o,c,l,h,f;return{c(){e=m("div"),n=m("div"),i=m("div"),i.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',r=E(),s=D(u),o=D(` frames hidden
        (`),c=D(t[7]),l=D(")"),d(i,"class","group-triangle svelte-512hcv"),$(i,"rotate",t[9]),d(n,"class","group-header-button svelte-512hcv"),d(e,"class","group-header svelte-512hcv"),y(e,"padding-left",`${t[2]*35}px`)},m(p,v){O(p,e,v),a(e,n),a(n,i),a(n,r),a(n,s),a(n,o),a(n,c),a(n,l),h||(f=J(e,"click",ke(Te(t[13]))),h=!0)},p(p,v){v&512&&$(i,"rotate",p[9]),v&1&&u!==(u=p[0].group.frames.length+"")&&X(s,u),v&128&&X(c,p[7]),v&4&&y(e,"padding-left",`${p[2]*35}px`)},d(p){p&&I(e),h=!1,f()}}}function Be(t){let e,n,i=t[0].children,r=[];for(let s=0;s<i.length;s+=1)r[s]=ze($e(t,i,s));const u=s=>R(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=tt()},m(s,o){for(let c=0;c<r.length;c+=1)r[c].m(s,o);O(s,e,o),n=!0},p(s,o){if(o&23){i=s[0].children;let c;for(c=0;c<i.length;c+=1){const l=$e(s,i,c);r[c]?(r[c].p(l,o),T(r[c],1)):(r[c]=ze(l),r[c].c(),T(r[c],1),r[c].m(e.parentNode,e))}for(ve(),c=i.length;c<r.length;c+=1)u(c);be()}},i(s){if(!n){for(let o=0;o<i.length;o+=1)T(r[o]);n=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)R(r[o]);n=!1},d(s){et(r,s),s&&I(e)}}}function ze(t){let e,n;return e=new Ue({props:{frame:t[16],rootFrame:t[1],indent:t[2]+(t[4]?1:0)}}),{c(){ie(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const u={};r&1&&(u.frame=i[16]),r&2&&(u.rootFrame=i[1]),r&20&&(u.indent=i[2]+(i[4]?1:0)),e.$set(u)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){Y(e,i)}}}function ht(t){let e,n,i,r,u,s,o=t[4]&&Ne(t),c=t[0].group&&t[0].group.rootFrame==t[0]&&t[3]&&Le(t),l=t[3]&&Be(t);return{c(){e=m("div"),o&&o.c(),n=E(),c&&c.c(),i=E(),l&&l.c(),r=E(),u=m("div"),d(u,"class","visual-guide"),y(u,"left",`${t[2]*35+21}px`),y(u,"backgroundColor",t[8]),d(e,"class","frame svelte-512hcv")},m(h,f){O(h,e,f),o&&o.m(e,null),a(e,n),c&&c.m(e,null),a(e,i),l&&l.m(e,null),a(e,r),a(e,u),s=!0},p(h,[f]){h[4]?o?o.p(h,f):(o=Ne(h),o.c(),o.m(e,n)):o&&(o.d(1),o=null),h[0].group&&h[0].group.rootFrame==h[0]&&h[3]?c?c.p(h,f):(c=Le(h),c.c(),c.m(e,i)):c&&(c.d(1),c=null),h[3]?l?(l.p(h,f),f&8&&T(l,1)):(l=Be(h),l.c(),T(l,1),l.m(e,r)):l&&(ve(),R(l,1,1,()=>{l=null}),be()),f&4&&y(u,"left",`${h[2]*35+21}px`),f&256&&y(u,"backgroundColor",h[8])},i(h){s||(T(l),s=!0)},o(h){R(l),s=!1},d(h){h&&I(e),o&&o.d(),c&&c.d(),l&&l.d()}}}function pt(t,e,n){var S;let i,r,u;pe(t,Me,_=>n(14,r=_)),pe(t,oe,_=>n(15,u=_));let{frame:s}=e,{rootFrame:o}=e,{indent:c=0}=e,l=!0,h;const f=s.time/o.time;let p;s.className?p=`${s.className}.${s.function}`:p=s.function;const v=`${s.filePathShort}:${(S=s.lineNo)==null?void 0:S.toString().padEnd(4,"\xA0")}`;let C,g=null;if(s.group){const _=s.group.libraries;_.length<4?g=_.join(", "):g=`${_[0]}, ${_[1]}, ${_[2]}...`}let A;f>.6?A="#FF4159":f>.3?A="#F5A623":f>.2?A="#D8CB2A":A="#7ED321";function w(){n(3,l=!l)}function k(){Me.update(_=>{var F,N;return{..._,[(N=(F=s.group)==null?void 0:F.id)!=null?N:""]:!i}})}return t.$$set=_=>{"frame"in _&&n(0,s=_.frame),"rootFrame"in _&&n(1,o=_.rootFrame),"indent"in _&&n(2,c=_.indent)},t.$$.update=()=>{var _,F,N,B;if(t.$$.dirty&16385&&(s.group?r[(_=s.group.id)!=null?_:""]||((F=s.group)==null?void 0:F.rootFrame)===s||s.children.filter(ue=>!ue.group).length>1?n(4,h=!0):n(4,h=!1):n(4,h=!0)),t.$$.dirty&32769)if(u==="absolute")n(6,C=s.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(u==="proportion")n(6,C=`${(f*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");t.$$.dirty&16385&&n(9,i=r[(B=(N=s.group)==null?void 0:N.id)!=null?B:""]===!0)},[s,o,c,l,h,p,C,g,A,i,f,v,w,k,r,u]}class Ue extends se{constructor(e){super(),re(this,e,pt,ht,V,{frame:0,rootFrame:1,indent:2})}}const mt="\0",gt="[await]",le="[self]",_t=[gt,le,"[out-of-context]","[root]"],vt="c",bt="h";class K{constructor(e,n){P(this,"identifier");P(this,"_identifierParts");P(this,"time",0);P(this,"absorbedTime",0);P(this,"group",null);P(this,"attributes");P(this,"_children",[]);P(this,"parent",null);P(this,"context");var r,u,s;this.identifier=e.identifier,this._identifierParts=this.identifier.split(mt),this.time=(r=e.time)!=null?r:0,this.attributes=(u=e.attributes)!=null?u:{},this.context=n;const i=(s=e.children)==null?void 0:s.map(o=>new K(o,n));i&&this.addChildren(i)}cloneDeep(){return new K(this,this.context)}get children(){return this._children}addChild(e,n={}){if(e.removeFromParent(),e.parent=this,n.after){const i=this._children.indexOf(n.after);this._children.splice(i+1,0,e)}else this._children.push(e)}addChildren(e,n={}){n.after?(e.slice().reverse(),e.forEach(r=>this.addChild(r,n))):e.forEach(i=>this.addChild(i,n))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(i=>i.startsWith(e)).map(i=>({data:i.slice(1),time:this.attributes[i]}))}getAttributeValue(e){const n=this.getAttributes(e);if(!n||n.length==0)return null;let i=0;for(let r=0;r<n.length;r++)n[r].time>n[i].time&&(i=r);return n[i].data}get hasTracebackhide(){return this.getAttributeValue(bt)=="1"}get function(){return this._identifierParts[0]}get filePath(){var e;return(e=this._identifierParts[1])!=null?e:null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return _t.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||["/lib/","\\lib\\"].some(i=>e.includes(i))?!1:e.startsWith("<")?!!e.startsWith("<ipython-input-"):!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){var e;return(e=this.getAttributeValue(vt))!=null?e:""}}class At{constructor(e){P(this,"id");P(this,"rootFrame");P(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const n=this._frames.indexOf(e);if(n===-1)throw new Error("Frame not found in group.");this._frames.splice(n,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const n of this.frames){let i=!1;for(const r of n.children)if(r.group!=this){i=!0;break}i&&e.push(n)}return e}get libraries(){const e=[];for(const n of this.frames){const i=n.filePathShort;if(!i)continue;const r=/^[^\\/.]*/.exec(i)[0];e.includes(r)||e.push(r)}return e}}class wt extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function ce(t,e){const{replaceWith:n}=e,i=t.parent;if(!i)throw new Error("Cannot delete the root frame");if(n=="children")i.addChildren(t.children,{after:t});else if(n=="self_time")i.addChild(new K({identifier:le},i.context));else if(n=="nothing")i.absorbedTime+=t.time;else throw new wt(n);t.removeFromParent(),Ae(t,!0)}function Et(t,e){if(t.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=t.absorbedTime,e.time+=t.time,Object.entries(t.attributes).forEach(([n,i])=>{e.attributes[n]!==void 0?e.attributes[n]+=i:e.attributes[n]=i}),e.addChildren(t.children),t.removeFromParent(),Ae(t,!1)}function Ae(t,e){if(e&&t.children&&t.children.forEach(n=>{Ae(n,!0)}),t.group){const n=t.group;n.removeFrame(t),n.frames.length===1&&n.removeFrame(n.frames[0])}}function He(t,e){if(!t)return null;for(const n of t.children)He(n),n.filePath&&n.filePath.includes("<frozen importlib._bootstrap")&&ce(n,{replaceWith:"children"});return t}function Xe(t,e){if(!t)return null;for(const n of t.children)Xe(n),n.hasTracebackhide&&ce(n,{replaceWith:"children"});return t}function Ge(t,e){if(!t)return null;const n={};for(const i of t.children.slice())if(n[i.identifier]){const r=n[i.identifier];Et(i,r)}else n[i.identifier]=i;return t.children.forEach(i=>Ge(i)),t._children.sort((i,r)=>r.time-i.time),t}function Qe(t,e){if(!t)return null;const n=e.hideRegex,i=e.showRegex;function r(s){const o=s.filePath||"",c=i&&new RegExp(i).test(o),l=n&&new RegExp(n).test(o);return c?!1:l?!0:!s.isApplicationCode}function u(s,o){o.addFrame(s),s.children.forEach(c=>{r(c)&&u(c,o)})}return t.children.forEach(s=>{if(!s.group&&r(s)&&s.children.some(r)){const o=new At(s);u(s,o)}Qe(s,e)}),t}function Ve(t,e,n=!0){if(!t)return null;let i=null;for(const r of t.children)r.identifier===le?i?(i.time+=r.time,r.removeFromParent()):i=r:i=null;return n&&t.children.forEach(r=>Ve(r,e,!0)),t}function We(t,e){return t?(t.children.length===1&&t.children[0].identifier===le&&ce(t.children[0],{replaceWith:"nothing"}),t.children.forEach(n=>We(n)),t):null}function qe(t,e,n=null){if(!t)return null;n===null&&(n=t.time,n<=0&&(n=1e-44));const i=e.filterThreshold||.01;for(const r of t.children.slice())r.time/n<i&&ce(r,{replaceWith:"nothing"});return t.children.forEach(r=>qe(r,e,n)),t}function Ft(t,e){if(!t)return null;const n=s=>{var o;return((o=s.filePath)==null?void 0:o.includes("pyinstrument/__main__.py"))&&s.children.length>0},i=s=>{var o;return s.proportionOfParent>.8&&((o=s.filePath)==null?void 0:o.includes("<string>"))&&s.children.length>0},r=s=>{var o,c;return s.proportionOfParent>.8&&(new RegExp(".*runpy.py").test((o=s.filePath)!=null?o:"")||((c=s.filePath)==null?void 0:c.includes("<frozen runpy>")))&&s.children.length>0};let u=t;if(!n(u)||(u=u.children[0],!i(u))||(u=u.children[0],!r(u)))return t;for(;r(u);)u=u.children[0];return u.removeFromParent(),u}function Pt(t){let e,n;return e=new Ue({props:{frame:t[0],rootFrame:t[0]}}),{c(){ie(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p:b,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){Y(e,i)}}}function Ct(t){let e;return{c(){e=m("div"),e.textContent="All frames were filtered out.",d(e,"class","error")},m(n,i){O(n,e,i)},p:b,i:b,o:b,d(n){n&&I(e)}}}function yt(t){let e,n,i,r;const u=[Ct,Pt],s=[];function o(c,l){return c[0]?1:0}return n=o(t),i=s[n]=u[n](t),{c(){e=m("div"),i.c(),d(e,"class","tree-view")},m(c,l){O(c,e,l),s[n].m(e,null),r=!0},p(c,[l]){i.p(c,l)},i(c){r||(T(i),r=!0)},o(c){R(i),r=!1},d(c){c&&I(e),s[n].d()}}}function Tt(t,e,n){let i=t;for(const r of e)if(i=r(i,n),!i)return null;return i}function kt(t,e,n){let{session:i}=e,u=[He,Xe,Ve,Ge,We,qe,Ft,Qe].slice();const s=Tt(i.rootFrame.cloneDeep(),u,{session:i});return t.$$set=o=>{"session"in o&&n(1,i=o.session)},[s,i]}class Rt extends se{constructor(e){super(),re(this,e,kt,yt,V,{session:1})}}const Gt="";function St(t){let e,n;return e=new Rt({props:{session:t[0]}}),{c(){ie(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const u={};r&1&&(u.session=i[0]),e.$set(u)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){Y(e,i)}}}function It(t){let e;return{c(){e=m("div"),e.textContent="No samples recorded.",d(e,"class","error")},m(n,i){O(n,e,i)},p:b,i:b,o:b,d(n){n&&I(e)}}}function Dt(t){let e,n,i,r,u,s,o,c,l,h,f,p,v;n=new ft({props:{session:t[0]}});const C=[It,St],g=[];function A(w,k){return w[0].rootFrame?1:0}return f=A(t),p=g[f]=C[f](t),{c(){e=m("div"),ie(n.$$.fragment),i=E(),r=m("div"),u=E(),s=m("div"),o=m("div"),c=m("span"),c.textContent="Program:\xA0",l=D(t[1]),h=E(),p.c(),d(r,"class","spacer"),y(r,"height","20px"),d(c,"class","label svelte-1gm5pcf"),d(o,"class","program svelte-1gm5pcf"),d(s,"class","margins"),d(e,"class","app svelte-1gm5pcf")},m(w,k){O(w,e,k),x(n,e,null),a(e,i),a(e,r),a(e,u),a(e,s),a(s,o),a(o,c),a(o,l),a(s,h),g[f].m(s,null),v=!0},p(w,[k]){const S={};k&1&&(S.session=w[0]),n.$set(S),(!v||k&2)&&X(l,w[1]);let _=f;f=A(w),f===_?g[f].p(w,k):(ve(),R(g[_],1,1,()=>{g[_]=null}),be(),p=g[f],p?p.p(w,k):(p=g[f]=C[f](w),p.c()),T(p,1),p.m(s,null))},i(w){v||(T(n.$$.fragment,w),T(p),v=!0)},o(w){R(n.$$.fragment,w),R(p),v=!1},d(w){w&&I(e),Y(n),g[f].d()}}}function we(){document.body.style.minHeight=`${window.scrollY+window.innerHeight}px`}function Ot(t,e,n){let{session:i}=e;const r=document.createElement("link");r.rel="shortut icon",r.href=dt,document.head.appendChild(r),it(()=>{window.addEventListener("scroll",we),we()}),rt(()=>{window.removeEventListener("scroll",we)});const u=i.rootFrame,s=u==null?void 0:u.time.toLocaleString(void 0,{maximumSignificantDigits:3});let o=u==null?void 0:u.function;return o=="<module>"&&(o=i.program),document.title=`${s}s - ${o} - pyinstrument`,t.$$set=c=>{"session"in c&&n(0,i=c.session)},[i,o]}class Mt extends se{constructor(e){super(),re(this,e,Ot,Dt,V,{session:0})}}class $t{constructor(e){P(this,"startTime");P(this,"duration");P(this,"sampleCount");P(this,"program");P(this,"cpuTime");P(this,"rootFrame");P(this,"sysPath");P(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.program=e.session.program,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.rootFrame=new K(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let n=e;if(Q(e).length>1)for(const r of this.sysPath){const u=Nt(e,r);Q(u).length<Q(n).length&&(n=u)}return this._shortenPathCache[e]=n,n}}function Q(t){return t.split(/[/\\]/)}function Ze(t){const e=Q(t);return e.length>0&&e[0].endsWith(":")?e[0]:null}function Nt(t,e){if(Ze(t)!=Ze(e))return t;const n=Q(t),i=Q(e);let r=0;for(;r<n.length&&r<i.length&&n[r]==i[r];)r++;return i.slice(r).map(s=>"..").concat(n.slice(r)).join("/")}return{render(t,e){const n=new $t(e);return new Mt({target:t,props:{session:n}})}}}();
