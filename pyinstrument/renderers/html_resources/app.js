var pyinstrumentHTMLRenderer=function(){"use strict";var ls=Object.defineProperty;var as=(E,ge,Pe)=>ge in E?ls(E,ge,{enumerable:!0,configurable:!0,writable:!0,value:Pe}):E[ge]=Pe;var A=(E,ge,Pe)=>as(E,typeof ge!="symbol"?ge+"":ge,Pe);function E(){}function ge(t){return t()}function Pe(){return Object.create(null)}function oe(t){t.forEach(ge)}function vt(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ki(t){return Object.keys(t).length===0}function Ht(t,...e){if(t==null){for(const n of e)n(void 0);return E}const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function _e(t,e,i){t.$$.on_destroy.push(Ht(e,i))}function Ei(t,e,i){return t.set(i),e}function c(t,e){t.appendChild(e)}function H(t,e,i){t.insertBefore(e,i||null)}function R(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function O(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function I(t){return document.createTextNode(t)}function w(){return I(" ")}function Mi(){return I("")}function N(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function gt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function _t(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function a(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function bt(t){let e;return{p(...i){e=i,e.forEach(n=>t.push(n))},r(){e.forEach(i=>t.splice(t.indexOf(i),1))}}}function Fi(t){return Array.from(t.childNodes)}function Ae(t,e){e=""+e,t.data!==e&&(t.data=e)}function ce(t,e){t.value=e??""}function Y(t,e,i,n){i==null?t.style.removeProperty(e):t.style.setProperty(e,i,"")}function ke(t,e,i){t.classList.toggle(e,!!i)}function Pi(t,e,{bubbles:i=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:n})}class Ii{constructor(e=!1){A(this,"is_svg",!1);A(this,"e");A(this,"n");A(this,"t");A(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,i,n=null){this.e||(this.is_svg?this.e=O(i.nodeName):this.e=h(i.nodeType===11?"TEMPLATE":i.nodeName),this.t=i.tagName!=="TEMPLATE"?i:i.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let i=0;i<this.n.length;i+=1)H(this.t,this.n[i],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(R)}}let Xe;function Qe(t){Xe=t}function Lt(){if(!Xe)throw new Error("Function called outside component initialization");return Xe}function Vt(t){Lt().$$.on_mount.push(t)}function Ri(){const t=Lt();return(e,i,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const l=Pi(e,i,{cancelable:n});return s.slice().forEach(o=>{o.call(t,l)}),!l.defaultPrevented}return!0}}const Se=[],He=[];let Le=[];const $t=[],Si=Promise.resolve();let wt=!1;function Hi(){wt||(wt=!0,Si.then(Dt))}function yt(t){Le.push(t)}const At=new Set;let Ve=0;function Dt(){if(Ve!==0)return;const t=Xe;do{try{for(;Ve<Se.length;){const e=Se[Ve];Ve++,Qe(e),Li(e.$$)}}catch(e){throw Se.length=0,Ve=0,e}for(Qe(null),Se.length=0,Ve=0;He.length;)He.pop()();for(let e=0;e<Le.length;e+=1){const i=Le[e];At.has(i)||(At.add(i),i())}Le.length=0}while(Se.length);for(;$t.length;)$t.pop()();wt=!1,At.clear(),Qe(t)}function Li(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(yt)}}function Vi(t){const e=[],i=[];Le.forEach(n=>t.indexOf(n)===-1?e.push(n):i.push(n)),i.forEach(n=>n()),Le=e}const st=new Set;let Ie;function $e(){Ie={r:0,c:[],p:Ie}}function De(){Ie.r||oe(Ie.c),Ie=Ie.p}function L(t,e){t&&t.i&&(st.delete(t),t.i(e))}function B(t,e,i,n){if(t&&t.o){if(st.has(t))return;st.add(t),Ie.c.push(()=>{st.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}function Ot(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function $i(t,e){B(t,1,1,()=>{e.delete(t.key)})}function Di(t,e,i,n,s,l,o,r,u,d,f,m){let p=t.length,v=l.length,_=p;const b={};for(;_--;)b[t[_].key]=_;const y=[],k=new Map,P=new Map,F=[];for(_=v;_--;){const T=m(s,l,_),S=i(T);let g=o.get(S);g?F.push(()=>g.p(T,e)):(g=d(S,T),g.c()),k.set(S,y[_]=g),S in b&&P.set(S,Math.abs(_-b[S]))}const V=new Set,U=new Set;function M(T){L(T,1),T.m(r,f),o.set(T.key,T),f=T.first,v--}for(;p&&v;){const T=y[v-1],S=t[p-1],g=T.key,C=S.key;T===S?(f=T.first,p--,v--):k.has(C)?!o.has(g)||V.has(g)?M(T):U.has(C)?p--:P.get(g)>P.get(C)?(U.add(g),M(T)):(V.add(C),p--):(u(S,o),p--)}for(;p--;){const T=t[p];k.has(T.key)||u(T,o)}for(;v;)M(y[v-1]);return oe(F),y}function be(t){t&&t.c()}function ue(t,e,i){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,i),yt(()=>{const l=t.$$.on_mount.map(ge).filter(vt);t.$$.on_destroy?t.$$.on_destroy.push(...l):oe(l),t.$$.on_mount=[]}),s.forEach(yt)}function de(t,e){const i=t.$$;i.fragment!==null&&(Vi(i.after_update),oe(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function Oi(t,e){t.$$.dirty[0]===-1&&(Se.push(t),Hi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function fe(t,e,i,n,s,l,o=null,r=[-1]){const u=Xe;Qe(t);const d=t.$$={fragment:null,ctx:[],props:l,update:E,not_equal:s,bound:Pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Pe(),dirty:r,skip_bound:!1,root:e.target||u.$$.root};o&&o(d.root);let f=!1;if(d.ctx=i?i(t,e.props||{},(m,p,...v)=>{const _=v.length?v[0]:p;return d.ctx&&s(d.ctx[m],d.ctx[m]=_)&&(!d.skip_bound&&d.bound[m]&&d.bound[m](_),f&&Oi(t,m)),p}):[],d.update(),f=!0,oe(d.before_update),d.fragment=n?n(d.ctx):!1,e.target){if(e.hydrate){const m=Fi(e.target);d.fragment&&d.fragment.l(m),m.forEach(R)}else d.fragment&&d.fragment.c();e.intro&&L(t.$$.fragment),ue(t,e.target,e.anchor),Dt()}Qe(u)}class he{constructor(){A(this,"$$");A(this,"$$set")}$destroy(){de(this,1),this.$destroy=E}$on(e,i){if(!vt(i))return E;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const s=n.indexOf(i);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!ki(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ni="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ni);function Bi(t){let e,i;return{c(){e=O("svg"),i=O("path"),a(i,"fill-rule","evenodd"),a(i,"clip-rule","evenodd"),a(i,"d","M5.11634 0.889422C4.86506 -0.296474 3.17237 -0.296474 2.92109 0.889422C2.78291 1.54158 2.10994 1.93011 1.47607 1.72371C0.323418 1.34837 -0.522932 2.81429 0.378448 3.62484C0.87414 4.07059 0.87414 4.84767 0.378448 5.29341C-0.522931 6.10397 0.323418 7.56989 1.47607 7.19455C2.10994 6.98814 2.78291 7.37668 2.92109 8.02883C3.17237 9.21473 4.86506 9.21473 5.11634 8.02883C5.25452 7.37668 5.92749 6.98814 6.56136 7.19455C7.71401 7.56989 8.56036 6.10397 7.65898 5.29341C7.16329 4.84767 7.16329 4.07059 7.65898 3.62484C8.56036 2.81429 7.71401 1.34837 6.56136 1.72371C5.92749 1.93011 5.25452 1.54158 5.11634 0.889422ZM4.01883 6.33408C5.05436 6.33408 5.89383 5.49462 5.89383 4.45908C5.89383 3.42355 5.05436 2.58408 4.01883 2.58408C2.98329 2.58408 2.14383 3.42355 2.14383 4.45908C2.14383 5.49462 2.98329 6.33408 4.01883 6.33408Z"),a(i,"fill","currentColor"),a(e,"width","9"),a(e,"height","9"),a(e,"viewBox","0 0 9 9"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(n,s){H(n,e,s),c(e,i)},p:E,i:E,o:E,d(n){n&&R(e)}}}class zi extends he{constructor(e){super(),fe(this,e,null,Bi,le,{})}}function Wi(t){let e,i,n,s,l,o,r,u,d,f,m,p,v,_,b,y,k;return{c(){e=O("svg"),i=O("g"),n=O("path"),s=O("path"),l=O("defs"),o=O("filter"),r=O("feFlood"),u=O("feBlend"),d=O("feGaussianBlur"),f=O("linearGradient"),m=O("stop"),p=O("stop"),v=O("stop"),_=O("linearGradient"),b=O("stop"),y=O("stop"),k=O("stop"),a(n,"fill-rule","evenodd"),a(n,"clip-rule","evenodd"),a(n,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(n,"fill","url(#paint0_linear_67_262)"),a(i,"opacity","0.5"),a(i,"filter","url(#filter0_f_67_262)"),a(s,"fill-rule","evenodd"),a(s,"clip-rule","evenodd"),a(s,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(s,"fill","url(#paint1_linear_67_262)"),a(r,"flood-opacity","0"),a(r,"result","BackgroundImageFix"),a(u,"mode","normal"),a(u,"in","SourceGraphic"),a(u,"in2","BackgroundImageFix"),a(u,"result","shape"),a(d,"stdDeviation","3.39785"),a(d,"result","effect1_foregroundBlur_67_262"),a(o,"id","filter0_f_67_262"),a(o,"x","3.2043"),a(o,"y","2.2043"),a(o,"width","36.0914"),a(o,"height","41.0914"),a(o,"filterUnits","userSpaceOnUse"),a(o,"color-interpolation-filters","sRGB"),a(m,"stop-color","#FFAA00"),a(p,"offset","0.514478"),a(p,"stop-color","#FFEB00"),a(v,"offset","1"),a(v,"stop-color","#98FF05"),a(f,"id","paint0_linear_67_262"),a(f,"x1","7.3769"),a(f,"y1","18.4566"),a(f,"x2","20.6583"),a(f,"y2","33.1038"),a(f,"gradientUnits","userSpaceOnUse"),a(b,"stop-color","#FFC834"),a(y,"offset","0.514478"),a(y,"stop-color","#FAF534"),a(k,"offset","1"),a(k,"stop-color","#B8FF38"),a(_,"id","paint1_linear_67_262"),a(_,"x1","7.3769"),a(_,"y1","18.4566"),a(_,"x2","20.6583"),a(_,"y2","33.1038"),a(_,"gradientUnits","userSpaceOnUse"),a(e,"width","44"),a(e,"height","44"),a(e,"viewBox","0 0 44 44"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(P,F){H(P,e,F),c(e,i),c(i,n),c(e,s),c(e,l),c(l,o),c(o,r),c(o,u),c(o,d),c(l,f),c(f,m),c(f,p),c(f,v),c(l,_),c(_,b),c(_,y),c(_,k)},p:E,i:E,o:E,d(P){P&&R(e)}}}class Ui extends he{constructor(e){super(),fe(this,e,null,Wi,le,{})}}const Oe=[];function Gi(t,e){return{subscribe:rt(t,e).subscribe}}function rt(t,e=E){let i;const n=new Set;function s(r){if(le(t,r)&&(t=r,i)){const u=!Oe.length;for(const d of n)d[1](),Oe.push(d,t);if(u){for(let d=0;d<Oe.length;d+=2)Oe[d][0](Oe[d+1]);Oe.length=0}}}function l(r){s(r(t))}function o(r,u=E){const d=[r,u];return n.add(d),n.size===1&&(i=e(s,l)||E),r(t),()=>{n.delete(d),n.size===0&&i&&(i(),i=null)}}return{set:s,update:l,subscribe:o}}function Nt(t,e,i){const n=!Array.isArray(t),s=n?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return Gi(i,(o,r)=>{let u=!1;const d=[];let f=0,m=E;const p=()=>{if(f)return;m();const _=e(n?d[0]:d,o,r);l?o(_):m=vt(_)?_:E},v=s.map((_,b)=>Ht(_,y=>{d[b]=y,f&=~(1<<b),u&&p()},()=>{f|=1<<b}));return u=!0,p(),function(){oe(v),m(),u=!1}})}var Tt={local:{},session:{}};function Ki(t){return t==="local"?localStorage:sessionStorage}function Ct(t,e,i){var n,s,l,o,r,u,d,f;i!=null&&i.onError&&console.warn("onError has been deprecated. Please use onWriteError instead");const m=(n=i==null?void 0:i.serializer)!=null?n:JSON,p=(s=i==null?void 0:i.storage)!=null?s:"local",v=(l=i==null?void 0:i.syncTabs)!=null?l:!0,_=(r=(o=i==null?void 0:i.onWriteError)!=null?o:i==null?void 0:i.onError)!=null?r:M=>console.error(`Error when writing value from persisted store "${t}" to ${p}`,M),b=(u=i==null?void 0:i.onParseError)!=null?u:(M,T)=>console.error(`Error when parsing ${M?'"'+M+'"':"value"} from persisted store "${t}"`,T),y=(d=i==null?void 0:i.beforeRead)!=null?d:M=>M,k=(f=i==null?void 0:i.beforeWrite)!=null?f:M=>M,P=typeof window<"u"&&typeof document<"u",F=P?Ki(p):null;function V(M,T){const S=k(T);try{F==null||F.setItem(M,m.stringify(S))}catch(g){_(g)}}function U(){function M(C){try{return m.parse(C)}catch(D){b(C,D)}}const T=F==null?void 0:F.getItem(t);if(T==null)return e;const S=M(T);return S==null?e:y(S)}if(!Tt[p][t]){const M=U(),T=rt(M,C=>{if(P&&p=="local"&&v){const D=Q=>{if(Q.key===t&&Q.newValue){let z;try{z=m.parse(Q.newValue)}catch(te){b(Q.newValue,te);return}const Re=y(z);C(Re)}};return window.addEventListener("storage",D),()=>window.removeEventListener("storage",D)}}),{subscribe:S,set:g}=T;Tt[p][t]={set(C){g(C),V(t,C)},update(C){return T.update(D=>{const Q=C(D);return V(t,Q),Q})},reset(){this.set(e)},subscribe:S}}return Tt[p][t]}function Bt(){return{collapseMode:"non-application",collapseCustomHide:"",collapseCustomShow:"",removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:.001,timeFormat:"absolute"}}const x=Ct("pyinstrument:viewOptionsCallStack",Bt(),{syncTabs:!0,beforeRead(t){return{...Bt(),...t}}}),Ze=Ct("pyinstrument:viewOptions",{viewMode:"call-stack"},{syncTabs:!1}),je=Ct("pyinstrument:viewOptionsTimeline",{removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:1e-4},{syncTabs:!0});function Xi(t){let e,i,n,s,l,o,r,u,d,f,m,p,v,_,b,y,k,P,F,V,U,M,T,S,g,C,D,Q,z,Re,te,ee,Z,Ee,G,Je,et,ae,K,tt,ie,me,pe,we,ve,Te,it,Ce,J,ze,Me,nt,W,$,j,fi,ct,hi,mi,We,Fe,pi,Ue,ut,vi,gi,ye,_i,bi,Ge,dt,wi,Ke,ft,ht,ne,yi,Ai,mt,pt,se,Ti,It,Rt,St,Ci;return It=bt(t[5][0]),Rt=bt(t[5][1]),{c(){e=h("div"),i=h("div"),n=h("div"),n.textContent="Collapse frames",s=w(),l=h("div"),o=h("div"),r=h("input"),u=w(),d=h("label"),f=I("Non-application code"),m=w(),p=h("div"),p.textContent=`Application code is anything run from outside the Python home
          directory.`,v=w(),_=h("div"),b=h("input"),y=w(),k=h("label"),P=I("Custom"),F=w(),V=h("div"),U=I(`Regex on the source file path.
          `),M=h("div"),T=h("label"),T.textContent="Show",S=w(),g=h("input"),C=w(),D=h("label"),D.textContent="Hide",Q=w(),z=h("input"),Re=I(`
          If neither match, non-application rule is used.`),te=w(),ee=h("div"),Z=h("input"),Ee=w(),G=h("label"),Je=I("Disabled"),et=w(),ae=h("div"),K=h("div"),K.textContent="Remove frames",tt=w(),ie=h("div"),me=h("div"),pe=h("input"),we=w(),ve=h("label"),Te=I("importlib machinery"),it=w(),Ce=h("div"),J=h("input"),ze=w(),Me=h("label"),nt=I("Frames declaring __traceback_hide__"),W=w(),$=h("div"),j=h("input"),fi=w(),ct=h("label"),hi=I("pyinstrument frames"),mi=w(),We=h("div"),Fe=h("input"),pi=w(),Ue=h("span"),ut=h("label"),vi=I("Frames with durations less than"),gi=w(),ye=h("input"),_i=I(`
          % of the total time`),bi=w(),Ge=h("div"),dt=h("div"),dt.textContent="Time format",wi=w(),Ke=h("div"),ft=h("div"),ht=h("label"),ne=h("input"),yi=I(`
          Absolute time in seconds`),Ai=w(),mt=h("div"),pt=h("label"),se=h("input"),Ti=I(`
          Percentage of the total run time`),a(n,"class","name svelte-1pecl4m"),a(r,"id",t[1]+"collapseModeAll"),a(r,"type","radio"),r.__value="non-application",ce(r,r.__value),a(r,"class","svelte-1pecl4m"),a(d,"for",t[1]+"collapseModeAll"),a(p,"class","description svelte-1pecl4m"),a(o,"class","option svelte-1pecl4m"),a(b,"id",t[1]+"collapseModeCustom"),a(b,"type","radio"),b.__value="custom",ce(b,b.__value),a(b,"class","svelte-1pecl4m"),a(k,"for",t[1]+"collapseModeCustom"),a(T,"for","collapseCustomShow"),a(T,"class","svelte-1pecl4m"),a(g,"id","collapseCustomShow"),a(g,"type","text"),a(g,"placeholder","myproject"),a(g,"spellcheck","false"),a(g,"autocapitalize","off"),a(g,"autocomplete","off"),a(g,"autocorrect","off"),a(g,"class","svelte-1pecl4m"),a(D,"for","collapseCustomHide"),a(D,"class","svelte-1pecl4m"),a(z,"id","collapseCustomHide"),a(z,"type","text"),a(z,"placeholder",".*/lib/.*"),a(z,"spellcheck","false"),a(z,"autocapitalize","off"),a(z,"autocomplete","off"),a(z,"autocorrect","off"),a(z,"class","svelte-1pecl4m"),a(M,"class","mini-input-grid svelte-1pecl4m"),a(V,"class","description svelte-1pecl4m"),a(_,"class","option svelte-1pecl4m"),a(Z,"id",t[1]+"collapseModeDisabled"),a(Z,"type","radio"),Z.__value="disabled",ce(Z,Z.__value),a(Z,"class","svelte-1pecl4m"),a(G,"for",t[1]+"collapseModeDisabled"),a(ee,"class","option svelte-1pecl4m"),a(l,"class","body"),a(i,"class","option-group svelte-1pecl4m"),a(K,"class","name svelte-1pecl4m"),a(pe,"id",t[1]+"removeImportlib"),a(pe,"type","checkbox"),a(pe,"class","svelte-1pecl4m"),a(ve,"for",t[1]+"removeImportlib"),a(me,"class","option svelte-1pecl4m"),a(J,"id",t[1]+"removeTracebackHide"),a(J,"type","checkbox"),a(J,"class","svelte-1pecl4m"),a(Me,"for",t[1]+"removeTracebackHide"),a(Ce,"class","option svelte-1pecl4m"),a(j,"id",t[1]+"removePyinstrument"),a(j,"type","checkbox"),a(j,"class","svelte-1pecl4m"),a(ct,"for",t[1]+"removePyinstrument"),a($,"class","option svelte-1pecl4m"),a(Fe,"id",t[1]+"removeIrrelevant"),a(Fe,"type","checkbox"),a(Fe,"class","svelte-1pecl4m"),a(ut,"for",t[1]+"removeIrrelevant"),a(ye,"type","number"),ye.value=t[2](),a(ye,"min","0"),a(ye,"max","99"),a(ye,"step","0.01"),Y(ye,"width","4em"),a(ye,"class","svelte-1pecl4m"),a(We,"class","option svelte-1pecl4m"),a(ie,"class","body"),a(ae,"class","option-group svelte-1pecl4m"),a(dt,"class","name svelte-1pecl4m"),a(ne,"type","radio"),ne.__value="absolute",ce(ne,ne.__value),a(ne,"class","svelte-1pecl4m"),a(ft,"class","option svelte-1pecl4m"),a(se,"type","radio"),se.__value="proportion",ce(se,se.__value),a(se,"class","svelte-1pecl4m"),a(mt,"class","option svelte-1pecl4m"),a(Ke,"class","body"),a(Ge,"class","option-group svelte-1pecl4m"),a(e,"class","view-options-call-stack svelte-1pecl4m"),It.p(ne,se),Rt.p(r,b,Z)},m(q,re){H(q,e,re),c(e,i),c(i,n),c(i,s),c(i,l),c(l,o),c(o,r),r.checked=r.__value===t[0].collapseMode,c(o,u),c(o,d),c(d,f),c(o,m),c(o,p),c(l,v),c(l,_),c(_,b),b.checked=b.__value===t[0].collapseMode,c(_,y),c(_,k),c(k,P),c(_,F),c(_,V),c(V,U),c(V,M),c(M,T),c(M,S),c(M,g),ce(g,t[0].collapseCustomShow),c(M,C),c(M,D),c(M,Q),c(M,z),ce(z,t[0].collapseCustomHide),c(V,Re),c(l,te),c(l,ee),c(ee,Z),Z.checked=Z.__value===t[0].collapseMode,c(ee,Ee),c(ee,G),c(G,Je),c(e,et),c(e,ae),c(ae,K),c(ae,tt),c(ae,ie),c(ie,me),c(me,pe),pe.checked=t[0].removeImportlib,c(me,we),c(me,ve),c(ve,Te),c(ie,it),c(ie,Ce),c(Ce,J),J.checked=t[0].removeTracebackHide,c(Ce,ze),c(Ce,Me),c(Me,nt),c(ie,W),c(ie,$),c($,j),j.checked=t[0].removePyinstrument,c($,fi),c($,ct),c(ct,hi),c(ie,mi),c(ie,We),c(We,Fe),Fe.checked=t[0].removeIrrelevant,c(We,pi),c(We,Ue),c(Ue,ut),c(ut,vi),c(Ue,gi),c(Ue,ye),c(Ue,_i),c(e,bi),c(e,Ge),c(Ge,dt),c(Ge,wi),c(Ge,Ke),c(Ke,ft),c(ft,ht),c(ht,ne),ne.checked=ne.__value===t[0].timeFormat,c(ht,yi),c(Ke,Ai),c(Ke,mt),c(mt,pt),c(pt,se),se.checked=se.__value===t[0].timeFormat,c(pt,Ti),St||(Ci=[N(r,"change",t[4]),N(b,"change",t[6]),N(g,"input",t[7]),N(z,"input",t[8]),N(Z,"change",t[9]),N(pe,"change",t[10]),N(J,"change",t[11]),N(j,"change",t[12]),N(Fe,"change",t[13]),N(ye,"input",t[3]),N(ne,"change",t[14]),N(se,"change",t[15])],St=!0)},p(q,[re]){re&1&&(r.checked=r.__value===q[0].collapseMode),re&1&&(b.checked=b.__value===q[0].collapseMode),re&1&&g.value!==q[0].collapseCustomShow&&ce(g,q[0].collapseCustomShow),re&1&&z.value!==q[0].collapseCustomHide&&ce(z,q[0].collapseCustomHide),re&1&&(Z.checked=Z.__value===q[0].collapseMode),re&1&&(pe.checked=q[0].removeImportlib),re&1&&(J.checked=q[0].removeTracebackHide),re&1&&(j.checked=q[0].removePyinstrument),re&1&&(Fe.checked=q[0].removeIrrelevant),re&1&&(ne.checked=ne.__value===q[0].timeFormat),re&1&&(se.checked=se.__value===q[0].timeFormat)},i:E,o:E,d(q){q&&R(e),It.r(),Rt.r(),St=!1,oe(Ci)}}}function Qi(t,e,i){let n;_e(t,x,F=>i(0,n=F));const s=Math.random().toString(36).substring(4);function l(){return(n.removeIrrelevantThreshold*100).toLocaleString(void 0,{maximumFractionDigits:4})}function o(F){Ei(x,n.removeIrrelevantThreshold=F.currentTarget.valueAsNumber/100,n)}const r=[[],[]];function u(){n.collapseMode=this.__value,x.set(n)}function d(){n.collapseMode=this.__value,x.set(n)}function f(){n.collapseCustomShow=this.value,x.set(n)}function m(){n.collapseCustomHide=this.value,x.set(n)}function p(){n.collapseMode=this.__value,x.set(n)}function v(){n.removeImportlib=this.checked,x.set(n)}function _(){n.removeTracebackHide=this.checked,x.set(n)}function b(){n.removePyinstrument=this.checked,x.set(n)}function y(){n.removeIrrelevant=this.checked,x.set(n)}function k(){n.timeFormat=this.__value,x.set(n)}function P(){n.timeFormat=this.__value,x.set(n)}return[n,s,l,o,u,r,d,f,m,p,v,_,b,y,k,P]}class Zi extends he{constructor(e){super(),fe(this,e,Qi,Xi,le,{})}}function ji(t){let e,i,n,s,l,o,r,u,d,f,m,p,v,_,b,y,k,P,F,V,U,M,T,S;return{c(){e=h("div"),i=h("div"),n=h("div"),n.textContent="Remove frames",s=w(),l=h("div"),o=h("div"),r=h("input"),u=w(),d=h("label"),f=I("importlib machinery"),m=w(),p=h("div"),v=h("input"),_=w(),b=h("label"),y=I("Frames declaring __traceback_hide__"),k=w(),P=h("div"),F=h("input"),V=w(),U=h("label"),M=I("pyinstrument frames"),a(n,"class","name"),a(r,"id",t[1]+"removeImportlib"),a(r,"type","checkbox"),a(d,"for",t[1]+"removeImportlib"),a(o,"class","option"),a(v,"id",t[1]+"removeTracebackHide"),a(v,"type","checkbox"),a(b,"for",t[1]+"removeTracebackHide"),a(p,"class","option"),a(F,"id",t[1]+"removePyinstrument"),a(F,"type","checkbox"),a(U,"for",t[1]+"removePyinstrument"),a(P,"class","option"),a(l,"class","body"),a(i,"class","option-group"),a(e,"class","view-options-timeline svelte-vsz8zm")},m(g,C){H(g,e,C),c(e,i),c(i,n),c(i,s),c(i,l),c(l,o),c(o,r),r.checked=t[0].removeImportlib,c(o,u),c(o,d),c(d,f),c(l,m),c(l,p),c(p,v),v.checked=t[0].removeTracebackHide,c(p,_),c(p,b),c(b,y),c(l,k),c(l,P),c(P,F),F.checked=t[0].removePyinstrument,c(P,V),c(P,U),c(U,M),T||(S=[N(r,"change",t[2]),N(v,"change",t[3]),N(F,"change",t[4])],T=!0)},p(g,[C]){C&1&&(r.checked=g[0].removeImportlib),C&1&&(v.checked=g[0].removeTracebackHide),C&1&&(F.checked=g[0].removePyinstrument)},i:E,o:E,d(g){g&&R(e),T=!1,oe(S)}}}function qi(t,e,i){let n;_e(t,je,u=>i(0,n=u));const s=Math.random().toString(36).substring(4);function l(){n.removeImportlib=this.checked,je.set(n)}function o(){n.removeTracebackHide=this.checked,je.set(n)}function r(){n.removePyinstrument=this.checked,je.set(n)}return[n,s,l,o,r]}class Yi extends he{constructor(e){super(),fe(this,e,qi,ji,le,{})}}class xi extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function Ji(t,e){const i=e*(t.length-1),n=Math.floor(i),s=Math.ceil(i),l=t[n],o=t[s],r=i-n;return tn(r,{to:[l,o]})}function en(t,e,i){return t===1/0?(console.warn("clamp: value is Infinity, returning `max`",t),i):t===-1/0?(console.warn("clamp: value is -Infinity, returning `min`",t),e):Number.isFinite(t)?t<e?e:t>i?i:t:(console.warn("clamp: value isn't finite, returning `min`",t),e)}function Ne(t,e){const{from:i=[0,1],to:n=[0,1]}=e,s=e.clamp||!1;let l=(t-i[0])/(i[1]-i[0])*(n[1]-n[0])+n[0];return s&&(l=en(l,Math.min(n[0],n[1]),Math.max(n[0],n[1]))),l}function tn(t,e){return`rgb(
      ${Ne(t,{from:e.from,to:[e.to[0][0],e.to[1][0]],clamp:e.clamp})},
      ${Ne(t,{from:e.from,to:[e.to[0][1],e.to[1][1]],clamp:e.clamp})},
      ${Ne(t,{from:e.from,to:[e.to[0][2],e.to[1][2]],clamp:e.clamp})}
    )`}function nn(t){if(t.substr(0,1)=="#"){var e=(t.length-1)/3,i=[17,1,.062272][e-1];return[Math.round(parseInt(t.substr(1,e),16)*i),Math.round(parseInt(t.substr(1+e,e),16)*i),Math.round(parseInt(t.substr(1+2*e,e),16)*i)]}else return t.split("(")[1].split(")")[0].split(",").map(n=>+n)}function sn(t,e,i={}){const{ignore:n=[],capture:s=!0}=i,l=window;if(!l)return()=>{};let o=!0,r=!1;const u=v=>n.some(_=>typeof _=="string"?Array.from(document.querySelectorAll(_)).some(b=>b===v.target||v.composedPath().includes(b)):_&&(v.target===_||v.composedPath().includes(_))),d=v=>{if(!(!t||t===v.target||v.composedPath().includes(t))){if(v.detail===0&&(o=!u(v)),!o){o=!0;return}e(v)}},f=v=>{r||(r=!0,setTimeout(()=>{r=!1},0),d(v))},m=v=>{o=!u(v)&&!!(t&&!v.composedPath().includes(t))};return l.addEventListener("click",f,{passive:!0,capture:s}),l.addEventListener("pointerdown",m,{passive:!0}),()=>{l.removeEventListener("click",f,{capture:s}),l.removeEventListener("pointerdown",m)}}function rn(t){const e=document.createElement("div");return e.appendChild(document.createTextNode(t)),e.innerHTML}function kt(t){return rn(t).replace(/(\/|\\)/g,i=>`${i}<wbr>`)}function on(t){let e,i;return e=new Yi({}),{c(){be(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){de(e,n)}}}function ln(t){let e,i;return e=new Zi({}),{c(){be(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){de(e,n)}}}function an(t){let e,i,n,s,l,o,r,u;const d=[ln,on],f=[];function m(p,v){return p[0].viewMode==="call-stack"?0:p[0].viewMode==="timeline"?1:-1}return~(o=m(t))&&(r=f[o]=d[o](t)),{c(){e=h("div"),i=h("div"),n=h("div"),s=I(t[2]),l=w(),r&&r.c(),a(n,"class","title svelte-f96okc"),a(i,"class","box svelte-f96okc"),a(e,"class","view-options svelte-f96okc")},m(p,v){H(p,e,v),c(e,i),c(i,n),c(n,s),c(i,l),~o&&f[o].m(i,null),t[3](i),u=!0},p(p,[v]){(!u||v&4)&&Ae(s,p[2]);let _=o;o=m(p),o!==_&&(r&&($e(),B(f[_],1,1,()=>{f[_]=null}),De()),~o?(r=f[o],r||(r=f[o]=d[o](p),r.c()),L(r,1),r.m(i,null)):r=null)},i(p){u||(L(r),u=!0)},o(p){B(r),u=!1},d(p){p&&R(e),~o&&f[o].d(),t[3](null)}}}function cn(t,e,i){let n;_e(t,Ze,d=>i(0,n=d));const s=Ri();function l(){s("close")}let o;Vt(()=>{if(o)return sn(o,l,{ignore:[".js-view-options-button"]})});let r="View options";function u(d){He[d?"unshift":"push"](()=>{o=d,i(1,o)})}return t.$$.update=()=>{t.$$.dirty&1&&(n.viewMode==="call-stack"?i(2,r="Call stack view options"):n.viewMode==="timeline"&&i(2,r="Timeline view options"))},[n,o,r,u]}class un extends he{constructor(e){super(),fe(this,e,cn,an,le,{})}}function zt(t){let e,i;return e=new un({}),e.$on("close",t[9]),{c(){be(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},p:E,i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){de(e,n)}}}function dn(t){let e,i,n,s,l,o,r,u,d=kt(t[0].target_description)+"",f,m,p,v,_,b,y,k,P,F,V,U,M,T=t[0].sampleCount+"",S,g,C,D,Q,z,Re,te,ee,Z,Ee,G,Je,et,ae,K,tt,ie,me,pe,we,ve,Te,it,Ce,J,ze,Me,nt;l=new Ui({}),Te=new zi({});let W=t[1]&&zt(t);return ze=bt(t[7][0]),{c(){e=h("div"),i=h("div"),n=h("div"),s=h("div"),be(l.$$.fragment),o=w(),r=h("div"),u=h("div"),f=w(),m=h("div"),p=h("div"),v=h("span"),v.textContent="Recorded:",_=w(),b=h("span"),b.textContent=`${t[3]}`,y=w(),k=h("br"),P=w(),F=h("div"),V=h("span"),V.textContent="Samples:",U=w(),M=h("span"),S=I(T),g=w(),C=h("div"),D=h("span"),D.textContent="CPU utilization:",Q=w(),z=h("span"),z.textContent=`${(t[4]*100).toFixed(0)}%`,Re=w(),te=h("div"),ee=h("div"),Z=I(`View:
            `),Ee=h("label"),G=h("input"),Je=I(`
              Call stack`),et=w(),ae=h("label"),K=h("input"),tt=I(`
              Timeline`),ie=w(),me=h("div"),pe=w(),we=h("div"),ve=h("button"),be(Te.$$.fragment),it=I(`
              View options`),Ce=w(),W&&W.c(),a(s,"class","logo svelte-1u5a81f"),a(u,"class","target-description svelte-1u5a81f"),a(v,"class","metric-label svelte-1u5a81f"),a(b,"class","metric-value svelte-1u5a81f"),a(p,"class","metric date svelte-1u5a81f"),a(k,"class","svelte-1u5a81f"),a(V,"class","metric-label svelte-1u5a81f"),a(M,"class","metric-value svelte-1u5a81f"),a(F,"class","metric svelte-1u5a81f"),a(D,"class","metric-label svelte-1u5a81f"),a(z,"class","metric-value svelte-1u5a81f"),a(C,"class","metric svelte-1u5a81f"),a(m,"class","metrics svelte-1u5a81f"),a(G,"type","radio"),G.__value="call-stack",ce(G,G.__value),a(G,"class","svelte-1u5a81f"),a(Ee,"class","svelte-1u5a81f"),a(K,"type","radio"),K.__value="timeline",ce(K,K.__value),a(K,"class","svelte-1u5a81f"),a(ae,"class","svelte-1u5a81f"),a(ee,"class","toggle"),a(me,"class","spacer"),Y(me,"flex","1"),a(ve,"class","js-view-options-button svelte-1u5a81f"),a(we,"class","button-container svelte-1u5a81f"),a(te,"class","view-options svelte-1u5a81f"),a(r,"class","layout svelte-1u5a81f"),a(n,"class","row svelte-1u5a81f"),a(i,"class","margins"),a(e,"class","header svelte-1u5a81f"),ze.p(G,K)},m($,j){H($,e,j),c(e,i),c(i,n),c(n,s),ue(l,s,null),c(n,o),c(n,r),c(r,u),u.innerHTML=d,c(r,f),c(r,m),c(m,p),c(p,v),c(p,_),c(p,b),c(m,y),c(m,k),c(m,P),c(m,F),c(F,V),c(F,U),c(F,M),c(M,S),c(m,g),c(m,C),c(C,D),c(C,Q),c(C,z),c(r,Re),c(r,te),c(te,ee),c(ee,Z),c(ee,Ee),c(Ee,G),G.checked=G.__value===t[2].viewMode,c(Ee,Je),c(ee,et),c(ee,ae),c(ae,K),K.checked=K.__value===t[2].viewMode,c(ae,tt),c(te,ie),c(te,me),c(te,pe),c(te,we),c(we,ve),ue(Te,ve,null),c(ve,it),c(we,Ce),W&&W.m(we,null),J=!0,Me||(nt=[N(G,"change",t[6]),N(K,"change",t[8]),N(ve,"click",_t(gt(t[5])))],Me=!0)},p($,[j]){(!J||j&1)&&d!==(d=kt($[0].target_description)+"")&&(u.innerHTML=d),(!J||j&1)&&T!==(T=$[0].sampleCount+"")&&Ae(S,T),j&4&&(G.checked=G.__value===$[2].viewMode),j&4&&(K.checked=K.__value===$[2].viewMode),$[1]?W?(W.p($,j),j&2&&L(W,1)):(W=zt($),W.c(),L(W,1),W.m(we,null)):W&&($e(),B(W,1,1,()=>{W=null}),De())},i($){J||(L(l.$$.fragment,$),L(Te.$$.fragment,$),L(W),J=!0)},o($){B(l.$$.fragment,$),B(Te.$$.fragment,$),B(W),J=!1},d($){$&&R(e),de(l),de(Te),W&&W.d(),ze.r(),Me=!1,oe(nt)}}}function fn(t,e,i){let n;_e(t,Ze,v=>i(2,n=v));let{session:s}=e;const l=new Date(s.startTime*1e3).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"}),o=s.cpuTime/s.duration;let r=!1;function u(v){i(1,r=!r)}const d=[[]];function f(){n.viewMode=this.__value,Ze.set(n)}function m(){n.viewMode=this.__value,Ze.set(n)}const p=()=>i(1,r=!1);return t.$$set=v=>{"session"in v&&i(0,s=v.session)},[s,r,n,l,o,u,f,d,m,p]}class hn extends he{constructor(e){super(),fe(this,e,fn,dn,le,{session:0})}}const mn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWmSURBVHgBtVc7i11VFF5rn3PvPKoLFlqmDGPhaGVpJQoWAZEEGxERFBsDgnY6KFpaWWrQysRGf4BgmSKQFCKWKQMKTqNzz2svv/XY55ybeycTCw+z736cs/f61rdee5hmz/Hx85c66m4QyTEzrdAo4cd6EuuJ2P4wtbmUgfZkCyRoWVcwyMI29ybW47sfhRfXf793+z4X4ZchPEl3F2esElYrbRVaEjQGEKGE3jcUofGwlIEBygoACAa0fmDrdV4AOAg6FV4+W49nUPdlEW4AElGNtqjZ+hqIdI2NAC7KuvAZloyJCR+IukGmF5A6iH/IbEBWLN2NevbBFQ6tCoAF3u7VggYQtQJyFlygOAADI74Jf669QDiWWh6xFRMUgLF6PAGYkcgGgGkBE/x8AiSVaykG0AUxlgm7BY0BUMAQL8R77LM96F98A98kBeu+kAdlgA0MntUGACmOFDQl5sm+Rai6lwpMLtiEgSVGE8wVFBkAB7XcU+rdJOoLSU0x8Aii3ta/0AWqMHjlM6LDPaYDHLSsnRn9pjMny2jBCDSu9H3tDqpCmw4C6lgHqAQmWB05uwwF8RCAQpU7jIbQYCElBsjAlabfqJdnD7lKwzVcIVVOgmKpF2g921pS8/QRvuETmwDEKZdwFHMocYHffYSfBc0opojVIomjx/dY64CkxVktMsgar16/IhbKygANruwWA+YDkURUcNHQaK5ps1XhBwaAzf6M9YzWq3Ac1EKACm80cB8KV6IdPsCR0aQAMBAaUkxXPyU6WDqlypKaSEOtmCCpDyAKFgu1gSecrhdar4n++VsiGUVWDHUpdJkYEPEkEyDc7paHTShXbkuNhqQfaF5wMt16lff69JYFFYT3A8AYgFxku5xtBtw9R7YsEiH85hcYLIsfuO0lfCCHvTtMWxszNRhDebp+LRsTGobFr0zBiO5tBnhWaZgiDwD5gi3Wiw+YcDAwoDfB+MaFq83RsP8M5zSYdFjsBwfh9YAjErbyQLHNVNUsH2Dl2odCh4dE+0vQXjtI9YG2z05zOKvSbdR3eKdtLTbugVKzoOQxC+7KA5NtJPiXEZaH5xDglMrOBMHTWxdWhA/QVqtgEdx3EtVwSkDOxE4GHESpCZzcHLe+4gg3HA7P69jpfvutTA0GTQNNkXAs5UYJVjC593keik/JBohzALjQsXbrJtRksRgntzm7nVX4GnZumtC4D23N4aIAZWdv9LyZv+3IA87AlHY1HQu9+q7Qwb7nAQ01FbQ+g5NBaNOKA2jdD0bg4+UjzCrbqu6IgrLB6aLRF6KWB0ZNUj15QvLCRVa8PNanqiq7pM7kbVXDEvdaipMmHIRfBa2//aYC9WI5vjH6ydLsB1ezpePiK9PhYcoLnjSK5kljNUWqvXppKdVxo4XFhIsJ93gXy/8clxIvt0X7i4XrU8+1D+wGgKPGW/UCzHfew9VsXywVZxbz8GYdKqS4rCTfZ/NZvD8WA/Yxu/aW661F7q+cIbsXVO6EcVf3b0t9SIXFx9N+kwEO3w8QVmhggq+/9xSroVdiv5TZlr0SanL6/KXOK5SaL9b/G4DRdDzONZbPuAjXS4bnfPWBPrJkjhzpYbdR8OeXz62nvBt3HD3z3F/2f0Fyx9O7XL2HAoj7YG33AK8Bag4TrJlOa0DrrVtrj7DsPBtKlgstsZGIcOW+B0wvlMP1EOqcCh1rTldb+/Xcw2woqbaLeh/Vbl7vH/Vgx08TABrehO53ccJKK1ZWP+gjpRqAKdaN8jxLs5r7Bx5TMBm18kjxOOZ0ub/3flUW/nzw4PSJp568CT0vYXq5aGJgslc4o7doPI6dcis2eUq950Ug1DqF9NvQ/uVf79y5v+E1IptedEInNj+iT2L9Nfv9jf7gI/pFdP4D5rfoaYw/Lv+pReVRq/JOEEXOee/PAf7/PP8C3bt510T4rIwAAAAASUVORK5CYII=",Wt=rt({}),Ut=rt({});function Gt(t){return t>.6?"#FF4159":t>.3?"#F5A623":t>.2?"#D8CB2A":"#7ED321"}function Kt(t,e,i){const n=t.slice();return n[21]=e[i],n}function Xt(t){let e,i,n,s,l,o,r,u,d,f,m,p,v,_;return{c(){e=h("div"),i=h("div"),n=O("svg"),s=O("path"),l=w(),o=h("div"),r=I(t[5]),u=w(),d=h("div"),f=I(t[4]),m=w(),p=h("div"),p.textContent=`${t[11]}`,a(s,"d","M.937-.016L5.793 4.84.937 9.696z"),a(s,"fill",t[7]),a(s,"fill-rule","evenodd"),a(s,"fill-opacity",".582"),a(n,"width","6"),a(n,"height","10"),a(i,"class","frame-triangle svelte-14yvyii"),ke(i,"rotate",!t[8]),Y(i,"visibility",t[0].children.length>0?"visible":"hidden"),a(o,"class","time svelte-14yvyii"),Y(o,"color",t[7]),Y(o,"font-weight",t[10]<.2?500:600),a(d,"class","name svelte-14yvyii"),a(p,"class","code-position svelte-14yvyii"),a(e,"class","frame-description svelte-14yvyii"),a(e,"role","button"),a(e,"tabindex","0"),ke(e,"application-code",t[0].isApplicationCode),ke(e,"children-visible",!t[8]),Y(e,"padding-left",`${t[2]*35}px`)},m(b,y){H(b,e,y),c(e,i),c(i,n),c(n,s),c(e,l),c(e,o),c(o,r),c(e,u),c(e,d),c(d,f),c(e,m),c(e,p),v||(_=[N(e,"keydown",t[14]),N(e,"click",_t(gt(t[12])))],v=!0)},p(b,y){y&128&&a(s,"fill",b[7]),y&256&&ke(i,"rotate",!b[8]),y&1&&Y(i,"visibility",b[0].children.length>0?"visible":"hidden"),y&32&&Ae(r,b[5]),y&128&&Y(o,"color",b[7]),y&16&&Ae(f,b[4]),y&1&&ke(e,"application-code",b[0].isApplicationCode),y&256&&ke(e,"children-visible",!b[8]),y&4&&Y(e,"padding-left",`${b[2]*35}px`)},d(b){b&&R(e),v=!1,oe(_)}}}function Qt(t){let e,i,n,s,l=t[0].group.frames.length+"",o,r,u,d,f,m;return{c(){e=h("div"),i=h("div"),n=h("div"),n.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',s=w(),o=I(l),r=I(" frames hidden ("),u=I(t[6]),d=I(")"),a(n,"class","group-triangle svelte-14yvyii"),ke(n,"rotate",t[9]),a(i,"class","group-header-button svelte-14yvyii"),a(e,"class","group-header svelte-14yvyii"),a(e,"role","button"),a(e,"tabindex","0"),Y(e,"padding-left",`${t[2]*35}px`)},m(p,v){H(p,e,v),c(e,i),c(i,n),c(i,s),c(i,o),c(i,r),c(i,u),c(i,d),f||(m=[N(e,"keydown",t[15]),N(e,"click",_t(gt(t[13])))],f=!0)},p(p,v){v&512&&ke(n,"rotate",p[9]),v&1&&l!==(l=p[0].group.frames.length+"")&&Ae(o,l),v&64&&Ae(u,p[6]),v&4&&Y(e,"padding-left",`${p[2]*35}px`)},d(p){p&&R(e),f=!1,oe(m)}}}function Zt(t){let e,i=[],n=new Map,s,l=Ot(t[0].children);const o=r=>r[21].uuid;for(let r=0;r<l.length;r+=1){let u=Kt(t,l,r),d=o(u);n.set(d,i[r]=jt(d,u))}return{c(){e=h("div");for(let r=0;r<i.length;r+=1)i[r].c();a(e,"class","children svelte-14yvyii")},m(r,u){H(r,e,u);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(e,null);s=!0},p(r,u){u&15&&(l=Ot(r[0].children),$e(),i=Di(i,u,o,1,r,l,n,e,$i,jt,null,Kt),De())},i(r){if(!s){for(let u=0;u<l.length;u+=1)L(i[u]);s=!0}},o(r){for(let u=0;u<i.length;u+=1)B(i[u]);s=!1},d(r){r&&R(e);for(let u=0;u<i.length;u+=1)i[u].d()}}}function jt(t,e){let i,n,s;return n=new Jt({props:{frame:e[21],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:t,first:null,c(){i=Mi(),be(n.$$.fragment),this.first=i},m(l,o){H(l,i,o),ue(n,l,o),s=!0},p(l,o){e=l;const r={};o&1&&(r.frame=e[21]),o&2&&(r.rootFrame=e[1]),o&12&&(r.indent=e[2]+(e[3]?1:0)),n.$set(r)},i(l){s||(L(n.$$.fragment,l),s=!0)},o(l){B(n.$$.fragment,l),s=!1},d(l){l&&R(i),de(n,l)}}}function pn(t){let e,i,n,s,l,o,r=t[3]&&Xt(t),u=t[0].group&&t[0].group.rootFrame==t[0]&&!t[8]&&Qt(t),d=!t[8]&&t[0].children.length>0&&Zt(t);return{c(){e=h("div"),r&&r.c(),i=w(),u&&u.c(),n=w(),d&&d.c(),s=w(),l=h("div"),a(l,"class","visual-guide svelte-14yvyii"),Y(l,"left",`${t[2]*35+21}px`),Y(l,"backgroundColor",t[7]),a(e,"class","frame svelte-14yvyii")},m(f,m){H(f,e,m),r&&r.m(e,null),c(e,i),u&&u.m(e,null),c(e,n),d&&d.m(e,null),c(e,s),c(e,l),o=!0},p(f,[m]){f[3]?r?r.p(f,m):(r=Xt(f),r.c(),r.m(e,i)):r&&(r.d(1),r=null),f[0].group&&f[0].group.rootFrame==f[0]&&!f[8]?u?u.p(f,m):(u=Qt(f),u.c(),u.m(e,n)):u&&(u.d(1),u=null),!f[8]&&f[0].children.length>0?d?(d.p(f,m),m&257&&L(d,1)):(d=Zt(f),d.c(),L(d,1),d.m(e,s)):d&&($e(),B(d,1,1,()=>{d=null}),De()),m&4&&Y(l,"left",`${f[2]*35+21}px`),m&128&&Y(l,"backgroundColor",f[7])},i(f){o||(L(d),o=!0)},o(f){B(d),o=!1},d(f){f&&R(e),r&&r.d(),u&&u.d(),d&&d.d()}}}function qt(){const t='a:not([disabled]), button:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])',e=document.querySelector(".call-stack-view");if(!e)throw new Error("callStackElement not found");var i=Array.prototype.filter.call(e.querySelectorAll(t),function(n){return n.offsetWidth>0||n.offsetHeight>0||n===document.activeElement});return i}function Yt(){const t=qt();var e=t.indexOf(document.activeElement);if(e>-1){var i=t[e+1];i&&i.focus()}}function xt(){const t=qt();var e=t.indexOf(document.activeElement);if(e>-1){var i=t[e-1];i&&i.focus()}}function vn(t,e,i){var S;let n,s,l,o,r;_e(t,Ut,g=>i(16,l=g)),_e(t,Wt,g=>i(17,o=g)),_e(t,x,g=>i(18,r=g));let{frame:u}=e,{rootFrame:d}=e,{indent:f=0}=e,m;const p=u.time/d.time;let v;const _=`${u.filePathShort}:${(S=u.lineNo)==null?void 0:S.toString().padEnd(4," ")}`;let b,y=null;if(u.group){const g=u.group.libraries;g.length<4?y=g.join(", "):y=`${g[0]}, ${g[1]}, ${g[2]}...`}let k;k=Gt(p);function P(g){F(u,!s,g.altKey)}function F(g,C,D=!0){if(Ut.update(Q=>({...Q,[g.uuid]:C})),D)for(const Q of g.children)F(Q,C,!0),g.group&&g.group.rootFrame==g&&V(g.group.id,!C)}function V(g,C){Wt.update(D=>({...D,[g]:C}))}function U(){u.group&&V(u.group.id,!n)}function M(g){let C=!0;g.key==="Enter"||g.key===" "?P(g):g.key==="ArrowLeft"&&!s?F(u,!0,g.altKey):g.key==="ArrowRight"&&s?F(u,!1,g.altKey):g.key==="ArrowUp"?xt():g.key==="ArrowDown"?Yt():C=!1,C&&(g.preventDefault(),g.stopPropagation())}function T(g){let C=!0;g.key==="Enter"||g.key===" "?U():g.key==="ArrowLeft"&&u.group?V(u.group.id,!1):g.key==="ArrowRight"&&u.group?V(u.group.id,!0):g.key==="ArrowUp"?xt():g.key==="ArrowDown"?Yt():C=!1,C&&(g.preventDefault(),g.stopPropagation())}return t.$$set=g=>{"frame"in g&&i(0,u=g.frame),"rootFrame"in g&&i(1,d=g.rootFrame),"indent"in g&&i(2,f=g.indent)},t.$$.update=()=>{var g,C;if(t.$$.dirty&131073&&(u.group?o[u.group.id??""]||((g=u.group)==null?void 0:g.rootFrame)===u||u.children.filter(D=>!D.group).length>1?i(3,m=!0):i(3,m=!1):i(3,m=!0)),t.$$.dirty&1&&(u.className?i(4,v=`${u.className}.${u.function}`):i(4,v=u.function)),t.$$.dirty&262145)if(r.timeFormat==="absolute")i(5,b=u.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(r.timeFormat==="proportion")i(5,b=`${(p*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");t.$$.dirty&131073&&i(9,n=o[((C=u.group)==null?void 0:C.id)??""]===!0),t.$$.dirty&65537&&i(8,s=l[u.uuid]===!0)},[u,d,f,m,v,b,y,k,s,n,p,_,P,U,M,T,l,o,r]}let Jt=class extends he{constructor(e){super(),fe(this,e,vn,pn,le,{frame:0,rootFrame:1,indent:2})}};function ei(t,e,i){let n=t;for(const s of e)if(n=s(n,i),!n)return null;return n}for(var X=[],Et=0;Et<256;++Et)X.push((Et+256).toString(16).slice(1));function gn(t,e=0){return(X[t[e+0]]+X[t[e+1]]+X[t[e+2]]+X[t[e+3]]+"-"+X[t[e+4]]+X[t[e+5]]+"-"+X[t[e+6]]+X[t[e+7]]+"-"+X[t[e+8]]+X[t[e+9]]+"-"+X[t[e+10]]+X[t[e+11]]+X[t[e+12]]+X[t[e+13]]+X[t[e+14]]+X[t[e+15]]).toLowerCase()}var ot,_n=new Uint8Array(16);function bn(){if(!ot&&(ot=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ot))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ot(_n)}var wn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ti={randomUUID:wn};function yn(t,e,i){if(ti.randomUUID&&!e&&!t)return ti.randomUUID();t=t||{};var n=t.random||(t.rng||bn)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,gn(n)}const An="\0",Tn="[await]",qe="[self]",Cn=[Tn,qe,"[out-of-context]","[root]"],kn="c",En="h";class Ye{constructor(e,i){A(this,"uuid",yn());A(this,"identifier");A(this,"_identifierParts");A(this,"startTime");A(this,"time",0);A(this,"absorbedTime",0);A(this,"group",null);A(this,"attributes");A(this,"_children",[]);A(this,"parent",null);A(this,"context");var l;this.identifier=e.identifier,this._identifierParts=this.identifier.split(An),this.startTime=e.startTime??0,this.time=e.time??0,this.attributes=e.attributes??{},this.context=i;let n=this.startTime;const s=(l=e.children)==null?void 0:l.map(o=>(o.startTime===void 0&&(o={...o,startTime:n},n+=o.time??0),n=o.startTime+(o.time??0),new Ye(o,i)));s&&this.addChildren(s)}cloneDeep(){return new Ye(this,this.context)}get children(){return this._children}addChild(e,i={}){if(e.removeFromParent(),e.parent=this,i.after){const n=this._children.indexOf(i.after);if(n==-1)throw new Error("After frame not found");this._children.splice(n+1,0,e)}else this._children.push(e)}addChildren(e,i={}){e=e.slice(),i.after?(e.slice().reverse(),e.forEach(s=>this.addChild(s,i))):e.forEach(n=>this.addChild(n,i))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(n=>n.startsWith(e)).map(n=>({data:n.slice(1),time:this.attributes[n]}))}getAttributeValue(e){const i=this.getAttributes(e);if(!i||i.length==0)return null;let n=0;for(let s=0;s<i.length;s++)i[s].time>i[n].time&&(n=s);return i[n].data}get hasTracebackHide(){return this.getAttributeValue(En)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return Cn.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||["/lib/","\\lib\\"].some(n=>e.includes(n))?!1:e.startsWith("<")?!!e.startsWith("<ipython-input-"):!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue(kn)??""}get library(){const e=this.filePathShort;return e?/^[^\\/.]*/.exec(e)[0]:null}}class Mn{constructor(e){A(this,"id");A(this,"rootFrame");A(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const i=this._frames.indexOf(e);if(i===-1)throw new Error("Frame not found in group.");this._frames.splice(i,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const i of this.frames){let n=!1;for(const s of i.children)if(s.group!=this){n=!0;break}n&&e.push(i)}return e}get libraries(){const e=[];for(const i of this.frames){const n=i.library;n&&(e.includes(n)||e.push(n))}return e}}function lt(t,e){const{replaceWith:i}=e,n=t.parent;if(!n)throw new Error("Cannot delete the root frame");if(i=="children")n.addChildren(t.children,{after:t});else if(i=="self_time")n.addChild(new Ye({identifier:qe,time:t.time},n.context),{after:t});else if(i=="nothing")n.absorbedTime+=t.time;else throw new xi(i);t.removeFromParent(),Mt(t,!0)}function Fn(t,e){if(t.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=t.absorbedTime,e.time+=t.time,Object.entries(t.attributes).forEach(([i,n])=>{e.attributes[i]!==void 0?e.attributes[i]+=n:e.attributes[i]=n}),e.addChildren(t.children),t.removeFromParent(),Mt(t,!1)}function Mt(t,e){if(e&&t.children&&t.children.forEach(i=>{Mt(i,!0)}),t.group){const i=t.group;i.removeFrame(t),i.frames.length===1&&i.removeFrame(i.frames[0])}}function Ft(t,e){if(!t)return null;for(const i of t.children)Ft(i),i.filePath&&i.filePath.includes("<frozen importlib._bootstrap")&&lt(i,{replaceWith:"children"});return t}function Pt(t,e){if(!t)return null;for(const i of t.children)Pt(i),i.hasTracebackHide&&lt(i,{replaceWith:"children"});return t}function ii(t,e){if(!t)return null;const i={};for(const n of t.children.slice())if(i[n.identifier]){const s=i[n.identifier];Fn(n,s)}else i[n.identifier]=n;return t.children.forEach(n=>ii(n)),t._children.sort((n,s)=>s.time-n.time),t}function ni(t,e){if(!t)return null;const i=e.hideRegex,n=e.showRegex;function s(o){const r=o.filePath||"",u=n&&new RegExp(n).test(r),d=i&&new RegExp(i).test(r);return u?!1:d?!0:!o.isApplicationCode}function l(o,r){r.addFrame(o),o.children.forEach(u=>{s(u)&&l(u,r)})}return t.children.forEach(o=>{if(!o.group&&s(o)&&o.children.some(s)){const r=new Mn(o);l(o,r)}ni(o,e)}),t}function si(t,e,i=!0){if(!t)return null;let n=null;for(const s of t.children)s.identifier===qe?n?(n.time+=s.time,s.removeFromParent()):n=s:n=null;return i&&t.children.forEach(s=>si(s,e,!0)),t}function ri(t,e){return t?(t.children.length===1&&t.children[0].identifier===qe&&lt(t.children[0],{replaceWith:"nothing"}),t.children.forEach(i=>ri(i)),t):null}function oi(t,e,i=null){if(!t)return null;i===null&&(i=t.time,i<=0&&(i=1e-44));const n=e.filterThreshold??.01;for(const s of t.children.slice())s.time/i<n&&lt(s,{replaceWith:"nothing"});return t.children.forEach(s=>oi(s,e,i)),t}function li(t,e){if(!t)return null;const i=o=>{var r;return((r=o.filePath)==null?void 0:r.includes("pyinstrument/__main__.py"))&&o.children.length>0},n=o=>{var r;return o.proportionOfParent>.8&&((r=o.filePath)==null?void 0:r.includes("<string>"))&&o.children.length>0},s=o=>{var r;return o.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(o.filePath??"")||((r=o.filePath)==null?void 0:r.includes("<frozen runpy>")))&&o.children.length>0};let l=t;if(!i(l)||(l=l.children[0],!n(l))||(l=l.children[0],!s(l)))return t;for(;s(l);)l=l.children[0];return l.removeFromParent(),l}function Pn(t){let e,i,n;return i=new Jt({props:{frame:t[2],rootFrame:t[2]}}),{c(){e=h("div"),be(i.$$.fragment),a(e,"class","call-stack-margins svelte-1m7g2ko")},m(s,l){H(s,e,l),ue(i,e,null),n=!0},p(s,l){const o={};l&4&&(o.frame=s[2]),l&4&&(o.rootFrame=s[2]),i.$set(o)},i(s){n||(L(i.$$.fragment,s),n=!0)},o(s){B(i.$$.fragment,s),n=!1},d(s){s&&R(e),de(i)}}}function In(t){let e;return{c(){e=h("div"),e.innerHTML='<div class="error">All frames were filtered out.</div>',a(e,"class","margins")},m(i,n){H(i,e,n)},p:E,i:E,o:E,d(i){i&&R(e)}}}function Rn(t){let e,i,n,s,l;const o=[In,Pn],r=[];function u(d,f){return d[2]?1:0}return n=u(t),s=r[n]=o[n](t),{c(){e=h("div"),i=h("div"),s.c(),a(i,"class","scroll-inner svelte-1m7g2ko"),a(e,"class","call-stack-view svelte-1m7g2ko")},m(d,f){H(d,e,f),c(e,i),r[n].m(i,null),t[6](i),t[7](e),l=!0},p(d,[f]){let m=n;n=u(d),n===m?r[n].p(d,f):($e(),B(r[m],1,1,()=>{r[m]=null}),De(),s=r[n],s?s.p(d,f):(s=r[n]=o[n](d),s.c()),L(s,1),s.m(i,null))},i(d){l||(L(s),l=!0)},o(d){B(s),l=!1},d(d){d&&R(e),r[n].d(),t[6](null),t[7](null)}}}function Sn(t,e,i){let n,{session:s}=e;const l=Nt([x],([m])=>{const p=[m.removeImportlib?Ft:null,m.removeTracebackHide?Pt:null,si,ii,ri,m.removeIrrelevant?oi:null,m.removePyinstrument?li:null,m.collapseMode!=="disabled"?ni:null].filter(_=>_!==null),v={filterThreshold:m.removeIrrelevantThreshold,hideRegex:m.collapseMode=="custom"?m.collapseCustomHide:void 0,showRegex:m.collapseMode=="custom"?m.collapseCustomShow:void 0};return{processors:p,options:v}});_e(t,l,m=>i(5,n=m));let o,r;Vt(()=>{const m=o;if(!m)throw new Error("element not set");let p;return m.addEventListener("scroll",p=()=>{i(1,r.style.minHeight=`${m.scrollTop+m.clientHeight}px`,r)}),p(),()=>{m.removeEventListener("scroll",p)}});let u;function d(m){He[m?"unshift":"push"](()=>{r=m,i(1,r)})}function f(m){He[m?"unshift":"push"](()=>{o=m,i(0,o)})}return t.$$set=m=>{"session"in m&&i(4,s=m.session)},t.$$.update=()=>{t.$$.dirty&48&&i(2,u=ei(s.rootFrame.cloneDeep(),n.processors,n.options))},[o,r,u,l,s,n,d,f]}class Hn extends he{constructor(e){super(),fe(this,e,Sn,Rn,le,{session:4})}}class Ln{constructor(e){A(this,"mediaQueryList",null);this.onDevicePixelRatioChanged=e,this._onChange=this._onChange.bind(this),this.createMediaQueryList()}createMediaQueryList(){this.removeMediaQueryList();let e=`(resolution: ${window.devicePixelRatio}dppx)`;this.mediaQueryList=matchMedia(e),this.mediaQueryList.addEventListener("change",this._onChange)}removeMediaQueryList(){var e;(e=this.mediaQueryList)==null||e.removeEventListener("change",this._onChange),this.mediaQueryList=null}_onChange(e){this.onDevicePixelRatioChanged(),this.createMediaQueryList()}destroy(){this.removeMediaQueryList()}}class Vn{constructor(e){A(this,"canvas");A(this,"_size_observer");A(this,"_devicePixelRatioObserver");A(this,"drawAnimationRequest",null);this.container=e,getComputedStyle(e).position!="absolute"&&(e.style.position="relative"),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.container.appendChild(this.canvas),this.setCanvasSize=this.setCanvasSize.bind(this),this._size_observer=new ResizeObserver(this.setCanvasSize),this._size_observer.observe(e),this._devicePixelRatioObserver=new Ln(this.setCanvasSize),window.requestAnimationFrame(()=>{this.setCanvasSize()})}destroy(){this._size_observer.disconnect(),this._devicePixelRatioObserver.destroy(),this.canvas.remove(),this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null)}setNeedsRedraw(){this.drawAnimationRequest===null&&(this.drawAnimationRequest=window.requestAnimationFrame(()=>{this.drawAnimationRequest=null,this.canvasViewRedraw()}))}redrawIfNeeded(){this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null,this.canvasViewRedraw())}canvasViewRedraw(){const e=this.canvas.getContext("2d");e&&(e.resetTransform(),e.scale(window.devicePixelRatio,window.devicePixelRatio),this.redraw(e,{width:this.canvas.width/window.devicePixelRatio,height:this.canvas.height/window.devicePixelRatio}))}get width(){return this.canvas.width/window.devicePixelRatio}get height(){return this.canvas.height/window.devicePixelRatio}setCanvasSize(){const e=window.devicePixelRatio;this.canvas.height=this.container.clientHeight*e,this.canvas.width=this.container.clientWidth*e,this.canvasViewRedraw()}}function $n(t){let e,i=t[2]=="self"?"self":"time",n,s,l,o=t[3](t[0].time)+"";return{c(){e=h("div"),n=I(i),s=w(),l=h("div"),a(e,"class","label svelte-ci3g2p"),a(l,"class","time-val svelte-ci3g2p")},m(r,u){H(r,e,u),c(e,n),H(r,s,u),H(r,l,u),l.innerHTML=o},p(r,u){u&4&&i!==(i=r[2]=="self"?"self":"time")&&Ae(n,i),u&1&&o!==(o=r[3](r[0].time)+"")&&(l.innerHTML=o)},d(r){r&&(R(e),R(s),R(l))}}}function Dn(t){let e,i,n,s,l=t[3](t[0].time)+"",o,r=t[0].selfTime/t[0].time>.001&&ai(t);return{c(){e=h("div"),e.textContent="time",i=w(),n=h("div"),s=h("div"),o=w(),r&&r.c(),a(e,"class","label svelte-ci3g2p"),a(s,"class","time-val svelte-ci3g2p"),a(n,"class","time-row svelte-ci3g2p")},m(u,d){H(u,e,d),H(u,i,d),H(u,n,d),c(n,s),s.innerHTML=l,c(n,o),r&&r.m(n,null)},p(u,d){d&1&&l!==(l=u[3](u[0].time)+"")&&(s.innerHTML=l),u[0].selfTime/u[0].time>.001?r?r.p(u,d):(r=ai(u),r.c(),r.m(n,null)):r&&(r.d(1),r=null)},d(u){u&&(R(e),R(i),R(n)),r&&r.d()}}}function ai(t){let e,i,n,s=t[3](t[0].selfTime)+"";return{c(){e=h("div"),e.textContent="self",i=w(),n=h("div"),a(e,"class","label svelte-ci3g2p"),a(n,"class","time-val svelte-ci3g2p")},m(l,o){H(l,e,o),H(l,i,o),H(l,n,o),n.innerHTML=s},p(l,o){o&1&&s!==(s=l[3](l[0].selfTime)+"")&&(n.innerHTML=s)},d(l){l&&(R(e),R(i),R(n))}}}function On(t){let e,i,n=t[0].name+"",s,l,o,r,u,d,f,m,p,v;function _(k,P){return k[2]=="both"?Dn:$n}let b=_(t),y=b(t);return{c(){e=h("div"),i=h("div"),s=I(n),l=w(),y.c(),o=w(),r=h("div"),r.textContent="loc",u=w(),d=h("div"),f=h("div"),p=w(),v=new Ii(!1),a(i,"class","name svelte-ci3g2p"),a(r,"class","label svelte-ci3g2p"),a(f,"class","location-color svelte-ci3g2p"),a(f,"style",m=`background: ${t[0].locationColor}`),v.a=null,a(d,"class","location-row"),a(e,"class","timeline-canvas-view-tooltip svelte-ci3g2p"),a(e,"style",`font: ${ui}; max-width: ${Bn}px;`)},m(k,P){H(k,e,P),c(e,i),c(i,s),c(e,l),y.m(e,null),c(e,o),c(e,r),c(e,u),c(e,d),c(d,f),c(d,p),v.m(t[1],d)},p(k,[P]){P&1&&n!==(n=k[0].name+"")&&Ae(s,n),b===(b=_(k))&&y?y.p(k,P):(y.d(1),y=b(k),y&&(y.c(),y.m(e,o))),P&1&&m!==(m=`background: ${k[0].locationColor}`)&&a(f,"style",m),P&2&&v.p(k[1])},i:E,o:E,d(k){k&&R(e),y.d()}}}function ci(t){return t.selfTime==t.time?"self":t.selfTime/t.time>.001?"both":"time"}function Nn(t,e){t.font=ui;const i=ci(e)=="both"?140:70,n=t.measureText(e.name).width,s=t.measureText(e.location).width+46;let o=Math.max(i,n,s)+20;return o>310&&(o=310),o}const Bn=310,ui="400 13px Source Sans Pro, sans-serif";function zn(t,e,i){let{f:n}=e,s,l;function o(r){return`<span style="color: ${Gt(r/n.totalTime)}">${r.toFixed(3)}</span>`}return t.$$set=r=>{"f"in r&&i(0,n=r.f)},t.$$.update=()=>{t.$$.dirty&1&&i(1,s=kt(n.location)),t.$$.dirty&1&&i(2,l=ci(n))},[n,s,l,o]}class Wn extends he{constructor(e){super(),fe(this,e,zn,On,le,{f:0})}}const Un="#212325",Gn=18,Kn=17,xe=28,at=17,Xn=29,Qn=["#47A298","#9FC175","#C1A731","#C07210","#B84210","#B53134","#9A3586","#4958B5","#3475BA","#318DBC","#47A298"].map(nn);class Zn extends Vn{constructor(i){super(i);A(this,"zoom",1);A(this,"startT",0);A(this,"frames",[]);A(this,"isZoomedIn",!1);A(this,"tooltipContainer");A(this,"tooltipComponent",null);A(this,"_rootFrame",null);A(this,"_frameMaxT");A(this,"lastDrawWidth",0);A(this,"lastDrawHeight",0);A(this,"mouseLocation",null);A(this,"_libraryOrder",null);A(this,"_colors",[]);this.onWheel=this.onWheel.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.canvas.addEventListener("wheel",this.onWheel),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseleave",this.onMouseLeave),this.tooltipContainer=document.createElement("div"),this.tooltipContainer.style.position="absolute",this.tooltipContainer.style.pointerEvents="none",this.container.appendChild(this.tooltipContainer)}destroy(){super.destroy(),this.canvas.removeEventListener("wheel",this.onWheel)}setRootFrame(i){this.frames=[],this._frameMaxT=void 0,this._collectFrames(i,0),this.fitContents(),this.setNeedsRedraw()}_collectFrames(i,n){this.frames.push({frame:i,depth:n,isApplicationCode:i.isApplicationCode,library:i.library,className:i.className,filePathShort:i.filePathShort});for(const s of i.children)s.identifier!==qe&&this._collectFrames(s,n+1)}get frameMaxT(){return this._frameMaxT===void 0&&(this._frameMaxT=this.frames.reduce((i,n)=>Math.max(i,n.frame.startTime+n.frame.time),0)),this._frameMaxT}get minZoom(){return(this.width-2*xe)/this.frameMaxT}get maxZoom(){return 6666666666666667e-8}fitContents(){this.startT=0,this.zoom=this.minZoom,this.isZoomedIn=!1}clampViewport(){this.zoom<this.minZoom?(this.zoom=this.minZoom,this.isZoomedIn=!1):this.isZoomedIn=!0,this.zoom>this.maxZoom&&(this.zoom=this.maxZoom),this.startT<0&&(this.startT=0);const i=this.frameMaxT-(this.width-2*xe)/this.zoom;this.startT>i&&(this.startT=i)}redraw(i,n){var r,u;const{width:s,height:l}=n;(s!==this.lastDrawWidth||l!==this.lastDrawHeight)&&(this.isZoomedIn?this.clampViewport():this.fitContents()),this.lastDrawWidth=s,this.lastDrawHeight=l,i.fillStyle=Un,i.fillRect(0,0,s,l),this.drawAxes(i);for(const d of this.frames)this.drawFrame(i,d);i.globalAlpha=1,i.fillStyle="red",i.font='23px "Source Sans Pro", sans-serif';const o=this.hitTest(((r=this.mouseLocation)==null?void 0:r.x)??0,((u=this.mouseLocation)==null?void 0:u.y)??0);this.updateTooltip(i,o)}drawAxes(i){const n=this.width/this.zoom;if(n==0)return;const s=Math.log10(n);let l=Math.ceil(s)+2;l<0&&(l=0);const o=Math.ceil(s)-3,r=u=>Ne(u,{from:[s,s-3],to:[.71,0]});for(let u=o;u<l;u++){let d=r(u);d=Math.max(0,Math.min(1,d)),d=Math.pow(d,2),this.drawAxis(i,Math.pow(10,u),d)}this.drawAxis(i,Math.pow(10,l),r(l),!0)}drawAxis(i,n,s,l=!1){i.fillStyle="white";const o=Math.floor(this.startT/n)*n,r=this.startT+this.width/this.zoom,u=Math.max(0,Math.ceil(-Math.log10(n)));for(let d=o;d<r;d+=n){const f=this.xForT(d);if(Math.round(d/n)%10===0&&!l)continue;i.globalAlpha=s,i.fillRect(f,at,1,this.height-at);const p=Ne(s,{from:[.12,.25],to:[0,.5],clamp:!0});if(p>.01){i.globalAlpha=p,i.font='13px "Source Sans Pro", sans-serif';let v=d.toFixed(u);v=="0"&&(v="0s"),i.fillText(v,f+3,at+10)}i.globalAlpha=1}}drawFrame(i,n){const{x:s,y:l,w:o,h:r}=this.frameDims(n);if(!(s+o<0||s>this.width)){if(i.fillStyle=this.colorForFrame(n),i.globalAlpha=n.isApplicationCode?1:.5,o<2){i.fillRect(s,l,o,r);return}if(i.save(),i.beginPath(),i.rect(s,l,o,r),i.fill(),i.clip(),o>2){i.font='13px "Source Sans Pro", sans-serif',i.fillStyle="white";let d=this.frameName(n),f=s;f<0&&(f=0);const m=Math.floor(o/3.3);d.length>m&&(d=d.substring(0,m)),i.fillText(d,f+2,l+13)}i.restore()}}frameDims(i){const n=i.depth*Gn+at+Xn,s=Kn;let l=this.xForT(i.frame.startTime),r=this.xForT(i.frame.startTime+i.frame.time)-l;return r<1&&(r=1),r>1&&(r-=Ne(r,{from:[1,3],to:[0,1],clamp:!0})),{x:l,y:n,w:r,h:s}}xForT(i){return(i-this.startT)*this.zoom+xe}tForX(i){return(i-xe)/this.zoom+this.startT}frameName(i){let n;return i.className?n=`${i.className}.${i.frame.function}`:i.frame.function=="<module>"?n=i.filePathShort??i.frame.filePath??"":n=i.frame.function,n}frameSelfTime(i){let n=i.frame.time;const s=i.frame.children.filter(l=>!l.isSynthetic);for(const l of s)n-=l.time;return n}hitTest(i,n){for(const s of this.frames){const{x:l,y:o,w:r,h:u}=this.frameDims(s);if(i>=l&&i<=l+r&&n>=o&&n<=o+u)return s}return null}onWheel(i){const n=i.ctrlKey||i.metaKey,s=n?.01:.0023,l=this.tForX(i.offsetX);this.zoom*=1-i.deltaY*s,this.clampViewport(),this.startT=l-(i.offsetX-xe)/this.zoom,n||(this.startT+=i.deltaX/this.zoom),this.clampViewport(),this.setNeedsRedraw(),i.preventDefault()}onMouseMove(i){this.mouseLocation={x:i.offsetX,y:i.offsetY},this.setNeedsRedraw()}onMouseLeave(i){this.mouseLocation=null,this.setNeedsRedraw()}_assignLibraryOrder(){const i={};for(const s of this.frames){const o=s.frame.library??"";i[o]=(i[o]||0)+1}const n=Object.keys(i);n.sort((s,l)=>i[l]-i[s]),this._libraryOrder=n}colorForLibraryIndex(i){if(this._colors[i]!==void 0)return this._colors[i];const n=Math.pow(2,Math.ceil(Math.log2(i+1))),l=(2*i-n+1)/n,o=Ji(Qn,l);return this._colors[i]=o,o}libraryIndexForFrame(i){this._libraryOrder||this._assignLibraryOrder();const n=i.library||"";let s=this._libraryOrder.indexOf(n);return s===-1&&(s=this._libraryOrder.length,this._libraryOrder.push(n)),s}colorForFrame(i){const n=this.libraryIndexForFrame(i);return this.colorForLibraryIndex(n)}updateTooltip(i,n){var s;if(n){const l={name:this.frameName(n),time:n.frame.time,selfTime:this.frameSelfTime(n),totalTime:((s=this._rootFrame)==null?void 0:s.time)??1e-12,location:`${n.filePathShort}:${n.frame.lineNo}`,locationColor:this.colorForFrame(n)};if(this.tooltipComponent?this.tooltipComponent.$set({f:l}):this.tooltipComponent=new Wn({target:this.tooltipContainer,props:{f:l}}),this.mouseLocation){const o={x:this.mouseLocation.x+12,y:this.mouseLocation.y+12},r=Nn(i,l),u=this.width-10-r;o.x>u&&(o.x=u),this.tooltipContainer.style.left=`${o.x}px`,this.tooltipContainer.style.top=`${o.y}px`}}n||this.tooltipComponent&&(this.tooltipComponent.$destroy(),this.tooltipComponent=null)}}function jn(t){let e;return{c(){e=h("div"),e.innerHTML="",a(e,"class","timeline svelte-1ekyre4")},m(i,n){H(i,e,n),t[6](e)},p:E,i:E,o:E,d(i){i&&R(e),t[6](null)}}}function qn(t,e,i){let n,{session:s}=e;const l=Nt([je],([f])=>({processors:[f.removeImportlib?Ft:null,f.removeTracebackHide?Pt:null,f.removePyinstrument?li:null].filter(v=>v!==null),options:{}}));_e(t,l,f=>i(5,n=f));let o,r=null,u=null;function d(f){He[f?"unshift":"push"](()=>{r=f,i(0,r)})}return t.$$set=f=>{"session"in f&&i(2,s=f.session)},t.$$.update=()=>{t.$$.dirty&36&&i(3,o=ei(s.rootFrame.cloneDeep(),n.processors,n.options)),t.$$.dirty&1&&r&&i(4,u=new Zn(r)),t.$$.dirty&24&&o&&u&&u.setRootFrame(o)},[r,l,s,o,u,n,d]}class Yn extends he{constructor(e){super(),fe(this,e,qn,jn,le,{session:2})}}function xn(t){let e,i,n=t[1].viewMode+"",s;return{c(){e=h("div"),i=I("Unknown view mode: "),s=I(n),a(e,"class","error")},m(l,o){H(l,e,o),c(e,i),c(e,s)},p(l,o){o&2&&n!==(n=l[1].viewMode+"")&&Ae(s,n)},i:E,o:E,d(l){l&&R(e)}}}function Jn(t){let e,i;return e=new Yn({props:{session:t[0]}}),{c(){be(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},p(n,s){const l={};s&1&&(l.session=n[0]),e.$set(l)},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){de(e,n)}}}function es(t){let e,i;return e=new Hn({props:{session:t[0]}}),{c(){be(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},p(n,s){const l={};s&1&&(l.session=n[0]),e.$set(l)},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){de(e,n)}}}function ts(t){let e;return{c(){e=h("div"),e.innerHTML='<div class="spacer" style="height: 20px;"></div> <div class="error">No samples recorded.</div>',a(e,"class","margins")},m(i,n){H(i,e,n)},p:E,i:E,o:E,d(i){i&&R(e)}}}function is(t){let e,i,n,s,l,o,r,u;n=new hn({props:{session:t[0]}});const d=[ts,es,Jn,xn],f=[];function m(p,v){return p[0].rootFrame?p[1].viewMode==="call-stack"?1:p[1].viewMode==="timeline"?2:3:0}return o=m(t),r=f[o]=d[o](t),{c(){e=h("div"),i=h("div"),be(n.$$.fragment),s=w(),l=h("div"),r.c(),a(i,"class","header"),a(l,"class","body svelte-15bv5h8"),a(e,"class","app svelte-15bv5h8")},m(p,v){H(p,e,v),c(e,i),ue(n,i,null),c(e,s),c(e,l),f[o].m(l,null),u=!0},p(p,[v]){const _={};v&1&&(_.session=p[0]),n.$set(_);let b=o;o=m(p),o===b?f[o].p(p,v):($e(),B(f[b],1,1,()=>{f[b]=null}),De(),r=f[o],r?r.p(p,v):(r=f[o]=d[o](p),r.c()),L(r,1),r.m(l,null))},i(p){u||(L(n.$$.fragment,p),L(r),u=!0)},o(p){B(n.$$.fragment,p),B(r),u=!1},d(p){p&&R(e),de(n),f[o].d()}}}function ns(t,e,i){let n;_e(t,Ze,m=>i(1,n=m));let{session:s}=e;const l=document.createElement("link");l.rel="shortcut icon",l.href=mn,document.head.appendChild(l);const o=document.createElement("link");o.rel="preload",o.as="style",o.onload=()=>{o.rel="stylesheet"},o.href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600|Source+Sans+Pro:400,600&display=swap",document.head.appendChild(o);const r=s.rootFrame,u=r==null?void 0:r.time.toLocaleString(void 0,{maximumSignificantDigits:3});let d,f;return(f=/[^\s/]+(:\d+)?$/.exec(s.target_description))?d=f[0]:d=s.target_description,document.title=`${u}s - ${d} - pyinstrument`,t.$$set=m=>{"session"in m&&i(0,s=m.session)},[s,n]}class ss extends he{constructor(e){super(),fe(this,e,ns,is,le,{session:0})}}class rs{constructor(e){A(this,"startTime");A(this,"duration");A(this,"sampleCount");A(this,"target_description");A(this,"cpuTime");A(this,"rootFrame");A(this,"sysPath");A(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.target_description=e.session.target_description,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.rootFrame=new Ye(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let i=e;if(Be(e).length>1)for(const s of this.sysPath){const l=os(e,s);Be(l).length<Be(i).length&&(i=l)}return this._shortenPathCache[e]=i,i}}function Be(t){return t.split(/[/\\]/)}function di(t){const e=Be(t);return e.length>0&&e[0].endsWith(":")?e[0]:null}function os(t,e){if(di(t)!=di(e))return t;const i=Be(t),n=Be(e);let s=0;for(;s<i.length&&s<n.length&&i[s]==n[s];)s++;return n.slice(s).map(o=>"..").concat(i.slice(s)).join("/")}return{render(t,e){const i=new rs(e);return new ss({target:t,props:{session:i}})}}}();
