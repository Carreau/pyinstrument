var pyinstrumentHTMLRenderer=function(){"use strict";var Yn=Object.defineProperty;var qn=(F,pe,Ee)=>pe in F?Yn(F,pe,{enumerable:!0,configurable:!0,writable:!0,value:Ee}):F[pe]=Ee;var T=(F,pe,Ee)=>qn(F,typeof pe!="symbol"?pe+"":pe,Ee);function F(){}function pe(i){return i()}function Ee(){return Object.create(null)}function ve(i){i.forEach(pe)}function mt(i){return typeof i=="function"}function re(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function gi(i){return Object.keys(i).length===0}function It(i,...e){if(i==null){for(const n of e)n(void 0);return F}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function _e(i,e,t){i.$$.on_destroy.push(It(e,t))}function bi(i,e,t){return i.set(t),e}function c(i,e){i.appendChild(e)}function H(i,e,t){i.insertBefore(e,t||null)}function S(i){i.parentNode&&i.parentNode.removeChild(i)}function m(i){return document.createElement(i)}function D(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function R(i){return document.createTextNode(i)}function w(){return R(" ")}function wi(){return R("")}function z(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function pt(i){return function(e){return e.preventDefault(),i.call(this,e)}}function vt(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function a(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function _t(i){let e;return{p(...t){e=t,e.forEach(n=>i.push(n))},r(){e.forEach(t=>i.splice(i.indexOf(t),1))}}}function yi(i){return Array.from(i.childNodes)}function ye(i,e){e=""+e,i.data!==e&&(i.data=e)}function oe(i,e){i.value=e??""}function Y(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,"")}function Ce(i,e,t){i.classList.toggle(e,!!t)}function Ti(i,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(i,{detail:e,bubbles:t,cancelable:n})}class Ai{constructor(e=!1){T(this,"is_svg",!1);T(this,"e");T(this,"n");T(this,"t");T(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=D(t.nodeName):this.e=m(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)H(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(S)}}let Xe;function Qe(i){Xe=i}function Rt(){if(!Xe)throw new Error("Function called outside component initialization");return Xe}function St(i){Rt().$$.on_mount.push(i)}function Ci(){const i=Rt();return(e,t,{cancelable:n=!1}={})=>{const s=i.$$.callbacks[e];if(s){const r=Ti(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(i,r)}),!r.defaultPrevented}return!0}}const Re=[],Se=[];let He=[];const Ht=[],Mi=Promise.resolve();let gt=!1;function Fi(){gt||(gt=!0,Mi.then(Lt))}function bt(i){He.push(i)}const wt=new Set;let Le=0;function Lt(){if(Le!==0)return;const i=Xe;do{try{for(;Le<Re.length;){const e=Re[Le];Le++,Qe(e),ki(e.$$)}}catch(e){throw Re.length=0,Le=0,e}for(Qe(null),Re.length=0,Le=0;Se.length;)Se.pop()();for(let e=0;e<He.length;e+=1){const t=He[e];wt.has(t)||(wt.add(t),t())}He.length=0}while(Re.length);for(;Ht.length;)Ht.pop()();gt=!1,wt.clear(),Qe(i)}function ki(i){if(i.fragment!==null){i.update(),ve(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(bt)}}function Ei(i){const e=[],t=[];He.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),He=e}const nt=new Set;let Pe;function $e(){Pe={r:0,c:[],p:Pe}}function Ve(){Pe.r||ve(Pe.c),Pe=Pe.p}function L(i,e){i&&i.i&&(nt.delete(i),i.i(e))}function O(i,e,t,n){if(i&&i.o){if(nt.has(i))return;nt.add(i),Pe.c.push(()=>{nt.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function $t(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Pi(i,e){O(i,1,1,()=>{e.delete(i.key)})}function Ii(i,e,t,n,s,r,o,l,u,f,d,h){let p=i.length,v=r.length,g=p;const b={};for(;g--;)b[i[g].key]=g;const y=[],C=new Map,E=new Map,P=[];for(g=v;g--;){const _=h(s,r,g),k=t(_);let A=o.get(k);A?P.push(()=>A.p(_,e)):(A=f(k,_),A.c()),C.set(k,y[g]=A),k in b&&E.set(k,Math.abs(g-b[k]))}const V=new Set,G=new Set;function M(_){L(_,1),_.m(l,d),o.set(_.key,_),d=_.first,v--}for(;p&&v;){const _=y[v-1],k=i[p-1],A=_.key,I=k.key;_===k?(d=_.first,p--,v--):C.has(I)?!o.has(A)||V.has(A)?M(_):G.has(I)?p--:E.get(A)>E.get(I)?(G.add(A),M(_)):(V.add(I),p--):(u(k,o),p--)}for(;p--;){const _=i[p];C.has(_.key)||u(_,o)}for(;v;)M(y[v-1]);return ve(P),y}function ge(i){i&&i.c()}function ae(i,e,t){const{fragment:n,after_update:s}=i.$$;n&&n.m(e,t),bt(()=>{const r=i.$$.on_mount.map(pe).filter(mt);i.$$.on_destroy?i.$$.on_destroy.push(...r):ve(r),i.$$.on_mount=[]}),s.forEach(bt)}function ce(i,e){const t=i.$$;t.fragment!==null&&(Ei(t.after_update),ve(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ri(i,e){i.$$.dirty[0]===-1&&(Re.push(i),Fi(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function ue(i,e,t,n,s,r,o=null,l=[-1]){const u=Xe;Qe(i);const f=i.$$={fragment:null,ctx:[],props:r,update:F,not_equal:s,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ee(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};o&&o(f.root);let d=!1;if(f.ctx=t?t(i,e.props||{},(h,p,...v)=>{const g=v.length?v[0]:p;return f.ctx&&s(f.ctx[h],f.ctx[h]=g)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](g),d&&Ri(i,h)),p}):[],f.update(),d=!0,ve(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const h=yi(e.target);f.fragment&&f.fragment.l(h),h.forEach(S)}else f.fragment&&f.fragment.c();e.intro&&L(i.$$.fragment),ae(i,e.target,e.anchor),Lt()}Qe(u)}class fe{constructor(){T(this,"$$");T(this,"$$set")}$destroy(){ce(this,1),this.$destroy=F}$on(e,t){if(!mt(t))return F;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!gi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Si="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Si);function Hi(i){let e,t;return{c(){e=D("svg"),t=D("path"),a(t,"fill-rule","evenodd"),a(t,"clip-rule","evenodd"),a(t,"d","M5.11634 0.889422C4.86506 -0.296474 3.17237 -0.296474 2.92109 0.889422C2.78291 1.54158 2.10994 1.93011 1.47607 1.72371C0.323418 1.34837 -0.522932 2.81429 0.378448 3.62484C0.87414 4.07059 0.87414 4.84767 0.378448 5.29341C-0.522931 6.10397 0.323418 7.56989 1.47607 7.19455C2.10994 6.98814 2.78291 7.37668 2.92109 8.02883C3.17237 9.21473 4.86506 9.21473 5.11634 8.02883C5.25452 7.37668 5.92749 6.98814 6.56136 7.19455C7.71401 7.56989 8.56036 6.10397 7.65898 5.29341C7.16329 4.84767 7.16329 4.07059 7.65898 3.62484C8.56036 2.81429 7.71401 1.34837 6.56136 1.72371C5.92749 1.93011 5.25452 1.54158 5.11634 0.889422ZM4.01883 6.33408C5.05436 6.33408 5.89383 5.49462 5.89383 4.45908C5.89383 3.42355 5.05436 2.58408 4.01883 2.58408C2.98329 2.58408 2.14383 3.42355 2.14383 4.45908C2.14383 5.49462 2.98329 6.33408 4.01883 6.33408Z"),a(t,"fill","currentColor"),a(e,"width","9"),a(e,"height","9"),a(e,"viewBox","0 0 9 9"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(n,s){H(n,e,s),c(e,t)},p:F,i:F,o:F,d(n){n&&S(e)}}}class Li extends fe{constructor(e){super(),ue(this,e,null,Hi,re,{})}}function $i(i){let e,t,n,s,r,o,l,u,f,d,h,p,v,g,b,y,C;return{c(){e=D("svg"),t=D("g"),n=D("path"),s=D("path"),r=D("defs"),o=D("filter"),l=D("feFlood"),u=D("feBlend"),f=D("feGaussianBlur"),d=D("linearGradient"),h=D("stop"),p=D("stop"),v=D("stop"),g=D("linearGradient"),b=D("stop"),y=D("stop"),C=D("stop"),a(n,"fill-rule","evenodd"),a(n,"clip-rule","evenodd"),a(n,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(n,"fill","url(#paint0_linear_67_262)"),a(t,"opacity","0.5"),a(t,"filter","url(#filter0_f_67_262)"),a(s,"fill-rule","evenodd"),a(s,"clip-rule","evenodd"),a(s,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(s,"fill","url(#paint1_linear_67_262)"),a(l,"flood-opacity","0"),a(l,"result","BackgroundImageFix"),a(u,"mode","normal"),a(u,"in","SourceGraphic"),a(u,"in2","BackgroundImageFix"),a(u,"result","shape"),a(f,"stdDeviation","3.39785"),a(f,"result","effect1_foregroundBlur_67_262"),a(o,"id","filter0_f_67_262"),a(o,"x","3.2043"),a(o,"y","2.2043"),a(o,"width","36.0914"),a(o,"height","41.0914"),a(o,"filterUnits","userSpaceOnUse"),a(o,"color-interpolation-filters","sRGB"),a(h,"stop-color","#FFAA00"),a(p,"offset","0.514478"),a(p,"stop-color","#FFEB00"),a(v,"offset","1"),a(v,"stop-color","#98FF05"),a(d,"id","paint0_linear_67_262"),a(d,"x1","7.3769"),a(d,"y1","18.4566"),a(d,"x2","20.6583"),a(d,"y2","33.1038"),a(d,"gradientUnits","userSpaceOnUse"),a(b,"stop-color","#FFC834"),a(y,"offset","0.514478"),a(y,"stop-color","#FAF534"),a(C,"offset","1"),a(C,"stop-color","#B8FF38"),a(g,"id","paint1_linear_67_262"),a(g,"x1","7.3769"),a(g,"y1","18.4566"),a(g,"x2","20.6583"),a(g,"y2","33.1038"),a(g,"gradientUnits","userSpaceOnUse"),a(e,"width","44"),a(e,"height","44"),a(e,"viewBox","0 0 44 44"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(E,P){H(E,e,P),c(e,t),c(t,n),c(e,s),c(e,r),c(r,o),c(o,l),c(o,u),c(o,f),c(r,d),c(d,h),c(d,p),c(d,v),c(r,g),c(g,b),c(g,y),c(g,C)},p:F,i:F,o:F,d(E){E&&S(e)}}}class Vi extends fe{constructor(e){super(),ue(this,e,null,$i,re,{})}}const De=[];function Di(i,e){return{subscribe:st(i,e).subscribe}}function st(i,e=F){let t;const n=new Set;function s(l){if(re(i,l)&&(i=l,t)){const u=!De.length;for(const f of n)f[1](),De.push(f,i);if(u){for(let f=0;f<De.length;f+=2)De[f][0](De[f+1]);De.length=0}}}function r(l){s(l(i))}function o(l,u=F){const f=[l,u];return n.add(f),n.size===1&&(t=e(s,r)||F),l(i),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:s,update:r,subscribe:o}}function Vt(i,e,t){const n=!Array.isArray(i),s=n?[i]:i;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return Di(t,(o,l)=>{let u=!1;const f=[];let d=0,h=F;const p=()=>{if(d)return;h();const g=e(n?f[0]:f,o,l);r?o(g):h=mt(g)?g:F},v=s.map((g,b)=>It(g,y=>{f[b]=y,d&=~(1<<b),u&&p()},()=>{d|=1<<b}));return u=!0,p(),function(){ve(v),h(),u=!1}})}var yt={local:{},session:{}};function Oi(i){return i==="local"?localStorage:sessionStorage}function Tt(i,e,t){var n,s,r,o,l,u,f,d;t!=null&&t.onError&&console.warn("onError has been deprecated. Please use onWriteError instead");const h=(n=t==null?void 0:t.serializer)!=null?n:JSON,p=(s=t==null?void 0:t.storage)!=null?s:"local",v=(r=t==null?void 0:t.syncTabs)!=null?r:!0,g=(l=(o=t==null?void 0:t.onWriteError)!=null?o:t==null?void 0:t.onError)!=null?l:M=>console.error(`Error when writing value from persisted store "${i}" to ${p}`,M),b=(u=t==null?void 0:t.onParseError)!=null?u:(M,_)=>console.error(`Error when parsing ${M?'"'+M+'"':"value"} from persisted store "${i}"`,_),y=(f=t==null?void 0:t.beforeRead)!=null?f:M=>M,C=(d=t==null?void 0:t.beforeWrite)!=null?d:M=>M,E=typeof window<"u"&&typeof document<"u",P=E?Oi(p):null;function V(M,_){const k=C(_);try{P==null||P.setItem(M,h.stringify(k))}catch(A){g(A)}}function G(){function M(I){try{return h.parse(I)}catch(X){b(I,X)}}const _=P==null?void 0:P.getItem(i);if(_==null)return e;const k=M(_);return k==null?e:y(k)}if(!yt[p][i]){const M=G(),_=st(M,I=>{if(E&&p=="local"&&v){const X=J=>{if(J.key===i&&J.newValue){let N;try{N=h.parse(J.newValue)}catch(ee){b(J.newValue,ee);return}const Ie=y(N);I(Ie)}};return window.addEventListener("storage",X),()=>window.removeEventListener("storage",X)}}),{subscribe:k,set:A}=_;yt[p][i]={set(I){A(I),V(i,I)},update(I){return _.update(X=>{const J=I(X);return V(i,J),J})},reset(){this.set(e)},subscribe:k}}return yt[p][i]}function Dt(){return{collapseMode:"non-application",collapseCustomHide:"",collapseCustomShow:"",removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:.001,timeFormat:"absolute"}}const q=Tt("pyinstrument:viewOptionsCallStack",Dt(),{syncTabs:!0,beforeRead(i){return{...Dt(),...i}}}),Ze=Tt("pyinstrument:viewOptions",{viewMode:"call-stack"},{syncTabs:!1}),je=Tt("pyinstrument:viewOptionsTimeline",{removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:1e-4},{syncTabs:!0});function Ni(i){let e,t,n,s,r,o,l,u,f,d,h,p,v,g,b,y,C,E,P,V,G,M,_,k,A,I,X,J,N,Ie,ee,x,Q,Me,W,xe,Je,le,U,et,te,de,he,be,me,Te,tt,Ae,K,Be,Fe,it,B,$,Z,ri,ot,li,oi,ze,ke,ai,We,at,ci,ui,we,fi,di,Ue,ct,hi,Ge,ut,ft,ie,mi,pi,dt,ht,ne,vi,kt,Et,Pt,_i;return kt=_t(i[5][0]),Et=_t(i[5][1]),{c(){e=m("div"),t=m("div"),n=m("div"),n.textContent="Collapse frames",s=w(),r=m("div"),o=m("div"),l=m("input"),u=w(),f=m("label"),d=R("Non-application code"),h=w(),p=m("div"),p.textContent=`Application code is anything run from outside the Python home
          directory.`,v=w(),g=m("div"),b=m("input"),y=w(),C=m("label"),E=R("Custom"),P=w(),V=m("div"),G=R(`Regex on the source file path.
          `),M=m("div"),_=m("label"),_.textContent="Show",k=w(),A=m("input"),I=w(),X=m("label"),X.textContent="Hide",J=w(),N=m("input"),Ie=R(`
          If neither match, non-application rule is used.`),ee=w(),x=m("div"),Q=m("input"),Me=w(),W=m("label"),xe=R("Disabled"),Je=w(),le=m("div"),U=m("div"),U.textContent="Remove frames",et=w(),te=m("div"),de=m("div"),he=m("input"),be=w(),me=m("label"),Te=R("importlib machinery"),tt=w(),Ae=m("div"),K=m("input"),Be=w(),Fe=m("label"),it=R("Frames declaring __traceback_hide__"),B=w(),$=m("div"),Z=m("input"),ri=w(),ot=m("label"),li=R("pyinstrument frames"),oi=w(),ze=m("div"),ke=m("input"),ai=w(),We=m("span"),at=m("label"),ci=R("Frames with durations less than"),ui=w(),we=m("input"),fi=R(`
          % of the total time`),di=w(),Ue=m("div"),ct=m("div"),ct.textContent="Time format",hi=w(),Ge=m("div"),ut=m("div"),ft=m("label"),ie=m("input"),mi=R(`
          Absolute time in seconds`),pi=w(),dt=m("div"),ht=m("label"),ne=m("input"),vi=R(`
          Percentage of the total run time`),a(n,"class","name svelte-1pecl4m"),a(l,"id",i[1]+"collapseModeAll"),a(l,"type","radio"),l.__value="non-application",oe(l,l.__value),a(l,"class","svelte-1pecl4m"),a(f,"for",i[1]+"collapseModeAll"),a(p,"class","description svelte-1pecl4m"),a(o,"class","option svelte-1pecl4m"),a(b,"id",i[1]+"collapseModeCustom"),a(b,"type","radio"),b.__value="custom",oe(b,b.__value),a(b,"class","svelte-1pecl4m"),a(C,"for",i[1]+"collapseModeCustom"),a(_,"for","collapseCustomShow"),a(_,"class","svelte-1pecl4m"),a(A,"id","collapseCustomShow"),a(A,"type","text"),a(A,"placeholder","myproject"),a(A,"spellcheck","false"),a(A,"autocapitalize","off"),a(A,"autocomplete","off"),a(A,"autocorrect","off"),a(A,"class","svelte-1pecl4m"),a(X,"for","collapseCustomHide"),a(X,"class","svelte-1pecl4m"),a(N,"id","collapseCustomHide"),a(N,"type","text"),a(N,"placeholder",".*/lib/.*"),a(N,"spellcheck","false"),a(N,"autocapitalize","off"),a(N,"autocomplete","off"),a(N,"autocorrect","off"),a(N,"class","svelte-1pecl4m"),a(M,"class","mini-input-grid svelte-1pecl4m"),a(V,"class","description svelte-1pecl4m"),a(g,"class","option svelte-1pecl4m"),a(Q,"id",i[1]+"collapseModeDisabled"),a(Q,"type","radio"),Q.__value="disabled",oe(Q,Q.__value),a(Q,"class","svelte-1pecl4m"),a(W,"for",i[1]+"collapseModeDisabled"),a(x,"class","option svelte-1pecl4m"),a(r,"class","body"),a(t,"class","option-group svelte-1pecl4m"),a(U,"class","name svelte-1pecl4m"),a(he,"id",i[1]+"removeImportlib"),a(he,"type","checkbox"),a(he,"class","svelte-1pecl4m"),a(me,"for",i[1]+"removeImportlib"),a(de,"class","option svelte-1pecl4m"),a(K,"id",i[1]+"removeTracebackHide"),a(K,"type","checkbox"),a(K,"class","svelte-1pecl4m"),a(Fe,"for",i[1]+"removeTracebackHide"),a(Ae,"class","option svelte-1pecl4m"),a(Z,"id",i[1]+"removePyinstrument"),a(Z,"type","checkbox"),a(Z,"class","svelte-1pecl4m"),a(ot,"for",i[1]+"removePyinstrument"),a($,"class","option svelte-1pecl4m"),a(ke,"id",i[1]+"removeIrrelevant"),a(ke,"type","checkbox"),a(ke,"class","svelte-1pecl4m"),a(at,"for",i[1]+"removeIrrelevant"),a(we,"type","number"),we.value=i[2](),a(we,"min","0"),a(we,"max","99"),a(we,"step","0.01"),Y(we,"width","4em"),a(we,"class","svelte-1pecl4m"),a(ze,"class","option svelte-1pecl4m"),a(te,"class","body"),a(le,"class","option-group svelte-1pecl4m"),a(ct,"class","name svelte-1pecl4m"),a(ie,"type","radio"),ie.__value="absolute",oe(ie,ie.__value),a(ie,"class","svelte-1pecl4m"),a(ut,"class","option svelte-1pecl4m"),a(ne,"type","radio"),ne.__value="proportion",oe(ne,ne.__value),a(ne,"class","svelte-1pecl4m"),a(dt,"class","option svelte-1pecl4m"),a(Ge,"class","body"),a(Ue,"class","option-group svelte-1pecl4m"),a(e,"class","view-options-call-stack svelte-1pecl4m"),kt.p(ie,ne),Et.p(l,b,Q)},m(j,se){H(j,e,se),c(e,t),c(t,n),c(t,s),c(t,r),c(r,o),c(o,l),l.checked=l.__value===i[0].collapseMode,c(o,u),c(o,f),c(f,d),c(o,h),c(o,p),c(r,v),c(r,g),c(g,b),b.checked=b.__value===i[0].collapseMode,c(g,y),c(g,C),c(C,E),c(g,P),c(g,V),c(V,G),c(V,M),c(M,_),c(M,k),c(M,A),oe(A,i[0].collapseCustomShow),c(M,I),c(M,X),c(M,J),c(M,N),oe(N,i[0].collapseCustomHide),c(V,Ie),c(r,ee),c(r,x),c(x,Q),Q.checked=Q.__value===i[0].collapseMode,c(x,Me),c(x,W),c(W,xe),c(e,Je),c(e,le),c(le,U),c(le,et),c(le,te),c(te,de),c(de,he),he.checked=i[0].removeImportlib,c(de,be),c(de,me),c(me,Te),c(te,tt),c(te,Ae),c(Ae,K),K.checked=i[0].removeTracebackHide,c(Ae,Be),c(Ae,Fe),c(Fe,it),c(te,B),c(te,$),c($,Z),Z.checked=i[0].removePyinstrument,c($,ri),c($,ot),c(ot,li),c(te,oi),c(te,ze),c(ze,ke),ke.checked=i[0].removeIrrelevant,c(ze,ai),c(ze,We),c(We,at),c(at,ci),c(We,ui),c(We,we),c(We,fi),c(e,di),c(e,Ue),c(Ue,ct),c(Ue,hi),c(Ue,Ge),c(Ge,ut),c(ut,ft),c(ft,ie),ie.checked=ie.__value===i[0].timeFormat,c(ft,mi),c(Ge,pi),c(Ge,dt),c(dt,ht),c(ht,ne),ne.checked=ne.__value===i[0].timeFormat,c(ht,vi),Pt||(_i=[z(l,"change",i[4]),z(b,"change",i[6]),z(A,"input",i[7]),z(N,"input",i[8]),z(Q,"change",i[9]),z(he,"change",i[10]),z(K,"change",i[11]),z(Z,"change",i[12]),z(ke,"change",i[13]),z(we,"input",i[3]),z(ie,"change",i[14]),z(ne,"change",i[15])],Pt=!0)},p(j,[se]){se&1&&(l.checked=l.__value===j[0].collapseMode),se&1&&(b.checked=b.__value===j[0].collapseMode),se&1&&A.value!==j[0].collapseCustomShow&&oe(A,j[0].collapseCustomShow),se&1&&N.value!==j[0].collapseCustomHide&&oe(N,j[0].collapseCustomHide),se&1&&(Q.checked=Q.__value===j[0].collapseMode),se&1&&(he.checked=j[0].removeImportlib),se&1&&(K.checked=j[0].removeTracebackHide),se&1&&(Z.checked=j[0].removePyinstrument),se&1&&(ke.checked=j[0].removeIrrelevant),se&1&&(ie.checked=ie.__value===j[0].timeFormat),se&1&&(ne.checked=ne.__value===j[0].timeFormat)},i:F,o:F,d(j){j&&S(e),kt.r(),Et.r(),Pt=!1,ve(_i)}}}function Bi(i,e,t){let n;_e(i,q,P=>t(0,n=P));const s=Math.random().toString(36).substring(4);function r(){return(n.removeIrrelevantThreshold*100).toLocaleString(void 0,{maximumFractionDigits:4})}function o(P){bi(q,n.removeIrrelevantThreshold=P.currentTarget.valueAsNumber/100,n)}const l=[[],[]];function u(){n.collapseMode=this.__value,q.set(n)}function f(){n.collapseMode=this.__value,q.set(n)}function d(){n.collapseCustomShow=this.value,q.set(n)}function h(){n.collapseCustomHide=this.value,q.set(n)}function p(){n.collapseMode=this.__value,q.set(n)}function v(){n.removeImportlib=this.checked,q.set(n)}function g(){n.removeTracebackHide=this.checked,q.set(n)}function b(){n.removePyinstrument=this.checked,q.set(n)}function y(){n.removeIrrelevant=this.checked,q.set(n)}function C(){n.timeFormat=this.__value,q.set(n)}function E(){n.timeFormat=this.__value,q.set(n)}return[n,s,r,o,u,l,f,d,h,p,v,g,b,y,C,E]}class zi extends fe{constructor(e){super(),ue(this,e,Bi,Ni,re,{})}}function Wi(i){let e,t,n,s,r,o,l,u,f,d,h,p,v,g,b,y,C,E,P,V,G,M,_,k;return{c(){e=m("div"),t=m("div"),n=m("div"),n.textContent="Remove frames",s=w(),r=m("div"),o=m("div"),l=m("input"),u=w(),f=m("label"),d=R("importlib machinery"),h=w(),p=m("div"),v=m("input"),g=w(),b=m("label"),y=R("Frames declaring __traceback_hide__"),C=w(),E=m("div"),P=m("input"),V=w(),G=m("label"),M=R("pyinstrument frames"),a(n,"class","name"),a(l,"id",i[1]+"removeImportlib"),a(l,"type","checkbox"),a(f,"for",i[1]+"removeImportlib"),a(o,"class","option"),a(v,"id",i[1]+"removeTracebackHide"),a(v,"type","checkbox"),a(b,"for",i[1]+"removeTracebackHide"),a(p,"class","option"),a(P,"id",i[1]+"removePyinstrument"),a(P,"type","checkbox"),a(G,"for",i[1]+"removePyinstrument"),a(E,"class","option"),a(r,"class","body"),a(t,"class","option-group"),a(e,"class","view-options-timeline svelte-vsz8zm")},m(A,I){H(A,e,I),c(e,t),c(t,n),c(t,s),c(t,r),c(r,o),c(o,l),l.checked=i[0].removeImportlib,c(o,u),c(o,f),c(f,d),c(r,h),c(r,p),c(p,v),v.checked=i[0].removeTracebackHide,c(p,g),c(p,b),c(b,y),c(r,C),c(r,E),c(E,P),P.checked=i[0].removePyinstrument,c(E,V),c(E,G),c(G,M),_||(k=[z(l,"change",i[2]),z(v,"change",i[3]),z(P,"change",i[4])],_=!0)},p(A,[I]){I&1&&(l.checked=A[0].removeImportlib),I&1&&(v.checked=A[0].removeTracebackHide),I&1&&(P.checked=A[0].removePyinstrument)},i:F,o:F,d(A){A&&S(e),_=!1,ve(k)}}}function Ui(i,e,t){let n;_e(i,je,u=>t(0,n=u));const s=Math.random().toString(36).substring(4);function r(){n.removeImportlib=this.checked,je.set(n)}function o(){n.removeTracebackHide=this.checked,je.set(n)}function l(){n.removePyinstrument=this.checked,je.set(n)}return[n,s,r,o,l]}class Gi extends fe{constructor(e){super(),ue(this,e,Ui,Wi,re,{})}}class Xi extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function Qi(i,e){const t=e*(i.length-1),n=Math.floor(t),s=Math.ceil(t),r=i[n],o=i[s],l=t-n;return ji(l,{to:[r,o]})}function Zi(i,e,t){return i===1/0?(console.warn("clamp: value is Infinity, returning `max`",i),t):i===-1/0?(console.warn("clamp: value is -Infinity, returning `min`",i),e):Number.isFinite(i)?i<e?e:i>t?t:i:(console.warn("clamp: value isn't finite, returning `min`",i),e)}function Oe(i,e){const{from:t=[0,1],to:n=[0,1]}=e,s=e.clamp||!1;let r=(i-t[0])/(t[1]-t[0])*(n[1]-n[0])+n[0];return s&&(r=Zi(r,Math.min(n[0],n[1]),Math.max(n[0],n[1]))),r}function ji(i,e){return`rgb(
      ${Oe(i,{from:e.from,to:[e.to[0][0],e.to[1][0]],clamp:e.clamp})},
      ${Oe(i,{from:e.from,to:[e.to[0][1],e.to[1][1]],clamp:e.clamp})},
      ${Oe(i,{from:e.from,to:[e.to[0][2],e.to[1][2]],clamp:e.clamp})}
    )`}function Yi(i){if(i.substr(0,1)=="#"){var e=(i.length-1)/3,t=[17,1,.062272][e-1];return[Math.round(parseInt(i.substr(1,e),16)*t),Math.round(parseInt(i.substr(1+e,e),16)*t),Math.round(parseInt(i.substr(1+2*e,e),16)*t)]}else return i.split("(")[1].split(")")[0].split(",").map(n=>+n)}function qi(i,e,t={}){const{ignore:n=[],capture:s=!0}=t,r=window;if(!r)return()=>{};let o=!0,l=!1;const u=v=>n.some(g=>typeof g=="string"?Array.from(document.querySelectorAll(g)).some(b=>b===v.target||v.composedPath().includes(b)):g&&(v.target===g||v.composedPath().includes(g))),f=v=>{if(!(!i||i===v.target||v.composedPath().includes(i))){if(v.detail===0&&(o=!u(v)),!o){o=!0;return}e(v)}},d=v=>{l||(l=!0,setTimeout(()=>{l=!1},0),f(v))},h=v=>{o=!u(v)&&!!(i&&!v.composedPath().includes(i))};return r.addEventListener("click",d,{passive:!0,capture:s}),r.addEventListener("pointerdown",h,{passive:!0}),()=>{r.removeEventListener("click",d,{capture:s}),r.removeEventListener("pointerdown",h)}}function Ki(i){const e=document.createElement("div");return e.appendChild(document.createTextNode(i)),e.innerHTML}function At(i){return Ki(i).replace(/(\/|\\)/g,t=>`${t}<wbr>`)}function xi(i){let e,t;return e=new Gi({}),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Ji(i){let e,t;return e=new zi({}),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function en(i){let e,t,n,s,r,o,l,u;const f=[Ji,xi],d=[];function h(p,v){return p[0].viewMode==="call-stack"?0:p[0].viewMode==="timeline"?1:-1}return~(o=h(i))&&(l=d[o]=f[o](i)),{c(){e=m("div"),t=m("div"),n=m("div"),s=R(i[2]),r=w(),l&&l.c(),a(n,"class","title svelte-f96okc"),a(t,"class","box svelte-f96okc"),a(e,"class","view-options svelte-f96okc")},m(p,v){H(p,e,v),c(e,t),c(t,n),c(n,s),c(t,r),~o&&d[o].m(t,null),i[3](t),u=!0},p(p,[v]){(!u||v&4)&&ye(s,p[2]);let g=o;o=h(p),o!==g&&(l&&($e(),O(d[g],1,1,()=>{d[g]=null}),Ve()),~o?(l=d[o],l||(l=d[o]=f[o](p),l.c()),L(l,1),l.m(t,null)):l=null)},i(p){u||(L(l),u=!0)},o(p){O(l),u=!1},d(p){p&&S(e),~o&&d[o].d(),i[3](null)}}}function tn(i,e,t){let n;_e(i,Ze,f=>t(0,n=f));const s=Ci();function r(){s("close")}let o;St(()=>{if(o)return qi(o,r,{ignore:[".js-view-options-button"]})});let l="View options";function u(f){Se[f?"unshift":"push"](()=>{o=f,t(1,o)})}return i.$$.update=()=>{i.$$.dirty&1&&(n.viewMode==="call-stack"?t(2,l="Call stack view options"):n.viewMode==="timeline"&&t(2,l="Timeline view options"))},[n,o,l,u]}class nn extends fe{constructor(e){super(),ue(this,e,tn,en,re,{})}}function Ot(i){let e,t;return e=new nn({}),e.$on("close",i[9]),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},p:F,i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function sn(i){let e,t,n,s,r,o,l,u,f=At(i[0].target_description)+"",d,h,p,v,g,b,y,C,E,P,V,G,M,_=i[0].sampleCount+"",k,A,I,X,J,N,Ie,ee,x,Q,Me,W,xe,Je,le,U,et,te,de,he,be,me,Te,tt,Ae,K,Be,Fe,it;r=new Vi({}),Te=new Li({});let B=i[1]&&Ot(i);return Be=_t(i[7][0]),{c(){e=m("div"),t=m("div"),n=m("div"),s=m("div"),ge(r.$$.fragment),o=w(),l=m("div"),u=m("div"),d=w(),h=m("div"),p=m("div"),v=m("span"),v.textContent="Recorded:",g=w(),b=m("span"),b.textContent=`${i[3]}`,y=w(),C=m("br"),E=w(),P=m("div"),V=m("span"),V.textContent="Samples:",G=w(),M=m("span"),k=R(_),A=w(),I=m("div"),X=m("span"),X.textContent="CPU utilization:",J=w(),N=m("span"),N.textContent=`${(i[4]*100).toFixed(0)}%`,Ie=w(),ee=m("div"),x=m("div"),Q=R(`View:
            `),Me=m("label"),W=m("input"),xe=R(`
              Call stack`),Je=w(),le=m("label"),U=m("input"),et=R(`
              Timeline`),te=w(),de=m("div"),he=w(),be=m("div"),me=m("button"),ge(Te.$$.fragment),tt=R(`
              View options`),Ae=w(),B&&B.c(),a(s,"class","logo svelte-1u5a81f"),a(u,"class","target-description svelte-1u5a81f"),a(v,"class","metric-label svelte-1u5a81f"),a(b,"class","metric-value svelte-1u5a81f"),a(p,"class","metric date svelte-1u5a81f"),a(C,"class","svelte-1u5a81f"),a(V,"class","metric-label svelte-1u5a81f"),a(M,"class","metric-value svelte-1u5a81f"),a(P,"class","metric svelte-1u5a81f"),a(X,"class","metric-label svelte-1u5a81f"),a(N,"class","metric-value svelte-1u5a81f"),a(I,"class","metric svelte-1u5a81f"),a(h,"class","metrics svelte-1u5a81f"),a(W,"type","radio"),W.__value="call-stack",oe(W,W.__value),a(W,"class","svelte-1u5a81f"),a(Me,"class","svelte-1u5a81f"),a(U,"type","radio"),U.__value="timeline",oe(U,U.__value),a(U,"class","svelte-1u5a81f"),a(le,"class","svelte-1u5a81f"),a(x,"class","toggle"),a(de,"class","spacer"),Y(de,"flex","1"),a(me,"class","js-view-options-button svelte-1u5a81f"),a(be,"class","button-container svelte-1u5a81f"),a(ee,"class","view-options svelte-1u5a81f"),a(l,"class","layout svelte-1u5a81f"),a(n,"class","row svelte-1u5a81f"),a(t,"class","margins"),a(e,"class","header svelte-1u5a81f"),Be.p(W,U)},m($,Z){H($,e,Z),c(e,t),c(t,n),c(n,s),ae(r,s,null),c(n,o),c(n,l),c(l,u),u.innerHTML=f,c(l,d),c(l,h),c(h,p),c(p,v),c(p,g),c(p,b),c(h,y),c(h,C),c(h,E),c(h,P),c(P,V),c(P,G),c(P,M),c(M,k),c(h,A),c(h,I),c(I,X),c(I,J),c(I,N),c(l,Ie),c(l,ee),c(ee,x),c(x,Q),c(x,Me),c(Me,W),W.checked=W.__value===i[2].viewMode,c(Me,xe),c(x,Je),c(x,le),c(le,U),U.checked=U.__value===i[2].viewMode,c(le,et),c(ee,te),c(ee,de),c(ee,he),c(ee,be),c(be,me),ae(Te,me,null),c(me,tt),c(be,Ae),B&&B.m(be,null),K=!0,Fe||(it=[z(W,"change",i[6]),z(U,"change",i[8]),z(me,"click",vt(pt(i[5])))],Fe=!0)},p($,[Z]){(!K||Z&1)&&f!==(f=At($[0].target_description)+"")&&(u.innerHTML=f),(!K||Z&1)&&_!==(_=$[0].sampleCount+"")&&ye(k,_),Z&4&&(W.checked=W.__value===$[2].viewMode),Z&4&&(U.checked=U.__value===$[2].viewMode),$[1]?B?(B.p($,Z),Z&2&&L(B,1)):(B=Ot($),B.c(),L(B,1),B.m(be,null)):B&&($e(),O(B,1,1,()=>{B=null}),Ve())},i($){K||(L(r.$$.fragment,$),L(Te.$$.fragment,$),L(B),K=!0)},o($){O(r.$$.fragment,$),O(Te.$$.fragment,$),O(B),K=!1},d($){$&&S(e),ce(r),ce(Te),B&&B.d(),Be.r(),Fe=!1,ve(it)}}}function rn(i,e,t){let n;_e(i,Ze,v=>t(2,n=v));let{session:s}=e;const r=new Date(s.startTime*1e3).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"}),o=s.cpuTime/s.duration;let l=!1;function u(v){t(1,l=!l)}const f=[[]];function d(){n.viewMode=this.__value,Ze.set(n)}function h(){n.viewMode=this.__value,Ze.set(n)}const p=()=>t(1,l=!1);return i.$$set=v=>{"session"in v&&t(0,s=v.session)},[s,l,n,r,o,u,d,f,h,p]}class ln extends fe{constructor(e){super(),ue(this,e,rn,sn,re,{session:0})}}const on="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWmSURBVHgBtVc7i11VFF5rn3PvPKoLFlqmDGPhaGVpJQoWAZEEGxERFBsDgnY6KFpaWWrQysRGf4BgmSKQFCKWKQMKTqNzz2svv/XY55ybeycTCw+z736cs/f61rdee5hmz/Hx85c66m4QyTEzrdAo4cd6EuuJ2P4wtbmUgfZkCyRoWVcwyMI29ybW47sfhRfXf793+z4X4ZchPEl3F2esElYrbRVaEjQGEKGE3jcUofGwlIEBygoACAa0fmDrdV4AOAg6FV4+W49nUPdlEW4AElGNtqjZ+hqIdI2NAC7KuvAZloyJCR+IukGmF5A6iH/IbEBWLN2NevbBFQ6tCoAF3u7VggYQtQJyFlygOAADI74Jf669QDiWWh6xFRMUgLF6PAGYkcgGgGkBE/x8AiSVaykG0AUxlgm7BY0BUMAQL8R77LM96F98A98kBeu+kAdlgA0MntUGACmOFDQl5sm+Rai6lwpMLtiEgSVGE8wVFBkAB7XcU+rdJOoLSU0x8Aii3ta/0AWqMHjlM6LDPaYDHLSsnRn9pjMny2jBCDSu9H3tDqpCmw4C6lgHqAQmWB05uwwF8RCAQpU7jIbQYCElBsjAlabfqJdnD7lKwzVcIVVOgmKpF2g921pS8/QRvuETmwDEKZdwFHMocYHffYSfBc0opojVIomjx/dY64CkxVktMsgar16/IhbKygANruwWA+YDkURUcNHQaK5ps1XhBwaAzf6M9YzWq3Ac1EKACm80cB8KV6IdPsCR0aQAMBAaUkxXPyU6WDqlypKaSEOtmCCpDyAKFgu1gSecrhdar4n++VsiGUVWDHUpdJkYEPEkEyDc7paHTShXbkuNhqQfaF5wMt16lff69JYFFYT3A8AYgFxku5xtBtw9R7YsEiH85hcYLIsfuO0lfCCHvTtMWxszNRhDebp+LRsTGobFr0zBiO5tBnhWaZgiDwD5gi3Wiw+YcDAwoDfB+MaFq83RsP8M5zSYdFjsBwfh9YAjErbyQLHNVNUsH2Dl2odCh4dE+0vQXjtI9YG2z05zOKvSbdR3eKdtLTbugVKzoOQxC+7KA5NtJPiXEZaH5xDglMrOBMHTWxdWhA/QVqtgEdx3EtVwSkDOxE4GHESpCZzcHLe+4gg3HA7P69jpfvutTA0GTQNNkXAs5UYJVjC593keik/JBohzALjQsXbrJtRksRgntzm7nVX4GnZumtC4D23N4aIAZWdv9LyZv+3IA87AlHY1HQu9+q7Qwb7nAQ01FbQ+g5NBaNOKA2jdD0bg4+UjzCrbqu6IgrLB6aLRF6KWB0ZNUj15QvLCRVa8PNanqiq7pM7kbVXDEvdaipMmHIRfBa2//aYC9WI5vjH6ydLsB1ezpePiK9PhYcoLnjSK5kljNUWqvXppKdVxo4XFhIsJ93gXy/8clxIvt0X7i4XrU8+1D+wGgKPGW/UCzHfew9VsXywVZxbz8GYdKqS4rCTfZ/NZvD8WA/Yxu/aW661F7q+cIbsXVO6EcVf3b0t9SIXFx9N+kwEO3w8QVmhggq+/9xSroVdiv5TZlr0SanL6/KXOK5SaL9b/G4DRdDzONZbPuAjXS4bnfPWBPrJkjhzpYbdR8OeXz62nvBt3HD3z3F/2f0Fyx9O7XL2HAoj7YG33AK8Bag4TrJlOa0DrrVtrj7DsPBtKlgstsZGIcOW+B0wvlMP1EOqcCh1rTldb+/Xcw2woqbaLeh/Vbl7vH/Vgx08TABrehO53ccJKK1ZWP+gjpRqAKdaN8jxLs5r7Bx5TMBm18kjxOOZ0ub/3flUW/nzw4PSJp568CT0vYXq5aGJgslc4o7doPI6dcis2eUq950Ug1DqF9NvQ/uVf79y5v+E1IptedEInNj+iT2L9Nfv9jf7gI/pFdP4D5rfoaYw/Lv+pReVRq/JOEEXOee/PAf7/PP8C3bt510T4rIwAAAAASUVORK5CYII=",Nt=st({}),Bt=st({});function zt(i){return i>.6?"#FF4159":i>.3?"#F5A623":i>.2?"#D8CB2A":"#7ED321"}function Wt(i,e,t){const n=i.slice();return n[19]=e[t],n}function Ut(i){let e,t,n,s,r,o,l,u,f,d,h,p,v,g;return{c(){e=m("div"),t=m("div"),n=D("svg"),s=D("path"),r=w(),o=m("div"),l=R(i[5]),u=w(),f=m("div"),d=R(i[4]),h=w(),p=m("div"),p.textContent=`${i[11]}`,a(s,"d","M.937-.016L5.793 4.84.937 9.696z"),a(s,"fill",i[7]),a(s,"fill-rule","evenodd"),a(s,"fill-opacity",".582"),a(n,"width","6"),a(n,"height","10"),a(t,"class","frame-triangle svelte-1hxft88"),Ce(t,"rotate",!i[9]),Y(t,"visibility",i[0].children.length>0?"visible":"hidden"),a(o,"class","time svelte-1hxft88"),Y(o,"color",i[7]),Y(o,"font-weight",i[10]<.2?500:600),a(f,"class","name svelte-1hxft88"),a(p,"class","code-position svelte-1hxft88"),a(e,"class","frame-description svelte-1hxft88"),Ce(e,"application-code",i[0].isApplicationCode),Ce(e,"children-visible",!i[9]),Y(e,"padding-left",`${i[2]*35}px`)},m(b,y){H(b,e,y),c(e,t),c(t,n),c(n,s),c(e,r),c(e,o),c(o,l),c(e,u),c(e,f),c(f,d),c(e,h),c(e,p),v||(g=z(e,"click",vt(pt(i[12]))),v=!0)},p(b,y){y&128&&a(s,"fill",b[7]),y&512&&Ce(t,"rotate",!b[9]),y&1&&Y(t,"visibility",b[0].children.length>0?"visible":"hidden"),y&32&&ye(l,b[5]),y&128&&Y(o,"color",b[7]),y&16&&ye(d,b[4]),y&1&&Ce(e,"application-code",b[0].isApplicationCode),y&512&&Ce(e,"children-visible",!b[9]),y&4&&Y(e,"padding-left",`${b[2]*35}px`)},d(b){b&&S(e),v=!1,g()}}}function Gt(i){let e,t,n,s,r=i[0].group.frames.length+"",o,l,u,f,d,h;return{c(){e=m("div"),t=m("div"),n=m("div"),n.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',s=w(),o=R(r),l=R(` frames hidden
        (`),u=R(i[6]),f=R(")"),a(n,"class","group-triangle svelte-1hxft88"),Ce(n,"rotate",i[8]),a(t,"class","group-header-button svelte-1hxft88"),a(e,"class","group-header svelte-1hxft88"),Y(e,"padding-left",`${i[2]*35}px`)},m(p,v){H(p,e,v),c(e,t),c(t,n),c(t,s),c(t,o),c(t,l),c(t,u),c(t,f),d||(h=z(e,"click",vt(pt(i[13]))),d=!0)},p(p,v){v&256&&Ce(n,"rotate",p[8]),v&1&&r!==(r=p[0].group.frames.length+"")&&ye(o,r),v&64&&ye(u,p[6]),v&4&&Y(e,"padding-left",`${p[2]*35}px`)},d(p){p&&S(e),d=!1,h()}}}function Xt(i){let e,t=[],n=new Map,s,r=$t(i[0].children);const o=l=>l[19].uuid;for(let l=0;l<r.length;l+=1){let u=Wt(i,r,l),f=o(u);n.set(f,t[l]=Qt(f,u))}return{c(){e=m("div");for(let l=0;l<t.length;l+=1)t[l].c();a(e,"class","children svelte-1hxft88")},m(l,u){H(l,e,u);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(l,u){u&15&&(r=$t(l[0].children),$e(),t=Ii(t,u,o,1,l,r,n,e,Pi,Qt,null,Wt),Ve())},i(l){if(!s){for(let u=0;u<r.length;u+=1)L(t[u]);s=!0}},o(l){for(let u=0;u<t.length;u+=1)O(t[u]);s=!1},d(l){l&&S(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function Qt(i,e){let t,n,s;return n=new Zt({props:{frame:e[19],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:i,first:null,c(){t=wi(),ge(n.$$.fragment),this.first=t},m(r,o){H(r,t,o),ae(n,r,o),s=!0},p(r,o){e=r;const l={};o&1&&(l.frame=e[19]),o&2&&(l.rootFrame=e[1]),o&12&&(l.indent=e[2]+(e[3]?1:0)),n.$set(l)},i(r){s||(L(n.$$.fragment,r),s=!0)},o(r){O(n.$$.fragment,r),s=!1},d(r){r&&S(t),ce(n,r)}}}function an(i){let e,t,n,s,r,o,l=i[3]&&Ut(i),u=i[0].group&&i[0].group.rootFrame==i[0]&&!i[9]&&Gt(i),f=!i[9]&&i[0].children.length>0&&Xt(i);return{c(){e=m("div"),l&&l.c(),t=w(),u&&u.c(),n=w(),f&&f.c(),s=w(),r=m("div"),r.innerHTML="",a(r,"class","visual-guide svelte-1hxft88"),Y(r,"left",`${i[2]*35+21}px`),Y(r,"backgroundColor",i[7]),a(e,"class","frame svelte-1hxft88")},m(d,h){H(d,e,h),l&&l.m(e,null),c(e,t),u&&u.m(e,null),c(e,n),f&&f.m(e,null),c(e,s),c(e,r),o=!0},p(d,[h]){d[3]?l?l.p(d,h):(l=Ut(d),l.c(),l.m(e,t)):l&&(l.d(1),l=null),d[0].group&&d[0].group.rootFrame==d[0]&&!d[9]?u?u.p(d,h):(u=Gt(d),u.c(),u.m(e,n)):u&&(u.d(1),u=null),!d[9]&&d[0].children.length>0?f?(f.p(d,h),h&513&&L(f,1)):(f=Xt(d),f.c(),L(f,1),f.m(e,s)):f&&($e(),O(f,1,1,()=>{f=null}),Ve()),h&4&&Y(r,"left",`${d[2]*35+21}px`),h&128&&Y(r,"backgroundColor",d[7])},i(d){o||(L(f),o=!0)},o(d){O(f),o=!1},d(d){d&&S(e),l&&l.d(),u&&u.d(),f&&f.d()}}}function cn(i,e,t){var M;let n,s,r,o,l;_e(i,Bt,_=>t(14,r=_)),_e(i,Nt,_=>t(15,o=_)),_e(i,q,_=>t(16,l=_));let{frame:u}=e,{rootFrame:f}=e,{indent:d=0}=e,h;const p=u.time/f.time;let v;const g=`${u.filePathShort}:${(M=u.lineNo)==null?void 0:M.toString().padEnd(4," ")}`;let b,y=null;if(u.group){const _=u.group.libraries;_.length<4?y=_.join(", "):y=`${_[0]}, ${_[1]}, ${_[2]}...`}let C;C=zt(p);function E(_){P(u,!s,_.altKey)}function P(_,k,A=!0){if(Bt.update(I=>({...I,[_.uuid]:k})),A)for(const I of _.children)P(I,k,!0),_.group&&_.group.rootFrame==_&&V(_.group.id,!k)}function V(_,k){Nt.update(A=>({...A,[_]:k}))}function G(){u.group&&V(u.group.id,!n)}return i.$$set=_=>{"frame"in _&&t(0,u=_.frame),"rootFrame"in _&&t(1,f=_.rootFrame),"indent"in _&&t(2,d=_.indent)},i.$$.update=()=>{var _,k;if(i.$$.dirty&32769&&(u.group?o[u.group.id??""]||((_=u.group)==null?void 0:_.rootFrame)===u||u.children.filter(A=>!A.group).length>1?t(3,h=!0):t(3,h=!1):t(3,h=!0)),i.$$.dirty&1&&(u.className?t(4,v=`${u.className}.${u.function}`):t(4,v=u.function)),i.$$.dirty&65537)if(l.timeFormat==="absolute")t(5,b=u.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(l.timeFormat==="proportion")t(5,b=`${(p*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");i.$$.dirty&32769&&t(8,n=o[((k=u.group)==null?void 0:k.id)??""]===!0),i.$$.dirty&16385&&t(9,s=r[u.uuid]===!0)},[u,f,d,h,v,b,y,C,n,s,p,g,E,G,r,o,l]}let Zt=class extends fe{constructor(e){super(),ue(this,e,cn,an,re,{frame:0,rootFrame:1,indent:2})}};function jt(i,e,t){let n=i;for(const s of e)if(n=s(n,t),!n)return null;return n}const un="\0",fn="[await]",Ye="[self]",dn=[fn,Ye,"[out-of-context]","[root]"],hn="c",mn="h";class qe{constructor(e,t){T(this,"uuid",crypto.randomUUID());T(this,"identifier");T(this,"_identifierParts");T(this,"startTime");T(this,"time",0);T(this,"absorbedTime",0);T(this,"group",null);T(this,"attributes");T(this,"_children",[]);T(this,"parent",null);T(this,"context");var r;this.identifier=e.identifier,this._identifierParts=this.identifier.split(un),this.startTime=e.startTime??0,this.time=e.time??0,this.attributes=e.attributes??{},this.context=t;let n=this.startTime;const s=(r=e.children)==null?void 0:r.map(o=>(o.startTime===void 0&&(o={...o,startTime:n},n+=o.time??0),n=o.startTime+(o.time??0),new qe(o,t)));s&&this.addChildren(s)}cloneDeep(){return new qe(this,this.context)}get children(){return this._children}addChild(e,t={}){if(e.removeFromParent(),e.parent=this,t.after){const n=this._children.indexOf(t.after);if(n==-1)throw new Error("After frame not found");this._children.splice(n+1,0,e)}else this._children.push(e)}addChildren(e,t={}){e=e.slice(),t.after?(e.slice().reverse(),e.forEach(s=>this.addChild(s,t))):e.forEach(n=>this.addChild(n,t))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(n=>n.startsWith(e)).map(n=>({data:n.slice(1),time:this.attributes[n]}))}getAttributeValue(e){const t=this.getAttributes(e);if(!t||t.length==0)return null;let n=0;for(let s=0;s<t.length;s++)t[s].time>t[n].time&&(n=s);return t[n].data}get hasTracebackHide(){return this.getAttributeValue(mn)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return dn.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||["/lib/","\\lib\\"].some(n=>e.includes(n))?!1:e.startsWith("<")?!!e.startsWith("<ipython-input-"):!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue(hn)??""}get library(){const e=this.filePathShort;return e?/^[^\\/.]*/.exec(e)[0]:null}}class pn{constructor(e){T(this,"id");T(this,"rootFrame");T(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const t=this._frames.indexOf(e);if(t===-1)throw new Error("Frame not found in group.");this._frames.splice(t,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const t of this.frames){let n=!1;for(const s of t.children)if(s.group!=this){n=!0;break}n&&e.push(t)}return e}get libraries(){const e=[];for(const t of this.frames){const n=t.library;n&&(e.includes(n)||e.push(n))}return e}}function rt(i,e){const{replaceWith:t}=e,n=i.parent;if(!n)throw new Error("Cannot delete the root frame");if(t=="children")n.addChildren(i.children,{after:i});else if(t=="self_time")n.addChild(new qe({identifier:Ye,time:i.time},n.context),{after:i});else if(t=="nothing")n.absorbedTime+=i.time;else throw new Xi(t);i.removeFromParent(),Ct(i,!0)}function vn(i,e){if(i.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=i.absorbedTime,e.time+=i.time,Object.entries(i.attributes).forEach(([t,n])=>{e.attributes[t]!==void 0?e.attributes[t]+=n:e.attributes[t]=n}),e.addChildren(i.children),i.removeFromParent(),Ct(i,!1)}function Ct(i,e){if(e&&i.children&&i.children.forEach(t=>{Ct(t,!0)}),i.group){const t=i.group;t.removeFrame(i),t.frames.length===1&&t.removeFrame(t.frames[0])}}function Mt(i,e){if(!i)return null;for(const t of i.children)Mt(t),t.filePath&&t.filePath.includes("<frozen importlib._bootstrap")&&rt(t,{replaceWith:"children"});return i}function Ft(i,e){if(!i)return null;for(const t of i.children)Ft(t),t.hasTracebackHide&&rt(t,{replaceWith:"children"});return i}function Yt(i,e){if(!i)return null;const t={};for(const n of i.children.slice())if(t[n.identifier]){const s=t[n.identifier];vn(n,s)}else t[n.identifier]=n;return i.children.forEach(n=>Yt(n)),i._children.sort((n,s)=>s.time-n.time),i}function qt(i,e){if(!i)return null;const t=e.hideRegex,n=e.showRegex;function s(o){const l=o.filePath||"",u=n&&new RegExp(n).test(l),f=t&&new RegExp(t).test(l);return u?!1:f?!0:!o.isApplicationCode}function r(o,l){l.addFrame(o),o.children.forEach(u=>{s(u)&&r(u,l)})}return i.children.forEach(o=>{if(!o.group&&s(o)&&o.children.some(s)){const l=new pn(o);r(o,l)}qt(o,e)}),i}function Kt(i,e,t=!0){if(!i)return null;let n=null;for(const s of i.children)s.identifier===Ye?n?(n.time+=s.time,s.removeFromParent()):n=s:n=null;return t&&i.children.forEach(s=>Kt(s,e,!0)),i}function xt(i,e){return i?(i.children.length===1&&i.children[0].identifier===Ye&&rt(i.children[0],{replaceWith:"nothing"}),i.children.forEach(t=>xt(t)),i):null}function Jt(i,e,t=null){if(!i)return null;t===null&&(t=i.time,t<=0&&(t=1e-44));const n=e.filterThreshold??.01;for(const s of i.children.slice())s.time/t<n&&rt(s,{replaceWith:"nothing"});return i.children.forEach(s=>Jt(s,e,t)),i}function ei(i,e){if(!i)return null;const t=o=>{var l;return((l=o.filePath)==null?void 0:l.includes("pyinstrument/__main__.py"))&&o.children.length>0},n=o=>{var l;return o.proportionOfParent>.8&&((l=o.filePath)==null?void 0:l.includes("<string>"))&&o.children.length>0},s=o=>{var l;return o.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(o.filePath??"")||((l=o.filePath)==null?void 0:l.includes("<frozen runpy>")))&&o.children.length>0};let r=i;if(!t(r)||(r=r.children[0],!n(r))||(r=r.children[0],!s(r)))return i;for(;s(r);)r=r.children[0];return r.removeFromParent(),r}function _n(i){let e,t;return e=new Zt({props:{frame:i[2],rootFrame:i[2]}}),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},p(n,s){const r={};s&4&&(r.frame=n[2]),s&4&&(r.rootFrame=n[2]),e.$set(r)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function gn(i){let e;return{c(){e=m("div"),e.textContent="All frames were filtered out.",a(e,"class","error")},m(t,n){H(t,e,n)},p:F,i:F,o:F,d(t){t&&S(e)}}}function bn(i){let e,t,n,s,r,o;const l=[gn,_n],u=[];function f(d,h){return d[2]?1:0}return s=f(i),r=u[s]=l[s](i),{c(){e=m("div"),t=m("div"),n=m("div"),r.c(),a(n,"class","margins"),a(t,"class","scroll-inner svelte-gly4tt"),a(e,"class","call-stack-view svelte-gly4tt")},m(d,h){H(d,e,h),c(e,t),c(t,n),u[s].m(n,null),i[6](t),i[7](e),o=!0},p(d,[h]){let p=s;s=f(d),s===p?u[s].p(d,h):($e(),O(u[p],1,1,()=>{u[p]=null}),Ve(),r=u[s],r?r.p(d,h):(r=u[s]=l[s](d),r.c()),L(r,1),r.m(n,null))},i(d){o||(L(r),o=!0)},o(d){O(r),o=!1},d(d){d&&S(e),u[s].d(),i[6](null),i[7](null)}}}function wn(i,e,t){let n,{session:s}=e;const r=Vt([q],([h])=>{const p=[h.removeImportlib?Mt:null,h.removeTracebackHide?Ft:null,Kt,Yt,xt,h.removeIrrelevant?Jt:null,h.removePyinstrument?ei:null,h.collapseMode!=="disabled"?qt:null].filter(g=>g!==null),v={filterThreshold:h.removeIrrelevantThreshold,hideRegex:h.collapseMode=="custom"?h.collapseCustomHide:void 0,showRegex:h.collapseMode=="custom"?h.collapseCustomShow:void 0};return{processors:p,options:v}});_e(i,r,h=>t(5,n=h));let o,l;St(()=>{const h=o;if(!h)throw new Error("element not set");let p;return h.addEventListener("scroll",p=()=>{t(1,l.style.minHeight=`${h.scrollTop+h.clientHeight}px`,l)}),p(),()=>{h.removeEventListener("scroll",p)}});let u;function f(h){Se[h?"unshift":"push"](()=>{l=h,t(1,l)})}function d(h){Se[h?"unshift":"push"](()=>{o=h,t(0,o)})}return i.$$set=h=>{"session"in h&&t(4,s=h.session)},i.$$.update=()=>{i.$$.dirty&48&&t(2,u=jt(s.rootFrame.cloneDeep(),n.processors,n.options))},[o,l,u,r,s,n,f,d]}class yn extends fe{constructor(e){super(),ue(this,e,wn,bn,re,{session:4})}}class Tn{constructor(e){T(this,"mediaQueryList",null);this.onDevicePixelRatioChanged=e,this._onChange=this._onChange.bind(this),this.createMediaQueryList()}createMediaQueryList(){this.removeMediaQueryList();let e=`(resolution: ${window.devicePixelRatio}dppx)`;this.mediaQueryList=matchMedia(e),this.mediaQueryList.addEventListener("change",this._onChange)}removeMediaQueryList(){var e;(e=this.mediaQueryList)==null||e.removeEventListener("change",this._onChange),this.mediaQueryList=null}_onChange(e){this.onDevicePixelRatioChanged(),this.createMediaQueryList()}destroy(){this.removeMediaQueryList()}}class An{constructor(e){T(this,"canvas");T(this,"_size_observer");T(this,"_devicePixelRatioObserver");T(this,"drawAnimationRequest",null);this.container=e,getComputedStyle(e).position!="absolute"&&(e.style.position="relative"),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.container.appendChild(this.canvas),this.setCanvasSize=this.setCanvasSize.bind(this),this._size_observer=new ResizeObserver(this.setCanvasSize),this._size_observer.observe(e),this._devicePixelRatioObserver=new Tn(this.setCanvasSize),window.requestAnimationFrame(()=>{this.setCanvasSize()})}destroy(){this._size_observer.disconnect(),this._devicePixelRatioObserver.destroy(),this.canvas.remove(),this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null)}setNeedsRedraw(){this.drawAnimationRequest===null&&(this.drawAnimationRequest=window.requestAnimationFrame(()=>{this.drawAnimationRequest=null,this.canvasViewRedraw()}))}redrawIfNeeded(){this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null,this.canvasViewRedraw())}canvasViewRedraw(){const e=this.canvas.getContext("2d");e&&(e.resetTransform(),e.scale(window.devicePixelRatio,window.devicePixelRatio),this.redraw(e,{width:this.canvas.width/window.devicePixelRatio,height:this.canvas.height/window.devicePixelRatio}))}get width(){return this.canvas.width/window.devicePixelRatio}get height(){return this.canvas.height/window.devicePixelRatio}setCanvasSize(){const e=window.devicePixelRatio;this.canvas.height=this.container.clientHeight*e,this.canvas.width=this.container.clientWidth*e,this.canvasViewRedraw()}}function Cn(i){let e,t=i[2]=="self"?"self":"time",n,s,r,o=i[3](i[0].time)+"";return{c(){e=m("div"),n=R(t),s=w(),r=m("div"),a(e,"class","label svelte-ci3g2p"),a(r,"class","time-val svelte-ci3g2p")},m(l,u){H(l,e,u),c(e,n),H(l,s,u),H(l,r,u),r.innerHTML=o},p(l,u){u&4&&t!==(t=l[2]=="self"?"self":"time")&&ye(n,t),u&1&&o!==(o=l[3](l[0].time)+"")&&(r.innerHTML=o)},d(l){l&&(S(e),S(s),S(r))}}}function Mn(i){let e,t,n,s,r=i[3](i[0].time)+"",o,l=i[0].selfTime/i[0].time>.001&&ti(i);return{c(){e=m("div"),e.textContent="time",t=w(),n=m("div"),s=m("div"),o=w(),l&&l.c(),a(e,"class","label svelte-ci3g2p"),a(s,"class","time-val svelte-ci3g2p"),a(n,"class","time-row svelte-ci3g2p")},m(u,f){H(u,e,f),H(u,t,f),H(u,n,f),c(n,s),s.innerHTML=r,c(n,o),l&&l.m(n,null)},p(u,f){f&1&&r!==(r=u[3](u[0].time)+"")&&(s.innerHTML=r),u[0].selfTime/u[0].time>.001?l?l.p(u,f):(l=ti(u),l.c(),l.m(n,null)):l&&(l.d(1),l=null)},d(u){u&&(S(e),S(t),S(n)),l&&l.d()}}}function ti(i){let e,t,n,s=i[3](i[0].selfTime)+"";return{c(){e=m("div"),e.textContent="self",t=w(),n=m("div"),a(e,"class","label svelte-ci3g2p"),a(n,"class","time-val svelte-ci3g2p")},m(r,o){H(r,e,o),H(r,t,o),H(r,n,o),n.innerHTML=s},p(r,o){o&1&&s!==(s=r[3](r[0].selfTime)+"")&&(n.innerHTML=s)},d(r){r&&(S(e),S(t),S(n))}}}function Fn(i){let e,t,n=i[0].name+"",s,r,o,l,u,f,d,h,p,v;function g(C,E){return C[2]=="both"?Mn:Cn}let b=g(i),y=b(i);return{c(){e=m("div"),t=m("div"),s=R(n),r=w(),y.c(),o=w(),l=m("div"),l.textContent="loc",u=w(),f=m("div"),d=m("div"),p=w(),v=new Ai(!1),a(t,"class","name svelte-ci3g2p"),a(l,"class","label svelte-ci3g2p"),a(d,"class","location-color svelte-ci3g2p"),a(d,"style",h=`background: ${i[0].locationColor}`),v.a=null,a(f,"class","location-row"),a(e,"class","timeline-canvas-view-tooltip svelte-ci3g2p"),a(e,"style",`font: ${ni}; max-width: ${En}px;`)},m(C,E){H(C,e,E),c(e,t),c(t,s),c(e,r),y.m(e,null),c(e,o),c(e,l),c(e,u),c(e,f),c(f,d),c(f,p),v.m(i[1],f)},p(C,[E]){E&1&&n!==(n=C[0].name+"")&&ye(s,n),b===(b=g(C))&&y?y.p(C,E):(y.d(1),y=b(C),y&&(y.c(),y.m(e,o))),E&1&&h!==(h=`background: ${C[0].locationColor}`)&&a(d,"style",h),E&2&&v.p(C[1])},i:F,o:F,d(C){C&&S(e),y.d()}}}function ii(i){return i.selfTime==i.time?"self":i.selfTime/i.time>.001?"both":"time"}function kn(i,e){i.font=ni;const t=ii(e)=="both"?140:70,n=i.measureText(e.name).width,s=i.measureText(e.location).width+46;let o=Math.max(t,n,s)+20;return o>310&&(o=310),o}const En=310,ni="400 13px Source Sans Pro, sans-serif";function Pn(i,e,t){let{f:n}=e,s,r;function o(l){return`<span style="color: ${zt(l/n.totalTime)}">${l.toFixed(3)}</span>`}return i.$$set=l=>{"f"in l&&t(0,n=l.f)},i.$$.update=()=>{i.$$.dirty&1&&t(1,s=At(n.location)),i.$$.dirty&1&&t(2,r=ii(n))},[n,s,r,o]}class In extends fe{constructor(e){super(),ue(this,e,Pn,Fn,re,{f:0})}}const Rn="#212325",Sn=18,Hn=17,Ke=28,lt=17,Ln=29,$n=["#47A298","#9FC175","#C1A731","#C07210","#B84210","#B53134","#9A3586","#4958B5","#3475BA","#318DBC","#47A298"].map(Yi);class Vn extends An{constructor(t){super(t);T(this,"zoom",1);T(this,"startT",0);T(this,"frames",[]);T(this,"isZoomedIn",!1);T(this,"tooltipContainer");T(this,"tooltipComponent",null);T(this,"_rootFrame",null);T(this,"_frameMaxT");T(this,"lastDrawWidth",0);T(this,"lastDrawHeight",0);T(this,"mouseLocation",null);T(this,"_libraryOrder",null);T(this,"_colors",[]);this.onWheel=this.onWheel.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.canvas.addEventListener("wheel",this.onWheel),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseleave",this.onMouseLeave),this.tooltipContainer=document.createElement("div"),this.tooltipContainer.style.position="absolute",this.tooltipContainer.style.pointerEvents="none",this.container.appendChild(this.tooltipContainer)}destroy(){super.destroy(),this.canvas.removeEventListener("wheel",this.onWheel)}setRootFrame(t){this.frames=[],this._frameMaxT=void 0,this._collectFrames(t,0),this.fitContents(),this.setNeedsRedraw()}_collectFrames(t,n){this.frames.push({frame:t,depth:n,isApplicationCode:t.isApplicationCode,library:t.library,className:t.className,filePathShort:t.filePathShort});for(const s of t.children)s.identifier!==Ye&&this._collectFrames(s,n+1)}get frameMaxT(){return this._frameMaxT===void 0&&(this._frameMaxT=this.frames.reduce((t,n)=>Math.max(t,n.frame.startTime+n.frame.time),0)),this._frameMaxT}get minZoom(){return(this.width-2*Ke)/this.frameMaxT}get maxZoom(){return 6666666666666667e-8}fitContents(){this.startT=0,this.zoom=this.minZoom,this.isZoomedIn=!1}clampViewport(){this.zoom<this.minZoom?(this.zoom=this.minZoom,this.isZoomedIn=!1):this.isZoomedIn=!0,this.zoom>this.maxZoom&&(this.zoom=this.maxZoom),this.startT<0&&(this.startT=0);const t=this.frameMaxT-(this.width-2*Ke)/this.zoom;this.startT>t&&(this.startT=t)}redraw(t,n){var l,u;const{width:s,height:r}=n;(s!==this.lastDrawWidth||r!==this.lastDrawHeight)&&(this.isZoomedIn?this.clampViewport():this.fitContents()),this.lastDrawWidth=s,this.lastDrawHeight=r,t.fillStyle=Rn,t.fillRect(0,0,s,r),this.drawAxes(t);for(const f of this.frames)this.drawFrame(t,f);t.globalAlpha=1,t.fillStyle="red",t.font='23px "Source Sans Pro", sans-serif';const o=this.hitTest(((l=this.mouseLocation)==null?void 0:l.x)??0,((u=this.mouseLocation)==null?void 0:u.y)??0);this.updateTooltip(t,o)}drawAxes(t){const n=this.width/this.zoom;if(n==0)return;const s=Math.log10(n);let r=Math.ceil(s)+2;r<0&&(r=0);const o=Math.ceil(s)-3,l=u=>Oe(u,{from:[s,s-3],to:[.71,0]});for(let u=o;u<r;u++){let f=l(u);f=Math.max(0,Math.min(1,f)),f=Math.pow(f,2),this.drawAxis(t,Math.pow(10,u),f)}this.drawAxis(t,Math.pow(10,r),l(r),!0)}drawAxis(t,n,s,r=!1){t.fillStyle="white";const o=Math.floor(this.startT/n)*n,l=this.startT+this.width/this.zoom,u=Math.max(0,Math.ceil(-Math.log10(n)));for(let f=o;f<l;f+=n){const d=this.xForT(f);if(Math.round(f/n)%10===0&&!r)continue;t.globalAlpha=s,t.fillRect(d,lt,1,this.height-lt);const p=Oe(s,{from:[.12,.25],to:[0,.5],clamp:!0});if(p>.01){t.globalAlpha=p,t.font='13px "Source Sans Pro", sans-serif';let v=f.toFixed(u);v=="0"&&(v="0s"),t.fillText(v,d+3,lt+10)}t.globalAlpha=1}}drawFrame(t,n){const{x:s,y:r,w:o,h:l}=this.frameDims(n);if(!(s+o<0||s>this.width)){if(t.fillStyle=this.colorForFrame(n),t.globalAlpha=n.isApplicationCode?1:.5,o<2){t.fillRect(s,r,o,l);return}if(t.save(),t.beginPath(),t.rect(s,r,o,l),t.fill(),t.clip(),o>2){t.font='13px "Source Sans Pro", sans-serif',t.fillStyle="white";let f=this.frameName(n),d=s;d<0&&(d=0);const h=Math.floor(o/3.3);f.length>h&&(f=f.substring(0,h)),t.fillText(f,d+2,r+13)}t.restore()}}frameDims(t){const n=t.depth*Sn+lt+Ln,s=Hn;let r=this.xForT(t.frame.startTime),l=this.xForT(t.frame.startTime+t.frame.time)-r;return l<1&&(l=1),l>1&&(l-=Oe(l,{from:[1,3],to:[0,1],clamp:!0})),{x:r,y:n,w:l,h:s}}xForT(t){return(t-this.startT)*this.zoom+Ke}tForX(t){return(t-Ke)/this.zoom+this.startT}frameName(t){let n;return t.className?n=`${t.className}.${t.frame.function}`:t.frame.function=="<module>"?n=t.filePathShort??t.frame.filePath??"":n=t.frame.function,n}frameSelfTime(t){let n=t.frame.time;const s=t.frame.children.filter(r=>!r.isSynthetic);for(const r of s)n-=r.time;return n}hitTest(t,n){for(const s of this.frames){const{x:r,y:o,w:l,h:u}=this.frameDims(s);if(t>=r&&t<=r+l&&n>=o&&n<=o+u)return s}return null}onWheel(t){const n=t.ctrlKey||t.metaKey,s=n?.01:.0023,r=this.tForX(t.offsetX);this.zoom*=1-t.deltaY*s,this.clampViewport(),this.startT=r-(t.offsetX-Ke)/this.zoom,n||(this.startT+=t.deltaX/this.zoom),this.clampViewport(),this.setNeedsRedraw(),t.preventDefault()}onMouseMove(t){this.mouseLocation={x:t.offsetX,y:t.offsetY},this.setNeedsRedraw()}onMouseLeave(t){this.mouseLocation=null,this.setNeedsRedraw()}_assignLibraryOrder(){const t={};for(const s of this.frames){const o=s.frame.library??"";t[o]=(t[o]||0)+1}const n=Object.keys(t);n.sort((s,r)=>t[r]-t[s]),this._libraryOrder=n}colorForLibraryIndex(t){if(this._colors[t]!==void 0)return this._colors[t];const n=Math.pow(2,Math.ceil(Math.log2(t+1))),r=(2*t-n+1)/n,o=Qi($n,r);return this._colors[t]=o,o}libraryIndexForFrame(t){this._libraryOrder||this._assignLibraryOrder();const n=t.library||"";let s=this._libraryOrder.indexOf(n);return s===-1&&(s=this._libraryOrder.length,this._libraryOrder.push(n)),s}colorForFrame(t){const n=this.libraryIndexForFrame(t);return this.colorForLibraryIndex(n)}updateTooltip(t,n){var s;if(n){const r={name:this.frameName(n),time:n.frame.time,selfTime:this.frameSelfTime(n),totalTime:((s=this._rootFrame)==null?void 0:s.time)??1e-12,location:`${n.filePathShort}:${n.frame.lineNo}`,locationColor:this.colorForFrame(n)};if(this.tooltipComponent?this.tooltipComponent.$set({f:r}):this.tooltipComponent=new In({target:this.tooltipContainer,props:{f:r}}),this.mouseLocation){const o={x:this.mouseLocation.x+12,y:this.mouseLocation.y+12},l=kn(t,r),u=this.width-10-l;o.x>u&&(o.x=u),this.tooltipContainer.style.left=`${o.x}px`,this.tooltipContainer.style.top=`${o.y}px`}}n||this.tooltipComponent&&(this.tooltipComponent.$destroy(),this.tooltipComponent=null)}}function Dn(i){let e;return{c(){e=m("div"),e.innerHTML="",a(e,"class","timeline svelte-1ekyre4")},m(t,n){H(t,e,n),i[6](e)},p:F,i:F,o:F,d(t){t&&S(e),i[6](null)}}}function On(i,e,t){let n,{session:s}=e;const r=Vt([je],([d])=>({processors:[d.removeImportlib?Mt:null,d.removeTracebackHide?Ft:null,d.removePyinstrument?ei:null].filter(v=>v!==null),options:{}}));_e(i,r,d=>t(5,n=d));let o,l=null,u=null;function f(d){Se[d?"unshift":"push"](()=>{l=d,t(0,l)})}return i.$$set=d=>{"session"in d&&t(2,s=d.session)},i.$$.update=()=>{i.$$.dirty&36&&t(3,o=jt(s.rootFrame.cloneDeep(),n.processors,n.options)),i.$$.dirty&1&&l&&t(4,u=new Vn(l)),i.$$.dirty&24&&o&&u&&u.setRootFrame(o)},[l,r,s,o,u,n,f]}class Nn extends fe{constructor(e){super(),ue(this,e,On,Dn,re,{session:2})}}function Bn(i){let e,t,n=i[1].viewMode+"",s;return{c(){e=m("div"),t=R("Unknown view mode: "),s=R(n),a(e,"class","error")},m(r,o){H(r,e,o),c(e,t),c(e,s)},p(r,o){o&2&&n!==(n=r[1].viewMode+"")&&ye(s,n)},i:F,o:F,d(r){r&&S(e)}}}function zn(i){let e,t;return e=new Nn({props:{session:i[0]}}),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.session=n[0]),e.$set(r)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Wn(i){let e,t;return e=new yn({props:{session:i[0]}}),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.session=n[0]),e.$set(r)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Un(i){let e;return{c(){e=m("div"),e.innerHTML='<div class="spacer" style="height: 20px;"></div> <div class="error">No samples recorded.</div>',a(e,"class","margins")},m(t,n){H(t,e,n)},p:F,i:F,o:F,d(t){t&&S(e)}}}function Gn(i){let e,t,n,s,r,o,l,u;n=new ln({props:{session:i[0]}});const f=[Un,Wn,zn,Bn],d=[];function h(p,v){return p[0].rootFrame?p[1].viewMode==="call-stack"?1:p[1].viewMode==="timeline"?2:3:0}return o=h(i),l=d[o]=f[o](i),{c(){e=m("div"),t=m("div"),ge(n.$$.fragment),s=w(),r=m("div"),l.c(),a(t,"class","header"),a(r,"class","body svelte-15bv5h8"),a(e,"class","app svelte-15bv5h8")},m(p,v){H(p,e,v),c(e,t),ae(n,t,null),c(e,s),c(e,r),d[o].m(r,null),u=!0},p(p,[v]){const g={};v&1&&(g.session=p[0]),n.$set(g);let b=o;o=h(p),o===b?d[o].p(p,v):($e(),O(d[b],1,1,()=>{d[b]=null}),Ve(),l=d[o],l?l.p(p,v):(l=d[o]=f[o](p),l.c()),L(l,1),l.m(r,null))},i(p){u||(L(n.$$.fragment,p),L(l),u=!0)},o(p){O(n.$$.fragment,p),O(l),u=!1},d(p){p&&S(e),ce(n),d[o].d()}}}function Xn(i,e,t){let n;_e(i,Ze,h=>t(1,n=h));let{session:s}=e;const r=document.createElement("link");r.rel="shortut icon",r.href=on,document.head.appendChild(r);const o=document.createElement("link");o.rel="preload",o.as="style",o.onload=()=>{o.rel="stylesheet"},o.href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600|Source+Sans+Pro:400,600&display=swap",document.head.appendChild(o);const l=s.rootFrame,u=l==null?void 0:l.time.toLocaleString(void 0,{maximumSignificantDigits:3});let f,d;return(d=/[^\s/]+(:\d+)?$/.exec(s.target_description))?f=d[0]:f=s.target_description,document.title=`${u}s - ${f} - pyinstrument`,i.$$set=h=>{"session"in h&&t(0,s=h.session)},[s,n]}class Qn extends fe{constructor(e){super(),ue(this,e,Xn,Gn,re,{session:0})}}class Zn{constructor(e){T(this,"startTime");T(this,"duration");T(this,"sampleCount");T(this,"target_description");T(this,"cpuTime");T(this,"rootFrame");T(this,"sysPath");T(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.target_description=e.session.target_description,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.rootFrame=new qe(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let t=e;if(Ne(e).length>1)for(const s of this.sysPath){const r=jn(e,s);Ne(r).length<Ne(t).length&&(t=r)}return this._shortenPathCache[e]=t,t}}function Ne(i){return i.split(/[/\\]/)}function si(i){const e=Ne(i);return e.length>0&&e[0].endsWith(":")?e[0]:null}function jn(i,e){if(si(i)!=si(e))return i;const t=Ne(i),n=Ne(e);let s=0;for(;s<t.length&&s<n.length&&t[s]==n[s];)s++;return n.slice(s).map(o=>"..").concat(t.slice(s)).join("/")}return{render(i,e){const t=new Zn(e);return new Qn({target:i,props:{session:t}})}}}();
