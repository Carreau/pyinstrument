var pyinstrumentHTMLRenderer=function(){"use strict";var $n=Object.defineProperty;var jn=(k,pe,Ee)=>pe in k?$n(k,pe,{enumerable:!0,configurable:!0,writable:!0,value:Ee}):k[pe]=Ee;var A=(k,pe,Ee)=>jn(k,typeof pe!="symbol"?pe+"":pe,Ee);function k(){}function pe(i){return i()}function Ee(){return Object.create(null)}function ve(i){i.forEach(pe)}function mt(i){return typeof i=="function"}function re(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function vi(i){return Object.keys(i).length===0}function It(i,...e){if(i==null){for(const n of e)n(void 0);return k}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function _e(i,e,t){i.$$.on_destroy.push(It(e,t))}function _i(i,e,t){return i.set(t),e}function c(i,e){i.appendChild(e)}function S(i,e,t){i.insertBefore(e,t||null)}function R(i){i.parentNode&&i.parentNode.removeChild(i)}function p(i){return document.createElement(i)}function B(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function I(i){return document.createTextNode(i)}function w(){return I(" ")}function gi(){return I("")}function W(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function pt(i){return function(e){return e.preventDefault(),i.call(this,e)}}function vt(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function a(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function _t(i){let e;return{p(...t){e=t,e.forEach(n=>i.push(n))},r(){e.forEach(t=>i.splice(i.indexOf(t),1))}}}function bi(i){return Array.from(i.childNodes)}function ye(i,e){e=""+e,i.data!==e&&(i.data=e)}function oe(i,e){i.value=e??""}function Y(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,"")}function Te(i,e,t){i.classList.toggle(e,!!t)}function wi(i,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(i,{detail:e,bubbles:t,cancelable:n})}let je;function Qe(i){je=i}function Rt(){if(!je)throw new Error("Function called outside component initialization");return je}function St(i){Rt().$$.on_mount.push(i)}function yi(){const i=Rt();return(e,t,{cancelable:n=!1}={})=>{const s=i.$$.callbacks[e];if(s){const r=wi(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(i,r)}),!r.defaultPrevented}return!0}}const Re=[],Se=[];let He=[];const Ht=[],Ci=Promise.resolve();let gt=!1;function Ai(){gt||(gt=!0,Ci.then(Lt))}function bt(i){He.push(i)}const wt=new Set;let Le=0;function Lt(){if(Le!==0)return;const i=je;do{try{for(;Le<Re.length;){const e=Re[Le];Le++,Qe(e),Ti(e.$$)}}catch(e){throw Re.length=0,Le=0,e}for(Qe(null),Re.length=0,Le=0;Se.length;)Se.pop()();for(let e=0;e<He.length;e+=1){const t=He[e];wt.has(t)||(wt.add(t),t())}He.length=0}while(Re.length);for(;Ht.length;)Ht.pop()();gt=!1,wt.clear(),Qe(i)}function Ti(i){if(i.fragment!==null){i.update(),ve(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(bt)}}function ki(i){const e=[],t=[];He.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),He=e}const nt=new Set;let Pe;function Ve(){Pe={r:0,c:[],p:Pe}}function De(){Pe.r||ve(Pe.c),Pe=Pe.p}function L(i,e){i&&i.i&&(nt.delete(i),i.i(e))}function O(i,e,t,n){if(i&&i.o){if(nt.has(i))return;nt.add(i),Pe.c.push(()=>{nt.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function Vt(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Fi(i,e){O(i,1,1,()=>{e.delete(i.key)})}function Mi(i,e,t,n,s,r,o,l,u,f,d,m){let h=i.length,v=r.length,b=h;const _={};for(;b--;)_[i[b].key]=b;const y=[],M=new Map,H=new Map,E=[];for(b=v;b--;){const g=m(s,r,b),F=t(g);let C=o.get(F);C?E.push(()=>C.p(g,e)):(C=f(F,g),C.c()),M.set(F,y[b]=C),F in _&&H.set(F,Math.abs(b-_[F]))}const D=new Set,$=new Set;function T(g){L(g,1),g.m(l,d),o.set(g.key,g),d=g.first,v--}for(;h&&v;){const g=y[v-1],F=i[h-1],C=g.key,P=F.key;g===F?(d=g.first,h--,v--):M.has(P)?!o.has(C)||D.has(C)?T(g):$.has(P)?h--:H.get(C)>H.get(P)?($.add(C),T(g)):(D.add(P),h--):(u(F,o),h--)}for(;h--;){const g=i[h];M.has(g.key)||u(g,o)}for(;v;)T(y[v-1]);return ve(E),y}function ge(i){i&&i.c()}function ae(i,e,t){const{fragment:n,after_update:s}=i.$$;n&&n.m(e,t),bt(()=>{const r=i.$$.on_mount.map(pe).filter(mt);i.$$.on_destroy?i.$$.on_destroy.push(...r):ve(r),i.$$.on_mount=[]}),s.forEach(bt)}function ce(i,e){const t=i.$$;t.fragment!==null&&(ki(t.after_update),ve(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ei(i,e){i.$$.dirty[0]===-1&&(Re.push(i),Ai(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function ue(i,e,t,n,s,r,o=null,l=[-1]){const u=je;Qe(i);const f=i.$$={fragment:null,ctx:[],props:r,update:k,not_equal:s,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ee(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};o&&o(f.root);let d=!1;if(f.ctx=t?t(i,e.props||{},(m,h,...v)=>{const b=v.length?v[0]:h;return f.ctx&&s(f.ctx[m],f.ctx[m]=b)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](b),d&&Ei(i,m)),h}):[],f.update(),d=!0,ve(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const m=bi(e.target);f.fragment&&f.fragment.l(m),m.forEach(R)}else f.fragment&&f.fragment.c();e.intro&&L(i.$$.fragment),ae(i,e.target,e.anchor),Lt()}Qe(u)}class fe{constructor(){A(this,"$$");A(this,"$$set")}$destroy(){ce(this,1),this.$destroy=k}$on(e,t){if(!mt(t))return k;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!vi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pi="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pi);function Ii(i){let e,t;return{c(){e=B("svg"),t=B("path"),a(t,"fill-rule","evenodd"),a(t,"clip-rule","evenodd"),a(t,"d","M5.11634 0.889422C4.86506 -0.296474 3.17237 -0.296474 2.92109 0.889422C2.78291 1.54158 2.10994 1.93011 1.47607 1.72371C0.323418 1.34837 -0.522932 2.81429 0.378448 3.62484C0.87414 4.07059 0.87414 4.84767 0.378448 5.29341C-0.522931 6.10397 0.323418 7.56989 1.47607 7.19455C2.10994 6.98814 2.78291 7.37668 2.92109 8.02883C3.17237 9.21473 4.86506 9.21473 5.11634 8.02883C5.25452 7.37668 5.92749 6.98814 6.56136 7.19455C7.71401 7.56989 8.56036 6.10397 7.65898 5.29341C7.16329 4.84767 7.16329 4.07059 7.65898 3.62484C8.56036 2.81429 7.71401 1.34837 6.56136 1.72371C5.92749 1.93011 5.25452 1.54158 5.11634 0.889422ZM4.01883 6.33408C5.05436 6.33408 5.89383 5.49462 5.89383 4.45908C5.89383 3.42355 5.05436 2.58408 4.01883 2.58408C2.98329 2.58408 2.14383 3.42355 2.14383 4.45908C2.14383 5.49462 2.98329 6.33408 4.01883 6.33408Z"),a(t,"fill","currentColor"),a(e,"width","9"),a(e,"height","9"),a(e,"viewBox","0 0 9 9"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(n,s){S(n,e,s),c(e,t)},p:k,i:k,o:k,d(n){n&&R(e)}}}class Ri extends fe{constructor(e){super(),ue(this,e,null,Ii,re,{})}}function Si(i){let e,t,n,s,r,o,l,u,f,d,m,h,v,b,_,y,M;return{c(){e=B("svg"),t=B("g"),n=B("path"),s=B("path"),r=B("defs"),o=B("filter"),l=B("feFlood"),u=B("feBlend"),f=B("feGaussianBlur"),d=B("linearGradient"),m=B("stop"),h=B("stop"),v=B("stop"),b=B("linearGradient"),_=B("stop"),y=B("stop"),M=B("stop"),a(n,"fill-rule","evenodd"),a(n,"clip-rule","evenodd"),a(n,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(n,"fill","url(#paint0_linear_67_262)"),a(t,"opacity","0.5"),a(t,"filter","url(#filter0_f_67_262)"),a(s,"fill-rule","evenodd"),a(s,"clip-rule","evenodd"),a(s,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(s,"fill","url(#paint1_linear_67_262)"),a(l,"flood-opacity","0"),a(l,"result","BackgroundImageFix"),a(u,"mode","normal"),a(u,"in","SourceGraphic"),a(u,"in2","BackgroundImageFix"),a(u,"result","shape"),a(f,"stdDeviation","3.39785"),a(f,"result","effect1_foregroundBlur_67_262"),a(o,"id","filter0_f_67_262"),a(o,"x","3.2043"),a(o,"y","2.2043"),a(o,"width","36.0914"),a(o,"height","41.0914"),a(o,"filterUnits","userSpaceOnUse"),a(o,"color-interpolation-filters","sRGB"),a(m,"stop-color","#FFAA00"),a(h,"offset","0.514478"),a(h,"stop-color","#FFEB00"),a(v,"offset","1"),a(v,"stop-color","#98FF05"),a(d,"id","paint0_linear_67_262"),a(d,"x1","7.3769"),a(d,"y1","18.4566"),a(d,"x2","20.6583"),a(d,"y2","33.1038"),a(d,"gradientUnits","userSpaceOnUse"),a(_,"stop-color","#FFC834"),a(y,"offset","0.514478"),a(y,"stop-color","#FAF534"),a(M,"offset","1"),a(M,"stop-color","#B8FF38"),a(b,"id","paint1_linear_67_262"),a(b,"x1","7.3769"),a(b,"y1","18.4566"),a(b,"x2","20.6583"),a(b,"y2","33.1038"),a(b,"gradientUnits","userSpaceOnUse"),a(e,"width","44"),a(e,"height","44"),a(e,"viewBox","0 0 44 44"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(H,E){S(H,e,E),c(e,t),c(t,n),c(e,s),c(e,r),c(r,o),c(o,l),c(o,u),c(o,f),c(r,d),c(d,m),c(d,h),c(d,v),c(r,b),c(b,_),c(b,y),c(b,M)},p:k,i:k,o:k,d(H){H&&R(e)}}}class Hi extends fe{constructor(e){super(),ue(this,e,null,Si,re,{})}}const Oe=[];function Li(i,e){return{subscribe:st(i,e).subscribe}}function st(i,e=k){let t;const n=new Set;function s(l){if(re(i,l)&&(i=l,t)){const u=!Oe.length;for(const f of n)f[1](),Oe.push(f,i);if(u){for(let f=0;f<Oe.length;f+=2)Oe[f][0](Oe[f+1]);Oe.length=0}}}function r(l){s(l(i))}function o(l,u=k){const f=[l,u];return n.add(f),n.size===1&&(t=e(s,r)||k),l(i),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:s,update:r,subscribe:o}}function Dt(i,e,t){const n=!Array.isArray(i),s=n?[i]:i;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return Li(t,(o,l)=>{let u=!1;const f=[];let d=0,m=k;const h=()=>{if(d)return;m();const b=e(n?f[0]:f,o,l);r?o(b):m=mt(b)?b:k},v=s.map((b,_)=>It(b,y=>{f[_]=y,d&=~(1<<_),u&&h()},()=>{d|=1<<_}));return u=!0,h(),function(){ve(v),m(),u=!1}})}var yt={local:{},session:{}};function Vi(i){return i==="local"?localStorage:sessionStorage}function Ct(i,e,t){var n,s,r,o,l,u,f,d;t!=null&&t.onError&&console.warn("onError has been deprecated. Please use onWriteError instead");const m=(n=t==null?void 0:t.serializer)!=null?n:JSON,h=(s=t==null?void 0:t.storage)!=null?s:"local",v=(r=t==null?void 0:t.syncTabs)!=null?r:!0,b=(l=(o=t==null?void 0:t.onWriteError)!=null?o:t==null?void 0:t.onError)!=null?l:T=>console.error(`Error when writing value from persisted store "${i}" to ${h}`,T),_=(u=t==null?void 0:t.onParseError)!=null?u:(T,g)=>console.error(`Error when parsing ${T?'"'+T+'"':"value"} from persisted store "${i}"`,g),y=(f=t==null?void 0:t.beforeRead)!=null?f:T=>T,M=(d=t==null?void 0:t.beforeWrite)!=null?d:T=>T,H=typeof window<"u"&&typeof document<"u",E=H?Vi(h):null;function D(T,g){const F=M(g);try{E==null||E.setItem(T,m.stringify(F))}catch(C){b(C)}}function $(){function T(P){try{return m.parse(P)}catch(j){_(P,j)}}const g=E==null?void 0:E.getItem(i);if(g==null)return e;const F=T(g);return F==null?e:y(F)}if(!yt[h][i]){const T=$(),g=st(T,P=>{if(H&&h=="local"&&v){const j=x=>{if(x.key===i&&x.newValue){let N;try{N=m.parse(x.newValue)}catch(ee){_(x.newValue,ee);return}const Ie=y(N);P(Ie)}};return window.addEventListener("storage",j),()=>window.removeEventListener("storage",j)}}),{subscribe:F,set:C}=g;yt[h][i]={set(P){C(P),D(i,P)},update(P){return g.update(j=>{const x=P(j);return D(i,x),x})},reset(){this.set(e)},subscribe:F}}return yt[h][i]}function Ot(){return{collapseMode:"non-application",collapseCustomHide:"",collapseCustomShow:"",removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:.001,timeFormat:"absolute"}}const q=Ct("pyinstrument:viewOptionsCallStack",Ot(),{syncTabs:!0,beforeRead(i){return{...Ot(),...i}}}),Ze=Ct("pyinstrument:viewOptions",{viewMode:"call-stack"},{syncTabs:!1}),Xe=Ct("pyinstrument:viewOptionsTimeline",{removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:1e-4},{syncTabs:!0});function Di(i){let e,t,n,s,r,o,l,u,f,d,m,h,v,b,_,y,M,H,E,D,$,T,g,F,C,P,j,x,N,Ie,ee,J,Q,ke,U,Je,xe,le,G,et,te,de,he,be,me,Ce,tt,Ae,K,ze,Fe,it,z,V,Z,ni,ot,si,ri,We,Me,li,Ue,at,oi,ai,we,ci,ui,Ge,ct,fi,$e,ut,ft,ie,di,hi,dt,ht,ne,mi,Mt,Et,Pt,pi;return Mt=_t(i[5][0]),Et=_t(i[5][1]),{c(){e=p("div"),t=p("div"),n=p("div"),n.textContent="Collapse frames",s=w(),r=p("div"),o=p("div"),l=p("input"),u=w(),f=p("label"),d=I("Non-application code"),m=w(),h=p("div"),h.textContent=`Application code is anything run from outside the Python home
          directory.`,v=w(),b=p("div"),_=p("input"),y=w(),M=p("label"),H=I("Custom"),E=w(),D=p("div"),$=I(`Regex on the source file path.
          `),T=p("div"),g=p("label"),g.textContent="Show",F=w(),C=p("input"),P=w(),j=p("label"),j.textContent="Hide",x=w(),N=p("input"),Ie=I(`
          If neither match, non-application rule is used.`),ee=w(),J=p("div"),Q=p("input"),ke=w(),U=p("label"),Je=I("Disabled"),xe=w(),le=p("div"),G=p("div"),G.textContent="Remove frames",et=w(),te=p("div"),de=p("div"),he=p("input"),be=w(),me=p("label"),Ce=I("importlib machinery"),tt=w(),Ae=p("div"),K=p("input"),ze=w(),Fe=p("label"),it=I("Frames declaring __traceback_hide__"),z=w(),V=p("div"),Z=p("input"),ni=w(),ot=p("label"),si=I("pyinstrument frames"),ri=w(),We=p("div"),Me=p("input"),li=w(),Ue=p("span"),at=p("label"),oi=I("Frames with durations less than"),ai=w(),we=p("input"),ci=I(`
          % of the total time`),ui=w(),Ge=p("div"),ct=p("div"),ct.textContent="Time format",fi=w(),$e=p("div"),ut=p("div"),ft=p("label"),ie=p("input"),di=I(`
          Absolute time in seconds`),hi=w(),dt=p("div"),ht=p("label"),ne=p("input"),mi=I(`
          Percentage of the total run time`),a(n,"class","name svelte-1pecl4m"),a(l,"id",i[1]+"collapseModeAll"),a(l,"type","radio"),l.__value="non-application",oe(l,l.__value),a(l,"class","svelte-1pecl4m"),a(f,"for",i[1]+"collapseModeAll"),a(h,"class","description svelte-1pecl4m"),a(o,"class","option svelte-1pecl4m"),a(_,"id",i[1]+"collapseModeCustom"),a(_,"type","radio"),_.__value="custom",oe(_,_.__value),a(_,"class","svelte-1pecl4m"),a(M,"for",i[1]+"collapseModeCustom"),a(g,"for","collapseCustomShow"),a(g,"class","svelte-1pecl4m"),a(C,"id","collapseCustomShow"),a(C,"type","text"),a(C,"placeholder","myproject"),a(C,"spellcheck","false"),a(C,"autocapitalize","off"),a(C,"autocomplete","off"),a(C,"autocorrect","off"),a(C,"class","svelte-1pecl4m"),a(j,"for","collapseCustomHide"),a(j,"class","svelte-1pecl4m"),a(N,"id","collapseCustomHide"),a(N,"type","text"),a(N,"placeholder",".*/lib/.*"),a(N,"spellcheck","false"),a(N,"autocapitalize","off"),a(N,"autocomplete","off"),a(N,"autocorrect","off"),a(N,"class","svelte-1pecl4m"),a(T,"class","mini-input-grid svelte-1pecl4m"),a(D,"class","description svelte-1pecl4m"),a(b,"class","option svelte-1pecl4m"),a(Q,"id",i[1]+"collapseModeDisabled"),a(Q,"type","radio"),Q.__value="disabled",oe(Q,Q.__value),a(Q,"class","svelte-1pecl4m"),a(U,"for",i[1]+"collapseModeDisabled"),a(J,"class","option svelte-1pecl4m"),a(r,"class","body"),a(t,"class","option-group svelte-1pecl4m"),a(G,"class","name svelte-1pecl4m"),a(he,"id",i[1]+"removeImportlib"),a(he,"type","checkbox"),a(he,"class","svelte-1pecl4m"),a(me,"for",i[1]+"removeImportlib"),a(de,"class","option svelte-1pecl4m"),a(K,"id",i[1]+"removeTracebackHide"),a(K,"type","checkbox"),a(K,"class","svelte-1pecl4m"),a(Fe,"for",i[1]+"removeTracebackHide"),a(Ae,"class","option svelte-1pecl4m"),a(Z,"id",i[1]+"removePyinstrument"),a(Z,"type","checkbox"),a(Z,"class","svelte-1pecl4m"),a(ot,"for",i[1]+"removePyinstrument"),a(V,"class","option svelte-1pecl4m"),a(Me,"id",i[1]+"removeIrrelevant"),a(Me,"type","checkbox"),a(Me,"class","svelte-1pecl4m"),a(at,"for",i[1]+"removeIrrelevant"),a(we,"type","number"),we.value=i[2](),a(we,"min","0"),a(we,"max","99"),a(we,"step","0.01"),Y(we,"width","4em"),a(we,"class","svelte-1pecl4m"),a(We,"class","option svelte-1pecl4m"),a(te,"class","body"),a(le,"class","option-group svelte-1pecl4m"),a(ct,"class","name svelte-1pecl4m"),a(ie,"type","radio"),ie.__value="absolute",oe(ie,ie.__value),a(ie,"class","svelte-1pecl4m"),a(ut,"class","option svelte-1pecl4m"),a(ne,"type","radio"),ne.__value="proportion",oe(ne,ne.__value),a(ne,"class","svelte-1pecl4m"),a(dt,"class","option svelte-1pecl4m"),a($e,"class","body"),a(Ge,"class","option-group svelte-1pecl4m"),a(e,"class","view-options-call-stack svelte-1pecl4m"),Mt.p(ie,ne),Et.p(l,_,Q)},m(X,se){S(X,e,se),c(e,t),c(t,n),c(t,s),c(t,r),c(r,o),c(o,l),l.checked=l.__value===i[0].collapseMode,c(o,u),c(o,f),c(f,d),c(o,m),c(o,h),c(r,v),c(r,b),c(b,_),_.checked=_.__value===i[0].collapseMode,c(b,y),c(b,M),c(M,H),c(b,E),c(b,D),c(D,$),c(D,T),c(T,g),c(T,F),c(T,C),oe(C,i[0].collapseCustomShow),c(T,P),c(T,j),c(T,x),c(T,N),oe(N,i[0].collapseCustomHide),c(D,Ie),c(r,ee),c(r,J),c(J,Q),Q.checked=Q.__value===i[0].collapseMode,c(J,ke),c(J,U),c(U,Je),c(e,xe),c(e,le),c(le,G),c(le,et),c(le,te),c(te,de),c(de,he),he.checked=i[0].removeImportlib,c(de,be),c(de,me),c(me,Ce),c(te,tt),c(te,Ae),c(Ae,K),K.checked=i[0].removeTracebackHide,c(Ae,ze),c(Ae,Fe),c(Fe,it),c(te,z),c(te,V),c(V,Z),Z.checked=i[0].removePyinstrument,c(V,ni),c(V,ot),c(ot,si),c(te,ri),c(te,We),c(We,Me),Me.checked=i[0].removeIrrelevant,c(We,li),c(We,Ue),c(Ue,at),c(at,oi),c(Ue,ai),c(Ue,we),c(Ue,ci),c(e,ui),c(e,Ge),c(Ge,ct),c(Ge,fi),c(Ge,$e),c($e,ut),c(ut,ft),c(ft,ie),ie.checked=ie.__value===i[0].timeFormat,c(ft,di),c($e,hi),c($e,dt),c(dt,ht),c(ht,ne),ne.checked=ne.__value===i[0].timeFormat,c(ht,mi),Pt||(pi=[W(l,"change",i[4]),W(_,"change",i[6]),W(C,"input",i[7]),W(N,"input",i[8]),W(Q,"change",i[9]),W(he,"change",i[10]),W(K,"change",i[11]),W(Z,"change",i[12]),W(Me,"change",i[13]),W(we,"input",i[3]),W(ie,"change",i[14]),W(ne,"change",i[15])],Pt=!0)},p(X,[se]){se&1&&(l.checked=l.__value===X[0].collapseMode),se&1&&(_.checked=_.__value===X[0].collapseMode),se&1&&C.value!==X[0].collapseCustomShow&&oe(C,X[0].collapseCustomShow),se&1&&N.value!==X[0].collapseCustomHide&&oe(N,X[0].collapseCustomHide),se&1&&(Q.checked=Q.__value===X[0].collapseMode),se&1&&(he.checked=X[0].removeImportlib),se&1&&(K.checked=X[0].removeTracebackHide),se&1&&(Z.checked=X[0].removePyinstrument),se&1&&(Me.checked=X[0].removeIrrelevant),se&1&&(ie.checked=ie.__value===X[0].timeFormat),se&1&&(ne.checked=ne.__value===X[0].timeFormat)},i:k,o:k,d(X){X&&R(e),Mt.r(),Et.r(),Pt=!1,ve(pi)}}}function Oi(i,e,t){let n;_e(i,q,E=>t(0,n=E));const s=Math.random().toString(36).substring(4);function r(){return(n.removeIrrelevantThreshold*100).toLocaleString(void 0,{maximumFractionDigits:4})}function o(E){_i(q,n.removeIrrelevantThreshold=E.currentTarget.valueAsNumber/100,n)}const l=[[],[]];function u(){n.collapseMode=this.__value,q.set(n)}function f(){n.collapseMode=this.__value,q.set(n)}function d(){n.collapseCustomShow=this.value,q.set(n)}function m(){n.collapseCustomHide=this.value,q.set(n)}function h(){n.collapseMode=this.__value,q.set(n)}function v(){n.removeImportlib=this.checked,q.set(n)}function b(){n.removeTracebackHide=this.checked,q.set(n)}function _(){n.removePyinstrument=this.checked,q.set(n)}function y(){n.removeIrrelevant=this.checked,q.set(n)}function M(){n.timeFormat=this.__value,q.set(n)}function H(){n.timeFormat=this.__value,q.set(n)}return[n,s,r,o,u,l,f,d,m,h,v,b,_,y,M,H]}class Ni extends fe{constructor(e){super(),ue(this,e,Oi,Di,re,{})}}function Bi(i){let e,t,n,s,r,o,l,u,f,d,m,h,v,b,_,y,M,H,E,D,$,T,g,F;return{c(){e=p("div"),t=p("div"),n=p("div"),n.textContent="Remove frames",s=w(),r=p("div"),o=p("div"),l=p("input"),u=w(),f=p("label"),d=I("importlib machinery"),m=w(),h=p("div"),v=p("input"),b=w(),_=p("label"),y=I("Frames declaring __traceback_hide__"),M=w(),H=p("div"),E=p("input"),D=w(),$=p("label"),T=I("pyinstrument frames"),a(n,"class","name"),a(l,"id",i[1]+"removeImportlib"),a(l,"type","checkbox"),a(f,"for",i[1]+"removeImportlib"),a(o,"class","option"),a(v,"id",i[1]+"removeTracebackHide"),a(v,"type","checkbox"),a(_,"for",i[1]+"removeTracebackHide"),a(h,"class","option"),a(E,"id",i[1]+"removePyinstrument"),a(E,"type","checkbox"),a($,"for",i[1]+"removePyinstrument"),a(H,"class","option"),a(r,"class","body"),a(t,"class","option-group"),a(e,"class","view-options-timeline svelte-vsz8zm")},m(C,P){S(C,e,P),c(e,t),c(t,n),c(t,s),c(t,r),c(r,o),c(o,l),l.checked=i[0].removeImportlib,c(o,u),c(o,f),c(f,d),c(r,m),c(r,h),c(h,v),v.checked=i[0].removeTracebackHide,c(h,b),c(h,_),c(_,y),c(r,M),c(r,H),c(H,E),E.checked=i[0].removePyinstrument,c(H,D),c(H,$),c($,T),g||(F=[W(l,"change",i[2]),W(v,"change",i[3]),W(E,"change",i[4])],g=!0)},p(C,[P]){P&1&&(l.checked=C[0].removeImportlib),P&1&&(v.checked=C[0].removeTracebackHide),P&1&&(E.checked=C[0].removePyinstrument)},i:k,o:k,d(C){C&&R(e),g=!1,ve(F)}}}function zi(i,e,t){let n;_e(i,Xe,u=>t(0,n=u));const s=Math.random().toString(36).substring(4);function r(){n.removeImportlib=this.checked,Xe.set(n)}function o(){n.removeTracebackHide=this.checked,Xe.set(n)}function l(){n.removePyinstrument=this.checked,Xe.set(n)}return[n,s,r,o,l]}class Wi extends fe{constructor(e){super(),ue(this,e,zi,Bi,re,{})}}class Ui extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function Gi(i,e){const t=e*(i.length-1),n=Math.floor(t),s=Math.ceil(t),r=i[n],o=i[s],l=t-n;return ji(l,{to:[r,o]})}function $i(i,e,t){return i===1/0?(console.warn("clamp: value is Infinity, returning `max`",i),t):i===-1/0?(console.warn("clamp: value is -Infinity, returning `min`",i),e):Number.isFinite(i)?i<e?e:i>t?t:i:(console.warn("clamp: value isn't finite, returning `min`",i),e)}function Ne(i,e){const{from:t=[0,1],to:n=[0,1]}=e,s=e.clamp||!1;let r=(i-t[0])/(t[1]-t[0])*(n[1]-n[0])+n[0];return s&&(r=$i(r,Math.min(n[0],n[1]),Math.max(n[0],n[1]))),r}function ji(i,e){return`rgb(
      ${Ne(i,{from:e.from,to:[e.to[0][0],e.to[1][0]],clamp:e.clamp})},
      ${Ne(i,{from:e.from,to:[e.to[0][1],e.to[1][1]],clamp:e.clamp})},
      ${Ne(i,{from:e.from,to:[e.to[0][2],e.to[1][2]],clamp:e.clamp})}
    )`}function Qi(i){if(i.substr(0,1)=="#"){var e=(i.length-1)/3,t=[17,1,.062272][e-1];return[Math.round(parseInt(i.substr(1,e),16)*t),Math.round(parseInt(i.substr(1+e,e),16)*t),Math.round(parseInt(i.substr(1+2*e,e),16)*t)]}else return i.split("(")[1].split(")")[0].split(",").map(n=>+n)}function Zi(i,e,t={}){const{ignore:n=[],capture:s=!0}=t,r=window;if(!r)return()=>{};let o=!0,l=!1;const u=v=>n.some(b=>typeof b=="string"?Array.from(document.querySelectorAll(b)).some(_=>_===v.target||v.composedPath().includes(_)):b&&(v.target===b||v.composedPath().includes(b))),f=v=>{if(!(!i||i===v.target||v.composedPath().includes(i))){if(v.detail===0&&(o=!u(v)),!o){o=!0;return}e(v)}},d=v=>{l||(l=!0,setTimeout(()=>{l=!1},0),f(v))},m=v=>{o=!u(v)&&!!(i&&!v.composedPath().includes(i))};return r.addEventListener("click",d,{passive:!0,capture:s}),r.addEventListener("pointerdown",m,{passive:!0}),()=>{r.removeEventListener("click",d,{capture:s}),r.removeEventListener("pointerdown",m)}}function Xi(i){const e=document.createElement("div");return e.appendChild(document.createTextNode(i)),e.innerHTML}function At(i){return Xi(i).replace(/\//g,"/<wbr>")}function Yi(i){let e,t;return e=new Wi({}),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function qi(i){let e,t;return e=new Ni({}),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Ki(i){let e,t,n,s,r,o,l,u;const f=[qi,Yi],d=[];function m(h,v){return h[0].viewMode==="call-stack"?0:h[0].viewMode==="timeline"?1:-1}return~(o=m(i))&&(l=d[o]=f[o](i)),{c(){e=p("div"),t=p("div"),n=p("div"),s=I(i[2]),r=w(),l&&l.c(),a(n,"class","title svelte-f96okc"),a(t,"class","box svelte-f96okc"),a(e,"class","view-options svelte-f96okc")},m(h,v){S(h,e,v),c(e,t),c(t,n),c(n,s),c(t,r),~o&&d[o].m(t,null),i[3](t),u=!0},p(h,[v]){(!u||v&4)&&ye(s,h[2]);let b=o;o=m(h),o!==b&&(l&&(Ve(),O(d[b],1,1,()=>{d[b]=null}),De()),~o?(l=d[o],l||(l=d[o]=f[o](h),l.c()),L(l,1),l.m(t,null)):l=null)},i(h){u||(L(l),u=!0)},o(h){O(l),u=!1},d(h){h&&R(e),~o&&d[o].d(),i[3](null)}}}function Ji(i,e,t){let n;_e(i,Ze,f=>t(0,n=f));const s=yi();function r(){s("close")}let o;St(()=>{if(o)return Zi(o,r,{ignore:[".js-view-options-button"]})});let l="View options";function u(f){Se[f?"unshift":"push"](()=>{o=f,t(1,o)})}return i.$$.update=()=>{i.$$.dirty&1&&(n.viewMode==="call-stack"?t(2,l="Call stack view options"):n.viewMode==="timeline"&&t(2,l="Timeline view options"))},[n,o,l,u]}class xi extends fe{constructor(e){super(),ue(this,e,Ji,Ki,re,{})}}function Nt(i){let e,t;return e=new xi({}),e.$on("close",i[9]),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},p:k,i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function en(i){let e,t,n,s,r,o,l,u,f=At(i[0].target_description)+"",d,m,h,v,b,_,y,M,H,E,D,$,T,g=i[0].sampleCount+"",F,C,P,j,x,N,Ie,ee,J,Q,ke,U,Je,xe,le,G,et,te,de,he,be,me,Ce,tt,Ae,K,ze,Fe,it;r=new Hi({}),Ce=new Ri({});let z=i[1]&&Nt(i);return ze=_t(i[7][0]),{c(){e=p("div"),t=p("div"),n=p("div"),s=p("div"),ge(r.$$.fragment),o=w(),l=p("div"),u=p("div"),d=w(),m=p("div"),h=p("div"),v=p("span"),v.textContent="Recorded:",b=w(),_=p("span"),_.textContent=`${i[3]}`,y=w(),M=p("br"),H=w(),E=p("div"),D=p("span"),D.textContent="Samples:",$=w(),T=p("span"),F=I(g),C=w(),P=p("div"),j=p("span"),j.textContent="CPU utilization:",x=w(),N=p("span"),N.textContent=`${(i[4]*100).toFixed(0)}%`,Ie=w(),ee=p("div"),J=p("div"),Q=I(`View:
            `),ke=p("label"),U=p("input"),Je=I(`
              Call stack`),xe=w(),le=p("label"),G=p("input"),et=I(`
              Timeline`),te=w(),de=p("div"),he=w(),be=p("div"),me=p("button"),ge(Ce.$$.fragment),tt=I(`
              View options`),Ae=w(),z&&z.c(),a(s,"class","logo svelte-1u5a81f"),a(u,"class","target-description svelte-1u5a81f"),a(v,"class","metric-label svelte-1u5a81f"),a(_,"class","metric-value svelte-1u5a81f"),a(h,"class","metric date svelte-1u5a81f"),a(M,"class","svelte-1u5a81f"),a(D,"class","metric-label svelte-1u5a81f"),a(T,"class","metric-value svelte-1u5a81f"),a(E,"class","metric svelte-1u5a81f"),a(j,"class","metric-label svelte-1u5a81f"),a(N,"class","metric-value svelte-1u5a81f"),a(P,"class","metric svelte-1u5a81f"),a(m,"class","metrics svelte-1u5a81f"),a(U,"type","radio"),U.__value="call-stack",oe(U,U.__value),a(U,"class","svelte-1u5a81f"),a(ke,"class","svelte-1u5a81f"),a(G,"type","radio"),G.__value="timeline",oe(G,G.__value),a(G,"class","svelte-1u5a81f"),a(le,"class","svelte-1u5a81f"),a(J,"class","toggle"),a(de,"class","spacer"),Y(de,"flex","1"),a(me,"class","js-view-options-button svelte-1u5a81f"),a(be,"class","button-container svelte-1u5a81f"),a(ee,"class","view-options svelte-1u5a81f"),a(l,"class","layout svelte-1u5a81f"),a(n,"class","row svelte-1u5a81f"),a(t,"class","margins"),a(e,"class","header svelte-1u5a81f"),ze.p(U,G)},m(V,Z){S(V,e,Z),c(e,t),c(t,n),c(n,s),ae(r,s,null),c(n,o),c(n,l),c(l,u),u.innerHTML=f,c(l,d),c(l,m),c(m,h),c(h,v),c(h,b),c(h,_),c(m,y),c(m,M),c(m,H),c(m,E),c(E,D),c(E,$),c(E,T),c(T,F),c(m,C),c(m,P),c(P,j),c(P,x),c(P,N),c(l,Ie),c(l,ee),c(ee,J),c(J,Q),c(J,ke),c(ke,U),U.checked=U.__value===i[2].viewMode,c(ke,Je),c(J,xe),c(J,le),c(le,G),G.checked=G.__value===i[2].viewMode,c(le,et),c(ee,te),c(ee,de),c(ee,he),c(ee,be),c(be,me),ae(Ce,me,null),c(me,tt),c(be,Ae),z&&z.m(be,null),K=!0,Fe||(it=[W(U,"change",i[6]),W(G,"change",i[8]),W(me,"click",vt(pt(i[5])))],Fe=!0)},p(V,[Z]){(!K||Z&1)&&f!==(f=At(V[0].target_description)+"")&&(u.innerHTML=f),(!K||Z&1)&&g!==(g=V[0].sampleCount+"")&&ye(F,g),Z&4&&(U.checked=U.__value===V[2].viewMode),Z&4&&(G.checked=G.__value===V[2].viewMode),V[1]?z?(z.p(V,Z),Z&2&&L(z,1)):(z=Nt(V),z.c(),L(z,1),z.m(be,null)):z&&(Ve(),O(z,1,1,()=>{z=null}),De())},i(V){K||(L(r.$$.fragment,V),L(Ce.$$.fragment,V),L(z),K=!0)},o(V){O(r.$$.fragment,V),O(Ce.$$.fragment,V),O(z),K=!1},d(V){V&&R(e),ce(r),ce(Ce),z&&z.d(),ze.r(),Fe=!1,ve(it)}}}function tn(i,e,t){let n;_e(i,Ze,v=>t(2,n=v));let{session:s}=e;const r=new Date(s.startTime*1e3).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"}),o=s.cpuTime/s.duration;let l=!1;function u(v){t(1,l=!l)}const f=[[]];function d(){n.viewMode=this.__value,Ze.set(n)}function m(){n.viewMode=this.__value,Ze.set(n)}const h=()=>t(1,l=!1);return i.$$set=v=>{"session"in v&&t(0,s=v.session)},[s,l,n,r,o,u,d,f,m,h]}class nn extends fe{constructor(e){super(),ue(this,e,tn,en,re,{session:0})}}const sn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWmSURBVHgBtVc7i11VFF5rn3PvPKoLFlqmDGPhaGVpJQoWAZEEGxERFBsDgnY6KFpaWWrQysRGf4BgmSKQFCKWKQMKTqNzz2svv/XY55ybeycTCw+z736cs/f61rdee5hmz/Hx85c66m4QyTEzrdAo4cd6EuuJ2P4wtbmUgfZkCyRoWVcwyMI29ybW47sfhRfXf793+z4X4ZchPEl3F2esElYrbRVaEjQGEKGE3jcUofGwlIEBygoACAa0fmDrdV4AOAg6FV4+W49nUPdlEW4AElGNtqjZ+hqIdI2NAC7KuvAZloyJCR+IukGmF5A6iH/IbEBWLN2NevbBFQ6tCoAF3u7VggYQtQJyFlygOAADI74Jf669QDiWWh6xFRMUgLF6PAGYkcgGgGkBE/x8AiSVaykG0AUxlgm7BY0BUMAQL8R77LM96F98A98kBeu+kAdlgA0MntUGACmOFDQl5sm+Rai6lwpMLtiEgSVGE8wVFBkAB7XcU+rdJOoLSU0x8Aii3ta/0AWqMHjlM6LDPaYDHLSsnRn9pjMny2jBCDSu9H3tDqpCmw4C6lgHqAQmWB05uwwF8RCAQpU7jIbQYCElBsjAlabfqJdnD7lKwzVcIVVOgmKpF2g921pS8/QRvuETmwDEKZdwFHMocYHffYSfBc0opojVIomjx/dY64CkxVktMsgar16/IhbKygANruwWA+YDkURUcNHQaK5ps1XhBwaAzf6M9YzWq3Ac1EKACm80cB8KV6IdPsCR0aQAMBAaUkxXPyU6WDqlypKaSEOtmCCpDyAKFgu1gSecrhdar4n++VsiGUVWDHUpdJkYEPEkEyDc7paHTShXbkuNhqQfaF5wMt16lff69JYFFYT3A8AYgFxku5xtBtw9R7YsEiH85hcYLIsfuO0lfCCHvTtMWxszNRhDebp+LRsTGobFr0zBiO5tBnhWaZgiDwD5gi3Wiw+YcDAwoDfB+MaFq83RsP8M5zSYdFjsBwfh9YAjErbyQLHNVNUsH2Dl2odCh4dE+0vQXjtI9YG2z05zOKvSbdR3eKdtLTbugVKzoOQxC+7KA5NtJPiXEZaH5xDglMrOBMHTWxdWhA/QVqtgEdx3EtVwSkDOxE4GHESpCZzcHLe+4gg3HA7P69jpfvutTA0GTQNNkXAs5UYJVjC593keik/JBohzALjQsXbrJtRksRgntzm7nVX4GnZumtC4D23N4aIAZWdv9LyZv+3IA87AlHY1HQu9+q7Qwb7nAQ01FbQ+g5NBaNOKA2jdD0bg4+UjzCrbqu6IgrLB6aLRF6KWB0ZNUj15QvLCRVa8PNanqiq7pM7kbVXDEvdaipMmHIRfBa2//aYC9WI5vjH6ydLsB1ezpePiK9PhYcoLnjSK5kljNUWqvXppKdVxo4XFhIsJ93gXy/8clxIvt0X7i4XrU8+1D+wGgKPGW/UCzHfew9VsXywVZxbz8GYdKqS4rCTfZ/NZvD8WA/Yxu/aW661F7q+cIbsXVO6EcVf3b0t9SIXFx9N+kwEO3w8QVmhggq+/9xSroVdiv5TZlr0SanL6/KXOK5SaL9b/G4DRdDzONZbPuAjXS4bnfPWBPrJkjhzpYbdR8OeXz62nvBt3HD3z3F/2f0Fyx9O7XL2HAoj7YG33AK8Bag4TrJlOa0DrrVtrj7DsPBtKlgstsZGIcOW+B0wvlMP1EOqcCh1rTldb+/Xcw2woqbaLeh/Vbl7vH/Vgx08TABrehO53ccJKK1ZWP+gjpRqAKdaN8jxLs5r7Bx5TMBm18kjxOOZ0ub/3flUW/nzw4PSJp568CT0vYXq5aGJgslc4o7doPI6dcis2eUq950Ug1DqF9NvQ/uVf79y5v+E1IptedEInNj+iT2L9Nfv9jf7gI/pFdP4D5rfoaYw/Lv+pReVRq/JOEEXOee/PAf7/PP8C3bt510T4rIwAAAAASUVORK5CYII=",Bt=st({}),zt=st({});function Wt(i){return i>.6?"#FF4159":i>.3?"#F5A623":i>.2?"#D8CB2A":"#7ED321"}function Ut(i,e,t){const n=i.slice();return n[19]=e[t],n}function Gt(i){let e,t,n,s,r,o,l,u,f,d,m,h,v,b;return{c(){e=p("div"),t=p("div"),n=B("svg"),s=B("path"),r=w(),o=p("div"),l=I(i[5]),u=w(),f=p("div"),d=I(i[4]),m=w(),h=p("div"),h.textContent=`${i[11]}`,a(s,"d","M.937-.016L5.793 4.84.937 9.696z"),a(s,"fill",i[7]),a(s,"fill-rule","evenodd"),a(s,"fill-opacity",".582"),a(n,"width","6"),a(n,"height","10"),a(t,"class","frame-triangle svelte-1hxft88"),Te(t,"rotate",!i[9]),Y(t,"visibility",i[0].children.length>0?"visible":"hidden"),a(o,"class","time svelte-1hxft88"),Y(o,"color",i[7]),Y(o,"font-weight",i[10]<.2?500:600),a(f,"class","name svelte-1hxft88"),a(h,"class","code-position svelte-1hxft88"),a(e,"class","frame-description svelte-1hxft88"),Te(e,"application-code",i[0].isApplicationCode),Te(e,"children-visible",!i[9]),Y(e,"padding-left",`${i[2]*35}px`)},m(_,y){S(_,e,y),c(e,t),c(t,n),c(n,s),c(e,r),c(e,o),c(o,l),c(e,u),c(e,f),c(f,d),c(e,m),c(e,h),v||(b=W(e,"click",vt(pt(i[12]))),v=!0)},p(_,y){y&128&&a(s,"fill",_[7]),y&512&&Te(t,"rotate",!_[9]),y&1&&Y(t,"visibility",_[0].children.length>0?"visible":"hidden"),y&32&&ye(l,_[5]),y&128&&Y(o,"color",_[7]),y&16&&ye(d,_[4]),y&1&&Te(e,"application-code",_[0].isApplicationCode),y&512&&Te(e,"children-visible",!_[9]),y&4&&Y(e,"padding-left",`${_[2]*35}px`)},d(_){_&&R(e),v=!1,b()}}}function $t(i){let e,t,n,s,r=i[0].group.frames.length+"",o,l,u,f,d,m;return{c(){e=p("div"),t=p("div"),n=p("div"),n.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',s=w(),o=I(r),l=I(` frames hidden
        (`),u=I(i[6]),f=I(")"),a(n,"class","group-triangle svelte-1hxft88"),Te(n,"rotate",i[8]),a(t,"class","group-header-button svelte-1hxft88"),a(e,"class","group-header svelte-1hxft88"),Y(e,"padding-left",`${i[2]*35}px`)},m(h,v){S(h,e,v),c(e,t),c(t,n),c(t,s),c(t,o),c(t,l),c(t,u),c(t,f),d||(m=W(e,"click",vt(pt(i[13]))),d=!0)},p(h,v){v&256&&Te(n,"rotate",h[8]),v&1&&r!==(r=h[0].group.frames.length+"")&&ye(o,r),v&64&&ye(u,h[6]),v&4&&Y(e,"padding-left",`${h[2]*35}px`)},d(h){h&&R(e),d=!1,m()}}}function jt(i){let e,t=[],n=new Map,s,r=Vt(i[0].children);const o=l=>l[19].uuid;for(let l=0;l<r.length;l+=1){let u=Ut(i,r,l),f=o(u);n.set(f,t[l]=Qt(f,u))}return{c(){e=p("div");for(let l=0;l<t.length;l+=1)t[l].c();a(e,"class","children svelte-1hxft88")},m(l,u){S(l,e,u);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(l,u){u&15&&(r=Vt(l[0].children),Ve(),t=Mi(t,u,o,1,l,r,n,e,Fi,Qt,null,Ut),De())},i(l){if(!s){for(let u=0;u<r.length;u+=1)L(t[u]);s=!0}},o(l){for(let u=0;u<t.length;u+=1)O(t[u]);s=!1},d(l){l&&R(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function Qt(i,e){let t,n,s;return n=new Zt({props:{frame:e[19],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:i,first:null,c(){t=gi(),ge(n.$$.fragment),this.first=t},m(r,o){S(r,t,o),ae(n,r,o),s=!0},p(r,o){e=r;const l={};o&1&&(l.frame=e[19]),o&2&&(l.rootFrame=e[1]),o&12&&(l.indent=e[2]+(e[3]?1:0)),n.$set(l)},i(r){s||(L(n.$$.fragment,r),s=!0)},o(r){O(n.$$.fragment,r),s=!1},d(r){r&&R(t),ce(n,r)}}}function rn(i){let e,t,n,s,r,o,l=i[3]&&Gt(i),u=i[0].group&&i[0].group.rootFrame==i[0]&&!i[9]&&$t(i),f=!i[9]&&i[0].children.length>0&&jt(i);return{c(){e=p("div"),l&&l.c(),t=w(),u&&u.c(),n=w(),f&&f.c(),s=w(),r=p("div"),r.innerHTML="",a(r,"class","visual-guide svelte-1hxft88"),Y(r,"left",`${i[2]*35+21}px`),Y(r,"backgroundColor",i[7]),a(e,"class","frame svelte-1hxft88")},m(d,m){S(d,e,m),l&&l.m(e,null),c(e,t),u&&u.m(e,null),c(e,n),f&&f.m(e,null),c(e,s),c(e,r),o=!0},p(d,[m]){d[3]?l?l.p(d,m):(l=Gt(d),l.c(),l.m(e,t)):l&&(l.d(1),l=null),d[0].group&&d[0].group.rootFrame==d[0]&&!d[9]?u?u.p(d,m):(u=$t(d),u.c(),u.m(e,n)):u&&(u.d(1),u=null),!d[9]&&d[0].children.length>0?f?(f.p(d,m),m&513&&L(f,1)):(f=jt(d),f.c(),L(f,1),f.m(e,s)):f&&(Ve(),O(f,1,1,()=>{f=null}),De()),m&4&&Y(r,"left",`${d[2]*35+21}px`),m&128&&Y(r,"backgroundColor",d[7])},i(d){o||(L(f),o=!0)},o(d){O(f),o=!1},d(d){d&&R(e),l&&l.d(),u&&u.d(),f&&f.d()}}}function ln(i,e,t){var T;let n,s,r,o,l;_e(i,zt,g=>t(14,r=g)),_e(i,Bt,g=>t(15,o=g)),_e(i,q,g=>t(16,l=g));let{frame:u}=e,{rootFrame:f}=e,{indent:d=0}=e,m;const h=u.time/f.time;let v;const b=`${u.filePathShort}:${(T=u.lineNo)==null?void 0:T.toString().padEnd(4," ")}`;let _,y=null;if(u.group){const g=u.group.libraries;g.length<4?y=g.join(", "):y=`${g[0]}, ${g[1]}, ${g[2]}...`}let M;M=Wt(h);function H(g){E(u,!s,g.altKey)}function E(g,F,C=!0){if(zt.update(P=>({...P,[g.uuid]:F})),C)for(const P of g.children)E(P,F,!0),g.group&&g.group.rootFrame==g&&D(g.group.id,!F)}function D(g,F){Bt.update(C=>({...C,[g]:F}))}function $(){u.group&&D(u.group.id,!n)}return i.$$set=g=>{"frame"in g&&t(0,u=g.frame),"rootFrame"in g&&t(1,f=g.rootFrame),"indent"in g&&t(2,d=g.indent)},i.$$.update=()=>{var g,F;if(i.$$.dirty&32769&&(u.group?o[u.group.id??""]||((g=u.group)==null?void 0:g.rootFrame)===u||u.children.filter(C=>!C.group).length>1?t(3,m=!0):t(3,m=!1):t(3,m=!0)),i.$$.dirty&1&&(u.className?t(4,v=`${u.className}.${u.function}`):t(4,v=u.function)),i.$$.dirty&65537)if(l.timeFormat==="absolute")t(5,_=u.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(l.timeFormat==="proportion")t(5,_=`${(h*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");i.$$.dirty&32769&&t(8,n=o[((F=u.group)==null?void 0:F.id)??""]===!0),i.$$.dirty&16385&&t(9,s=r[u.uuid]===!0)},[u,f,d,m,v,_,y,M,n,s,h,b,H,$,r,o,l]}let Zt=class extends fe{constructor(e){super(),ue(this,e,ln,rn,re,{frame:0,rootFrame:1,indent:2})}};function Xt(i,e,t){let n=i;for(const s of e)if(n=s(n,t),!n)return null;return n}const on="\0",an="[await]",Ye="[self]",cn=[an,Ye,"[out-of-context]","[root]"],un="c",fn="h";class qe{constructor(e,t){A(this,"uuid",crypto.randomUUID());A(this,"identifier");A(this,"_identifierParts");A(this,"startTime");A(this,"time",0);A(this,"absorbedTime",0);A(this,"group",null);A(this,"attributes");A(this,"_children",[]);A(this,"parent",null);A(this,"context");var r;this.identifier=e.identifier,this._identifierParts=this.identifier.split(on),this.startTime=e.startTime??0,this.time=e.time??0,this.attributes=e.attributes??{},this.context=t;let n=this.startTime;const s=(r=e.children)==null?void 0:r.map(o=>(o.startTime===void 0&&(o={...o,startTime:n},n+=o.time??0),n=o.startTime+(o.time??0),new qe(o,t)));s&&this.addChildren(s)}cloneDeep(){return new qe(this,this.context)}get children(){return this._children}addChild(e,t={}){if(e.removeFromParent(),e.parent=this,t.after){const n=this._children.indexOf(t.after);if(n==-1)throw new Error("After frame not found");this._children.splice(n+1,0,e)}else this._children.push(e)}addChildren(e,t={}){e=e.slice(),t.after?(e.slice().reverse(),e.forEach(s=>this.addChild(s,t))):e.forEach(n=>this.addChild(n,t))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(n=>n.startsWith(e)).map(n=>({data:n.slice(1),time:this.attributes[n]}))}getAttributeValue(e){const t=this.getAttributes(e);if(!t||t.length==0)return null;let n=0;for(let s=0;s<t.length;s++)t[s].time>t[n].time&&(n=s);return t[n].data}get hasTracebackHide(){return this.getAttributeValue(fn)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return cn.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||["/lib/","\\lib\\"].some(n=>e.includes(n))?!1:e.startsWith("<")?!!e.startsWith("<ipython-input-"):!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue(un)??""}get library(){const e=this.filePathShort;return e?/^[^\\/.]*/.exec(e)[0]:null}}class dn{constructor(e){A(this,"id");A(this,"rootFrame");A(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const t=this._frames.indexOf(e);if(t===-1)throw new Error("Frame not found in group.");this._frames.splice(t,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const t of this.frames){let n=!1;for(const s of t.children)if(s.group!=this){n=!0;break}n&&e.push(t)}return e}get libraries(){const e=[];for(const t of this.frames){const n=t.library;n&&(e.includes(n)||e.push(n))}return e}}function rt(i,e){const{replaceWith:t}=e,n=i.parent;if(!n)throw new Error("Cannot delete the root frame");if(t=="children")n.addChildren(i.children,{after:i});else if(t=="self_time")n.addChild(new qe({identifier:Ye,time:i.time},n.context),{after:i});else if(t=="nothing")n.absorbedTime+=i.time;else throw new Ui(t);i.removeFromParent(),Tt(i,!0)}function hn(i,e){if(i.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=i.absorbedTime,e.time+=i.time,Object.entries(i.attributes).forEach(([t,n])=>{e.attributes[t]!==void 0?e.attributes[t]+=n:e.attributes[t]=n}),e.addChildren(i.children),i.removeFromParent(),Tt(i,!1)}function Tt(i,e){if(e&&i.children&&i.children.forEach(t=>{Tt(t,!0)}),i.group){const t=i.group;t.removeFrame(i),t.frames.length===1&&t.removeFrame(t.frames[0])}}function kt(i,e){if(!i)return null;for(const t of i.children)kt(t),t.filePath&&t.filePath.includes("<frozen importlib._bootstrap")&&rt(t,{replaceWith:"children"});return i}function Ft(i,e){if(!i)return null;for(const t of i.children)Ft(t),t.hasTracebackHide&&rt(t,{replaceWith:"children"});return i}function Yt(i,e){if(!i)return null;const t={};for(const n of i.children.slice())if(t[n.identifier]){const s=t[n.identifier];hn(n,s)}else t[n.identifier]=n;return i.children.forEach(n=>Yt(n)),i._children.sort((n,s)=>s.time-n.time),i}function qt(i,e){if(!i)return null;const t=e.hideRegex,n=e.showRegex;function s(o){const l=o.filePath||"",u=n&&new RegExp(n).test(l),f=t&&new RegExp(t).test(l);return u?!1:f?!0:!o.isApplicationCode}function r(o,l){l.addFrame(o),o.children.forEach(u=>{s(u)&&r(u,l)})}return i.children.forEach(o=>{if(!o.group&&s(o)&&o.children.some(s)){const l=new dn(o);r(o,l)}qt(o,e)}),i}function Kt(i,e,t=!0){if(!i)return null;let n=null;for(const s of i.children)s.identifier===Ye?n?(n.time+=s.time,s.removeFromParent()):n=s:n=null;return t&&i.children.forEach(s=>Kt(s,e,!0)),i}function Jt(i,e){return i?(i.children.length===1&&i.children[0].identifier===Ye&&rt(i.children[0],{replaceWith:"nothing"}),i.children.forEach(t=>Jt(t)),i):null}function xt(i,e,t=null){if(!i)return null;t===null&&(t=i.time,t<=0&&(t=1e-44));const n=e.filterThreshold??.01;for(const s of i.children.slice())s.time/t<n&&rt(s,{replaceWith:"nothing"});return i.children.forEach(s=>xt(s,e,t)),i}function ei(i,e){if(!i)return null;const t=o=>{var l;return((l=o.filePath)==null?void 0:l.includes("pyinstrument/__main__.py"))&&o.children.length>0},n=o=>{var l;return o.proportionOfParent>.8&&((l=o.filePath)==null?void 0:l.includes("<string>"))&&o.children.length>0},s=o=>{var l;return o.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(o.filePath??"")||((l=o.filePath)==null?void 0:l.includes("<frozen runpy>")))&&o.children.length>0};let r=i;if(!t(r)||(r=r.children[0],!n(r))||(r=r.children[0],!s(r)))return i;for(;s(r);)r=r.children[0];return r.removeFromParent(),r}function mn(i){let e,t;return e=new Zt({props:{frame:i[2],rootFrame:i[2]}}),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},p(n,s){const r={};s&4&&(r.frame=n[2]),s&4&&(r.rootFrame=n[2]),e.$set(r)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function pn(i){let e;return{c(){e=p("div"),e.textContent="All frames were filtered out.",a(e,"class","error")},m(t,n){S(t,e,n)},p:k,i:k,o:k,d(t){t&&R(e)}}}function vn(i){let e,t,n,s,r,o;const l=[pn,mn],u=[];function f(d,m){return d[2]?1:0}return s=f(i),r=u[s]=l[s](i),{c(){e=p("div"),t=p("div"),n=p("div"),r.c(),a(n,"class","margins"),a(t,"class","scroll-inner svelte-gly4tt"),a(e,"class","call-stack-view svelte-gly4tt")},m(d,m){S(d,e,m),c(e,t),c(t,n),u[s].m(n,null),i[6](t),i[7](e),o=!0},p(d,[m]){let h=s;s=f(d),s===h?u[s].p(d,m):(Ve(),O(u[h],1,1,()=>{u[h]=null}),De(),r=u[s],r?r.p(d,m):(r=u[s]=l[s](d),r.c()),L(r,1),r.m(n,null))},i(d){o||(L(r),o=!0)},o(d){O(r),o=!1},d(d){d&&R(e),u[s].d(),i[6](null),i[7](null)}}}function _n(i,e,t){let n,{session:s}=e;const r=Dt([q],([m])=>{const h=[m.removeImportlib?kt:null,m.removeTracebackHide?Ft:null,Kt,Yt,Jt,m.removeIrrelevant?xt:null,m.removePyinstrument?ei:null,m.collapseMode!=="disabled"?qt:null].filter(b=>b!==null),v={filterThreshold:m.removeIrrelevantThreshold,hideRegex:m.collapseMode=="custom"?m.collapseCustomHide:void 0,showRegex:m.collapseMode=="custom"?m.collapseCustomShow:void 0};return{processors:h,options:v}});_e(i,r,m=>t(5,n=m));let o,l;St(()=>{const m=o;if(!m)throw new Error("element not set");let h;return m.addEventListener("scroll",h=()=>{t(1,l.style.minHeight=`${m.scrollTop+m.clientHeight}px`,l)}),h(),()=>{m.removeEventListener("scroll",h)}});let u;function f(m){Se[m?"unshift":"push"](()=>{l=m,t(1,l)})}function d(m){Se[m?"unshift":"push"](()=>{o=m,t(0,o)})}return i.$$set=m=>{"session"in m&&t(4,s=m.session)},i.$$.update=()=>{i.$$.dirty&48&&t(2,u=Xt(s.rootFrame.cloneDeep(),n.processors,n.options))},[o,l,u,r,s,n,f,d]}class gn extends fe{constructor(e){super(),ue(this,e,_n,vn,re,{session:4})}}class bn{constructor(e){A(this,"mediaQueryList",null);this.onDevicePixelRatioChanged=e,this._onChange=this._onChange.bind(this),this.createMediaQueryList()}createMediaQueryList(){this.removeMediaQueryList();let e=`(resolution: ${window.devicePixelRatio}dppx)`;this.mediaQueryList=matchMedia(e),this.mediaQueryList.addEventListener("change",this._onChange)}removeMediaQueryList(){var e;(e=this.mediaQueryList)==null||e.removeEventListener("change",this._onChange),this.mediaQueryList=null}_onChange(e){this.onDevicePixelRatioChanged(),this.createMediaQueryList()}destroy(){this.removeMediaQueryList()}}class wn{constructor(e){A(this,"canvas");A(this,"_size_observer");A(this,"_devicePixelRatioObserver");A(this,"drawAnimationRequest",null);this.container=e,getComputedStyle(e).position!="absolute"&&(e.style.position="relative"),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.container.appendChild(this.canvas),this.setCanvasSize=this.setCanvasSize.bind(this),this._size_observer=new ResizeObserver(this.setCanvasSize),this._size_observer.observe(e),this._devicePixelRatioObserver=new bn(this.setCanvasSize),window.requestAnimationFrame(()=>{this.setCanvasSize()})}destroy(){this._size_observer.disconnect(),this._devicePixelRatioObserver.destroy(),this.canvas.remove(),this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null)}setNeedsRedraw(){this.drawAnimationRequest===null&&(this.drawAnimationRequest=window.requestAnimationFrame(()=>{this.drawAnimationRequest=null,this.canvasViewRedraw()}))}redrawIfNeeded(){this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null,this.canvasViewRedraw())}canvasViewRedraw(){const e=this.canvas.getContext("2d");e&&(e.resetTransform(),e.scale(window.devicePixelRatio,window.devicePixelRatio),this.redraw(e,{width:this.canvas.width/window.devicePixelRatio,height:this.canvas.height/window.devicePixelRatio}))}get width(){return this.canvas.width/window.devicePixelRatio}get height(){return this.canvas.height/window.devicePixelRatio}setCanvasSize(){const e=window.devicePixelRatio;this.canvas.height=this.container.clientHeight*e,this.canvas.width=this.container.clientWidth*e,this.canvasViewRedraw()}}function yn(i){let e,t=i[5]=="self"?"self":"time",n,s,r,o=i[6](i[1])+"";return{c(){e=p("div"),n=I(t),s=w(),r=p("div"),a(e,"class","label svelte-g3b3ic"),a(r,"class","time-val svelte-g3b3ic")},m(l,u){S(l,e,u),c(e,n),S(l,s,u),S(l,r,u),r.innerHTML=o},p(l,u){u&32&&t!==(t=l[5]=="self"?"self":"time")&&ye(n,t),u&2&&o!==(o=l[6](l[1])+"")&&(r.innerHTML=o)},d(l){l&&(R(e),R(s),R(r))}}}function Cn(i){let e,t,n,s,r=i[6](i[1])+"",o,l=i[2]/i[1]>.001&&ti(i);return{c(){e=p("div"),e.textContent="time",t=w(),n=p("div"),s=p("div"),o=w(),l&&l.c(),a(e,"class","label svelte-g3b3ic"),a(s,"class","time-val svelte-g3b3ic"),a(n,"class","time-row svelte-g3b3ic")},m(u,f){S(u,e,f),S(u,t,f),S(u,n,f),c(n,s),s.innerHTML=r,c(n,o),l&&l.m(n,null)},p(u,f){f&2&&r!==(r=u[6](u[1])+"")&&(s.innerHTML=r),u[2]/u[1]>.001?l?l.p(u,f):(l=ti(u),l.c(),l.m(n,null)):l&&(l.d(1),l=null)},d(u){u&&(R(e),R(t),R(n)),l&&l.d()}}}function ti(i){let e,t,n,s=i[6](i[2])+"";return{c(){e=p("div"),e.textContent="self",t=w(),n=p("div"),a(e,"class","label svelte-g3b3ic"),a(n,"class","time-val svelte-g3b3ic")},m(r,o){S(r,e,o),S(r,t,o),S(r,n,o),n.innerHTML=s},p(r,o){o&4&&s!==(s=r[6](r[2])+"")&&(n.innerHTML=s)},d(r){r&&(R(e),R(t),R(n))}}}function An(i){let e,t,n,s,r,o,l,u,f,d,m,h;function v(y,M){return y[5]=="both"?Cn:yn}let b=v(i),_=b(i);return{c(){e=p("div"),t=p("div"),n=I(i[0]),s=w(),_.c(),r=w(),o=p("div"),o.textContent="loc",l=w(),u=p("div"),f=p("div"),m=w(),h=p("div"),a(t,"class","name svelte-g3b3ic"),a(o,"class","label svelte-g3b3ic"),a(f,"class","location-color"),a(f,"style",d=`background: ${i[3]}`),a(u,"class","location-row"),a(e,"class","timeline-canvas-view-tooltip svelte-g3b3ic")},m(y,M){S(y,e,M),c(e,t),c(t,n),c(e,s),_.m(e,null),c(e,r),c(e,o),c(e,l),c(e,u),c(u,f),c(u,m),c(u,h),h.innerHTML=i[4]},p(y,[M]){M&1&&ye(n,y[0]),b===(b=v(y))&&_?_.p(y,M):(_.d(1),_=b(y),_&&(_.c(),_.m(e,r))),M&8&&d!==(d=`background: ${y[3]}`)&&a(f,"style",d),M&16&&(h.innerHTML=y[4])},i:k,o:k,d(y){y&&R(e),_.d()}}}function Tn(i,e,t){let{name:n}=e,{time:s}=e,{selfTime:r}=e,{totalTime:o}=e,{location:l}=e,{locationColor:u}=e,f,d;function m(h){return`<span style="color: ${Wt(h/o)}">${h.toFixed(3)}</span>`}return i.$$set=h=>{"name"in h&&t(0,n=h.name),"time"in h&&t(1,s=h.time),"selfTime"in h&&t(2,r=h.selfTime),"totalTime"in h&&t(7,o=h.totalTime),"location"in h&&t(8,l=h.location),"locationColor"in h&&t(3,u=h.locationColor)},i.$$.update=()=>{i.$$.dirty&256&&t(4,f=At(l)),i.$$.dirty&6&&(r==s?t(5,d="self"):r/s>.001?t(5,d="both"):t(5,d="time"))},[n,s,r,u,f,d,m,o,l]}class kn extends fe{constructor(e){super(),ue(this,e,Tn,An,re,{name:0,time:1,selfTime:2,totalTime:7,location:8,locationColor:3})}}const Fn="#212325",Mn=18,En=17,Ke=28,lt=17,Pn=29,In=["#47A298","#9FC175","#C1A731","#C07210","#B84210","#B53134","#9A3586","#4958B5","#3475BA","#318DBC","#47A298"].map(Qi);class Rn extends wn{constructor(t){super(t);A(this,"zoom",1);A(this,"startT",0);A(this,"frames",[]);A(this,"isZoomedIn",!1);A(this,"tooltipContainer");A(this,"tooltipComponent",null);A(this,"_rootFrame",null);A(this,"_frameMaxT");A(this,"lastDrawWidth",0);A(this,"lastDrawHeight",0);A(this,"mouseLocation",null);A(this,"_libraryOrder",null);A(this,"_colors",[]);this.onWheel=this.onWheel.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.canvas.addEventListener("wheel",this.onWheel),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseleave",this.onMouseLeave),this.tooltipContainer=document.createElement("div"),this.tooltipContainer.style.position="absolute",this.tooltipContainer.style.pointerEvents="none",this.container.appendChild(this.tooltipContainer)}destroy(){super.destroy(),this.canvas.removeEventListener("wheel",this.onWheel)}setRootFrame(t){this.frames=[],this._frameMaxT=void 0,this._collectFrames(t,0),this.fitContents(),this.setNeedsRedraw()}_collectFrames(t,n){this.frames.push({frame:t,depth:n,isApplicationCode:t.isApplicationCode,library:t.library,className:t.className,filePathShort:t.filePathShort});for(const s of t.children)s.identifier!==Ye&&this._collectFrames(s,n+1)}get frameMaxT(){return this._frameMaxT===void 0&&(this._frameMaxT=this.frames.reduce((t,n)=>Math.max(t,n.frame.startTime+n.frame.time),0)),this._frameMaxT}get minZoom(){return(this.width-2*Ke)/this.frameMaxT}get maxZoom(){return 6666666666666667e-8}fitContents(){this.startT=0,this.zoom=this.minZoom,this.isZoomedIn=!1}clampViewport(){this.zoom<this.minZoom?(this.zoom=this.minZoom,this.isZoomedIn=!1):this.isZoomedIn=!0,this.zoom>this.maxZoom&&(this.zoom=this.maxZoom),this.startT<0&&(this.startT=0);const t=this.frameMaxT-(this.width-2*Ke)/this.zoom;this.startT>t&&(this.startT=t)}redraw(t,n){var l,u;const{width:s,height:r}=n;(s!==this.lastDrawWidth||r!==this.lastDrawHeight)&&(this.isZoomedIn?this.clampViewport():this.fitContents()),this.lastDrawWidth=s,this.lastDrawHeight=r,t.fillStyle=Fn,t.fillRect(0,0,s,r),this.drawAxes(t);for(const f of this.frames)this.drawFrame(t,f);t.globalAlpha=1,t.fillStyle="red",t.font='23px "Source Sans Pro", sans-serif';const o=this.hitTest(((l=this.mouseLocation)==null?void 0:l.x)??0,((u=this.mouseLocation)==null?void 0:u.y)??0);this.updateTooltip(o)}drawAxes(t){const n=this.width/this.zoom;if(n==0)return;const s=Math.log10(n);let r=Math.ceil(s)+2;r<0&&(r=0);const o=Math.ceil(s)-3,l=u=>Ne(u,{from:[s,s-3],to:[.71,0]});for(let u=o;u<r;u++){let f=l(u);f=Math.max(0,Math.min(1,f)),f=Math.pow(f,2),this.drawAxis(t,Math.pow(10,u),f)}this.drawAxis(t,Math.pow(10,r),l(r),!0)}drawAxis(t,n,s,r=!1){t.fillStyle="white";const o=Math.floor(this.startT/n)*n,l=this.startT+this.width/this.zoom,u=Math.max(0,Math.ceil(-Math.log10(n)));for(let f=o;f<l;f+=n){const d=this.xForT(f);if(Math.round(f/n)%10===0&&!r)continue;t.globalAlpha=s,t.fillRect(d,lt,1,this.height-lt);const h=Ne(s,{from:[.12,.25],to:[0,.5],clamp:!0});if(h>.01){t.globalAlpha=h,t.font='13px "Source Sans Pro", sans-serif';let v=f.toFixed(u);v=="0"&&(v="0s"),t.fillText(v,d+3,lt+10)}t.globalAlpha=1}}drawFrame(t,n){const{x:s,y:r,w:o,h:l}=this.frameDims(n);if(!(s+o<0||s>this.width)){if(t.fillStyle=this.colorForFrame(n),t.globalAlpha=n.isApplicationCode?1:.5,o<2){t.fillRect(s,r,o,l);return}if(t.save(),t.beginPath(),t.rect(s,r,o,l),t.fill(),t.clip(),o>2){t.font='13px "Source Sans Pro", sans-serif',t.fillStyle="white";let f=this.frameName(n),d=s;d<0&&(d=0);const m=Math.floor(o/3.3);f.length>m&&(f=f.substring(0,m)),t.fillText(f,d+2,r+13)}t.restore()}}frameDims(t){const n=t.depth*Mn+lt+Pn,s=En;let r=this.xForT(t.frame.startTime),l=this.xForT(t.frame.startTime+t.frame.time)-r;return l<1&&(l=1),l>1&&(l-=Ne(l,{from:[1,3],to:[0,1],clamp:!0})),{x:r,y:n,w:l,h:s}}xForT(t){return(t-this.startT)*this.zoom+Ke}tForX(t){return(t-Ke)/this.zoom+this.startT}frameName(t){let n;return t.className?n=`${t.className}.${t.frame.function}`:t.frame.function=="<module>"?n=t.filePathShort??t.frame.filePath??"":n=t.frame.function,n}frameSelfTime(t){let n=t.frame.time;const s=t.frame.children.filter(r=>!r.isSynthetic);for(const r of s)n-=r.time;return n}hitTest(t,n){for(const s of this.frames){const{x:r,y:o,w:l,h:u}=this.frameDims(s);if(t>=r&&t<=r+l&&n>=o&&n<=o+u)return s}return null}onWheel(t){const n=t.ctrlKey||t.metaKey,s=n?.01:.0023,r=this.tForX(t.offsetX);this.zoom*=1-t.deltaY*s,this.clampViewport(),this.startT=r-(t.offsetX-Ke)/this.zoom,n||(this.startT+=t.deltaX/this.zoom),this.clampViewport(),this.setNeedsRedraw(),t.preventDefault()}onMouseMove(t){this.mouseLocation={x:t.offsetX,y:t.offsetY},this.setNeedsRedraw()}onMouseLeave(t){this.mouseLocation=null,this.setNeedsRedraw()}_assignLibraryOrder(){const t={};for(const s of this.frames){const o=s.frame.library??"";t[o]=(t[o]||0)+1}const n=Object.keys(t);n.sort((s,r)=>t[r]-t[s]),this._libraryOrder=n}colorForLibraryIndex(t){if(this._colors[t]!==void 0)return this._colors[t];const n=Math.pow(2,Math.ceil(Math.log2(t+1))),r=(2*t-n+1)/n,o=Gi(In,r);return this._colors[t]=o,o}libraryIndexForFrame(t){this._libraryOrder||this._assignLibraryOrder();const n=t.library||"";let s=this._libraryOrder.indexOf(n);return s===-1&&(s=this._libraryOrder.length,this._libraryOrder.push(n)),s}colorForFrame(t){const n=this.libraryIndexForFrame(t);return this.colorForLibraryIndex(n)}updateTooltip(t){var n;if(t){const s={name:this.frameName(t),time:t.frame.time,selfTime:this.frameSelfTime(t),totalTime:((n=this._rootFrame)==null?void 0:n.time)??1e-12,location:`${t.filePathShort}:${t.frame.lineNo}`,locationColor:this.colorForFrame(t)};this.tooltipComponent?this.tooltipComponent.$set(s):this.tooltipComponent=new kn({target:this.tooltipContainer,props:s})}}}function Sn(i){let e;return{c(){e=p("div"),e.innerHTML="",a(e,"class","timeline svelte-1ekyre4")},m(t,n){S(t,e,n),i[6](e)},p:k,i:k,o:k,d(t){t&&R(e),i[6](null)}}}function Hn(i,e,t){let n,{session:s}=e;const r=Dt([Xe],([d])=>({processors:[d.removeImportlib?kt:null,d.removeTracebackHide?Ft:null,d.removePyinstrument?ei:null].filter(v=>v!==null),options:{}}));_e(i,r,d=>t(5,n=d));let o,l=null,u=null;function f(d){Se[d?"unshift":"push"](()=>{l=d,t(0,l)})}return i.$$set=d=>{"session"in d&&t(2,s=d.session)},i.$$.update=()=>{i.$$.dirty&36&&t(3,o=Xt(s.rootFrame.cloneDeep(),n.processors,n.options)),i.$$.dirty&1&&l&&t(4,u=new Rn(l)),i.$$.dirty&24&&o&&u&&u.setRootFrame(o)},[l,r,s,o,u,n,f]}class Ln extends fe{constructor(e){super(),ue(this,e,Hn,Sn,re,{session:2})}}function Vn(i){let e,t,n=i[1].viewMode+"",s;return{c(){e=p("div"),t=I("Unknown view mode: "),s=I(n),a(e,"class","error")},m(r,o){S(r,e,o),c(e,t),c(e,s)},p(r,o){o&2&&n!==(n=r[1].viewMode+"")&&ye(s,n)},i:k,o:k,d(r){r&&R(e)}}}function Dn(i){let e,t;return e=new Ln({props:{session:i[0]}}),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.session=n[0]),e.$set(r)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function On(i){let e,t;return e=new gn({props:{session:i[0]}}),{c(){ge(e.$$.fragment)},m(n,s){ae(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.session=n[0]),e.$set(r)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Nn(i){let e;return{c(){e=p("div"),e.innerHTML='<div class="spacer" style="height: 20px;"></div> <div class="error">No samples recorded.</div>',a(e,"class","margins")},m(t,n){S(t,e,n)},p:k,i:k,o:k,d(t){t&&R(e)}}}function Bn(i){let e,t,n,s,r,o,l,u;n=new nn({props:{session:i[0]}});const f=[Nn,On,Dn,Vn],d=[];function m(h,v){return h[0].rootFrame?h[1].viewMode==="call-stack"?1:h[1].viewMode==="timeline"?2:3:0}return o=m(i),l=d[o]=f[o](i),{c(){e=p("div"),t=p("div"),ge(n.$$.fragment),s=w(),r=p("div"),l.c(),a(t,"class","header"),a(r,"class","body svelte-15bv5h8"),a(e,"class","app svelte-15bv5h8")},m(h,v){S(h,e,v),c(e,t),ae(n,t,null),c(e,s),c(e,r),d[o].m(r,null),u=!0},p(h,[v]){const b={};v&1&&(b.session=h[0]),n.$set(b);let _=o;o=m(h),o===_?d[o].p(h,v):(Ve(),O(d[_],1,1,()=>{d[_]=null}),De(),l=d[o],l?l.p(h,v):(l=d[o]=f[o](h),l.c()),L(l,1),l.m(r,null))},i(h){u||(L(n.$$.fragment,h),L(l),u=!0)},o(h){O(n.$$.fragment,h),O(l),u=!1},d(h){h&&R(e),ce(n),d[o].d()}}}function zn(i,e,t){let n;_e(i,Ze,m=>t(1,n=m));let{session:s}=e;const r=document.createElement("link");r.rel="shortut icon",r.href=sn,document.head.appendChild(r);const o=document.createElement("link");o.rel="preload",o.as="style",o.onload=()=>{o.rel="stylesheet"},o.href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600|Source+Sans+Pro:400,600&display=swap",document.head.appendChild(o);const l=s.rootFrame,u=l==null?void 0:l.time.toLocaleString(void 0,{maximumSignificantDigits:3});s.target_description="Block at /Users/joerick/Projects/pyinstrument/pyinstrument/console.py:80";let f,d;return(d=/[^\s/]+(:\d+)?$/.exec(s.target_description))?f=d[0]:f=s.target_description,document.title=`${u}s - ${f} - pyinstrument`,i.$$set=m=>{"session"in m&&t(0,s=m.session)},[s,n]}class Wn extends fe{constructor(e){super(),ue(this,e,zn,Bn,re,{session:0})}}class Un{constructor(e){A(this,"startTime");A(this,"duration");A(this,"sampleCount");A(this,"target_description");A(this,"cpuTime");A(this,"rootFrame");A(this,"sysPath");A(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.target_description=e.session.target_description,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.rootFrame=new qe(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let t=e;if(Be(e).length>1)for(const s of this.sysPath){const r=Gn(e,s);Be(r).length<Be(t).length&&(t=r)}return this._shortenPathCache[e]=t,t}}function Be(i){return i.split(/[/\\]/)}function ii(i){const e=Be(i);return e.length>0&&e[0].endsWith(":")?e[0]:null}function Gn(i,e){if(ii(i)!=ii(e))return i;const t=Be(i),n=Be(e);let s=0;for(;s<t.length&&s<n.length&&t[s]==n[s];)s++;return n.slice(s).map(o=>"..").concat(t.slice(s)).join("/")}return{render(i,e){const t=new Un(e);return new Wn({target:i,props:{session:t}})}}}();
