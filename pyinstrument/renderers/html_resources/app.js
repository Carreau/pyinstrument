var pyinstrumentHTMLRenderer=function(){"use strict";var Yi=Object.defineProperty;var Xi=(y,X,pe)=>X in y?Yi(y,X,{enumerable:!0,configurable:!0,writable:!0,value:pe}):y[X]=pe;var b=(y,X,pe)=>Xi(y,typeof X!="symbol"?X+"":X,pe);function y(){}function X(i){return i()}function pe(){return Object.create(null)}function se(i){i.forEach(X)}function ze(i){return typeof i=="function"}function K(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function St(i){return Object.keys(i).length===0}function nt(i,...e){if(i==null){for(const n of e)n(void 0);return y}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ae(i,e,t){i.$$.on_destroy.push(nt(e,t))}function f(i,e){i.appendChild(e)}function H(i,e,t){i.insertBefore(e,t||null)}function V(i){i.parentNode&&i.parentNode.removeChild(i)}function g(i){return document.createElement(i)}function O(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function I(i){return document.createTextNode(i)}function E(){return I(" ")}function $t(){return I("")}function J(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function We(i){return function(e){return e.preventDefault(),i.call(this,e)}}function Ue(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function a(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function rt(i){let e;return{p(...t){e=t,e.forEach(n=>i.push(n))},r(){e.forEach(t=>i.splice(i.indexOf(t),1))}}}function Vt(i){return Array.from(i.childNodes)}function ce(i,e){e=""+e,i.data!==e&&(i.data=e)}function le(i,e){i.value=e??""}function U(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,"")}function ue(i,e,t){i.classList.toggle(e,!!t)}function Ot(i,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(i,{detail:e,bubbles:t,cancelable:n})}let ke;function Ie(i){ke=i}function Ge(){if(!ke)throw new Error("Function called outside component initialization");return ke}function st(i){Ge().$$.on_mount.push(i)}function Dt(i){Ge().$$.on_destroy.push(i)}function Ht(){const i=Ge();return(e,t,{cancelable:n=!1}={})=>{const r=i.$$.callbacks[e];if(r){const s=Ot(e,t,{cancelable:n});return r.slice().forEach(l=>{l.call(i,s)}),!s.defaultPrevented}return!0}}const _e=[],De=[];let we=[];const lt=[],Lt=Promise.resolve();let qe=!1;function Bt(){qe||(qe=!0,Lt.then(ot))}function je(i){we.push(i)}const xe=new Set;let be=0;function ot(){if(be!==0)return;const i=ke;do{try{for(;be<_e.length;){const e=_e[be];be++,Ie(e),Nt(e.$$)}}catch(e){throw _e.length=0,be=0,e}for(Ie(null),_e.length=0,be=0;De.length;)De.pop()();for(let e=0;e<we.length;e+=1){const t=we[e];xe.has(t)||(xe.add(t),t())}we.length=0}while(_e.length);for(;lt.length;)lt.pop()();qe=!1,xe.clear(),Ie(i)}function Nt(i){if(i.fragment!==null){i.update(),se(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(je)}}function zt(i){const e=[],t=[];we.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),we=e}const He=new Set;let me;function ye(){me={r:0,c:[],p:me}}function Ae(){me.r||se(me.c),me=me.p}function M(i,e){i&&i.i&&(He.delete(i),i.i(e))}function S(i,e,t,n){if(i&&i.o){if(He.has(i))return;He.add(i),me.c.push(()=>{He.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function at(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Wt(i,e){S(i,1,1,()=>{e.delete(i.key)})}function Ut(i,e,t,n,r,s,l,o,c,u,d,h){let p=i.length,v=s.length,_=p;const w={};for(;_--;)w[i[_].key]=_;const A=[],R=new Map,L=new Map,N=[];for(_=v;_--;){const m=h(r,s,_),T=t(m);let C=l.get(T);C?N.push(()=>C.p(m,e)):(C=u(T,m),C.c()),R.set(T,A[_]=C),T in w&&L.set(T,Math.abs(_-w[T]))}const $=new Set,Q=new Set;function F(m){M(m,1),m.m(o,d),l.set(m.key,m),d=m.first,v--}for(;p&&v;){const m=A[v-1],T=i[p-1],C=m.key,k=T.key;m===T?(d=m.first,p--,v--):R.has(k)?!l.has(C)||$.has(C)?F(m):Q.has(k)?p--:L.get(C)>L.get(k)?(Q.add(C),F(m)):($.add(k),p--):(c(T,l),p--)}for(;p--;){const m=i[p];R.has(m.key)||c(m,l)}for(;v;)F(A[v-1]);return se(N),A}function ee(i){i&&i.c()}function Z(i,e,t){const{fragment:n,after_update:r}=i.$$;n&&n.m(e,t),je(()=>{const s=i.$$.on_mount.map(X).filter(ze);i.$$.on_destroy?i.$$.on_destroy.push(...s):se(s),i.$$.on_mount=[]}),r.forEach(je)}function Y(i,e){const t=i.$$;t.fragment!==null&&(zt(t.after_update),se(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Gt(i,e){i.$$.dirty[0]===-1&&(_e.push(i),Bt(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function te(i,e,t,n,r,s,l=null,o=[-1]){const c=ke;Ie(i);const u=i.$$={fragment:null,ctx:[],props:s,update:y,not_equal:r,bound:pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:pe(),dirty:o,skip_bound:!1,root:e.target||c.$$.root};l&&l(u.root);let d=!1;if(u.ctx=t?t(i,e.props||{},(h,p,...v)=>{const _=v.length?v[0]:p;return u.ctx&&r(u.ctx[h],u.ctx[h]=_)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](_),d&&Gt(i,h)),p}):[],u.update(),d=!0,se(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const h=Vt(e.target);u.fragment&&u.fragment.l(h),h.forEach(V)}else u.fragment&&u.fragment.c();e.intro&&M(i.$$.fragment),Z(i,e.target,e.anchor),ot()}Ie(c)}class ie{constructor(){b(this,"$$");b(this,"$$set")}$destroy(){Y(this,1),this.$destroy=y}$on(e,t){if(!ze(t))return y;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!St(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qt);function jt(i){let e,t;return{c(){e=O("svg"),t=O("path"),a(t,"fill-rule","evenodd"),a(t,"clip-rule","evenodd"),a(t,"d","M5.11634 0.889422C4.86506 -0.296474 3.17237 -0.296474 2.92109 0.889422C2.78291 1.54158 2.10994 1.93011 1.47607 1.72371C0.323418 1.34837 -0.522932 2.81429 0.378448 3.62484C0.87414 4.07059 0.87414 4.84767 0.378448 5.29341C-0.522931 6.10397 0.323418 7.56989 1.47607 7.19455C2.10994 6.98814 2.78291 7.37668 2.92109 8.02883C3.17237 9.21473 4.86506 9.21473 5.11634 8.02883C5.25452 7.37668 5.92749 6.98814 6.56136 7.19455C7.71401 7.56989 8.56036 6.10397 7.65898 5.29341C7.16329 4.84767 7.16329 4.07059 7.65898 3.62484C8.56036 2.81429 7.71401 1.34837 6.56136 1.72371C5.92749 1.93011 5.25452 1.54158 5.11634 0.889422ZM4.01883 6.33408C5.05436 6.33408 5.89383 5.49462 5.89383 4.45908C5.89383 3.42355 5.05436 2.58408 4.01883 2.58408C2.98329 2.58408 2.14383 3.42355 2.14383 4.45908C2.14383 5.49462 2.98329 6.33408 4.01883 6.33408Z"),a(t,"fill","currentColor"),a(e,"width","9"),a(e,"height","9"),a(e,"viewBox","0 0 9 9"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(n,r){H(n,e,r),f(e,t)},p:y,i:y,o:y,d(n){n&&V(e)}}}class xt extends ie{constructor(e){super(),te(this,e,null,jt,K,{})}}function Qt(i){let e,t,n,r,s,l,o,c,u,d,h,p,v,_,w,A,R;return{c(){e=O("svg"),t=O("g"),n=O("path"),r=O("path"),s=O("defs"),l=O("filter"),o=O("feFlood"),c=O("feBlend"),u=O("feGaussianBlur"),d=O("linearGradient"),h=O("stop"),p=O("stop"),v=O("stop"),_=O("linearGradient"),w=O("stop"),A=O("stop"),R=O("stop"),a(n,"fill-rule","evenodd"),a(n,"clip-rule","evenodd"),a(n,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(n,"fill","url(#paint0_linear_67_262)"),a(t,"opacity","0.5"),a(t,"filter","url(#filter0_f_67_262)"),a(r,"fill-rule","evenodd"),a(r,"clip-rule","evenodd"),a(r,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(r,"fill","url(#paint1_linear_67_262)"),a(o,"flood-opacity","0"),a(o,"result","BackgroundImageFix"),a(c,"mode","normal"),a(c,"in","SourceGraphic"),a(c,"in2","BackgroundImageFix"),a(c,"result","shape"),a(u,"stdDeviation","3.39785"),a(u,"result","effect1_foregroundBlur_67_262"),a(l,"id","filter0_f_67_262"),a(l,"x","3.2043"),a(l,"y","2.2043"),a(l,"width","36.0914"),a(l,"height","41.0914"),a(l,"filterUnits","userSpaceOnUse"),a(l,"color-interpolation-filters","sRGB"),a(h,"stop-color","#FFAA00"),a(p,"offset","0.514478"),a(p,"stop-color","#FFEB00"),a(v,"offset","1"),a(v,"stop-color","#98FF05"),a(d,"id","paint0_linear_67_262"),a(d,"x1","7.3769"),a(d,"y1","18.4566"),a(d,"x2","20.6583"),a(d,"y2","33.1038"),a(d,"gradientUnits","userSpaceOnUse"),a(w,"stop-color","#FFC834"),a(A,"offset","0.514478"),a(A,"stop-color","#FAF534"),a(R,"offset","1"),a(R,"stop-color","#B8FF38"),a(_,"id","paint1_linear_67_262"),a(_,"x1","7.3769"),a(_,"y1","18.4566"),a(_,"x2","20.6583"),a(_,"y2","33.1038"),a(_,"gradientUnits","userSpaceOnUse"),a(e,"width","44"),a(e,"height","44"),a(e,"viewBox","0 0 44 44"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(L,N){H(L,e,N),f(e,t),f(t,n),f(e,r),f(e,s),f(s,l),f(l,o),f(l,c),f(l,u),f(s,d),f(d,h),f(d,p),f(d,v),f(s,_),f(_,w),f(_,A),f(_,R)},p:y,i:y,o:y,d(L){L&&V(e)}}}class Kt extends ie{constructor(e){super(),te(this,e,null,Qt,K,{})}}const Ce=[];function Zt(i,e){return{subscribe:Le(i,e).subscribe}}function Le(i,e=y){let t;const n=new Set;function r(o){if(K(i,o)&&(i=o,t)){const c=!Ce.length;for(const u of n)u[1](),Ce.push(u,i);if(c){for(let u=0;u<Ce.length;u+=2)Ce[u][0](Ce[u+1]);Ce.length=0}}}function s(o){r(o(i))}function l(o,c=y){const u=[o,c];return n.add(u),n.size===1&&(t=e(r,s)||y),o(i),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:r,update:s,subscribe:l}}function Yt(i,e,t){const n=!Array.isArray(i),r=n?[i]:i;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Zt(t,(l,o)=>{let c=!1;const u=[];let d=0,h=y;const p=()=>{if(d)return;h();const _=e(n?u[0]:u,l,o);s?l(_):h=ze(_)?_:y},v=r.map((_,w)=>nt(_,A=>{u[w]=A,d&=~(1<<w),c&&p()},()=>{d|=1<<w}));return c=!0,p(),function(){se(v),h(),c=!1}})}var Qe={local:{},session:{}};function Xt(i){return i==="local"?localStorage:sessionStorage}function Ke(i,e,t){var n,r,s,l,o,c,u,d;t!=null&&t.onError&&console.warn("onError has been deprecated. Please use onWriteError instead");const h=(n=t==null?void 0:t.serializer)!=null?n:JSON,p=(r=t==null?void 0:t.storage)!=null?r:"local",v=(s=t==null?void 0:t.syncTabs)!=null?s:!0,_=(o=(l=t==null?void 0:t.onWriteError)!=null?l:t==null?void 0:t.onError)!=null?o:F=>console.error(`Error when writing value from persisted store "${i}" to ${p}`,F),w=(c=t==null?void 0:t.onParseError)!=null?c:(F,m)=>console.error(`Error when parsing ${F?'"'+F+'"':"value"} from persisted store "${i}"`,m),A=(u=t==null?void 0:t.beforeRead)!=null?u:F=>F,R=(d=t==null?void 0:t.beforeWrite)!=null?d:F=>F,L=typeof window<"u"&&typeof document<"u",N=L?Xt(p):null;function $(F,m){const T=R(m);try{N==null||N.setItem(F,h.stringify(T))}catch(C){_(C)}}function Q(){function F(k){try{return h.parse(k)}catch(B){w(k,B)}}const m=N==null?void 0:N.getItem(i);if(m==null)return e;const T=F(m);return T==null?e:A(T)}if(!Qe[p][i]){const F=Q(),m=Le(F,k=>{if(L&&p=="local"&&v){const B=j=>{if(j.key===i&&j.newValue){let G;try{G=h.parse(j.newValue)}catch(ge){w(j.newValue,ge);return}const oe=A(G);k(oe)}};return window.addEventListener("storage",B),()=>window.removeEventListener("storage",B)}}),{subscribe:T,set:C}=m;Qe[p][i]={set(k){C(k),$(i,k)},update(k){return m.update(B=>{const j=k(B);return $(i,j),j})},reset(){this.set(e)},subscribe:T}}return Qe[p][i]}function ct(){return{collapseMode:"non-application",collapseCustomHide:"",collapseCustomShow:"",hideImportlib:!0,hideTracebackHide:!0,hidePyinstrument:!0,hideIrrelevant:!0,hideIrrelevantThreshold:.001,timeFormat:"absolute"}}const fe=Ke("pyinstrument:viewOptionsCallStack",ct(),{syncTabs:!0,beforeRead(i){return{...ct(),...i}}}),Se=Ke("pyinstrument:viewOptions",{viewMode:"call-stack"},{syncTabs:!1});Ke("pyinstrument:viewOptionsTimeline",{hideImportlib:!0,hideTracebackHide:!0,hidePyinstrument:!0,hideIrrelevant:!0,hideIrrelevantThreshold:1e-4},{syncTabs:!0});function Jt(i){let e,t,n,r,s,l,o,c,u,d,h,p,v,_,w,A,R,L,N,$,Q,F,m,T,C,k,B,j,G,oe,ge,x,D,Oe,ne,q,Fe,Te,de;return Fe=rt(i[3][0]),{c(){e=g("div"),t=g("div"),n=g("div"),n.textContent="Collapse frames",r=E(),s=g("div"),l=g("div"),o=g("input"),c=E(),u=g("label"),d=I("Non-application code"),h=E(),p=g("div"),p.textContent=`Application code is anything run from outside the Python home
          directory.`,v=E(),_=g("div"),w=g("input"),A=E(),R=g("label"),L=I("Custom"),N=E(),$=g("div"),Q=I(`Regex on the source file path.
          `),F=g("div"),m=g("label"),m.textContent="Show",T=E(),C=g("input"),k=E(),B=g("label"),B.textContent="Hide",j=E(),G=g("input"),oe=I(`
          If neither match, non-application rule is used.`),ge=E(),x=g("div"),D=g("input"),Oe=E(),ne=g("label"),q=I("Disabled"),a(n,"class","name svelte-i5gc6f"),a(o,"id",i[1]+"collapseModeAll"),a(o,"type","radio"),o.__value="non-application",le(o,o.__value),a(u,"for",i[1]+"collapseModeAll"),a(p,"class","description svelte-i5gc6f"),a(l,"class","option svelte-i5gc6f"),a(w,"id",i[1]+"collapseModeCustom"),a(w,"type","radio"),w.__value="custom",le(w,w.__value),a(R,"for",i[1]+"collapseModeCustom"),a(m,"for","collapseCustomShow"),a(m,"class","svelte-i5gc6f"),a(C,"id","collapseCustomShow"),a(C,"type","text"),a(C,"placeholder","myproject"),a(C,"class","svelte-i5gc6f"),a(B,"for","collapseCustomHide"),a(B,"class","svelte-i5gc6f"),a(G,"id","collapseCustomHide"),a(G,"type","text"),a(G,"placeholder",".*/lib/.*"),a(G,"class","svelte-i5gc6f"),a(F,"class","mini-input-grid svelte-i5gc6f"),a($,"class","description svelte-i5gc6f"),a(_,"class","option svelte-i5gc6f"),a(D,"id",i[1]+"collapseModeDisabled"),a(D,"type","radio"),D.__value="disabled",le(D,D.__value),a(ne,"for",i[1]+"collapseModeDisabled"),a(x,"class","option svelte-i5gc6f"),a(s,"class","body"),a(t,"class","option-group svelte-i5gc6f"),a(e,"class","view-options-call-stack svelte-i5gc6f"),Fe.p(o,w,D)},m(P,re){H(P,e,re),f(e,t),f(t,n),f(t,r),f(t,s),f(s,l),f(l,o),o.checked=o.__value===i[0].collapseMode,f(l,c),f(l,u),f(u,d),f(l,h),f(l,p),f(s,v),f(s,_),f(_,w),w.checked=w.__value===i[0].collapseMode,f(_,A),f(_,R),f(R,L),f(_,N),f(_,$),f($,Q),f($,F),f(F,m),f(F,T),f(F,C),le(C,i[0].collapseCustomShow),f(F,k),f(F,B),f(F,j),f(F,G),le(G,i[0].collapseCustomHide),f($,oe),f(s,ge),f(s,x),f(x,D),D.checked=D.__value===i[0].collapseMode,f(x,Oe),f(x,ne),f(ne,q),Te||(de=[J(o,"change",i[2]),J(w,"change",i[4]),J(C,"input",i[5]),J(G,"input",i[6]),J(D,"change",i[7])],Te=!0)},p(P,[re]){re&1&&(o.checked=o.__value===P[0].collapseMode),re&1&&(w.checked=w.__value===P[0].collapseMode),re&1&&C.value!==P[0].collapseCustomShow&&le(C,P[0].collapseCustomShow),re&1&&G.value!==P[0].collapseCustomHide&&le(G,P[0].collapseCustomHide),re&1&&(D.checked=D.__value===P[0].collapseMode)},i:y,o:y,d(P){P&&V(e),Fe.r(),Te=!1,se(de)}}}function ei(i,e,t){let n;ae(i,fe,h=>t(0,n=h));const r=Math.random().toString(36).substring(4),s=[[]];function l(){n.collapseMode=this.__value,fe.set(n)}function o(){n.collapseMode=this.__value,fe.set(n)}function c(){n.collapseCustomShow=this.value,fe.set(n)}function u(){n.collapseCustomHide=this.value,fe.set(n)}function d(){n.collapseMode=this.__value,fe.set(n)}return[n,r,l,s,o,c,u,d]}class ti extends ie{constructor(e){super(),te(this,e,ei,Jt,K,{})}}function ii(i){let e;return{c(){e=g("div"),e.innerHTML="",a(e,"class","view-options-timeline")},m(t,n){H(t,e,n)},p:y,i:y,o:y,d(t){t&&V(e)}}}class ni extends ie{constructor(e){super(),te(this,e,null,ii,K,{})}}function ri(i){let e,t;return e=new ni({}),{c(){ee(e.$$.fragment)},m(n,r){Z(e,n,r),t=!0},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function si(i){let e,t;return e=new ti({}),{c(){ee(e.$$.fragment)},m(n,r){Z(e,n,r),t=!0},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function li(i){let e,t,n,r,s,l,o,c;const u=[si,ri],d=[];function h(p,v){return p[0].viewMode==="call-stack"?0:p[0].viewMode==="timeline"?1:-1}return~(l=h(i))&&(o=d[l]=u[l](i)),{c(){e=g("div"),t=g("div"),n=g("div"),r=I(i[2]),s=E(),o&&o.c(),a(n,"class","title svelte-fniqju"),a(t,"class","box svelte-fniqju"),a(e,"class","view-options svelte-fniqju")},m(p,v){H(p,e,v),f(e,t),f(t,n),f(n,r),f(t,s),~l&&d[l].m(t,null),i[3](t),c=!0},p(p,[v]){(!c||v&4)&&ce(r,p[2]);let _=l;l=h(p),l!==_&&(o&&(ye(),S(d[_],1,1,()=>{d[_]=null}),Ae()),~l?(o=d[l],o||(o=d[l]=u[l](p),o.c()),M(o,1),o.m(t,null)):o=null)},i(p){c||(M(o),c=!0)},o(p){S(o),c=!1},d(p){p&&V(e),~l&&d[l].d(),i[3](null)}}}function oi(i,e,t){let n;ae(i,Se,u=>t(0,n=u));const r=Ht();function s(){r("close")}let l;st(()=>{if(!l)return;let u,d;return l.addEventListener("pointerdown",h=>{d=h.pointerId},{capture:!0}),window.addEventListener("click",u=h=>{console.log(h),!("pointerId"in h&&h.pointerId!==d)&&(h.composedPath().includes(l)||s())},{capture:!0}),()=>{window.removeEventListener("click",u)}});let o="View options";function c(u){De[u?"unshift":"push"](()=>{l=u,t(1,l)})}return i.$$.update=()=>{i.$$.dirty&1&&(n.viewMode==="call-stack"?t(2,o="Call stack view options"):n.viewMode==="timeline"&&t(2,o="Timeline view options"))},[n,l,o,c]}class ai extends ie{constructor(e){super(),te(this,e,oi,li,K,{})}}function ut(i){let e,t;return e=new ai({}),e.$on("close",i[9]),{c(){ee(e.$$.fragment)},m(n,r){Z(e,n,r),t=!0},p:y,i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function ci(i){let e,t,n,r,s,l,o,c,u=i[0].target_description+"",d,h,p,v,_,w,A,R,L,N,$,Q,F,m,T=i[0].sampleCount+"",C,k,B,j,G,oe,ge,x,D,Oe,ne,q,Fe,Te,de,P,re,Mt,Ne,Pt,ve,Me,Pe,Rt,kt,Re,tt,it,It;s=new Kt({}),Pe=new xt({});let z=i[1]&&ut(i);return tt=rt(i[7][0]),{c(){e=g("div"),t=g("div"),n=g("div"),r=g("div"),ee(s.$$.fragment),l=E(),o=g("div"),c=g("div"),d=I(u),h=E(),p=g("div"),v=g("div"),_=g("span"),_.textContent="Recorded:",w=E(),A=g("span"),A.textContent=`${i[3]}`,R=E(),L=g("br"),N=E(),$=g("div"),Q=g("span"),Q.textContent="Samples:",F=E(),m=g("span"),C=I(T),k=E(),B=g("div"),j=g("span"),j.textContent="CPU utilization:",G=E(),oe=g("span"),oe.textContent=`${(i[4]*100).toFixed(0)}%`,ge=E(),x=g("div"),D=g("div"),Oe=I(`View:
            `),ne=g("label"),q=g("input"),Fe=I(`
              Call stack`),Te=E(),de=g("label"),P=g("input"),re=I(`
              Timeline`),Mt=E(),Ne=g("div"),Pt=E(),ve=g("div"),Me=g("button"),ee(Pe.$$.fragment),Rt=I(`
              View options`),kt=E(),z&&z.c(),a(r,"class","logo svelte-g6343"),a(c,"class","target-description svelte-g6343"),a(_,"class","metric-label svelte-g6343"),a(A,"class","metric-value svelte-g6343"),a(v,"class","metric date svelte-g6343"),a(L,"class","svelte-g6343"),a(Q,"class","metric-label svelte-g6343"),a(m,"class","metric-value svelte-g6343"),a($,"class","metric svelte-g6343"),a(j,"class","metric-label svelte-g6343"),a(oe,"class","metric-value svelte-g6343"),a(B,"class","metric svelte-g6343"),a(p,"class","metrics svelte-g6343"),a(q,"type","radio"),q.__value="call-stack",le(q,q.__value),a(q,"class","svelte-g6343"),a(ne,"class","svelte-g6343"),a(P,"type","radio"),P.__value="timeline",le(P,P.__value),a(P,"class","svelte-g6343"),a(de,"class","svelte-g6343"),a(D,"class","toggle"),a(Ne,"class","spacer"),U(Ne,"flex","1"),a(Me,"class","svelte-g6343"),a(ve,"class","button-container svelte-g6343"),a(x,"class","view-options svelte-g6343"),a(o,"class","layout svelte-g6343"),a(n,"class","row svelte-g6343"),a(t,"class","margins"),a(e,"class","header svelte-g6343"),tt.p(q,P)},m(W,he){H(W,e,he),f(e,t),f(t,n),f(n,r),Z(s,r,null),f(n,l),f(n,o),f(o,c),f(c,d),f(o,h),f(o,p),f(p,v),f(v,_),f(v,w),f(v,A),f(p,R),f(p,L),f(p,N),f(p,$),f($,Q),f($,F),f($,m),f(m,C),f(p,k),f(p,B),f(B,j),f(B,G),f(B,oe),f(o,ge),f(o,x),f(x,D),f(D,Oe),f(D,ne),f(ne,q),q.checked=q.__value===i[2].viewMode,f(ne,Fe),f(D,Te),f(D,de),f(de,P),P.checked=P.__value===i[2].viewMode,f(de,re),f(x,Mt),f(x,Ne),f(x,Pt),f(x,ve),f(ve,Me),Z(Pe,Me,null),f(Me,Rt),f(ve,kt),z&&z.m(ve,null),Re=!0,it||(It=[J(q,"change",i[6]),J(P,"change",i[8]),J(Me,"click",Ue(We(i[5])))],it=!0)},p(W,[he]){(!Re||he&1)&&u!==(u=W[0].target_description+"")&&ce(d,u),(!Re||he&1)&&T!==(T=W[0].sampleCount+"")&&ce(C,T),he&4&&(q.checked=q.__value===W[2].viewMode),he&4&&(P.checked=P.__value===W[2].viewMode),W[1]?z?(z.p(W,he),he&2&&M(z,1)):(z=ut(W),z.c(),M(z,1),z.m(ve,null)):z&&(ye(),S(z,1,1,()=>{z=null}),Ae())},i(W){Re||(M(s.$$.fragment,W),M(Pe.$$.fragment,W),M(z),Re=!0)},o(W){S(s.$$.fragment,W),S(Pe.$$.fragment,W),S(z),Re=!1},d(W){W&&V(e),Y(s),Y(Pe),z&&z.d(),tt.r(),it=!1,se(It)}}}function ui(i,e,t){let n;ae(i,Se,v=>t(2,n=v));let{session:r}=e;const s=new Date(r.startTime*1e3).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"}),l=r.cpuTime/r.duration;let o=!1;function c(v){t(1,o=!o)}const u=[[]];function d(){n.viewMode=this.__value,Se.set(n)}function h(){n.viewMode=this.__value,Se.set(n)}const p=()=>t(1,o=!1);return i.$$set=v=>{"session"in v&&t(0,r=v.session)},[r,o,n,s,l,c,d,u,h,p]}class fi extends ie{constructor(e){super(),te(this,e,ui,ci,K,{session:0})}}const di="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWmSURBVHgBtVc7i11VFF5rn3PvPKoLFlqmDGPhaGVpJQoWAZEEGxERFBsDgnY6KFpaWWrQysRGf4BgmSKQFCKWKQMKTqNzz2svv/XY55ybeycTCw+z736cs/f61rdee5hmz/Hx85c66m4QyTEzrdAo4cd6EuuJ2P4wtbmUgfZkCyRoWVcwyMI29ybW47sfhRfXf793+z4X4ZchPEl3F2esElYrbRVaEjQGEKGE3jcUofGwlIEBygoACAa0fmDrdV4AOAg6FV4+W49nUPdlEW4AElGNtqjZ+hqIdI2NAC7KuvAZloyJCR+IukGmF5A6iH/IbEBWLN2NevbBFQ6tCoAF3u7VggYQtQJyFlygOAADI74Jf669QDiWWh6xFRMUgLF6PAGYkcgGgGkBE/x8AiSVaykG0AUxlgm7BY0BUMAQL8R77LM96F98A98kBeu+kAdlgA0MntUGACmOFDQl5sm+Rai6lwpMLtiEgSVGE8wVFBkAB7XcU+rdJOoLSU0x8Aii3ta/0AWqMHjlM6LDPaYDHLSsnRn9pjMny2jBCDSu9H3tDqpCmw4C6lgHqAQmWB05uwwF8RCAQpU7jIbQYCElBsjAlabfqJdnD7lKwzVcIVVOgmKpF2g921pS8/QRvuETmwDEKZdwFHMocYHffYSfBc0opojVIomjx/dY64CkxVktMsgar16/IhbKygANruwWA+YDkURUcNHQaK5ps1XhBwaAzf6M9YzWq3Ac1EKACm80cB8KV6IdPsCR0aQAMBAaUkxXPyU6WDqlypKaSEOtmCCpDyAKFgu1gSecrhdar4n++VsiGUVWDHUpdJkYEPEkEyDc7paHTShXbkuNhqQfaF5wMt16lff69JYFFYT3A8AYgFxku5xtBtw9R7YsEiH85hcYLIsfuO0lfCCHvTtMWxszNRhDebp+LRsTGobFr0zBiO5tBnhWaZgiDwD5gi3Wiw+YcDAwoDfB+MaFq83RsP8M5zSYdFjsBwfh9YAjErbyQLHNVNUsH2Dl2odCh4dE+0vQXjtI9YG2z05zOKvSbdR3eKdtLTbugVKzoOQxC+7KA5NtJPiXEZaH5xDglMrOBMHTWxdWhA/QVqtgEdx3EtVwSkDOxE4GHESpCZzcHLe+4gg3HA7P69jpfvutTA0GTQNNkXAs5UYJVjC593keik/JBohzALjQsXbrJtRksRgntzm7nVX4GnZumtC4D23N4aIAZWdv9LyZv+3IA87AlHY1HQu9+q7Qwb7nAQ01FbQ+g5NBaNOKA2jdD0bg4+UjzCrbqu6IgrLB6aLRF6KWB0ZNUj15QvLCRVa8PNanqiq7pM7kbVXDEvdaipMmHIRfBa2//aYC9WI5vjH6ydLsB1ezpePiK9PhYcoLnjSK5kljNUWqvXppKdVxo4XFhIsJ93gXy/8clxIvt0X7i4XrU8+1D+wGgKPGW/UCzHfew9VsXywVZxbz8GYdKqS4rCTfZ/NZvD8WA/Yxu/aW661F7q+cIbsXVO6EcVf3b0t9SIXFx9N+kwEO3w8QVmhggq+/9xSroVdiv5TZlr0SanL6/KXOK5SaL9b/G4DRdDzONZbPuAjXS4bnfPWBPrJkjhzpYbdR8OeXz62nvBt3HD3z3F/2f0Fyx9O7XL2HAoj7YG33AK8Bag4TrJlOa0DrrVtrj7DsPBtKlgstsZGIcOW+B0wvlMP1EOqcCh1rTldb+/Xcw2woqbaLeh/Vbl7vH/Vgx08TABrehO53ccJKK1ZWP+gjpRqAKdaN8jxLs5r7Bx5TMBm18kjxOOZ0ub/3flUW/nzw4PSJp568CT0vYXq5aGJgslc4o7doPI6dcis2eUq950Ug1DqF9NvQ/uVf79y5v+E1IptedEInNj+iT2L9Nfv9jf7gI/pFdP4D5rfoaYw/Lv+pReVRq/JOEEXOee/PAf7/PP8C3bt510T4rIwAAAAASUVORK5CYII=",ft=Le({}),dt=Le({});function ht(i,e,t){const n=i.slice();return n[19]=e[t],n}function pt(i){let e,t,n,r,s,l,o,c,u,d,h,p,v,_;return{c(){e=g("div"),t=g("div"),n=O("svg"),r=O("path"),s=E(),l=g("div"),o=I(i[5]),c=E(),u=g("div"),d=I(i[4]),h=E(),p=g("div"),p.textContent=`${i[11]}`,a(r,"d","M.937-.016L5.793 4.84.937 9.696z"),a(r,"fill",i[7]),a(r,"fill-rule","evenodd"),a(r,"fill-opacity",".582"),a(n,"width","6"),a(n,"height","10"),a(t,"class","frame-triangle svelte-1hxft88"),ue(t,"rotate",!i[9]),U(t,"visibility",i[0].children.length>0?"visible":"hidden"),a(l,"class","time svelte-1hxft88"),U(l,"color",i[7]),U(l,"font-weight",i[10]<.2?500:600),a(u,"class","name svelte-1hxft88"),a(p,"class","code-position svelte-1hxft88"),a(e,"class","frame-description svelte-1hxft88"),ue(e,"application-code",i[0].isApplicationCode),ue(e,"children-visible",!i[9]),U(e,"padding-left",`${i[2]*35}px`)},m(w,A){H(w,e,A),f(e,t),f(t,n),f(n,r),f(e,s),f(e,l),f(l,o),f(e,c),f(e,u),f(u,d),f(e,h),f(e,p),v||(_=J(e,"click",Ue(We(i[12]))),v=!0)},p(w,A){A&128&&a(r,"fill",w[7]),A&512&&ue(t,"rotate",!w[9]),A&1&&U(t,"visibility",w[0].children.length>0?"visible":"hidden"),A&32&&ce(o,w[5]),A&128&&U(l,"color",w[7]),A&16&&ce(d,w[4]),A&1&&ue(e,"application-code",w[0].isApplicationCode),A&512&&ue(e,"children-visible",!w[9]),A&4&&U(e,"padding-left",`${w[2]*35}px`)},d(w){w&&V(e),v=!1,_()}}}function mt(i){let e,t,n,r,s=i[0].group.frames.length+"",l,o,c,u,d,h;return{c(){e=g("div"),t=g("div"),n=g("div"),n.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',r=E(),l=I(s),o=I(` frames hidden
        (`),c=I(i[6]),u=I(")"),a(n,"class","group-triangle svelte-1hxft88"),ue(n,"rotate",i[8]),a(t,"class","group-header-button svelte-1hxft88"),a(e,"class","group-header svelte-1hxft88"),U(e,"padding-left",`${i[2]*35}px`)},m(p,v){H(p,e,v),f(e,t),f(t,n),f(t,r),f(t,l),f(t,o),f(t,c),f(t,u),d||(h=J(e,"click",Ue(We(i[13]))),d=!0)},p(p,v){v&256&&ue(n,"rotate",p[8]),v&1&&s!==(s=p[0].group.frames.length+"")&&ce(l,s),v&64&&ce(c,p[6]),v&4&&U(e,"padding-left",`${p[2]*35}px`)},d(p){p&&V(e),d=!1,h()}}}function gt(i){let e,t=[],n=new Map,r,s=at(i[0].children);const l=o=>o[19].uuid;for(let o=0;o<s.length;o+=1){let c=ht(i,s,o),u=l(c);n.set(u,t[o]=vt(u,c))}return{c(){e=g("div");for(let o=0;o<t.length;o+=1)t[o].c();a(e,"class","children svelte-1hxft88")},m(o,c){H(o,e,c);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);r=!0},p(o,c){c&15&&(s=at(o[0].children),ye(),t=Ut(t,c,l,1,o,s,n,e,Wt,vt,null,ht),Ae())},i(o){if(!r){for(let c=0;c<s.length;c+=1)M(t[c]);r=!0}},o(o){for(let c=0;c<t.length;c+=1)S(t[c]);r=!1},d(o){o&&V(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function vt(i,e){let t,n,r;return n=new _t({props:{frame:e[19],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:i,first:null,c(){t=$t(),ee(n.$$.fragment),this.first=t},m(s,l){H(s,t,l),Z(n,s,l),r=!0},p(s,l){e=s;const o={};l&1&&(o.frame=e[19]),l&2&&(o.rootFrame=e[1]),l&12&&(o.indent=e[2]+(e[3]?1:0)),n.$set(o)},i(s){r||(M(n.$$.fragment,s),r=!0)},o(s){S(n.$$.fragment,s),r=!1},d(s){s&&V(t),Y(n,s)}}}function hi(i){let e,t,n,r,s,l,o=i[3]&&pt(i),c=i[0].group&&i[0].group.rootFrame==i[0]&&!i[9]&&mt(i),u=!i[9]&&i[0].children.length>0&&gt(i);return{c(){e=g("div"),o&&o.c(),t=E(),c&&c.c(),n=E(),u&&u.c(),r=E(),s=g("div"),s.innerHTML="",a(s,"class","visual-guide svelte-1hxft88"),U(s,"left",`${i[2]*35+21}px`),U(s,"backgroundColor",i[7]),a(e,"class","frame svelte-1hxft88")},m(d,h){H(d,e,h),o&&o.m(e,null),f(e,t),c&&c.m(e,null),f(e,n),u&&u.m(e,null),f(e,r),f(e,s),l=!0},p(d,[h]){d[3]?o?o.p(d,h):(o=pt(d),o.c(),o.m(e,t)):o&&(o.d(1),o=null),d[0].group&&d[0].group.rootFrame==d[0]&&!d[9]?c?c.p(d,h):(c=mt(d),c.c(),c.m(e,n)):c&&(c.d(1),c=null),!d[9]&&d[0].children.length>0?u?(u.p(d,h),h&513&&M(u,1)):(u=gt(d),u.c(),M(u,1),u.m(e,r)):u&&(ye(),S(u,1,1,()=>{u=null}),Ae()),h&4&&U(s,"left",`${d[2]*35+21}px`),h&128&&U(s,"backgroundColor",d[7])},i(d){l||(M(u),l=!0)},o(d){S(u),l=!1},d(d){d&&V(e),o&&o.d(),c&&c.d(),u&&u.d()}}}function pi(i,e,t){var F;let n,r,s,l,o;ae(i,dt,m=>t(14,s=m)),ae(i,ft,m=>t(15,l=m)),ae(i,fe,m=>t(16,o=m));let{frame:c}=e,{rootFrame:u}=e,{indent:d=0}=e,h;const p=c.time/u.time;let v;const _=`${c.filePathShort}:${(F=c.lineNo)==null?void 0:F.toString().padEnd(4," ")}`;let w,A=null;if(c.group){const m=c.group.libraries;m.length<4?A=m.join(", "):A=`${m[0]}, ${m[1]}, ${m[2]}...`}let R;p>.6?R="#FF4159":p>.3?R="#F5A623":p>.2?R="#D8CB2A":R="#7ED321";function L(m){N(c,!r,m.altKey)}function N(m,T,C=!0){if(dt.update(k=>({...k,[m.uuid]:T})),C)for(const k of m.children)N(k,T,!0),m.group&&m.group.rootFrame==m&&$(m.group.id,!T)}function $(m,T){ft.update(C=>({...C,[m]:T}))}function Q(){c.group&&$(c.group.id,!n)}return i.$$set=m=>{"frame"in m&&t(0,c=m.frame),"rootFrame"in m&&t(1,u=m.rootFrame),"indent"in m&&t(2,d=m.indent)},i.$$.update=()=>{var m,T;if(i.$$.dirty&32769&&(c.group?l[c.group.id??""]||((m=c.group)==null?void 0:m.rootFrame)===c||c.children.filter(C=>!C.group).length>1?t(3,h=!0):t(3,h=!1):t(3,h=!0)),i.$$.dirty&1&&(c.className?t(4,v=`${c.className}.${c.function}`):t(4,v=c.function)),i.$$.dirty&65537)if(o.timeFormat==="absolute")t(5,w=c.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(o.timeFormat==="proportion")t(5,w=`${(p*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");i.$$.dirty&32769&&t(8,n=l[((T=c.group)==null?void 0:T.id)??""]===!0),i.$$.dirty&16385&&t(9,r=s[c.uuid]===!0)},[c,u,d,h,v,w,A,R,n,r,p,_,L,Q,s,l,o]}let _t=class extends ie{constructor(e){super(),te(this,e,pi,hi,K,{frame:0,rootFrame:1,indent:2})}};function wt(i,e,t){let n=i;for(const r of e)if(n=r(n,t),!n)return null;return n}const mi="\0",gi="[await]",$e="[self]",vi=[gi,$e,"[out-of-context]","[root]"],_i="c",wi="h";class Ve{constructor(e,t){b(this,"uuid",crypto.randomUUID());b(this,"identifier");b(this,"_identifierParts");b(this,"startTime");b(this,"time",0);b(this,"absorbedTime",0);b(this,"group",null);b(this,"attributes");b(this,"_children",[]);b(this,"parent",null);b(this,"context");var s;this.identifier=e.identifier,this._identifierParts=this.identifier.split(mi),this.startTime=e.startTime??0,this.time=e.time??0,this.attributes=e.attributes??{},this.context=t;let n=this.startTime;const r=(s=e.children)==null?void 0:s.map(l=>(l.startTime===void 0&&(l={...l,startTime:n},n+=l.time??0),n=l.startTime+(l.time??0),new Ve(l,t)));r&&this.addChildren(r)}cloneDeep(){return new Ve(this,this.context)}get children(){return this._children}addChild(e,t={}){if(e.removeFromParent(),e.parent=this,t.after){const n=this._children.indexOf(t.after);if(n==-1)throw new Error("After frame not found");this._children.splice(n+1,0,e)}else this._children.push(e)}addChildren(e,t={}){e=e.slice(),t.after?(e.slice().reverse(),e.forEach(r=>this.addChild(r,t))):e.forEach(n=>this.addChild(n,t))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(n=>n.startsWith(e)).map(n=>({data:n.slice(1),time:this.attributes[n]}))}getAttributeValue(e){const t=this.getAttributes(e);if(!t||t.length==0)return null;let n=0;for(let r=0;r<t.length;r++)t[r].time>t[n].time&&(n=r);return t[n].data}get hasTracebackhide(){return this.getAttributeValue(wi)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return vi.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||["/lib/","\\lib\\"].some(n=>e.includes(n))?!1:e.startsWith("<")?!!e.startsWith("<ipython-input-"):!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue(_i)??""}get library(){const e=this.filePathShort;return e?/^[^\\/.]*/.exec(e)[0]:null}}class bi{constructor(e){b(this,"id");b(this,"rootFrame");b(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const t=this._frames.indexOf(e);if(t===-1)throw new Error("Frame not found in group.");this._frames.splice(t,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const t of this.frames){let n=!1;for(const r of t.children)if(r.group!=this){n=!0;break}n&&e.push(t)}return e}get libraries(){const e=[];for(const t of this.frames){const n=t.library;n&&(e.includes(n)||e.push(n))}return e}}class yi extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function Ai(i,e){const t=e*(i.length-1),n=Math.floor(t),r=Math.ceil(t),s=i[n],l=i[r],o=t-n;return Ei(o,{to:[s,l]})}function Ci(i,e,t){return i===1/0?(console.warn("clamp: value is Infinity, returning `max`",i),t):i===-1/0?(console.warn("clamp: value is -Infinity, returning `min`",i),e):Number.isFinite(i)?i<e?e:i>t?t:i:(console.warn("clamp: value isn't finite, returning `min`",i),e)}function Ze(i,e){const{from:t=[0,1],to:n=[0,1]}=e,r=e.clamp||!1;let s=(i-t[0])/(t[1]-t[0])*(n[1]-n[0])+n[0];return r&&(s=Ci(s,Math.min(n[0],n[1]),Math.max(n[0],n[1]))),s}function Ei(i,e){return`rgb(
      ${Ze(i,{from:e.from,to:[e.to[0][0],e.to[1][0]],clamp:e.clamp})},
      ${Ze(i,{from:e.from,to:[e.to[0][1],e.to[1][1]],clamp:e.clamp})},
      ${Ze(i,{from:e.from,to:[e.to[0][2],e.to[1][2]],clamp:e.clamp})}
    )`}function Fi(i){if(i.substr(0,1)=="#"){var e=(i.length-1)/3,t=[17,1,.062272][e-1];return[Math.round(parseInt(i.substr(1,e),16)*t),Math.round(parseInt(i.substr(1+e,e),16)*t),Math.round(parseInt(i.substr(1+2*e,e),16)*t)]}else return i.split("(")[1].split(")")[0].split(",").map(n=>+n)}function Be(i,e){const{replaceWith:t}=e,n=i.parent;if(!n)throw new Error("Cannot delete the root frame");if(t=="children")n.addChildren(i.children,{after:i});else if(t=="self_time")n.addChild(new Ve({identifier:$e,time:i.time},n.context),{after:i});else if(t=="nothing")n.absorbedTime+=i.time;else throw new yi(t);i.removeFromParent(),Ye(i,!0)}function Ti(i,e){if(i.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=i.absorbedTime,e.time+=i.time,Object.entries(i.attributes).forEach(([t,n])=>{e.attributes[t]!==void 0?e.attributes[t]+=n:e.attributes[t]=n}),e.addChildren(i.children),i.removeFromParent(),Ye(i,!1)}function Ye(i,e){if(e&&i.children&&i.children.forEach(t=>{Ye(t,!0)}),i.group){const t=i.group;t.removeFrame(i),t.frames.length===1&&t.removeFrame(t.frames[0])}}function Xe(i,e){if(!i)return null;for(const t of i.children)Xe(t),t.filePath&&t.filePath.includes("<frozen importlib._bootstrap")&&Be(t,{replaceWith:"children"});return i}function Je(i,e){if(!i)return null;for(const t of i.children)Je(t),t.hasTracebackhide&&Be(t,{replaceWith:"children"});return i}function bt(i,e){if(!i)return null;const t={};for(const n of i.children.slice())if(t[n.identifier]){const r=t[n.identifier];Ti(n,r)}else t[n.identifier]=n;return i.children.forEach(n=>bt(n)),i._children.sort((n,r)=>r.time-n.time),i}function yt(i,e){if(!i)return null;const t=e.hideRegex,n=e.showRegex;function r(l){const o=l.filePath||"",c=n&&new RegExp(n).test(o),u=t&&new RegExp(t).test(o);return c?!1:u?!0:!l.isApplicationCode}function s(l,o){o.addFrame(l),l.children.forEach(c=>{r(c)&&s(c,o)})}return i.children.forEach(l=>{if(!l.group&&r(l)&&l.children.some(r)){const o=new bi(l);s(l,o)}yt(l,e)}),i}function At(i,e,t=!0){if(!i)return null;let n=null;for(const r of i.children)r.identifier===$e?n?(n.time+=r.time,r.removeFromParent()):n=r:n=null;return t&&i.children.forEach(r=>At(r,e,!0)),i}function Ct(i,e){return i?(i.children.length===1&&i.children[0].identifier===$e&&Be(i.children[0],{replaceWith:"nothing"}),i.children.forEach(t=>Ct(t)),i):null}function Et(i,e,t=null){if(!i)return null;t===null&&(t=i.time,t<=0&&(t=1e-44));const n=e.filterThreshold||.01;for(const r of i.children.slice())r.time/t<n&&Be(r,{replaceWith:"nothing"});return i.children.forEach(r=>Et(r,e,t)),i}function Ft(i,e){if(!i)return null;const t=l=>{var o;return((o=l.filePath)==null?void 0:o.includes("pyinstrument/__main__.py"))&&l.children.length>0},n=l=>{var o;return l.proportionOfParent>.8&&((o=l.filePath)==null?void 0:o.includes("<string>"))&&l.children.length>0},r=l=>{var o;return l.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(l.filePath??"")||((o=l.filePath)==null?void 0:o.includes("<frozen runpy>")))&&l.children.length>0};let s=i;if(!t(s)||(s=s.children[0],!n(s))||(s=s.children[0],!r(s)))return i;for(;r(s);)s=s.children[0];return s.removeFromParent(),s}function Mi(i){let e,t;return e=new _t({props:{frame:i[0],rootFrame:i[0]}}),{c(){ee(e.$$.fragment)},m(n,r){Z(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.frame=n[0]),r&1&&(s.rootFrame=n[0]),e.$set(s)},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function Pi(i){let e;return{c(){e=g("div"),e.textContent="All frames were filtered out.",a(e,"class","error")},m(t,n){H(t,e,n)},p:y,i:y,o:y,d(t){t&&V(e)}}}function Ri(i){let e,t,n,r,s,l,o;const c=[Pi,Mi],u=[];function d(h,p){return h[0]?1:0}return s=d(i),l=u[s]=c[s](i),{c(){e=g("div"),t=g("div"),n=E(),r=g("div"),l.c(),a(t,"class","spacer"),U(t,"height","20px"),a(r,"class","margins"),a(e,"class","tree-view")},m(h,p){H(h,e,p),f(e,t),f(e,n),f(e,r),u[s].m(r,null),o=!0},p(h,[p]){let v=s;s=d(h),s===v?u[s].p(h,p):(ye(),S(u[v],1,1,()=>{u[v]=null}),Ae(),l=u[s],l?l.p(h,p):(l=u[s]=c[s](h),l.c()),M(l,1),l.m(r,null))},i(h){o||(M(l),o=!0)},o(h){S(l),o=!1},d(h){h&&V(e),u[s].d()}}}function ki(i,e,t){let n,{session:r}=e;const s=Yt([fe],([o])=>({processors:[o.hideImportlib?Xe:null,o.hideTracebackHide?Je:null,At,bt,Ct,o.hideIrrelevant?Et:null,o.hidePyinstrument?Ft:null,o.collapseMode!=="disabled"?yt:null].filter(d=>d!==null),options:{}}));ae(i,s,o=>t(3,n=o));let l;return i.$$set=o=>{"session"in o&&t(2,r=o.session)},i.$$.update=()=>{i.$$.dirty&12&&t(0,l=wt(r.rootFrame.cloneDeep(),n.processors,n.options))},[l,s,r,n]}class Ii extends ie{constructor(e){super(),te(this,e,ki,Ri,K,{session:2})}}class Si{constructor(e){b(this,"mediaQueryList",null);this.onDevicePixelRatioChanged=e,this._onChange=this._onChange.bind(this),this.createMediaQueryList()}createMediaQueryList(){this.removeMediaQueryList();let e=`(resolution: ${window.devicePixelRatio}dppx)`;this.mediaQueryList=matchMedia(e),this.mediaQueryList.addEventListener("change",this._onChange)}removeMediaQueryList(){var e;(e=this.mediaQueryList)==null||e.removeEventListener("change",this._onChange),this.mediaQueryList=null}_onChange(e){this.onDevicePixelRatioChanged(),this.createMediaQueryList()}destroy(){this.removeMediaQueryList()}}class $i{constructor(e){b(this,"canvas");b(this,"_size_observer");b(this,"_devicePixelRatioObserver");b(this,"drawAnimationRequest",null);this.container=e,getComputedStyle(e).position!="absolute"&&(e.style.position="relative"),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.container.appendChild(this.canvas),this.setCanvasSize=this.setCanvasSize.bind(this),this._size_observer=new ResizeObserver(this.setCanvasSize),this._size_observer.observe(e),this._devicePixelRatioObserver=new Si(this.setCanvasSize),window.requestAnimationFrame(()=>{this.setCanvasSize()})}destroy(){this._size_observer.disconnect(),this._devicePixelRatioObserver.destroy(),this.canvas.remove(),this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null)}setNeedsRedraw(){this.drawAnimationRequest===null&&(this.drawAnimationRequest=window.requestAnimationFrame(()=>{this.drawAnimationRequest=null,this.canvasViewRedraw()}))}redrawIfNeeded(){this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null,this.canvasViewRedraw())}canvasViewRedraw(){const e=this.canvas.getContext("2d");e&&(e.resetTransform(),e.scale(window.devicePixelRatio,window.devicePixelRatio),this.redraw(e,{width:this.canvas.width/window.devicePixelRatio,height:this.canvas.height/window.devicePixelRatio}))}get width(){return this.canvas.width/window.devicePixelRatio}get height(){return this.canvas.height/window.devicePixelRatio}setCanvasSize(){const e=window.devicePixelRatio;this.canvas.height=this.container.clientHeight*e,this.canvas.width=this.container.clientWidth*e,this.canvasViewRedraw()}}const Vi="#212325",Oi=18,Di=17,Hi=["#47A298","#9FC175","#C1A731","#C07210","#B84210","#B53134","#9A3586","#4958B5","#3475BA","#318DBC","#47A298"].map(Fi);class Li extends $i{constructor(t){super(t);b(this,"zoom",1);b(this,"startT",0);b(this,"frames",[]);b(this,"isZoomedIn",!1);b(this,"lastDrawWidth",0);b(this,"lastDrawHeight",0);b(this,"mouseLocation",null);b(this,"_libraryOrder",null);b(this,"_colors",[]);this.onWheel=this.onWheel.bind(this),this.canvas.addEventListener("wheel",this.onWheel)}destroy(){super.destroy(),this.canvas.removeEventListener("wheel",this.onWheel)}setRootFrame(t){this.frames=[],this._collectFrames(t,0),this.fitContents()}_collectFrames(t,n){this.frames.push({frame:t,depth:n});for(const r of t.children)r.identifier!==$e&&this._collectFrames(r,n+1)}get frameMaxT(){return this.frames.reduce((t,n)=>Math.max(t,n.frame.startTime+n.frame.time),0)}get minZoom(){return this.width/this.frameMaxT}fitContents(){this.startT=0,this.zoom=this.minZoom,this.isZoomedIn=!1}clampViewport(){this.zoom<this.minZoom?(this.zoom=this.minZoom,this.isZoomedIn=!1):this.isZoomedIn=!0,this.startT<0&&(this.startT=0);const t=this.frameMaxT-this.width/this.zoom;this.startT>t&&(this.startT=t)}redraw(t,n){const{width:r,height:s}=n;(r!==this.lastDrawWidth||s!==this.lastDrawHeight)&&(this.isZoomedIn?this.clampViewport():this.fitContents()),this.lastDrawWidth=r,this.lastDrawHeight=s,t.fillStyle=Vi,t.fillRect(0,0,r,s);for(const l of this.frames)this.drawFrame(t,l);t.globalAlpha=1,t.fillStyle="red",t.fillText(`startT: ${this.startT}`,10,10),t.fillText(`zoom: ${this.zoom}`,10,20)}drawFrame(t,n){const r=n.depth*Oi,s=Di;let l=this.xForT(n.frame.startTime);const o=this.xForT(n.frame.startTime+n.frame.time);let c=o-l;if(!(o<0||l>this.width)){if(c<1&&(c=1),c>2&&(c-=1),t.fillStyle=this.colorForFrame(n),t.globalAlpha=n.frame.isApplicationCode?1:.5,c<2){t.fillRect(l,r,c,s);return}if(t.save(),t.beginPath(),t.rect(l,r,c,s),t.fill(),t.clip(),c>2){t.font='13px "Source Sans Pro", sans-serif',t.fillStyle="white";let u;n.frame.className?u=`${n.frame.className}.${n.frame.function}`:n.frame.function=="<module>"?u=n.frame.filePathShort??n.frame.filePath??"":u=n.frame.function,l<0&&(l=0),t.fillText(u,l+2,r+13)}t.restore()}}xForT(t){return(t-this.startT)*this.zoom}onWheel(t){if(t.ctrlKey||t.metaKey){const n=this.startT+t.offsetX/this.zoom;this.zoom*=1-t.deltaY/100,this.startT=n-t.offsetX/this.zoom,this.clampViewport(),this.setNeedsRedraw(),t.preventDefault();return}this.startT+=t.deltaX/this.zoom,this.clampViewport(),this.setNeedsRedraw(),t.preventDefault()}onMouseMove(t){this.mouseLocation={x:t.offsetX,y:t.offsetY},this.setNeedsRedraw()}onMouseLeave(t){this.mouseLocation=null,this.setNeedsRedraw()}_assignLibraryOrder(){const t={};for(const r of this.frames){const l=r.frame.library??"";t[l]=(t[l]||0)+1}const n=Object.keys(t);n.sort((r,s)=>t[s]-t[r]),this._libraryOrder=n}colorForLibraryIndex(t){if(this._colors[t]!==void 0)return this._colors[t];const n=Math.pow(2,Math.ceil(Math.log2(t+1))),s=(2*t-n+1)/n,l=Ai(Hi,s);return this._colors[t]=l,l}colorForFrame(t){var s;this._libraryOrder||this._assignLibraryOrder();let n=((s=this._libraryOrder)==null?void 0:s.indexOf(t.frame.library||""))??0;return n===-1&&(n=0),this.colorForLibraryIndex(n)}}function Bi(i){let e;return{c(){e=g("div"),e.innerHTML="",a(e,"class","timeline svelte-lmsdxq")},m(t,n){H(t,e,n),i[4](e)},p:y,i:y,o:y,d(t){t&&V(e),i[4](null)}}}function Ni(i,e,t){let{session:n}=e;const r=[Xe,Je,Ft],s={};let l,o=null,c=null;function u(d){De[d?"unshift":"push"](()=>{o=d,t(0,o)})}return i.$$set=d=>{"session"in d&&t(1,n=d.session)},i.$$.update=()=>{i.$$.dirty&2&&t(2,l=wt(n.rootFrame.cloneDeep(),r,s)),i.$$.dirty&1&&o&&t(3,c=new Li(o)),i.$$.dirty&12&&l&&c&&c.setRootFrame(l)},[o,n,l,c,u]}class zi extends ie{constructor(e){super(),te(this,e,Ni,Bi,K,{session:1})}}function Wi(i){let e,t=i[1].viewMode+"",n;return{c(){e=I("Unknown view mode: "),n=I(t)},m(r,s){H(r,e,s),H(r,n,s)},p(r,s){s&2&&t!==(t=r[1].viewMode+"")&&ce(n,t)},i:y,o:y,d(r){r&&(V(e),V(n))}}}function Ui(i){let e,t;return e=new zi({props:{session:i[0]}}),{c(){ee(e.$$.fragment)},m(n,r){Z(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.session=n[0]),e.$set(s)},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function Gi(i){let e,t;return e=new Ii({props:{session:i[0]}}),{c(){ee(e.$$.fragment)},m(n,r){Z(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.session=n[0]),e.$set(s)},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function qi(i){let e,t,n;return{c(){e=g("div"),t=E(),n=g("div"),n.innerHTML='<div class="error">No samples recorded.</div>',a(e,"class","spacer"),U(e,"height","20px"),a(n,"class","margins")},m(r,s){H(r,e,s),H(r,t,s),H(r,n,s)},p:y,i:y,o:y,d(r){r&&(V(e),V(t),V(n))}}}function ji(i){let e,t,n,r,s,l;t=new fi({props:{session:i[0]}});const o=[qi,Gi,Ui,Wi],c=[];function u(d,h){return d[0].rootFrame?d[1].viewMode==="call-stack"?1:d[1].viewMode==="timeline"?2:3:0}return r=u(i),s=c[r]=o[r](i),{c(){e=g("div"),ee(t.$$.fragment),n=E(),s.c(),a(e,"class","app svelte-1qrzcke")},m(d,h){H(d,e,h),Z(t,e,null),f(e,n),c[r].m(e,null),l=!0},p(d,[h]){const p={};h&1&&(p.session=d[0]),t.$set(p);let v=r;r=u(d),r===v?c[r].p(d,h):(ye(),S(c[v],1,1,()=>{c[v]=null}),Ae(),s=c[r],s?s.p(d,h):(s=c[r]=o[r](d),s.c()),M(s,1),s.m(e,null))},i(d){l||(M(t.$$.fragment,d),M(s),l=!0)},o(d){S(t.$$.fragment,d),S(s),l=!1},d(d){d&&V(e),Y(t),c[r].d()}}}function et(){document.body.style.minHeight=`${window.scrollY+window.innerHeight}px`}function xi(i,e,t){let n;ae(i,Se,h=>t(1,n=h));let{session:r}=e;const s=document.createElement("link");s.rel="shortut icon",s.href=di,document.head.appendChild(s);const l=document.createElement("link");l.rel="preload",l.as="style",l.onload=()=>{l.rel="stylesheet"},l.href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600|Source+Sans+Pro:400,600&display=swap",document.head.appendChild(l),st(()=>{window.addEventListener("scroll",et),et()}),Dt(()=>{window.removeEventListener("scroll",et)});const o=r.rootFrame,c=o==null?void 0:o.time.toLocaleString(void 0,{maximumSignificantDigits:3});r.target_description="Block at /Users/joerick/Projects/pyinstrument/pyinstrument/console.py:80";let u,d;return(d=/[^\s/]+(:\d+)?$/.exec(r.target_description))?u=d[0]:u=r.target_description,document.title=`${c}s - ${u} - pyinstrument`,i.$$set=h=>{"session"in h&&t(0,r=h.session)},[r,n]}class Qi extends ie{constructor(e){super(),te(this,e,xi,ji,K,{session:0})}}class Ki{constructor(e){b(this,"startTime");b(this,"duration");b(this,"sampleCount");b(this,"target_description");b(this,"cpuTime");b(this,"rootFrame");b(this,"sysPath");b(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.target_description=e.session.target_description,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.rootFrame=new Ve(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let t=e;if(Ee(e).length>1)for(const r of this.sysPath){const s=Zi(e,r);Ee(s).length<Ee(t).length&&(t=s)}return this._shortenPathCache[e]=t,t}}function Ee(i){return i.split(/[/\\]/)}function Tt(i){const e=Ee(i);return e.length>0&&e[0].endsWith(":")?e[0]:null}function Zi(i,e){if(Tt(i)!=Tt(e))return i;const t=Ee(i),n=Ee(e);let r=0;for(;r<t.length&&r<n.length&&t[r]==n[r];)r++;return n.slice(r).map(l=>"..").concat(t.slice(r)).join("/")}return{render(i,e){const t=new Ki(e);return new Qi({target:i,props:{session:t}})}}}();
