var pyinstrumentHTMLRenderer=function(){"use strict";var Yi=Object.defineProperty;var Xi=(T,te,de)=>te in T?Yi(T,te,{enumerable:!0,configurable:!0,writable:!0,value:de}):T[te]=de;var C=(T,te,de)=>Xi(T,typeof te!="symbol"?te+"":te,de);function T(){}function te(i){return i()}function de(){return Object.create(null)}function ae(i){i.forEach(te)}function ct(i){return typeof i=="function"}function Y(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function It(i){return Object.keys(i).length===0}function Vt(i,...e){if(i==null){for(const n of e)n(void 0);return T}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function _e(i,e,t){i.$$.on_destroy.push(Vt(e,t))}function u(i,e){i.appendChild(e)}function B(i,e,t){i.insertBefore(e,t||null)}function L(i){i.parentNode&&i.parentNode.removeChild(i)}function Ot(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function v(i){return document.createElement(i)}function I(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function H(i){return document.createTextNode(i)}function y(){return H(" ")}function Dt(){return H("")}function Z(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function Oe(i){return function(e){return e.preventDefault(),i.call(this,e)}}function We(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function c(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function ut(i){let e;return{p(...t){e=t,e.forEach(n=>i.push(n))},r(){e.forEach(t=>i.splice(i.indexOf(t),1))}}}function Ht(i){return Array.from(i.childNodes)}function he(i,e){e=""+e,i.data!==e&&(i.data=e)}function oe(i,e){i.value=e??""}function G(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,"")}function ce(i,e,t){i.classList.toggle(e,!!t)}function Lt(i,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(i,{detail:e,bubbles:t,cancelable:n})}let Me;function Se(i){Me=i}function Ue(){if(!Me)throw new Error("Function called outside component initialization");return Me}function Bt(i){Ue().$$.on_mount.push(i)}function Nt(i){Ue().$$.on_destroy.push(i)}function qt(){const i=Ue();return(e,t,{cancelable:n=!1}={})=>{const s=i.$$.callbacks[e];if(s){const r=Lt(e,t,{cancelable:n});return s.slice().forEach(l=>{l.call(i,r)}),!r.defaultPrevented}return!0}}const we=[],je=[];let be=[];const ft=[],zt=Promise.resolve();let Ge=!1;function Wt(){Ge||(Ge=!0,zt.then(dt))}function xe(i){be.push(i)}const Qe=new Set;let ye=0;function dt(){if(ye!==0)return;const i=Me;do{try{for(;ye<we.length;){const e=we[ye];ye++,Se(e),Ut(e.$$)}}catch(e){throw we.length=0,ye=0,e}for(Se(null),we.length=0,ye=0;je.length;)je.pop()();for(let e=0;e<be.length;e+=1){const t=be[e];Qe.has(t)||(Qe.add(t),t())}be.length=0}while(we.length);for(;ft.length;)ft.pop()();Ge=!1,Qe.clear(),Se(i)}function Ut(i){if(i.fragment!==null){i.update(),ae(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(xe)}}function jt(i){const e=[],t=[];be.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),be=e}const De=new Set;let pe;function Ce(){pe={r:0,c:[],p:pe}}function Ae(){pe.r||ae(pe.c),pe=pe.p}function P(i,e){i&&i.i&&(De.delete(i),i.i(e))}function S(i,e,t,n){if(i&&i.o){if(De.has(i))return;De.add(i),pe.c.push(()=>{De.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function He(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Gt(i,e){S(i,1,1,()=>{e.delete(i.key)})}function xt(i,e,t,n,s,r,l,o,a,f,d,h){let p=i.length,m=r.length,w=p;const g={};for(;w--;)g[i[w].key]=w;const b=[],A=new Map,F=new Map,V=[];for(w=m;w--;){const _=h(s,r,w),k=t(_);let E=l.get(k);E?V.push(()=>E.p(_,e)):(E=f(k,_),E.c()),A.set(k,b[w]=E),k in g&&F.set(k,Math.abs(w-g[k]))}const O=new Set,K=new Set;function R(_){P(_,1),_.m(o,d),l.set(_.key,_),d=_.first,m--}for(;p&&m;){const _=b[m-1],k=i[p-1],E=_.key,M=k.key;_===k?(d=_.first,p--,m--):A.has(M)?!l.has(E)||O.has(E)?R(_):K.has(M)?p--:F.get(E)>F.get(M)?(K.add(E),R(_)):(O.add(M),p--):(a(k,l),p--)}for(;p--;){const _=i[p];A.has(_.key)||a(_,l)}for(;m;)R(b[m-1]);return ae(V),b}function ie(i){i&&i.c()}function X(i,e,t){const{fragment:n,after_update:s}=i.$$;n&&n.m(e,t),xe(()=>{const r=i.$$.on_mount.map(te).filter(ct);i.$$.on_destroy?i.$$.on_destroy.push(...r):ae(r),i.$$.on_mount=[]}),s.forEach(xe)}function J(i,e){const t=i.$$;t.fragment!==null&&(jt(t.after_update),ae(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Qt(i,e){i.$$.dirty[0]===-1&&(we.push(i),Wt(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function ne(i,e,t,n,s,r,l=null,o=[-1]){const a=Me;Se(i);const f=i.$$={fragment:null,ctx:[],props:r,update:T,not_equal:s,bound:de(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:de(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};l&&l(f.root);let d=!1;if(f.ctx=t?t(i,e.props||{},(h,p,...m)=>{const w=m.length?m[0]:p;return f.ctx&&s(f.ctx[h],f.ctx[h]=w)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](w),d&&Qt(i,h)),p}):[],f.update(),d=!0,ae(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const h=Ht(e.target);f.fragment&&f.fragment.l(h),h.forEach(L)}else f.fragment&&f.fragment.c();e.intro&&P(i.$$.fragment),X(i,e.target,e.anchor),dt()}Se(a)}class se{constructor(){C(this,"$$");C(this,"$$set")}$destroy(){J(this,1),this.$destroy=T}$on(e,t){if(!ct(t))return T;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!It(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Kt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kt);function Zt(i){let e,t;return{c(){e=I("svg"),t=I("path"),c(t,"fill-rule","evenodd"),c(t,"clip-rule","evenodd"),c(t,"d","M5.11634 0.889422C4.86506 -0.296474 3.17237 -0.296474 2.92109 0.889422C2.78291 1.54158 2.10994 1.93011 1.47607 1.72371C0.323418 1.34837 -0.522932 2.81429 0.378448 3.62484C0.87414 4.07059 0.87414 4.84767 0.378448 5.29341C-0.522931 6.10397 0.323418 7.56989 1.47607 7.19455C2.10994 6.98814 2.78291 7.37668 2.92109 8.02883C3.17237 9.21473 4.86506 9.21473 5.11634 8.02883C5.25452 7.37668 5.92749 6.98814 6.56136 7.19455C7.71401 7.56989 8.56036 6.10397 7.65898 5.29341C7.16329 4.84767 7.16329 4.07059 7.65898 3.62484C8.56036 2.81429 7.71401 1.34837 6.56136 1.72371C5.92749 1.93011 5.25452 1.54158 5.11634 0.889422ZM4.01883 6.33408C5.05436 6.33408 5.89383 5.49462 5.89383 4.45908C5.89383 3.42355 5.05436 2.58408 4.01883 2.58408C2.98329 2.58408 2.14383 3.42355 2.14383 4.45908C2.14383 5.49462 2.98329 6.33408 4.01883 6.33408Z"),c(t,"fill","currentColor"),c(e,"width","9"),c(e,"height","9"),c(e,"viewBox","0 0 9 9"),c(e,"fill","none"),c(e,"xmlns","http://www.w3.org/2000/svg")},m(n,s){B(n,e,s),u(e,t)},p:T,i:T,o:T,d(n){n&&L(e)}}}class Yt extends se{constructor(e){super(),ne(this,e,null,Zt,Y,{})}}function Xt(i){let e,t,n,s,r,l,o,a,f,d,h,p,m,w,g,b,A;return{c(){e=I("svg"),t=I("g"),n=I("path"),s=I("path"),r=I("defs"),l=I("filter"),o=I("feFlood"),a=I("feBlend"),f=I("feGaussianBlur"),d=I("linearGradient"),h=I("stop"),p=I("stop"),m=I("stop"),w=I("linearGradient"),g=I("stop"),b=I("stop"),A=I("stop"),c(n,"fill-rule","evenodd"),c(n,"clip-rule","evenodd"),c(n,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),c(n,"fill","url(#paint0_linear_67_262)"),c(t,"opacity","0.5"),c(t,"filter","url(#filter0_f_67_262)"),c(s,"fill-rule","evenodd"),c(s,"clip-rule","evenodd"),c(s,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),c(s,"fill","url(#paint1_linear_67_262)"),c(o,"flood-opacity","0"),c(o,"result","BackgroundImageFix"),c(a,"mode","normal"),c(a,"in","SourceGraphic"),c(a,"in2","BackgroundImageFix"),c(a,"result","shape"),c(f,"stdDeviation","3.39785"),c(f,"result","effect1_foregroundBlur_67_262"),c(l,"id","filter0_f_67_262"),c(l,"x","3.2043"),c(l,"y","2.2043"),c(l,"width","36.0914"),c(l,"height","41.0914"),c(l,"filterUnits","userSpaceOnUse"),c(l,"color-interpolation-filters","sRGB"),c(h,"stop-color","#FFAA00"),c(p,"offset","0.514478"),c(p,"stop-color","#FFEB00"),c(m,"offset","1"),c(m,"stop-color","#98FF05"),c(d,"id","paint0_linear_67_262"),c(d,"x1","7.3769"),c(d,"y1","18.4566"),c(d,"x2","20.6583"),c(d,"y2","33.1038"),c(d,"gradientUnits","userSpaceOnUse"),c(g,"stop-color","#FFC834"),c(b,"offset","0.514478"),c(b,"stop-color","#FAF534"),c(A,"offset","1"),c(A,"stop-color","#B8FF38"),c(w,"id","paint1_linear_67_262"),c(w,"x1","7.3769"),c(w,"y1","18.4566"),c(w,"x2","20.6583"),c(w,"y2","33.1038"),c(w,"gradientUnits","userSpaceOnUse"),c(e,"width","44"),c(e,"height","44"),c(e,"viewBox","0 0 44 44"),c(e,"fill","none"),c(e,"xmlns","http://www.w3.org/2000/svg")},m(F,V){B(F,e,V),u(e,t),u(t,n),u(e,s),u(e,r),u(r,l),u(l,o),u(l,a),u(l,f),u(r,d),u(d,h),u(d,p),u(d,m),u(r,w),u(w,g),u(w,b),u(w,A)},p:T,i:T,o:T,d(F){F&&L(e)}}}class Jt extends se{constructor(e){super(),ne(this,e,null,Xt,Y,{})}}const Fe=[];function Ke(i,e=T){let t;const n=new Set;function s(o){if(Y(i,o)&&(i=o,t)){const a=!Fe.length;for(const f of n)f[1](),Fe.push(f,i);if(a){for(let f=0;f<Fe.length;f+=2)Fe[f][0](Fe[f+1]);Fe.length=0}}}function r(o){s(o(i))}function l(o,a=T){const f=[o,a];return n.add(f),n.size===1&&(t=e(s,r)||T),o(i),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:s,update:r,subscribe:l}}var Ze={local:{},session:{}};function ei(i){return i==="local"?localStorage:sessionStorage}function Ye(i,e,t){var n,s,r,l,o,a,f,d;t!=null&&t.onError&&console.warn("onError has been deprecated. Please use onWriteError instead");const h=(n=t==null?void 0:t.serializer)!=null?n:JSON,p=(s=t==null?void 0:t.storage)!=null?s:"local",m=(r=t==null?void 0:t.syncTabs)!=null?r:!0,w=(o=(l=t==null?void 0:t.onWriteError)!=null?l:t==null?void 0:t.onError)!=null?o:R=>console.error(`Error when writing value from persisted store "${i}" to ${p}`,R),g=(a=t==null?void 0:t.onParseError)!=null?a:(R,_)=>console.error(`Error when parsing ${R?'"'+R+'"':"value"} from persisted store "${i}"`,_),b=(f=t==null?void 0:t.beforeRead)!=null?f:R=>R,A=(d=t==null?void 0:t.beforeWrite)!=null?d:R=>R,F=typeof window<"u"&&typeof document<"u",V=F?ei(p):null;function O(R,_){const k=A(_);try{V==null||V.setItem(R,h.stringify(k))}catch(E){w(E)}}function K(){function R(M){try{return h.parse(M)}catch(N){g(M,N)}}const _=V==null?void 0:V.getItem(i);if(_==null)return e;const k=R(_);return k==null?e:b(k)}if(!Ze[p][i]){const R=K(),_=Ke(R,M=>{if(F&&p=="local"&&m){const N=x=>{if(x.key===i&&x.newValue){let j;try{j=h.parse(x.newValue)}catch(ee){g(x.newValue,ee);return}const le=b(j);M(le)}};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)}}),{subscribe:k,set:E}=_;Ze[p][i]={set(M){E(M),O(i,M)},update(M){return _.update(N=>{const x=M(N);return O(i,x),x})},reset(){this.set(e)},subscribe:k}}return Ze[p][i]}function ht(){return{collapseMode:"non-application",collapseCustomHide:"",collapseCustomShow:"",hideImportlib:!0,hideTracebackHide:!0,hidePyinstrument:!0,hideIrrelevant:!0,hideIrrelevantThreshold:.001,timeFormat:"absolute"}}const me=Ye("pyinstrument:viewOptionsCallStack",ht(),{syncTabs:!0,beforeRead(i){return{...ht(),...i}}}),Le=Ye("pyinstrument:viewOptions",{viewMode:"call-stack"},{syncTabs:!1});Ye("pyinstrument:viewOptionsTimeline",{hideImportlib:!0,hideTracebackHide:!0,hidePyinstrument:!0,hideIrrelevant:!0,hideIrrelevantThreshold:1e-4},{syncTabs:!0});function ti(i){let e,t,n,s,r,l,o,a,f,d,h,p,m,w,g,b,A,F,V,O,K,R,_,k,E,M,N,x,j,le,ee,$,re,ge,ue,z,Re,Ve;return z=ut(i[3][0]),{c(){e=v("div"),t=v("div"),n=v("div"),n.textContent="Collapse frames",s=y(),r=v("div"),l=v("div"),o=v("input"),a=y(),f=v("label"),d=H("Non-application code"),h=y(),p=v("div"),p.textContent=`Application code is anything run from outside the Python home
          directory.`,m=y(),w=v("div"),g=v("input"),b=y(),A=v("label"),F=H("Custom"),V=y(),O=v("div"),K=H(`Regex on the source file path
          `),R=v("div"),_=v("label"),_.textContent="Hide",k=y(),E=v("input"),M=y(),N=v("label"),N.textContent="Show",x=y(),j=v("input"),le=y(),ee=v("div"),$=v("input"),re=y(),ge=v("label"),ue=H("Disabled"),c(n,"class","name svelte-1q5qj9m"),c(o,"id",i[1]+"collapseModeAll"),c(o,"type","radio"),o.__value="non-application",oe(o,o.__value),c(f,"for",i[1]+"collapseModeAll"),c(p,"class","description svelte-1q5qj9m"),c(l,"class","option svelte-1q5qj9m"),c(g,"id",i[1]+"collapseModeCustom"),c(g,"type","radio"),g.__value="custom",oe(g,g.__value),c(A,"for",i[1]+"collapseModeCustom"),c(_,"for","collapseCustomHide"),c(E,"id","collapseCustomHide"),c(E,"type","text"),c(E,"placeholder",".*/lib/.*"),c(E,"class","svelte-1q5qj9m"),c(N,"for","collapseCustomShow"),c(j,"id","collapseCustomShow"),c(j,"type","text"),c(j,"placeholder","myproject"),c(j,"class","svelte-1q5qj9m"),c(R,"class","mini-input-grid svelte-1q5qj9m"),c(O,"class","description svelte-1q5qj9m"),c(w,"class","option svelte-1q5qj9m"),c($,"id",i[1]+"collapseModeDisabled"),c($,"type","radio"),$.__value="disabled",oe($,$.__value),c(ge,"for",i[1]+"collapseModeDisabled"),c(ee,"class","option svelte-1q5qj9m"),c(r,"class","body"),c(t,"class","option-group svelte-1q5qj9m"),c(e,"class","view-options-call-stack svelte-1q5qj9m"),z.p(o,g,$)},m(W,D){B(W,e,D),u(e,t),u(t,n),u(t,s),u(t,r),u(r,l),u(l,o),o.checked=o.__value===i[0].collapseMode,u(l,a),u(l,f),u(f,d),u(l,h),u(l,p),u(r,m),u(r,w),u(w,g),g.checked=g.__value===i[0].collapseMode,u(w,b),u(w,A),u(A,F),u(w,V),u(w,O),u(O,K),u(O,R),u(R,_),u(R,k),u(R,E),oe(E,i[0].collapseCustomHide),u(R,M),u(R,N),u(R,x),u(R,j),oe(j,i[0].collapseCustomShow),u(r,le),u(r,ee),u(ee,$),$.checked=$.__value===i[0].collapseMode,u(ee,re),u(ee,ge),u(ge,ue),Re||(Ve=[Z(o,"change",i[2]),Z(g,"change",i[4]),Z(E,"input",i[5]),Z(j,"input",i[6]),Z($,"change",i[7])],Re=!0)},p(W,[D]){D&1&&(o.checked=o.__value===W[0].collapseMode),D&1&&(g.checked=g.__value===W[0].collapseMode),D&1&&E.value!==W[0].collapseCustomHide&&oe(E,W[0].collapseCustomHide),D&1&&j.value!==W[0].collapseCustomShow&&oe(j,W[0].collapseCustomShow),D&1&&($.checked=$.__value===W[0].collapseMode)},i:T,o:T,d(W){W&&L(e),z.r(),Re=!1,ae(Ve)}}}function ii(i,e,t){let n;_e(i,me,h=>t(0,n=h));const s=Math.random().toString(36).substring(4),r=[[]];function l(){n.collapseMode=this.__value,me.set(n)}function o(){n.collapseMode=this.__value,me.set(n)}function a(){n.collapseCustomHide=this.value,me.set(n)}function f(){n.collapseCustomShow=this.value,me.set(n)}function d(){n.collapseMode=this.__value,me.set(n)}return[n,s,l,r,o,a,f,d]}class ni extends se{constructor(e){super(),ne(this,e,ii,ti,Y,{})}}function si(i){let e;return{c(){e=v("div"),e.innerHTML="",c(e,"class","view-options-timeline")},m(t,n){B(t,e,n)},p:T,i:T,o:T,d(t){t&&L(e)}}}class ri extends se{constructor(e){super(),ne(this,e,null,si,Y,{})}}function oi(i){let e,t;return e=new ri({}),{c(){ie(e.$$.fragment)},m(n,s){X(e,n,s),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function li(i){let e,t;return e=new ni({}),{c(){ie(e.$$.fragment)},m(n,s){X(e,n,s),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function ai(i){let e,t,n,s,r,l,o,a,f,d,h,p;const m=[li,oi],w=[];function g(b,A){return b[0].viewMode==="call-stack"?0:b[0].viewMode==="timeline"?1:-1}return~(a=g(i))&&(f=w[a]=m[a](i)),{c(){e=v("div"),t=v("div"),n=y(),s=v("div"),r=v("div"),l=H(i[1]),o=y(),f&&f.c(),c(t,"class","backdrop svelte-8n2cve"),c(t,"role","presentation"),c(r,"class","title svelte-8n2cve"),c(s,"class","box svelte-8n2cve"),c(e,"class","view-options svelte-8n2cve")},m(b,A){B(b,e,A),u(e,t),u(e,n),u(e,s),u(s,r),u(r,l),u(s,o),~a&&w[a].m(s,null),d=!0,h||(p=Z(t,"click",Oe(i[2]),!0),h=!0)},p(b,[A]){(!d||A&2)&&he(l,b[1]);let F=a;a=g(b),a!==F&&(f&&(Ce(),S(w[F],1,1,()=>{w[F]=null}),Ae()),~a?(f=w[a],f||(f=w[a]=m[a](b),f.c()),P(f,1),f.m(s,null)):f=null)},i(b){d||(P(f),d=!0)},o(b){S(f),d=!1},d(b){b&&L(e),~a&&w[a].d(),h=!1,p()}}}function ci(i,e,t){let n;_e(i,Le,o=>t(0,n=o));const s=qt();function r(){s("close")}let l="View options";return i.$$.update=()=>{i.$$.dirty&1&&(n.viewMode==="call-stack"?t(1,l="Call stack view options"):n.viewMode==="timeline"&&t(1,l="Timeline view options"))},[n,l,r]}class ui extends se{constructor(e){super(),ne(this,e,ci,ai,Y,{})}}function pt(i){let e,t;return e=new ui({}),e.$on("close",i[9]),{c(){ie(e.$$.fragment)},m(n,s){X(e,n,s),t=!0},p:T,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function fi(i){let e,t,n,s,r,l,o,a,f=i[0].target_description+"",d,h,p,m,w,g,b,A,F,V,O,K,R,_,k=i[0].sampleCount+"",E,M,N,x,j,le,ee,$,re,ge,ue,z,Re,Ve,W,D,Tt,kt,ze,Pt,ve,Te,ke,Mt,St,Pe,lt,at,$t;r=new Jt({}),ke=new Yt({});let q=i[1]&&pt(i);return lt=ut(i[7][0]),{c(){e=v("div"),t=v("div"),n=v("div"),s=v("div"),ie(r.$$.fragment),l=y(),o=v("div"),a=v("div"),d=H(f),h=y(),p=v("div"),m=v("div"),w=v("span"),w.textContent="Recorded:",g=y(),b=v("span"),b.textContent=`${i[3]}`,A=y(),F=v("br"),V=y(),O=v("div"),K=v("span"),K.textContent="Samples:",R=y(),_=v("span"),E=H(k),M=y(),N=v("div"),x=v("span"),x.textContent="CPU utilization:",j=y(),le=v("span"),le.textContent=`${(i[4]*100).toFixed(0)}%`,ee=y(),$=v("div"),re=v("div"),ge=H(`View:
            `),ue=v("label"),z=v("input"),Re=H(`
              Call stack`),Ve=y(),W=v("label"),D=v("input"),Tt=H(`
              Timeline`),kt=y(),ze=v("div"),Pt=y(),ve=v("div"),Te=v("button"),ie(ke.$$.fragment),Mt=H(`
              View options`),St=y(),q&&q.c(),c(s,"class","logo svelte-g6343"),c(a,"class","target-description svelte-g6343"),c(w,"class","metric-label svelte-g6343"),c(b,"class","metric-value svelte-g6343"),c(m,"class","metric date svelte-g6343"),c(F,"class","svelte-g6343"),c(K,"class","metric-label svelte-g6343"),c(_,"class","metric-value svelte-g6343"),c(O,"class","metric svelte-g6343"),c(x,"class","metric-label svelte-g6343"),c(le,"class","metric-value svelte-g6343"),c(N,"class","metric svelte-g6343"),c(p,"class","metrics svelte-g6343"),c(z,"type","radio"),z.__value="call-stack",oe(z,z.__value),c(z,"class","svelte-g6343"),c(ue,"class","svelte-g6343"),c(D,"type","radio"),D.__value="timeline",oe(D,D.__value),c(D,"class","svelte-g6343"),c(W,"class","svelte-g6343"),c(re,"class","toggle"),c(ze,"class","spacer"),G(ze,"flex","1"),c(Te,"class","svelte-g6343"),c(ve,"class","button-container svelte-g6343"),c($,"class","view-options svelte-g6343"),c(o,"class","layout svelte-g6343"),c(n,"class","row svelte-g6343"),c(t,"class","margins"),c(e,"class","header svelte-g6343"),lt.p(z,D)},m(U,fe){B(U,e,fe),u(e,t),u(t,n),u(n,s),X(r,s,null),u(n,l),u(n,o),u(o,a),u(a,d),u(o,h),u(o,p),u(p,m),u(m,w),u(m,g),u(m,b),u(p,A),u(p,F),u(p,V),u(p,O),u(O,K),u(O,R),u(O,_),u(_,E),u(p,M),u(p,N),u(N,x),u(N,j),u(N,le),u(o,ee),u(o,$),u($,re),u(re,ge),u(re,ue),u(ue,z),z.checked=z.__value===i[2].viewMode,u(ue,Re),u(re,Ve),u(re,W),u(W,D),D.checked=D.__value===i[2].viewMode,u(W,Tt),u($,kt),u($,ze),u($,Pt),u($,ve),u(ve,Te),X(ke,Te,null),u(Te,Mt),u(ve,St),q&&q.m(ve,null),Pe=!0,at||($t=[Z(z,"change",i[6]),Z(D,"change",i[8]),Z(Te,"click",We(Oe(i[5])))],at=!0)},p(U,[fe]){(!Pe||fe&1)&&f!==(f=U[0].target_description+"")&&he(d,f),(!Pe||fe&1)&&k!==(k=U[0].sampleCount+"")&&he(E,k),fe&4&&(z.checked=z.__value===U[2].viewMode),fe&4&&(D.checked=D.__value===U[2].viewMode),U[1]?q?(q.p(U,fe),fe&2&&P(q,1)):(q=pt(U),q.c(),P(q,1),q.m(ve,null)):q&&(Ce(),S(q,1,1,()=>{q=null}),Ae())},i(U){Pe||(P(r.$$.fragment,U),P(ke.$$.fragment,U),P(q),Pe=!0)},o(U){S(r.$$.fragment,U),S(ke.$$.fragment,U),S(q),Pe=!1},d(U){U&&L(e),J(r),J(ke),q&&q.d(),lt.r(),at=!1,ae($t)}}}function di(i,e,t){let n;_e(i,Le,m=>t(2,n=m));let{session:s}=e;const r=new Date(s.startTime*1e3).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"}),l=s.cpuTime/s.duration;let o=!1;function a(m){t(1,o=!o)}const f=[[]];function d(){n.viewMode=this.__value,Le.set(n)}function h(){n.viewMode=this.__value,Le.set(n)}const p=()=>t(1,o=!1);return i.$$set=m=>{"session"in m&&t(0,s=m.session)},[s,o,n,r,l,a,d,f,h,p]}class hi extends se{constructor(e){super(),ne(this,e,di,fi,Y,{session:0})}}const pi="data:image/png;base64,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",mt=Ke({}),gt=Ke({});function vt(i,e,t){const n=i.slice();return n[19]=e[t],n}function _t(i){let e,t,n,s,r,l,o,a,f,d,h,p,m,w;return{c(){e=v("div"),t=v("div"),n=I("svg"),s=I("path"),r=y(),l=v("div"),o=H(i[5]),a=y(),f=v("div"),d=H(i[4]),h=y(),p=v("div"),p.textContent=`${i[11]}`,c(s,"d","M.937-.016L5.793 4.84.937 9.696z"),c(s,"fill",i[7]),c(s,"fill-rule","evenodd"),c(s,"fill-opacity",".582"),c(n,"width","6"),c(n,"height","10"),c(t,"class","frame-triangle svelte-1hxft88"),ce(t,"rotate",!i[9]),G(t,"visibility",i[0].children.length>0?"visible":"hidden"),c(l,"class","time svelte-1hxft88"),G(l,"color",i[7]),G(l,"font-weight",i[10]<.2?500:600),c(f,"class","name svelte-1hxft88"),c(p,"class","code-position svelte-1hxft88"),c(e,"class","frame-description svelte-1hxft88"),ce(e,"application-code",i[0].isApplicationCode),ce(e,"children-visible",!i[9]),G(e,"padding-left",`${i[2]*35}px`)},m(g,b){B(g,e,b),u(e,t),u(t,n),u(n,s),u(e,r),u(e,l),u(l,o),u(e,a),u(e,f),u(f,d),u(e,h),u(e,p),m||(w=Z(e,"click",We(Oe(i[12]))),m=!0)},p(g,b){b&128&&c(s,"fill",g[7]),b&512&&ce(t,"rotate",!g[9]),b&1&&G(t,"visibility",g[0].children.length>0?"visible":"hidden"),b&32&&he(o,g[5]),b&128&&G(l,"color",g[7]),b&16&&he(d,g[4]),b&1&&ce(e,"application-code",g[0].isApplicationCode),b&512&&ce(e,"children-visible",!g[9]),b&4&&G(e,"padding-left",`${g[2]*35}px`)},d(g){g&&L(e),m=!1,w()}}}function wt(i){let e,t,n,s,r=i[0].group.frames.length+"",l,o,a,f,d,h;return{c(){e=v("div"),t=v("div"),n=v("div"),n.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',s=y(),l=H(r),o=H(` frames hidden
        (`),a=H(i[6]),f=H(")"),c(n,"class","group-triangle svelte-1hxft88"),ce(n,"rotate",i[8]),c(t,"class","group-header-button svelte-1hxft88"),c(e,"class","group-header svelte-1hxft88"),G(e,"padding-left",`${i[2]*35}px`)},m(p,m){B(p,e,m),u(e,t),u(t,n),u(t,s),u(t,l),u(t,o),u(t,a),u(t,f),d||(h=Z(e,"click",We(Oe(i[13]))),d=!0)},p(p,m){m&256&&ce(n,"rotate",p[8]),m&1&&r!==(r=p[0].group.frames.length+"")&&he(l,r),m&64&&he(a,p[6]),m&4&&G(e,"padding-left",`${p[2]*35}px`)},d(p){p&&L(e),d=!1,h()}}}function bt(i){let e,t=[],n=new Map,s,r=He(i[0].children);const l=o=>o[19].uuid;for(let o=0;o<r.length;o+=1){let a=vt(i,r,o),f=l(a);n.set(f,t[o]=yt(f,a))}return{c(){e=v("div");for(let o=0;o<t.length;o+=1)t[o].c();c(e,"class","children svelte-1hxft88")},m(o,a){B(o,e,a);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(o,a){a&15&&(r=He(o[0].children),Ce(),t=xt(t,a,l,1,o,r,n,e,Gt,yt,null,vt),Ae())},i(o){if(!s){for(let a=0;a<r.length;a+=1)P(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)S(t[a]);s=!1},d(o){o&&L(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function yt(i,e){let t,n,s;return n=new Ct({props:{frame:e[19],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:i,first:null,c(){t=Dt(),ie(n.$$.fragment),this.first=t},m(r,l){B(r,t,l),X(n,r,l),s=!0},p(r,l){e=r;const o={};l&1&&(o.frame=e[19]),l&2&&(o.rootFrame=e[1]),l&12&&(o.indent=e[2]+(e[3]?1:0)),n.$set(o)},i(r){s||(P(n.$$.fragment,r),s=!0)},o(r){S(n.$$.fragment,r),s=!1},d(r){r&&L(t),J(n,r)}}}function mi(i){let e,t,n,s,r,l,o=i[3]&&_t(i),a=i[0].group&&i[0].group.rootFrame==i[0]&&!i[9]&&wt(i),f=!i[9]&&i[0].children.length>0&&bt(i);return{c(){e=v("div"),o&&o.c(),t=y(),a&&a.c(),n=y(),f&&f.c(),s=y(),r=v("div"),r.innerHTML="",c(r,"class","visual-guide svelte-1hxft88"),G(r,"left",`${i[2]*35+21}px`),G(r,"backgroundColor",i[7]),c(e,"class","frame svelte-1hxft88")},m(d,h){B(d,e,h),o&&o.m(e,null),u(e,t),a&&a.m(e,null),u(e,n),f&&f.m(e,null),u(e,s),u(e,r),l=!0},p(d,[h]){d[3]?o?o.p(d,h):(o=_t(d),o.c(),o.m(e,t)):o&&(o.d(1),o=null),d[0].group&&d[0].group.rootFrame==d[0]&&!d[9]?a?a.p(d,h):(a=wt(d),a.c(),a.m(e,n)):a&&(a.d(1),a=null),!d[9]&&d[0].children.length>0?f?(f.p(d,h),h&513&&P(f,1)):(f=bt(d),f.c(),P(f,1),f.m(e,s)):f&&(Ce(),S(f,1,1,()=>{f=null}),Ae()),h&4&&G(r,"left",`${d[2]*35+21}px`),h&128&&G(r,"backgroundColor",d[7])},i(d){l||(P(f),l=!0)},o(d){S(f),l=!1},d(d){d&&L(e),o&&o.d(),a&&a.d(),f&&f.d()}}}function gi(i,e,t){var R;let n,s,r,l,o;_e(i,gt,_=>t(14,r=_)),_e(i,mt,_=>t(15,l=_)),_e(i,me,_=>t(16,o=_));let{frame:a}=e,{rootFrame:f}=e,{indent:d=0}=e,h;const p=a.time/f.time;let m;const w=`${a.filePathShort}:${(R=a.lineNo)==null?void 0:R.toString().padEnd(4," ")}`;let g,b=null;if(a.group){const _=a.group.libraries;_.length<4?b=_.join(", "):b=`${_[0]}, ${_[1]}, ${_[2]}...`}let A;p>.6?A="#FF4159":p>.3?A="#F5A623":p>.2?A="#D8CB2A":A="#7ED321";function F(_){V(a,!s,_.altKey)}function V(_,k,E=!0){if(gt.update(M=>({...M,[_.uuid]:k})),E)for(const M of _.children)V(M,k,!0),_.group&&_.group.rootFrame==_&&O(_.group.id,!k)}function O(_,k){mt.update(E=>({...E,[_]:k}))}function K(){a.group&&O(a.group.id,!n)}return i.$$set=_=>{"frame"in _&&t(0,a=_.frame),"rootFrame"in _&&t(1,f=_.rootFrame),"indent"in _&&t(2,d=_.indent)},i.$$.update=()=>{var _,k;if(i.$$.dirty&32769&&(a.group?l[a.group.id??""]||((_=a.group)==null?void 0:_.rootFrame)===a||a.children.filter(E=>!E.group).length>1?t(3,h=!0):t(3,h=!1):t(3,h=!0)),i.$$.dirty&1&&(a.className?t(4,m=`${a.className}.${a.function}`):t(4,m=a.function)),i.$$.dirty&65537)if(o.timeFormat==="absolute")t(5,g=a.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(o.timeFormat==="proportion")t(5,g=`${(p*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");i.$$.dirty&32769&&t(8,n=l[((k=a.group)==null?void 0:k.id)??""]===!0),i.$$.dirty&16385&&t(9,s=r[a.uuid]===!0)},[a,f,d,h,m,g,b,A,n,s,p,w,F,K,r,l,o]}let Ct=class extends se{constructor(e){super(),ne(this,e,gi,mi,Y,{frame:0,rootFrame:1,indent:2})}};function At(i,e,t){let n=i;for(const s of e)if(n=s.function(n,t),!n)return null;return n}const vi="\0",_i="[await]",$e="[self]",wi=[_i,$e,"[out-of-context]","[root]"],bi="c",yi="h";class Ie{constructor(e,t){C(this,"uuid",crypto.randomUUID());C(this,"identifier");C(this,"_identifierParts");C(this,"startTime");C(this,"time",0);C(this,"absorbedTime",0);C(this,"group",null);C(this,"attributes");C(this,"_children",[]);C(this,"parent",null);C(this,"context");var r;this.identifier=e.identifier,this._identifierParts=this.identifier.split(vi),this.startTime=e.startTime??0,this.time=e.time??0,this.attributes=e.attributes??{},this.context=t;let n=this.startTime;const s=(r=e.children)==null?void 0:r.map(l=>(l.startTime===void 0&&(l={...l,startTime:n},n+=l.time??0),n=l.startTime+(l.time??0),new Ie(l,t)));s&&this.addChildren(s)}cloneDeep(){return new Ie(this,this.context)}get children(){return this._children}addChild(e,t={}){if(e.removeFromParent(),e.parent=this,t.after){const n=this._children.indexOf(t.after);if(n==-1)throw new Error("After frame not found");this._children.splice(n+1,0,e)}else this._children.push(e)}addChildren(e,t={}){e=e.slice(),t.after?(e.slice().reverse(),e.forEach(s=>this.addChild(s,t))):e.forEach(n=>this.addChild(n,t))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(n=>n.startsWith(e)).map(n=>({data:n.slice(1),time:this.attributes[n]}))}getAttributeValue(e){const t=this.getAttributes(e);if(!t||t.length==0)return null;let n=0;for(let s=0;s<t.length;s++)t[s].time>t[n].time&&(n=s);return t[n].data}get hasTracebackhide(){return this.getAttributeValue(yi)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return wi.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||["/lib/","\\lib\\"].some(n=>e.includes(n))?!1:e.startsWith("<")?!!e.startsWith("<ipython-input-"):!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue(bi)??""}get library(){const e=this.filePathShort;return e?/^[^\\/.]*/.exec(e)[0]:null}}class Ci{constructor(e){C(this,"id");C(this,"rootFrame");C(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const t=this._frames.indexOf(e);if(t===-1)throw new Error("Frame not found in group.");this._frames.splice(t,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const t of this.frames){let n=!1;for(const s of t.children)if(s.group!=this){n=!0;break}n&&e.push(t)}return e}get libraries(){const e=[];for(const t of this.frames){const n=t.library;n&&(e.includes(n)||e.push(n))}return e}}class Ai extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function Fi(i,e){const t=e*(i.length-1),n=Math.floor(t),s=Math.ceil(t),r=i[n],l=i[s],o=t-n;return Ri(o,{to:[r,l]})}function Ei(i,e,t){return i===1/0?(console.warn("clamp: value is Infinity, returning `max`",i),t):i===-1/0?(console.warn("clamp: value is -Infinity, returning `min`",i),e):Number.isFinite(i)?i<e?e:i>t?t:i:(console.warn("clamp: value isn't finite, returning `min`",i),e)}function Xe(i,e){const{from:t=[0,1],to:n=[0,1]}=e,s=e.clamp||!1;let r=(i-t[0])/(t[1]-t[0])*(n[1]-n[0])+n[0];return s&&(r=Ei(r,Math.min(n[0],n[1]),Math.max(n[0],n[1]))),r}function Ri(i,e){return`rgb(
      ${Xe(i,{from:e.from,to:[e.to[0][0],e.to[1][0]],clamp:e.clamp})},
      ${Xe(i,{from:e.from,to:[e.to[0][1],e.to[1][1]],clamp:e.clamp})},
      ${Xe(i,{from:e.from,to:[e.to[0][2],e.to[1][2]],clamp:e.clamp})}
    )`}function Ti(i){if(i.substr(0,1)=="#"){var e=(i.length-1)/3,t=[17,1,.062272][e-1];return[Math.round(parseInt(i.substr(1,e),16)*t),Math.round(parseInt(i.substr(1+e,e),16)*t),Math.round(parseInt(i.substr(1+2*e,e),16)*t)]}else return i.split("(")[1].split(")")[0].split(",").map(n=>+n)}function Be(i,e){const{replaceWith:t}=e,n=i.parent;if(!n)throw new Error("Cannot delete the root frame");if(t=="children")n.addChildren(i.children,{after:i});else if(t=="self_time")n.addChild(new Ie({identifier:$e,time:i.time},n.context),{after:i});else if(t=="nothing")n.absorbedTime+=i.time;else throw new Ai(t);i.removeFromParent(),Je(i,!0)}function ki(i,e){if(i.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=i.absorbedTime,e.time+=i.time,Object.entries(i.attributes).forEach(([t,n])=>{e.attributes[t]!==void 0?e.attributes[t]+=n:e.attributes[t]=n}),e.addChildren(i.children),i.removeFromParent(),Je(i,!1)}function Je(i,e){if(e&&i.children&&i.children.forEach(t=>{Je(t,!0)}),i.group){const t=i.group;t.removeFrame(i),t.frames.length===1&&t.removeFrame(t.frames[0])}}const Q=[];function Ne(i,e){if(!i)return null;for(const t of i.children)Ne(t),t.filePath&&t.filePath.includes("<frozen importlib._bootstrap")&&Be(t,{replaceWith:"children"});return i}Q.push({name:"remove_importlib",description:"Removes <frozen importlib._bootstrap frames that clutter the output.",function:Ne,optionsSpec:[],category:"normal"});function qe(i,e){if(!i)return null;for(const t of i.children)qe(t),t.hasTracebackhide&&Be(t,{replaceWith:"children"});return i}Q.push({name:"remove_tracebackhide",description:"Removes frames that have set a local __tracebackhide__ (e.g. __tracebackhide__ = True), to hide them from the output.",function:qe,optionsSpec:[],category:"advanced"});function et(i,e){if(!i)return null;const t={};for(const n of i.children.slice())if(t[n.identifier]){const s=t[n.identifier];ki(n,s)}else t[n.identifier]=n;return i.children.forEach(n=>et(n)),i._children.sort((n,s)=>s.time-n.time),i}Q.push({name:"aggregate_repeated_calls",description:"Converts a timeline into a time-aggregate summary. Adds together calls along the same call stack, so that repeated calls appear as the same frame. Removes time-linearity - frames are sorted according to total time spent.",function:et,optionsSpec:[],category:"normal"});function tt(i,e){if(!i)return null;const t=e.hideRegex,n=e.showRegex;function s(l){const o=l.filePath||"",a=n&&new RegExp(n).test(o),f=t&&new RegExp(t).test(o);return a?!1:f?!0:!l.isApplicationCode}function r(l,o){o.addFrame(l),l.children.forEach(a=>{s(a)&&r(a,o)})}return i.children.forEach(l=>{if(!l.group&&s(l)&&l.children.some(s)){const o=new Ci(l);r(l,o)}tt(l,e)}),i}Q.push({name:"Group library frames",description:"Groups frames that should be hidden.",function:tt,optionsSpec:[{key:"hideRegex",name:"Hide regex",value:{type:"string",default:""}},{key:"showRegex",name:"Show regex",value:{type:"string",default:""}}],category:"normal"});function it(i,e,t=!0){if(!i)return null;let n=null;for(const s of i.children)s.identifier===$e?n?(n.time+=s.time,s.removeFromParent()):n=s:n=null;return t&&i.children.forEach(s=>it(s,e,!0)),i}Q.push({name:"Merge consecutive self time",description:"Combines consecutive 'self time' frames.",function:it,optionsSpec:[],category:"advanced"});function nt(i,e){return i?(i.children.length===1&&i.children[0].identifier===$e&&Be(i.children[0],{replaceWith:"nothing"}),i.children.forEach(t=>nt(t)),i):null}Q.push({name:"Remove unnecessary self time nodes",description:"Removes unnecessary self-time nodes.",function:nt,optionsSpec:[],category:"advanced"});function st(i,e,t=null){if(!i)return null;t===null&&(t=i.time,t<=0&&(t=1e-44));const n=e.filterThreshold||.01;for(const s of i.children.slice())s.time/t<n&&Be(s,{replaceWith:"nothing"});return i.children.forEach(s=>st(s,e,t)),i}Q.push({name:"Remove irrelevant nodes",description:"Removes nodes that represent less than a certain percentage of the output.",function:st,optionsSpec:[{key:"filterThreshold",name:"Filter threshold",value:{type:"number",default:.01,min:0,max:1,sliderMin:1e-4,sliderMax:1}}],category:"normal"});function rt(i,e){if(!i)return null;const t=l=>{var o;return((o=l.filePath)==null?void 0:o.includes("pyinstrument/__main__.py"))&&l.children.length>0},n=l=>{var o;return l.proportionOfParent>.8&&((o=l.filePath)==null?void 0:o.includes("<string>"))&&l.children.length>0},s=l=>{var o;return l.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(l.filePath??"")||((o=l.filePath)==null?void 0:o.includes("<frozen runpy>")))&&l.children.length>0};let r=i;if(!t(r)||(r=r.children[0],!n(r))||(r=r.children[0],!s(r)))return i;for(;s(r);)r=r.children[0];return r.removeFromParent(),r}Q.push({name:"Remove first pyinstrument frames",description:"Removes the initial frames specific to the command line use of pyinstrument.",function:rt,optionsSpec:[],category:"advanced"});function Ft(i,e,t){const n=i.slice();return n[7]=e[t],n[8]=e,n[9]=t,n}function Et(i){let e,t,n,s=i[7].name+"",r,l,o,a;function f(){i[5].call(t,i[7])}return{c(){e=v("label"),t=v("input"),n=y(),r=H(s),l=y(),c(t,"type","checkbox")},m(d,h){B(d,e,h),u(e,t),t.checked=i[0][i[7].name],u(e,n),u(e,r),u(e,l),o||(a=Z(t,"change",f),o=!0)},p(d,h){i=d,h&1&&(t.checked=i[0][i[7].name])},d(d){d&&L(e),o=!1,a()}}}function Pi(i){let e,t;return e=new Ct({props:{frame:i[1],rootFrame:i[1]}}),{c(){ie(e.$$.fragment)},m(n,s){X(e,n,s),t=!0},p(n,s){const r={};s&2&&(r.frame=n[1]),s&2&&(r.rootFrame=n[1]),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Mi(i){let e;return{c(){e=v("div"),e.textContent="All frames were filtered out.",c(e,"class","error")},m(t,n){B(t,e,n)},p:T,i:T,o:T,d(t){t&&L(e)}}}function Si(i){let e,t,n,s,r,l,o,a,f,d=He(Q),h=[];for(let g=0;g<d.length;g+=1)h[g]=Et(Ft(i,d,g));const p=[Mi,Pi],m=[];function w(g,b){return g[1]?1:0}return o=w(i),a=m[o]=p[o](i),{c(){e=v("div"),t=v("div"),n=v("h2"),n.textContent="Options",s=y(),r=v("div");for(let g=0;g<h.length;g+=1)h[g].c();l=y(),a.c(),c(r,"class","processor-options"),c(t,"class","options"),c(e,"class","tree-view")},m(g,b){B(g,e,b),u(e,t),u(t,n),u(t,s),u(t,r);for(let A=0;A<h.length;A+=1)h[A]&&h[A].m(r,null);u(e,l),m[o].m(e,null),f=!0},p(g,[b]){if(b&1){d=He(Q);let F;for(F=0;F<d.length;F+=1){const V=Ft(g,d,F);h[F]?h[F].p(V,b):(h[F]=Et(V),h[F].c(),h[F].m(r,null))}for(;F<h.length;F+=1)h[F].d(1);h.length=d.length}let A=o;o=w(g),o===A?m[o].p(g,b):(Ce(),S(m[A],1,1,()=>{m[A]=null}),Ae(),a=m[o],a?a.p(g,b):(a=m[o]=p[o](g),a.c()),P(a,1),a.m(e,null))},i(g){f||(P(a),f=!0)},o(g){S(a),f=!1},d(g){g&&L(e),Ot(h,g),m[o].d()}}}function $i(i,e,t){let{session:n}=e;const s=[Ne,qe,it,et,nt,st,rt,tt];let r,l={},o={};for(const d of Q){l[d.name]=s.includes(d.function);for(const h of d.optionsSpec)o[h.name]=h.value.default}let a;function f(d){l[d.name]=this.checked,t(0,l)}return i.$$set=d=>{"session"in d&&t(2,n=d.session)},i.$$.update=()=>{i.$$.dirty&1&&t(3,r=s.map(d=>Q.find(h=>h.function==d)).filter(d=>l[d.name])),i.$$.dirty&28&&t(1,a=At(n.rootFrame.cloneDeep(),r,o))},[l,a,n,r,o,f]}class Ii extends se{constructor(e){super(),ne(this,e,$i,Si,Y,{session:2})}}class Vi{constructor(e){C(this,"mediaQueryList",null);this.onDevicePixelRatioChanged=e,this._onChange=this._onChange.bind(this),this.createMediaQueryList()}createMediaQueryList(){this.removeMediaQueryList();let e=`(resolution: ${window.devicePixelRatio}dppx)`;this.mediaQueryList=matchMedia(e),this.mediaQueryList.addEventListener("change",this._onChange)}removeMediaQueryList(){var e;(e=this.mediaQueryList)==null||e.removeEventListener("change",this._onChange),this.mediaQueryList=null}_onChange(e){this.onDevicePixelRatioChanged(),this.createMediaQueryList()}destroy(){this.removeMediaQueryList()}}class Oi{constructor(e){C(this,"canvas");C(this,"_size_observer");C(this,"_devicePixelRatioObserver");C(this,"drawAnimationRequest",null);this.container=e,getComputedStyle(e).position!="absolute"&&(e.style.position="relative"),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.container.appendChild(this.canvas),this.setCanvasSize=this.setCanvasSize.bind(this),this._size_observer=new ResizeObserver(this.setCanvasSize),this._size_observer.observe(e),this._devicePixelRatioObserver=new Vi(this.setCanvasSize),window.requestAnimationFrame(()=>{this.setCanvasSize()})}destroy(){this._size_observer.disconnect(),this._devicePixelRatioObserver.destroy(),this.canvas.remove(),this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null)}setNeedsRedraw(){this.drawAnimationRequest===null&&(this.drawAnimationRequest=window.requestAnimationFrame(()=>{this.drawAnimationRequest=null,this.canvasViewRedraw()}))}redrawIfNeeded(){this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null,this.canvasViewRedraw())}canvasViewRedraw(){const e=this.canvas.getContext("2d");e&&(e.resetTransform(),e.scale(window.devicePixelRatio,window.devicePixelRatio),this.redraw(e,{width:this.canvas.width/window.devicePixelRatio,height:this.canvas.height/window.devicePixelRatio}))}get width(){return this.canvas.width/window.devicePixelRatio}get height(){return this.canvas.height/window.devicePixelRatio}setCanvasSize(){const e=window.devicePixelRatio;this.canvas.height=this.container.clientHeight*e,this.canvas.width=this.container.clientWidth*e,this.canvasViewRedraw()}}const Di="#212325",Hi=18,Li=17,Bi=["#47A298","#9FC175","#C1A731","#C07210","#B84210","#B53134","#9A3586","#4958B5","#3475BA","#318DBC","#47A298"].map(Ti);class Ni extends Oi{constructor(t){super(t);C(this,"zoom",1);C(this,"startT",0);C(this,"frames",[]);C(this,"isZoomedIn",!1);C(this,"lastDrawWidth",0);C(this,"lastDrawHeight",0);C(this,"mouseLocation",null);C(this,"_libraryOrder",null);C(this,"_colors",[]);this.onWheel=this.onWheel.bind(this),this.canvas.addEventListener("wheel",this.onWheel)}destroy(){super.destroy(),this.canvas.removeEventListener("wheel",this.onWheel)}setRootFrame(t){this.frames=[],this._collectFrames(t,0),this.fitContents()}_collectFrames(t,n){this.frames.push({frame:t,depth:n});for(const s of t.children)s.identifier!==$e&&this._collectFrames(s,n+1)}get frameMaxT(){return this.frames.reduce((t,n)=>Math.max(t,n.frame.startTime+n.frame.time),0)}get minZoom(){return this.width/this.frameMaxT}fitContents(){this.startT=0,this.zoom=this.minZoom,this.isZoomedIn=!1}clampViewport(){this.zoom<this.minZoom?(this.zoom=this.minZoom,this.isZoomedIn=!1):this.isZoomedIn=!0,this.startT<0&&(this.startT=0);const t=this.frameMaxT-this.width/this.zoom;this.startT>t&&(this.startT=t)}redraw(t,n){const{width:s,height:r}=n;(s!==this.lastDrawWidth||r!==this.lastDrawHeight)&&(this.isZoomedIn?this.clampViewport():this.fitContents()),this.lastDrawWidth=s,this.lastDrawHeight=r,t.fillStyle=Di,t.fillRect(0,0,s,r);for(const l of this.frames)this.drawFrame(t,l);t.globalAlpha=1,t.fillStyle="red",t.fillText(`startT: ${this.startT}`,10,10),t.fillText(`zoom: ${this.zoom}`,10,20)}drawFrame(t,n){const s=n.depth*Hi,r=Li;let l=this.xForT(n.frame.startTime);const o=this.xForT(n.frame.startTime+n.frame.time);let a=o-l;if(!(o<0||l>this.width)){if(a<1&&(a=1),a>2&&(a-=1),t.fillStyle=this.colorForFrame(n),t.globalAlpha=n.frame.isApplicationCode?1:.5,a<2){t.fillRect(l,s,a,r);return}if(t.save(),t.beginPath(),t.rect(l,s,a,r),t.fill(),t.clip(),a>2){t.font='13px "Source Sans Pro", sans-serif',t.fillStyle="white";let f;n.frame.className?f=`${n.frame.className}.${n.frame.function}`:n.frame.function=="<module>"?f=n.frame.filePathShort??n.frame.filePath??"":f=n.frame.function,l<0&&(l=0),t.fillText(f,l+2,s+13)}t.restore()}}xForT(t){return(t-this.startT)*this.zoom}onWheel(t){if(t.ctrlKey||t.metaKey){const n=this.startT+t.offsetX/this.zoom;this.zoom*=1-t.deltaY/100,this.startT=n-t.offsetX/this.zoom,this.clampViewport(),this.setNeedsRedraw(),t.preventDefault();return}this.startT+=t.deltaX/this.zoom,this.clampViewport(),this.setNeedsRedraw(),t.preventDefault()}onMouseMove(t){this.mouseLocation={x:t.offsetX,y:t.offsetY},this.setNeedsRedraw()}onMouseLeave(t){this.mouseLocation=null,this.setNeedsRedraw()}_assignLibraryOrder(){const t={};for(const s of this.frames){const l=s.frame.library??"";t[l]=(t[l]||0)+1}const n=Object.keys(t);n.sort((s,r)=>t[r]-t[s]),this._libraryOrder=n}colorForLibraryIndex(t){if(this._colors[t]!==void 0)return this._colors[t];const n=Math.pow(2,Math.ceil(Math.log2(t+1))),r=(2*t-n+1)/n,l=Fi(Bi,r);return this._colors[t]=l,l}colorForFrame(t){var r;this._libraryOrder||this._assignLibraryOrder();let n=((r=this._libraryOrder)==null?void 0:r.indexOf(t.frame.library||""))??0;return n===-1&&(n=0),this.colorForLibraryIndex(n)}}function qi(i){let e;return{c(){e=v("div"),e.innerHTML="",c(e,"class","timeline svelte-lmsdxq")},m(t,n){B(t,e,n),i[7](e)},p:T,i:T,o:T,d(t){t&&L(e),i[7](null)}}}function zi(i,e,t){let{session:n}=e;const s=[Ne,qe,rt];let r,l={},o={};for(const p of Q){l[p.name]=s.includes(p.function);for(const m of p.optionsSpec)o[m.name]=m.value.default}let a,f=null,d=null;function h(p){je[p?"unshift":"push"](()=>{f=p,t(0,f)})}return i.$$set=p=>{"session"in p&&t(1,n=p.session)},i.$$.update=()=>{i.$$.dirty&8&&t(2,r=s.map(p=>Q.find(m=>m.function==p)).filter(p=>l[p.name])),i.$$.dirty&22&&t(5,a=At(n.rootFrame.cloneDeep(),r,o)),i.$$.dirty&1&&f&&t(6,d=new Ni(f)),i.$$.dirty&96&&a&&d&&d.setRootFrame(a)},[f,n,r,l,o,a,d,h]}class Wi extends se{constructor(e){super(),ne(this,e,zi,qi,Y,{session:1})}}function Ui(i){let e,t,n,s;return e=new Ii({props:{session:i[0]}}),n=new Wi({props:{session:i[0]}}),{c(){ie(e.$$.fragment),t=y(),ie(n.$$.fragment)},m(r,l){X(e,r,l),B(r,t,l),X(n,r,l),s=!0},p(r,l){const o={};l&1&&(o.session=r[0]),e.$set(o);const a={};l&1&&(a.session=r[0]),n.$set(a)},i(r){s||(P(e.$$.fragment,r),P(n.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),S(n.$$.fragment,r),s=!1},d(r){r&&L(t),J(e,r),J(n,r)}}}function ji(i){let e;return{c(){e=v("div"),e.textContent="No samples recorded.",c(e,"class","error")},m(t,n){B(t,e,n)},p:T,i:T,o:T,d(t){t&&L(e)}}}function Gi(i){let e,t,n,s,r,l,o,a,f;t=new hi({props:{session:i[0]}});const d=[ji,Ui],h=[];function p(m,w){return m[0].rootFrame?1:0}return o=p(i),a=h[o]=d[o](i),{c(){e=v("div"),ie(t.$$.fragment),n=y(),s=v("div"),r=y(),l=v("div"),a.c(),c(s,"class","spacer"),G(s,"height","20px"),c(l,"class","margins"),c(e,"class","app svelte-1qrzcke")},m(m,w){B(m,e,w),X(t,e,null),u(e,n),u(e,s),u(e,r),u(e,l),h[o].m(l,null),f=!0},p(m,[w]){const g={};w&1&&(g.session=m[0]),t.$set(g);let b=o;o=p(m),o===b?h[o].p(m,w):(Ce(),S(h[b],1,1,()=>{h[b]=null}),Ae(),a=h[o],a?a.p(m,w):(a=h[o]=d[o](m),a.c()),P(a,1),a.m(l,null))},i(m){f||(P(t.$$.fragment,m),P(a),f=!0)},o(m){S(t.$$.fragment,m),S(a),f=!1},d(m){m&&L(e),J(t),h[o].d()}}}function ot(){document.body.style.minHeight=`${window.scrollY+window.innerHeight}px`}function xi(i,e,t){let{session:n}=e;const s=document.createElement("link");s.rel="shortut icon",s.href=pi,document.head.appendChild(s);const r=document.createElement("link");r.rel="preload",r.as="style",r.onload=()=>{r.rel="stylesheet"},r.href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600|Source+Sans+Pro:400,600&display=swap",document.head.appendChild(r),Bt(()=>{window.addEventListener("scroll",ot),ot()}),Nt(()=>{window.removeEventListener("scroll",ot)});const l=n.rootFrame,o=l==null?void 0:l.time.toLocaleString(void 0,{maximumSignificantDigits:3});n.target_description="Block at /Users/joerick/Projects/pyinstrument/pyinstrument/console.py:80";let a,f;return(f=/[^\s/]+(:\d+)?$/.exec(n.target_description))?a=f[0]:a=n.target_description,document.title=`${o}s - ${a} - pyinstrument`,i.$$set=d=>{"session"in d&&t(0,n=d.session)},[n]}class Qi extends se{constructor(e){super(),ne(this,e,xi,Gi,Y,{session:0})}}class Ki{constructor(e){C(this,"startTime");C(this,"duration");C(this,"sampleCount");C(this,"target_description");C(this,"cpuTime");C(this,"rootFrame");C(this,"sysPath");C(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.target_description=e.session.target_description,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.rootFrame=new Ie(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let t=e;if(Ee(e).length>1)for(const s of this.sysPath){const r=Zi(e,s);Ee(r).length<Ee(t).length&&(t=r)}return this._shortenPathCache[e]=t,t}}function Ee(i){return i.split(/[/\\]/)}function Rt(i){const e=Ee(i);return e.length>0&&e[0].endsWith(":")?e[0]:null}function Zi(i,e){if(Rt(i)!=Rt(e))return i;const t=Ee(i),n=Ee(e);let s=0;for(;s<t.length&&s<n.length&&t[s]==n[s];)s++;return n.slice(s).map(l=>"..").concat(t.slice(s)).join("/")}return{render(i,e){const t=new Ki(e);return new Qi({target:i,props:{session:t}})}}}();
